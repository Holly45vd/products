(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Aw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var i0={exports:{}},Kc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ww=Symbol.for("react.transitional.element"),Rw=Symbol.for("react.fragment");function r0(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var r in e)r!=="key"&&(n[r]=e[r])}else n=e;return e=n.ref,{$$typeof:ww,type:t,key:i,ref:e!==void 0?e:null,props:n}}Kc.Fragment=Rw;Kc.jsx=r0;Kc.jsxs=r0;i0.exports=Kc;var g=i0.exports,s0={exports:{}},ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Om=Symbol.for("react.transitional.element"),Cw=Symbol.for("react.portal"),Iw=Symbol.for("react.fragment"),xw=Symbol.for("react.strict_mode"),Dw=Symbol.for("react.profiler"),Nw=Symbol.for("react.consumer"),Ow=Symbol.for("react.context"),Mw=Symbol.for("react.forward_ref"),Vw=Symbol.for("react.suspense"),kw=Symbol.for("react.memo"),a0=Symbol.for("react.lazy"),Lw=Symbol.for("react.activity"),Py=Symbol.iterator;function Pw(t){return t===null||typeof t!="object"?null:(t=Py&&t[Py]||t["@@iterator"],typeof t=="function"?t:null)}var o0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},l0=Object.assign,u0={};function ua(t,e,n){this.props=t,this.context=e,this.refs=u0,this.updater=n||o0}ua.prototype.isReactComponent={};ua.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ua.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function c0(){}c0.prototype=ua.prototype;function Mm(t,e,n){this.props=t,this.context=e,this.refs=u0,this.updater=n||o0}var Vm=Mm.prototype=new c0;Vm.constructor=Mm;l0(Vm,ua.prototype);Vm.isPureReactComponent=!0;var Uy=Array.isArray;function sd(){}var Ne={H:null,A:null,T:null,S:null},h0=Object.prototype.hasOwnProperty;function km(t,e,n){var i=n.ref;return{$$typeof:Om,type:t,key:e,ref:i!==void 0?i:null,props:n}}function Uw(t,e){return km(t.type,e,t.props)}function Lm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Om}function jw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var jy=/\/+/g;function af(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jw(""+t.key):e.toString(36)}function zw(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(sd,sd):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function fs(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Om:case Cw:a=!0;break;case a0:return a=t._init,fs(a(t._payload),e,n,i,r)}}if(a)return r=r(t),a=i===""?"."+af(t,0):i,Uy(r)?(n="",a!=null&&(n=a.replace(jy,"$&/")+"/"),fs(r,e,n,"",function(c){return c})):r!=null&&(Lm(r)&&(r=Uw(r,n+(r.key==null||t&&t.key===r.key?"":(""+r.key).replace(jy,"$&/")+"/")+a)),e.push(r)),1;a=0;var l=i===""?".":i+":";if(Uy(t))for(var u=0;u<t.length;u++)i=t[u],s=l+af(i,u),a+=fs(i,e,n,s,r);else if(u=Pw(t),typeof u=="function")for(t=u.call(t),u=0;!(i=t.next()).done;)i=i.value,s=l+af(i,u++),a+=fs(i,e,n,s,r);else if(s==="object"){if(typeof t.then=="function")return fs(zw(t),e,n,i,r);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function Wl(t,e,n){if(t==null)return t;var i=[],r=0;return fs(t,i,"","",function(s){return e.call(n,s,r++)}),i}function Bw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var zy=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},qw={map:Wl,forEach:function(t,e,n){Wl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Wl(t,function(){e++}),e},toArray:function(t){return Wl(t,function(e){return e})||[]},only:function(t){if(!Lm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Activity=Lw;ie.Children=qw;ie.Component=ua;ie.Fragment=Iw;ie.Profiler=Dw;ie.PureComponent=Mm;ie.StrictMode=xw;ie.Suspense=Vw;ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ne;ie.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Ne.H.useMemoCache(t)}};ie.cache=function(t){return function(){return t.apply(null,arguments)}};ie.cacheSignal=function(){return null};ie.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=l0({},t.props),r=t.key;if(e!=null)for(s in e.key!==void 0&&(r=""+e.key),e)!h0.call(e,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&e.ref===void 0||(i[s]=e[s]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+2];i.children=a}return km(t.type,r,i)};ie.createContext=function(t){return t={$$typeof:Ow,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:Nw,_context:t},t};ie.createElement=function(t,e,n){var i,r={},s=null;if(e!=null)for(i in e.key!==void 0&&(s=""+e.key),e)h0.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return km(t,s,r)};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:Mw,render:t}};ie.isValidElement=Lm;ie.lazy=function(t){return{$$typeof:a0,_payload:{_status:-1,_result:t},_init:Bw}};ie.memo=function(t,e){return{$$typeof:kw,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=Ne.T,n={};Ne.T=n;try{var i=t(),r=Ne.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(sd,zy)}catch(s){zy(s)}finally{e!==null&&n.types!==null&&(e.types=n.types),Ne.T=e}};ie.unstable_useCacheRefresh=function(){return Ne.H.useCacheRefresh()};ie.use=function(t){return Ne.H.use(t)};ie.useActionState=function(t,e,n){return Ne.H.useActionState(t,e,n)};ie.useCallback=function(t,e){return Ne.H.useCallback(t,e)};ie.useContext=function(t){return Ne.H.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t,e){return Ne.H.useDeferredValue(t,e)};ie.useEffect=function(t,e){return Ne.H.useEffect(t,e)};ie.useEffectEvent=function(t){return Ne.H.useEffectEvent(t)};ie.useId=function(){return Ne.H.useId()};ie.useImperativeHandle=function(t,e,n){return Ne.H.useImperativeHandle(t,e,n)};ie.useInsertionEffect=function(t,e){return Ne.H.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return Ne.H.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return Ne.H.useMemo(t,e)};ie.useOptimistic=function(t,e){return Ne.H.useOptimistic(t,e)};ie.useReducer=function(t,e,n){return Ne.H.useReducer(t,e,n)};ie.useRef=function(t){return Ne.H.useRef(t)};ie.useState=function(t){return Ne.H.useState(t)};ie.useSyncExternalStore=function(t,e,n){return Ne.H.useSyncExternalStore(t,e,n)};ie.useTransition=function(){return Ne.H.useTransition()};ie.version="19.2.0";s0.exports=ie;var D=s0.exports;const Hw=Aw(D);var f0={exports:{}},$c={},d0={exports:{}},m0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,L){var q=H.length;H.push(L);e:for(;0<q;){var F=q-1>>>1,W=H[F];if(0<r(W,L))H[F]=L,H[q]=W,q=F;else break e}}function n(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var L=H[0],q=H.pop();if(q!==L){H[0]=q;e:for(var F=0,W=H.length,de=W>>>1;F<de;){var ke=2*(F+1)-1,ut=H[ke],le=ke+1,Le=H[le];if(0>r(ut,q))le<W&&0>r(Le,ut)?(H[F]=Le,H[le]=q,F=le):(H[F]=ut,H[ke]=q,F=ke);else if(le<W&&0>r(Le,q))H[F]=Le,H[le]=q,F=le;else break e}}return L}function r(H,L){var q=H.sortIndex-L.sortIndex;return q!==0?q:H.id-L.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],f=1,d=null,m=3,v=!1,x=!1,M=!1,O=!1,A=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function N(H){for(var L=n(c);L!==null;){if(L.callback===null)i(c);else if(L.startTime<=H)i(c),L.sortIndex=L.expirationTime,e(u,L);else break;L=n(c)}}function P(H){if(M=!1,N(H),!x)if(n(u)!==null)x=!0,G||(G=!0,R());else{var L=n(c);L!==null&&$(P,L.startTime-H)}}var G=!1,y=-1,_=5,S=-1;function w(){return O?!0:!(t.unstable_now()-S<_)}function C(){if(O=!1,G){var H=t.unstable_now();S=H;var L=!0;try{e:{x=!1,M&&(M=!1,T(y),y=-1),v=!0;var q=m;try{t:{for(N(H),d=n(u);d!==null&&!(d.expirationTime>H&&w());){var F=d.callback;if(typeof F=="function"){d.callback=null,m=d.priorityLevel;var W=F(d.expirationTime<=H);if(H=t.unstable_now(),typeof W=="function"){d.callback=W,N(H),L=!0;break t}d===n(u)&&i(u),N(H)}else i(u);d=n(u)}if(d!==null)L=!0;else{var de=n(c);de!==null&&$(P,de.startTime-H),L=!1}}break e}finally{d=null,m=q,v=!1}L=void 0}}finally{L?R():G=!1}}}var R;if(typeof E=="function")R=function(){E(C)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,j=I.port2;I.port1.onmessage=C,R=function(){j.postMessage(null)}}else R=function(){A(C,0)};function $(H,L){y=A(function(){H(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(H){switch(m){case 1:case 2:case 3:var L=3;break;default:L=m}var q=m;m=L;try{return H()}finally{m=q}},t.unstable_requestPaint=function(){O=!0},t.unstable_runWithPriority=function(H,L){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var q=m;m=H;try{return L()}finally{m=q}},t.unstable_scheduleCallback=function(H,L,q){var F=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?F+q:F):q=F,H){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=q+W,H={id:f++,callback:L,priorityLevel:H,startTime:q,expirationTime:W,sortIndex:-1},q>F?(H.sortIndex=q,e(c,H),n(u)===null&&H===n(c)&&(M?(T(y),y=-1):M=!0,$(P,q-F))):(H.sortIndex=W,e(u,H),x||v||(x=!0,G||(G=!0,R()))),H},t.unstable_shouldYield=w,t.unstable_wrapCallback=function(H){var L=m;return function(){var q=m;m=L;try{return H.apply(this,arguments)}finally{m=q}}}})(m0);d0.exports=m0;var Fw=d0.exports,p0={exports:{}},Dt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gw=D;function g0(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function wi(){}var Ct={d:{f:wi,r:function(){throw Error(g0(522))},D:wi,C:wi,L:wi,m:wi,X:wi,S:wi,M:wi},p:0,findDOMNode:null},Qw=Symbol.for("react.portal");function Kw(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qw,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var _o=Gw.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Yc(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Dt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ct;Dt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(g0(299));return Kw(t,e,null,n)};Dt.flushSync=function(t){var e=_o.T,n=Ct.p;try{if(_o.T=null,Ct.p=2,t)return t()}finally{_o.T=e,Ct.p=n,Ct.d.f()}};Dt.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,Ct.d.C(t,e))};Dt.prefetchDNS=function(t){typeof t=="string"&&Ct.d.D(t)};Dt.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=Yc(n,e.crossOrigin),r=typeof e.integrity=="string"?e.integrity:void 0,s=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?Ct.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&Ct.d.X(t,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Dt.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Yc(e.as,e.crossOrigin);Ct.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&Ct.d.M(t)};Dt.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=Yc(n,e.crossOrigin);Ct.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Dt.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Yc(e.as,e.crossOrigin);Ct.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else Ct.d.m(t)};Dt.requestFormReset=function(t){Ct.d.r(t)};Dt.unstable_batchedUpdates=function(t,e){return t(e)};Dt.useFormState=function(t,e,n){return _o.H.useFormState(t,e,n)};Dt.useFormStatus=function(){return _o.H.useHostTransitionStatus()};Dt.version="19.2.0";function y0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(y0)}catch(t){console.error(t)}}y0(),p0.exports=Dt;var $w=p0.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var it=Fw,_0=D,Yw=$w;function z(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function v0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function cl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function E0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function T0(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function By(t){if(cl(t)!==t)throw Error(z(188))}function Xw(t){var e=t.alternate;if(!e){if(e=cl(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return By(r),t;if(s===i)return By(r),e;s=s.sibling}throw Error(z(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a)throw Error(z(189))}}if(n.alternate!==i)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function b0(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=b0(t),e!==null)return e;t=t.sibling}return null}var Oe=Object.assign,Ww=Symbol.for("react.element"),Jl=Symbol.for("react.transitional.element"),ao=Symbol.for("react.portal"),vs=Symbol.for("react.fragment"),S0=Symbol.for("react.strict_mode"),ad=Symbol.for("react.profiler"),A0=Symbol.for("react.consumer"),Kn=Symbol.for("react.context"),Pm=Symbol.for("react.forward_ref"),od=Symbol.for("react.suspense"),ld=Symbol.for("react.suspense_list"),Um=Symbol.for("react.memo"),Ci=Symbol.for("react.lazy"),ud=Symbol.for("react.activity"),Jw=Symbol.for("react.memo_cache_sentinel"),qy=Symbol.iterator;function Xa(t){return t===null||typeof t!="object"?null:(t=qy&&t[qy]||t["@@iterator"],typeof t=="function"?t:null)}var Zw=Symbol.for("react.client.reference");function cd(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Zw?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vs:return"Fragment";case ad:return"Profiler";case S0:return"StrictMode";case od:return"Suspense";case ld:return"SuspenseList";case ud:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case ao:return"Portal";case Kn:return t.displayName||"Context";case A0:return(t._context.displayName||"Context")+".Consumer";case Pm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Um:return e=t.displayName||null,e!==null?e:cd(t.type)||"Memo";case Ci:e=t._payload,t=t._init;try{return cd(t(e))}catch{}}return null}var oo=Array.isArray,ee=_0.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye=Yw.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Vr={pending:!1,data:null,method:null,action:null},hd=[],Es=-1;function Ln(t){return{current:t}}function lt(t){0>Es||(t.current=hd[Es],hd[Es]=null,Es--)}function Re(t,e){Es++,hd[Es]=t.current,t.current=e}var Cn=Ln(null),zo=Ln(null),Hi=Ln(null),Xu=Ln(null);function Wu(t,e){switch(Re(Hi,e),Re(zo,t),Re(Cn,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?$_(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=$_(e),t=Fb(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}lt(Cn),Re(Cn,t)}function Hs(){lt(Cn),lt(zo),lt(Hi)}function fd(t){t.memoizedState!==null&&Re(Xu,t);var e=Cn.current,n=Fb(e,t.type);e!==n&&(Re(zo,t),Re(Cn,n))}function Ju(t){zo.current===t&&(lt(Cn),lt(zo)),Xu.current===t&&(lt(Xu),Wo._currentValue=Vr)}var of,Hy;function Ir(t){if(of===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);of=e&&e[1]||"",Hy=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+of+t+Hy}var lf=!1;function uf(t,e){if(!t||lf)return"";lf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(v){var m=v}Reflect.construct(t,[],d)}else{try{d.call()}catch(v){m=v}t.call(d.prototype)}}else{try{throw Error()}catch(v){m=v}(d=t())&&typeof d.catch=="function"&&d.catch(function(){})}}catch(v){if(v&&m&&typeof v.stack=="string")return[v.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],l=s[1];if(a&&l){var u=a.split(`
`),c=l.split(`
`);for(r=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(i===u.length||r===c.length)for(i=u.length-1,r=c.length-1;1<=i&&0<=r&&u[i]!==c[r];)r--;for(;1<=i&&0<=r;i--,r--)if(u[i]!==c[r]){if(i!==1||r!==1)do if(i--,r--,0>r||u[i]!==c[r]){var f=`
`+u[i].replace(" at new "," at ");return t.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",t.displayName)),f}while(1<=i&&0<=r);break}}}finally{lf=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Ir(n):""}function eR(t,e){switch(t.tag){case 26:case 27:case 5:return Ir(t.type);case 16:return Ir("Lazy");case 13:return t.child!==e&&e!==null?Ir("Suspense Fallback"):Ir("Suspense");case 19:return Ir("SuspenseList");case 0:case 15:return uf(t.type,!1);case 11:return uf(t.type.render,!1);case 1:return uf(t.type,!0);case 31:return Ir("Activity");default:return""}}function Fy(t){try{var e="",n=null;do e+=eR(t,n),n=t,t=t.return;while(t);return e}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var dd=Object.prototype.hasOwnProperty,jm=it.unstable_scheduleCallback,cf=it.unstable_cancelCallback,tR=it.unstable_shouldYield,nR=it.unstable_requestPaint,Qt=it.unstable_now,iR=it.unstable_getCurrentPriorityLevel,w0=it.unstable_ImmediatePriority,R0=it.unstable_UserBlockingPriority,Zu=it.unstable_NormalPriority,rR=it.unstable_LowPriority,C0=it.unstable_IdlePriority,sR=it.log,aR=it.unstable_setDisableYieldValue,hl=null,Kt=null;function Pi(t){if(typeof sR=="function"&&aR(t),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(hl,t)}catch{}}var $t=Math.clz32?Math.clz32:uR,oR=Math.log,lR=Math.LN2;function uR(t){return t>>>=0,t===0?32:31-(oR(t)/lR|0)|0}var Zl=256,eu=262144,tu=4194304;function xr(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Xc(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var l=i&134217727;return l!==0?(i=l&~s,i!==0?r=xr(i):(a&=l,a!==0?r=xr(a):n||(n=l&~t,n!==0&&(r=xr(n))))):(l=i&~s,l!==0?r=xr(l):a!==0?r=xr(a):n||(n=i&~t,n!==0&&(r=xr(n)))),r===0?0:e!==0&&e!==r&&!(e&s)&&(s=r&-r,n=e&-e,s>=n||s===32&&(n&4194048)!==0)?e:r}function fl(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function cR(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function I0(){var t=tu;return tu<<=1,!(tu&62914560)&&(tu=4194304),t}function hf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function dl(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function hR(t,e,n,i,r,s){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var l=t.entanglements,u=t.expirationTimes,c=t.hiddenUpdates;for(n=a&~n;0<n;){var f=31-$t(n),d=1<<f;l[f]=0,u[f]=-1;var m=c[f];if(m!==null)for(c[f]=null,f=0;f<m.length;f++){var v=m[f];v!==null&&(v.lane&=-536870913)}n&=~d}i!==0&&x0(t,i,0),s!==0&&r===0&&t.tag!==0&&(t.suspendedLanes|=s&~(a&~e))}function x0(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-$t(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&261930}function D0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-$t(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}function N0(t,e){var n=e&-e;return n=n&42?1:zm(n),n&(t.suspendedLanes|e)?0:n}function zm(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Bm(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function O0(){var t=ye.p;return t!==0?t:(t=window.event,t===void 0?32:t1(t.type))}function Gy(t,e){var n=ye.p;try{return ye.p=t,e()}finally{ye.p=n}}var dr=Math.random().toString(36).slice(2),ft="__reactFiber$"+dr,Ut="__reactProps$"+dr,ca="__reactContainer$"+dr,md="__reactEvents$"+dr,fR="__reactListeners$"+dr,dR="__reactHandles$"+dr,Qy="__reactResources$"+dr,ml="__reactMarker$"+dr;function qm(t){delete t[ft],delete t[Ut],delete t[md],delete t[fR],delete t[dR]}function Ts(t){var e=t[ft];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ca]||n[ft]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Z_(t);t!==null;){if(n=t[ft])return n;t=Z_(t)}return e}t=n,n=t.parentNode}return null}function ha(t){if(t=t[ft]||t[ca]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function lo(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(z(33))}function Os(t){var e=t[Qy];return e||(e=t[Qy]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function ot(t){t[ml]=!0}var M0=new Set,V0={};function Jr(t,e){Fs(t,e),Fs(t+"Capture",e)}function Fs(t,e){for(V0[t]=e,t=0;t<e.length;t++)M0.add(e[t])}var mR=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ky={},$y={};function pR(t){return dd.call($y,t)?!0:dd.call(Ky,t)?!1:mR.test(t)?$y[t]=!0:(Ky[t]=!0,!1)}function Su(t,e,n){if(pR(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function nu(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Un(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}function Zt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function k0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function gR(t,e,n){var i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,s=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function pd(t){if(!t._valueTracker){var e=k0(t)?"checked":"value";t._valueTracker=gR(t,e,""+t[e])}}function L0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=k0(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function ec(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var yR=/[\n"\\]/g;function nn(t){return t.replace(yR,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gd(t,e,n,i,r,s,a,l){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Zt(e)):t.value!==""+Zt(e)&&(t.value=""+Zt(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?yd(t,a,Zt(e)):n!=null?yd(t,a,Zt(n)):i!=null&&t.removeAttribute("value"),r==null&&s!=null&&(t.defaultChecked=!!s),r!=null&&(t.checked=r&&typeof r!="function"&&typeof r!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.name=""+Zt(l):t.removeAttribute("name")}function P0(t,e,n,i,r,s,a,l){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.type=s),e!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||e!=null)){pd(t);return}n=n!=null?""+Zt(n):"",e=e!=null?""+Zt(e):n,l||e===t.value||(t.value=e),t.defaultValue=e}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=l?t.checked:!!i,t.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a),pd(t)}function yd(t,e,n){e==="number"&&ec(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Ms(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Zt(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function U0(t,e,n){if(e!=null&&(e=""+Zt(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Zt(n):""}function j0(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(z(92));if(oo(i)){if(1<i.length)throw Error(z(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=Zt(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i),pd(t)}function Gs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var _R=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yy(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||_R.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function z0(t,e,n){if(e!=null&&typeof e!="object")throw Error(z(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var r in e)i=e[r],e.hasOwnProperty(r)&&n[r]!==i&&Yy(t,r,i)}else for(var s in e)e.hasOwnProperty(s)&&Yy(t,s,e[s])}function Hm(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vR=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ER=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Au(t){return ER.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function $n(){}var _d=null;function Fm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var bs=null,Vs=null;function Xy(t){var e=ha(t);if(e&&(t=e.stateNode)){var n=t[Ut]||null;e:switch(t=e.stateNode,e.type){case"input":if(gd(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+nn(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=i[Ut]||null;if(!r)throw Error(z(90));gd(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&L0(i)}break e;case"textarea":U0(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Ms(t,!!n.multiple,e,!1)}}}var ff=!1;function B0(t,e,n){if(ff)return t(e,n);ff=!0;try{var i=t(e);return i}finally{if(ff=!1,(bs!==null||Vs!==null)&&(lh(),bs&&(e=bs,t=Vs,Vs=bs=null,Xy(e),t)))for(e=0;e<t.length;e++)Xy(t[e])}}function Bo(t,e){var n=t.stateNode;if(n===null)return null;var i=n[Ut]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vd=!1;if(ri)try{var Wa={};Object.defineProperty(Wa,"passive",{get:function(){vd=!0}}),window.addEventListener("test",Wa,Wa),window.removeEventListener("test",Wa,Wa)}catch{vd=!1}var Ui=null,Gm=null,wu=null;function q0(){if(wu)return wu;var t,e=Gm,n=e.length,i,r="value"in Ui?Ui.value:Ui.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[s-i];i++);return wu=r.slice(t,1<i?1-i:void 0)}function Ru(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function iu(){return!0}function Wy(){return!1}function jt(t){function e(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?iu:Wy,this.isPropagationStopped=Wy,this}return Oe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=iu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=iu)},persist:function(){},isPersistent:iu}),e}var Zr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wc=jt(Zr),pl=Oe({},Zr,{view:0,detail:0}),TR=jt(pl),df,mf,Ja,Jc=Oe({},pl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ja&&(Ja&&t.type==="mousemove"?(df=t.screenX-Ja.screenX,mf=t.screenY-Ja.screenY):mf=df=0,Ja=t),df)},movementY:function(t){return"movementY"in t?t.movementY:mf}}),Jy=jt(Jc),bR=Oe({},Jc,{dataTransfer:0}),SR=jt(bR),AR=Oe({},pl,{relatedTarget:0}),pf=jt(AR),wR=Oe({},Zr,{animationName:0,elapsedTime:0,pseudoElement:0}),RR=jt(wR),CR=Oe({},Zr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),IR=jt(CR),xR=Oe({},Zr,{data:0}),Zy=jt(xR),DR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},NR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},OR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function MR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=OR[t])?!!e[t]:!1}function Qm(){return MR}var VR=Oe({},pl,{key:function(t){if(t.key){var e=DR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ru(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?NR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qm,charCode:function(t){return t.type==="keypress"?Ru(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ru(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),kR=jt(VR),LR=Oe({},Jc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),e_=jt(LR),PR=Oe({},pl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qm}),UR=jt(PR),jR=Oe({},Zr,{propertyName:0,elapsedTime:0,pseudoElement:0}),zR=jt(jR),BR=Oe({},Jc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qR=jt(BR),HR=Oe({},Zr,{newState:0,oldState:0}),FR=jt(HR),GR=[9,13,27,32],Km=ri&&"CompositionEvent"in window,vo=null;ri&&"documentMode"in document&&(vo=document.documentMode);var QR=ri&&"TextEvent"in window&&!vo,H0=ri&&(!Km||vo&&8<vo&&11>=vo),t_=" ",n_=!1;function F0(t,e){switch(t){case"keyup":return GR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function G0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ss=!1;function KR(t,e){switch(t){case"compositionend":return G0(e);case"keypress":return e.which!==32?null:(n_=!0,t_);case"textInput":return t=e.data,t===t_&&n_?null:t;default:return null}}function $R(t,e){if(Ss)return t==="compositionend"||!Km&&F0(t,e)?(t=q0(),wu=Gm=Ui=null,Ss=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return H0&&e.locale!=="ko"?null:e.data;default:return null}}var YR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function i_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!YR[t.type]:e==="textarea"}function Q0(t,e,n,i){bs?Vs?Vs.push(i):Vs=[i]:bs=i,e=_c(e,"onChange"),0<e.length&&(n=new Wc("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Eo=null,qo=null;function XR(t){Bb(t,0)}function Zc(t){var e=lo(t);if(L0(e))return t}function r_(t,e){if(t==="change")return e}var K0=!1;if(ri){var gf;if(ri){var yf="oninput"in document;if(!yf){var s_=document.createElement("div");s_.setAttribute("oninput","return;"),yf=typeof s_.oninput=="function"}gf=yf}else gf=!1;K0=gf&&(!document.documentMode||9<document.documentMode)}function a_(){Eo&&(Eo.detachEvent("onpropertychange",$0),qo=Eo=null)}function $0(t){if(t.propertyName==="value"&&Zc(qo)){var e=[];Q0(e,qo,t,Fm(t)),B0(XR,e)}}function WR(t,e,n){t==="focusin"?(a_(),Eo=e,qo=n,Eo.attachEvent("onpropertychange",$0)):t==="focusout"&&a_()}function JR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zc(qo)}function ZR(t,e){if(t==="click")return Zc(e)}function eC(t,e){if(t==="input"||t==="change")return Zc(e)}function tC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xt=typeof Object.is=="function"?Object.is:tC;function Ho(t,e){if(Xt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!dd.call(e,r)||!Xt(t[r],e[r]))return!1}return!0}function o_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function l_(t,e){var n=o_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=o_(n)}}function Y0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Y0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function X0(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=ec(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ec(t.document)}return e}function $m(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var nC=ri&&"documentMode"in document&&11>=document.documentMode,As=null,Ed=null,To=null,Td=!1;function u_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Td||As==null||As!==ec(i)||(i=As,"selectionStart"in i&&$m(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),To&&Ho(To,i)||(To=i,i=_c(Ed,"onSelect"),0<i.length&&(e=new Wc("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=As)))}function Rr(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ws={animationend:Rr("Animation","AnimationEnd"),animationiteration:Rr("Animation","AnimationIteration"),animationstart:Rr("Animation","AnimationStart"),transitionrun:Rr("Transition","TransitionRun"),transitionstart:Rr("Transition","TransitionStart"),transitioncancel:Rr("Transition","TransitionCancel"),transitionend:Rr("Transition","TransitionEnd")},_f={},W0={};ri&&(W0=document.createElement("div").style,"AnimationEvent"in window||(delete ws.animationend.animation,delete ws.animationiteration.animation,delete ws.animationstart.animation),"TransitionEvent"in window||delete ws.transitionend.transition);function es(t){if(_f[t])return _f[t];if(!ws[t])return t;var e=ws[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in W0)return _f[t]=e[n];return t}var J0=es("animationend"),Z0=es("animationiteration"),eT=es("animationstart"),iC=es("transitionrun"),rC=es("transitionstart"),sC=es("transitioncancel"),tT=es("transitionend"),nT=new Map,bd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bd.push("scrollEnd");function _n(t,e){nT.set(t,e),Jr(e,[t])}var tc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Jt=[],Rs=0,Ym=0;function eh(){for(var t=Rs,e=Ym=Rs=0;e<t;){var n=Jt[e];Jt[e++]=null;var i=Jt[e];Jt[e++]=null;var r=Jt[e];Jt[e++]=null;var s=Jt[e];if(Jt[e++]=null,i!==null&&r!==null){var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}s!==0&&iT(n,r,s)}}function th(t,e,n,i){Jt[Rs++]=t,Jt[Rs++]=e,Jt[Rs++]=n,Jt[Rs++]=i,Ym|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function Xm(t,e,n,i){return th(t,e,n,i),nc(t)}function ts(t,e){return th(t,null,null,e),nc(t)}function iT(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=t.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(t=s.stateNode,t===null||t._visibility&1||(r=!0)),t=s,s=s.return;return t.tag===3?(s=t.stateNode,r&&e!==null&&(r=31-$t(n),t=s.hiddenUpdates,i=t[r],i===null?t[r]=[e]:i.push(e),e.lane=n|536870912),s):null}function nc(t){if(50<Do)throw Do=0,Hd=null,Error(z(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Cs={};function aC(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ht(t,e,n,i){return new aC(t,e,n,i)}function Wm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Jn(t,e){var n=t.alternate;return n===null?(n=Ht(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function rT(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Cu(t,e,n,i,r,s){var a=0;if(i=t,typeof t=="function")Wm(t)&&(a=1);else if(typeof t=="string")a=hI(t,n,Cn.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case ud:return t=Ht(31,n,e,r),t.elementType=ud,t.lanes=s,t;case vs:return kr(n.children,r,s,e);case S0:a=8,r|=24;break;case ad:return t=Ht(12,n,e,r|2),t.elementType=ad,t.lanes=s,t;case od:return t=Ht(13,n,e,r),t.elementType=od,t.lanes=s,t;case ld:return t=Ht(19,n,e,r),t.elementType=ld,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Kn:a=10;break e;case A0:a=9;break e;case Pm:a=11;break e;case Um:a=14;break e;case Ci:a=16,i=null;break e}a=29,n=Error(z(130,t===null?"null":typeof t,"")),i=null}return e=Ht(a,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function kr(t,e,n,i){return t=Ht(7,t,i,e),t.lanes=n,t}function vf(t,e,n){return t=Ht(6,t,null,e),t.lanes=n,t}function sT(t){var e=Ht(18,null,null,0);return e.stateNode=t,e}function Ef(t,e,n){return e=Ht(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var c_=new WeakMap;function rn(t,e){if(typeof t=="object"&&t!==null){var n=c_.get(t);return n!==void 0?n:(e={value:t,source:e,stack:Fy(e)},c_.set(t,e),e)}return{value:t,source:e,stack:Fy(e)}}var Is=[],xs=0,ic=null,Fo=0,en=[],tn=0,ir=null,An=1,wn="";function Fn(t,e){Is[xs++]=Fo,Is[xs++]=ic,ic=t,Fo=e}function aT(t,e,n){en[tn++]=An,en[tn++]=wn,en[tn++]=ir,ir=t;var i=An;t=wn;var r=32-$t(i)-1;i&=~(1<<r),n+=1;var s=32-$t(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,An=1<<32-$t(e)+r|n<<r|i,wn=s+t}else An=1<<s|n<<r|i,wn=t}function Jm(t){t.return!==null&&(Fn(t,1),aT(t,1,0))}function Zm(t){for(;t===ic;)ic=Is[--xs],Is[xs]=null,Fo=Is[--xs],Is[xs]=null;for(;t===ir;)ir=en[--tn],en[tn]=null,wn=en[--tn],en[tn]=null,An=en[--tn],en[tn]=null}function oT(t,e){en[tn++]=An,en[tn++]=wn,en[tn++]=ir,An=e.id,wn=e.overflow,ir=t}var dt=null,xe=null,me=!1,Fi=null,sn=!1,Sd=Error(z(519));function rr(t){var e=Error(z(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Go(rn(e,t)),Sd}function h_(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[ft]=t,e[Ut]=i,n){case"dialog":ae("cancel",e),ae("close",e);break;case"iframe":case"object":case"embed":ae("load",e);break;case"video":case"audio":for(n=0;n<Yo.length;n++)ae(Yo[n],e);break;case"source":ae("error",e);break;case"img":case"image":case"link":ae("error",e),ae("load",e);break;case"details":ae("toggle",e);break;case"input":ae("invalid",e),P0(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":ae("invalid",e);break;case"textarea":ae("invalid",e),j0(e,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||Hb(e.textContent,n)?(i.popover!=null&&(ae("beforetoggle",e),ae("toggle",e)),i.onScroll!=null&&ae("scroll",e),i.onScrollEnd!=null&&ae("scrollend",e),i.onClick!=null&&(e.onclick=$n),e=!0):e=!1,e||rr(t,!0)}function f_(t){for(dt=t.return;dt;)switch(dt.tag){case 5:case 31:case 13:sn=!1;return;case 27:case 3:sn=!0;return;default:dt=dt.return}}function cs(t){if(t!==dt)return!1;if(!me)return f_(t),me=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||$d(t.type,t.memoizedProps)),n=!n),n&&xe&&rr(t),f_(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));xe=J_(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));xe=J_(t)}else e===27?(e=xe,mr(t.type)?(t=Jd,Jd=null,xe=t):xe=e):xe=dt?un(t.stateNode.nextSibling):null;return!0}function qr(){xe=dt=null,me=!1}function Tf(){var t=Fi;return t!==null&&(Vt===null?Vt=t:Vt.push.apply(Vt,t),Fi=null),t}function Go(t){Fi===null?Fi=[t]:Fi.push(t)}var Ad=Ln(null),ns=null,Yn=null;function xi(t,e,n){Re(Ad,e._currentValue),e._currentValue=n}function Zn(t){t._currentValue=Ad.current,lt(Ad)}function wd(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Rd(t,e,n,i){var r=t.child;for(r!==null&&(r.return=t);r!==null;){var s=r.dependencies;if(s!==null){var a=r.child;s=s.firstContext;e:for(;s!==null;){var l=s;s=r;for(var u=0;u<e.length;u++)if(l.context===e[u]){s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),wd(s.return,n,t),i||(a=null);break e}s=l.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(z(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),wd(a,n,t),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===t){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function fa(t,e,n,i){t=null;for(var r=e,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(z(387));if(a=a.memoizedProps,a!==null){var l=r.type;Xt(r.pendingProps.value,a.value)||(t!==null?t.push(l):t=[l])}}else if(r===Xu.current){if(a=r.alternate,a===null)throw Error(z(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(t!==null?t.push(Wo):t=[Wo])}r=r.return}t!==null&&Rd(e,t,n,i),e.flags|=262144}function rc(t){for(t=t.firstContext;t!==null;){if(!Xt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Hr(t){ns=t,Yn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function pt(t){return lT(ns,t)}function ru(t,e){return ns===null&&Hr(t),lT(t,e)}function lT(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Yn===null){if(t===null)throw Error(z(308));Yn=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Yn=Yn.next=e;return n}var oC=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},lC=it.unstable_scheduleCallback,uC=it.unstable_NormalPriority,Xe={$$typeof:Kn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ep(){return{controller:new oC,data:new Map,refCount:0}}function gl(t){t.refCount--,t.refCount===0&&lC(uC,function(){t.controller.abort()})}var bo=null,Cd=0,Qs=0,ks=null;function cC(t,e){if(bo===null){var n=bo=[];Cd=0,Qs=wp(),ks={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Cd++,e.then(d_,d_),e}function d_(){if(--Cd===0&&bo!==null){ks!==null&&(ks.status="fulfilled");var t=bo;bo=null,Qs=0,ks=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function hC(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var r=0;r<n.length;r++)(0,n[r])(e)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var m_=ee.S;ee.S=function(t,e){bb=Qt(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&cC(t,e),m_!==null&&m_(t,e)};var Lr=Ln(null);function tp(){var t=Lr.current;return t!==null?t:Ae.pooledCache}function Iu(t,e){e===null?Re(Lr,Lr.current):Re(Lr,e.pool)}function uT(){var t=tp();return t===null?null:{parent:Xe._currentValue,pool:t}}var da=Error(z(460)),np=Error(z(474)),nh=Error(z(542)),sc={then:function(){}};function p_(t){return t=t.status,t==="fulfilled"||t==="rejected"}function cT(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then($n,$n),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,y_(t),t;default:if(typeof e.status=="string")e.then($n,$n);else{if(t=Ae,t!==null&&100<t.shellSuspendCounter)throw Error(z(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var r=e;r.status="fulfilled",r.value=i}},function(i){if(e.status==="pending"){var r=e;r.status="rejected",r.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,y_(t),t}throw Pr=e,da}}function Dr(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Pr=n,da):n}}var Pr=null;function g_(){if(Pr===null)throw Error(z(459));var t=Pr;return Pr=null,t}function y_(t){if(t===da||t===nh)throw Error(z(483))}var Ls=null,Qo=0;function su(t){var e=Qo;return Qo+=1,Ls===null&&(Ls=[]),cT(Ls,t,e)}function Za(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function au(t,e){throw e.$$typeof===Ww?Error(z(525)):(t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function hT(t){function e(A,T){if(t){var E=A.deletions;E===null?(A.deletions=[T],A.flags|=16):E.push(T)}}function n(A,T){if(!t)return null;for(;T!==null;)e(A,T),T=T.sibling;return null}function i(A){for(var T=new Map;A!==null;)A.key!==null?T.set(A.key,A):T.set(A.index,A),A=A.sibling;return T}function r(A,T){return A=Jn(A,T),A.index=0,A.sibling=null,A}function s(A,T,E){return A.index=E,t?(E=A.alternate,E!==null?(E=E.index,E<T?(A.flags|=67108866,T):E):(A.flags|=67108866,T)):(A.flags|=1048576,T)}function a(A){return t&&A.alternate===null&&(A.flags|=67108866),A}function l(A,T,E,N){return T===null||T.tag!==6?(T=vf(E,A.mode,N),T.return=A,T):(T=r(T,E),T.return=A,T)}function u(A,T,E,N){var P=E.type;return P===vs?f(A,T,E.props.children,N,E.key):T!==null&&(T.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Ci&&Dr(P)===T.type)?(T=r(T,E.props),Za(T,E),T.return=A,T):(T=Cu(E.type,E.key,E.props,null,A.mode,N),Za(T,E),T.return=A,T)}function c(A,T,E,N){return T===null||T.tag!==4||T.stateNode.containerInfo!==E.containerInfo||T.stateNode.implementation!==E.implementation?(T=Ef(E,A.mode,N),T.return=A,T):(T=r(T,E.children||[]),T.return=A,T)}function f(A,T,E,N,P){return T===null||T.tag!==7?(T=kr(E,A.mode,N,P),T.return=A,T):(T=r(T,E),T.return=A,T)}function d(A,T,E){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return T=vf(""+T,A.mode,E),T.return=A,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Jl:return E=Cu(T.type,T.key,T.props,null,A.mode,E),Za(E,T),E.return=A,E;case ao:return T=Ef(T,A.mode,E),T.return=A,T;case Ci:return T=Dr(T),d(A,T,E)}if(oo(T)||Xa(T))return T=kr(T,A.mode,E,null),T.return=A,T;if(typeof T.then=="function")return d(A,su(T),E);if(T.$$typeof===Kn)return d(A,ru(A,T),E);au(A,T)}return null}function m(A,T,E,N){var P=T!==null?T.key:null;if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return P!==null?null:l(A,T,""+E,N);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Jl:return E.key===P?u(A,T,E,N):null;case ao:return E.key===P?c(A,T,E,N):null;case Ci:return E=Dr(E),m(A,T,E,N)}if(oo(E)||Xa(E))return P!==null?null:f(A,T,E,N,null);if(typeof E.then=="function")return m(A,T,su(E),N);if(E.$$typeof===Kn)return m(A,T,ru(A,E),N);au(A,E)}return null}function v(A,T,E,N,P){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return A=A.get(E)||null,l(T,A,""+N,P);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Jl:return A=A.get(N.key===null?E:N.key)||null,u(T,A,N,P);case ao:return A=A.get(N.key===null?E:N.key)||null,c(T,A,N,P);case Ci:return N=Dr(N),v(A,T,E,N,P)}if(oo(N)||Xa(N))return A=A.get(E)||null,f(T,A,N,P,null);if(typeof N.then=="function")return v(A,T,E,su(N),P);if(N.$$typeof===Kn)return v(A,T,E,ru(T,N),P);au(T,N)}return null}function x(A,T,E,N){for(var P=null,G=null,y=T,_=T=0,S=null;y!==null&&_<E.length;_++){y.index>_?(S=y,y=null):S=y.sibling;var w=m(A,y,E[_],N);if(w===null){y===null&&(y=S);break}t&&y&&w.alternate===null&&e(A,y),T=s(w,T,_),G===null?P=w:G.sibling=w,G=w,y=S}if(_===E.length)return n(A,y),me&&Fn(A,_),P;if(y===null){for(;_<E.length;_++)y=d(A,E[_],N),y!==null&&(T=s(y,T,_),G===null?P=y:G.sibling=y,G=y);return me&&Fn(A,_),P}for(y=i(y);_<E.length;_++)S=v(y,A,_,E[_],N),S!==null&&(t&&S.alternate!==null&&y.delete(S.key===null?_:S.key),T=s(S,T,_),G===null?P=S:G.sibling=S,G=S);return t&&y.forEach(function(C){return e(A,C)}),me&&Fn(A,_),P}function M(A,T,E,N){if(E==null)throw Error(z(151));for(var P=null,G=null,y=T,_=T=0,S=null,w=E.next();y!==null&&!w.done;_++,w=E.next()){y.index>_?(S=y,y=null):S=y.sibling;var C=m(A,y,w.value,N);if(C===null){y===null&&(y=S);break}t&&y&&C.alternate===null&&e(A,y),T=s(C,T,_),G===null?P=C:G.sibling=C,G=C,y=S}if(w.done)return n(A,y),me&&Fn(A,_),P;if(y===null){for(;!w.done;_++,w=E.next())w=d(A,w.value,N),w!==null&&(T=s(w,T,_),G===null?P=w:G.sibling=w,G=w);return me&&Fn(A,_),P}for(y=i(y);!w.done;_++,w=E.next())w=v(y,A,_,w.value,N),w!==null&&(t&&w.alternate!==null&&y.delete(w.key===null?_:w.key),T=s(w,T,_),G===null?P=w:G.sibling=w,G=w);return t&&y.forEach(function(R){return e(A,R)}),me&&Fn(A,_),P}function O(A,T,E,N){if(typeof E=="object"&&E!==null&&E.type===vs&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Jl:e:{for(var P=E.key;T!==null;){if(T.key===P){if(P=E.type,P===vs){if(T.tag===7){n(A,T.sibling),N=r(T,E.props.children),N.return=A,A=N;break e}}else if(T.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Ci&&Dr(P)===T.type){n(A,T.sibling),N=r(T,E.props),Za(N,E),N.return=A,A=N;break e}n(A,T);break}else e(A,T);T=T.sibling}E.type===vs?(N=kr(E.props.children,A.mode,N,E.key),N.return=A,A=N):(N=Cu(E.type,E.key,E.props,null,A.mode,N),Za(N,E),N.return=A,A=N)}return a(A);case ao:e:{for(P=E.key;T!==null;){if(T.key===P)if(T.tag===4&&T.stateNode.containerInfo===E.containerInfo&&T.stateNode.implementation===E.implementation){n(A,T.sibling),N=r(T,E.children||[]),N.return=A,A=N;break e}else{n(A,T);break}else e(A,T);T=T.sibling}N=Ef(E,A.mode,N),N.return=A,A=N}return a(A);case Ci:return E=Dr(E),O(A,T,E,N)}if(oo(E))return x(A,T,E,N);if(Xa(E)){if(P=Xa(E),typeof P!="function")throw Error(z(150));return E=P.call(E),M(A,T,E,N)}if(typeof E.then=="function")return O(A,T,su(E),N);if(E.$$typeof===Kn)return O(A,T,ru(A,E),N);au(A,E)}return typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint"?(E=""+E,T!==null&&T.tag===6?(n(A,T.sibling),N=r(T,E),N.return=A,A=N):(n(A,T),N=vf(E,A.mode,N),N.return=A,A=N),a(A)):n(A,T)}return function(A,T,E,N){try{Qo=0;var P=O(A,T,E,N);return Ls=null,P}catch(y){if(y===da||y===nh)throw y;var G=Ht(29,y,null,A.mode);return G.lanes=N,G.return=A,G}finally{}}}var Fr=hT(!0),fT=hT(!1),Ii=!1;function ip(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Id(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Gi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Qi(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ge&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,e=nc(t),iT(t,null,n),e}return th(t,i,e,n),nc(t)}function So(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,D0(t,n)}}function bf(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var xd=!1;function Ao(){if(xd){var t=ks;if(t!==null)throw t}}function wo(t,e,n,i){xd=!1;var r=t.updateQueue;Ii=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var u=l,c=u.next;u.next=null,a===null?s=c:a.next=c,a=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=u))}if(s!==null){var d=r.baseState;a=0,f=c=u=null,l=s;do{var m=l.lane&-536870913,v=m!==l.lane;if(v?(fe&m)===m:(i&m)===m){m!==0&&m===Qs&&(xd=!0),f!==null&&(f=f.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var x=t,M=l;m=e;var O=n;switch(M.tag){case 1:if(x=M.payload,typeof x=="function"){d=x.call(O,d,m);break e}d=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=M.payload,m=typeof x=="function"?x.call(O,d,m):x,m==null)break e;d=Oe({},d,m);break e;case 2:Ii=!0}}m=l.callback,m!==null&&(t.flags|=64,v&&(t.flags|=8192),v=r.callbacks,v===null?r.callbacks=[m]:v.push(m))}else v={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=v,u=d):f=f.next=v,a|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;v=l,l=v.next,v.next=null,r.lastBaseUpdate=v,r.shared.pending=null}}while(!0);f===null&&(u=d),r.baseState=u,r.firstBaseUpdate=c,r.lastBaseUpdate=f,s===null&&(r.shared.lanes=0),ar|=a,t.lanes=a,t.memoizedState=d}}function dT(t,e){if(typeof t!="function")throw Error(z(191,t));t.call(e)}function mT(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)dT(n[t],e)}var Ks=Ln(null),ac=Ln(0);function __(t,e){t=li,Re(ac,t),Re(Ks,e),li=t|e.baseLanes}function Dd(){Re(ac,li),Re(Ks,Ks.current)}function rp(){li=ac.current,lt(Ks),lt(ac)}var Wt=Ln(null),ln=null;function Di(t){var e=t.alternate;Re(Fe,Fe.current&1),Re(Wt,t),ln===null&&(e===null||Ks.current!==null||e.memoizedState!==null)&&(ln=t)}function Nd(t){Re(Fe,Fe.current),Re(Wt,t),ln===null&&(ln=t)}function pT(t){t.tag===22?(Re(Fe,Fe.current),Re(Wt,t),ln===null&&(ln=t)):Ni()}function Ni(){Re(Fe,Fe.current),Re(Wt,Wt.current)}function qt(t){lt(Wt),ln===t&&(ln=null),lt(Fe)}var Fe=Ln(0);function oc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Xd(n)||Wd(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var si=0,re=null,be=null,$e=null,lc=!1,Ps=!1,Gr=!1,uc=0,Ko=0,Us=null,fC=0;function ze(){throw Error(z(321))}function sp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Xt(t[n],e[n]))return!1;return!0}function ap(t,e,n,i,r,s){return si=s,re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ee.H=t===null||t.memoizedState===null?QT:yp,Gr=!1,s=n(i,r),Gr=!1,Ps&&(s=yT(e,n,i,r)),gT(t),s}function gT(t){ee.H=$o;var e=be!==null&&be.next!==null;if(si=0,$e=be=re=null,lc=!1,Ko=0,Us=null,e)throw Error(z(300));t===null||Je||(t=t.dependencies,t!==null&&rc(t)&&(Je=!0))}function yT(t,e,n,i){re=t;var r=0;do{if(Ps&&(Us=null),Ko=0,Ps=!1,25<=r)throw Error(z(301));if(r+=1,$e=be=null,t.updateQueue!=null){var s=t.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}ee.H=KT,s=e(n,i)}while(Ps);return s}function dC(){var t=ee.H,e=t.useState()[0];return e=typeof e.then=="function"?yl(e):e,t=t.useState()[0],(be!==null?be.memoizedState:null)!==t&&(re.flags|=1024),e}function op(){var t=uc!==0;return uc=0,t}function lp(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function up(t){if(lc){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}lc=!1}si=0,$e=be=re=null,Ps=!1,Ko=uc=0,Us=null}function Rt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?re.memoizedState=$e=t:$e=$e.next=t,$e}function Ge(){if(be===null){var t=re.alternate;t=t!==null?t.memoizedState:null}else t=be.next;var e=$e===null?re.memoizedState:$e.next;if(e!==null)$e=e,be=t;else{if(t===null)throw re.alternate===null?Error(z(467)):Error(z(310));be=t,t={memoizedState:be.memoizedState,baseState:be.baseState,baseQueue:be.baseQueue,queue:be.queue,next:null},$e===null?re.memoizedState=$e=t:$e=$e.next=t}return $e}function ih(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yl(t){var e=Ko;return Ko+=1,Us===null&&(Us=[]),t=cT(Us,t,e),e=re,($e===null?e.memoizedState:$e.next)===null&&(e=e.alternate,ee.H=e===null||e.memoizedState===null?QT:yp),t}function rh(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return yl(t);if(t.$$typeof===Kn)return pt(t)}throw Error(z(438,String(t)))}function cp(t){var e=null,n=re.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=re.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(r){return r.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=ih(),re.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=Jw;return e.index++,n}function ai(t,e){return typeof e=="function"?e(t):e}function xu(t){var e=Ge();return hp(e,be,t)}function hp(t,e,n){var i=t.queue;if(i===null)throw Error(z(311));i.lastRenderedReducer=n;var r=t.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}e.baseQueue=r=s,i.pending=null}if(s=t.baseState,r===null)t.memoizedState=s;else{e=r.next;var l=a=null,u=null,c=e,f=!1;do{var d=c.lane&-536870913;if(d!==c.lane?(fe&d)===d:(si&d)===d){var m=c.revertLane;if(m===0)u!==null&&(u=u.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),d===Qs&&(f=!0);else if((si&m)===m){c=c.next,m===Qs&&(f=!0);continue}else d={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},u===null?(l=u=d,a=s):u=u.next=d,re.lanes|=m,ar|=m;d=c.action,Gr&&n(s,d),s=c.hasEagerState?c.eagerState:n(s,d)}else m={lane:d,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},u===null?(l=u=m,a=s):u=u.next=m,re.lanes|=d,ar|=d;c=c.next}while(c!==null&&c!==e);if(u===null?a=s:u.next=l,!Xt(s,t.memoizedState)&&(Je=!0,f&&(n=ks,n!==null)))throw n;t.memoizedState=s,t.baseState=a,t.baseQueue=u,i.lastRenderedState=s}return r===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function Sf(t){var e=Ge(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=t(s,a.action),a=a.next;while(a!==r);Xt(s,e.memoizedState)||(Je=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function _T(t,e,n){var i=re,r=Ge(),s=me;if(s){if(n===void 0)throw Error(z(407));n=n()}else n=e();var a=!Xt((be||r).memoizedState,n);if(a&&(r.memoizedState=n,Je=!0),r=r.queue,fp(TT.bind(null,i,r,t),[t]),r.getSnapshot!==e||a||$e!==null&&$e.memoizedState.tag&1){if(i.flags|=2048,$s(9,{destroy:void 0},ET.bind(null,i,r,n,e),null),Ae===null)throw Error(z(349));s||si&127||vT(i,e,n)}return n}function vT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=re.updateQueue,e===null?(e=ih(),re.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ET(t,e,n,i){e.value=n,e.getSnapshot=i,bT(e)&&ST(t)}function TT(t,e,n){return n(function(){bT(e)&&ST(t)})}function bT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Xt(t,n)}catch{return!0}}function ST(t){var e=ts(t,2);e!==null&&Pt(e,t,2)}function Od(t){var e=Rt();if(typeof t=="function"){var n=t;if(t=n(),Gr){Pi(!0);try{n()}finally{Pi(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:t},e}function AT(t,e,n,i){return t.baseState=n,hp(t,be,typeof i=="function"?i:ai)}function mC(t,e,n,i,r){if(ah(t))throw Error(z(485));if(t=e.action,t!==null){var s={payload:r,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};ee.T!==null?n(!0):s.isTransition=!1,i(s),n=e.pending,n===null?(s.next=e.pending=s,wT(e,s)):(s.next=n.next,e.pending=n.next=s)}}function wT(t,e){var n=e.action,i=e.payload,r=t.state;if(e.isTransition){var s=ee.T,a={};ee.T=a;try{var l=n(r,i),u=ee.S;u!==null&&u(a,l),v_(t,e,l)}catch(c){Md(t,e,c)}finally{s!==null&&a.types!==null&&(s.types=a.types),ee.T=s}}else try{s=n(r,i),v_(t,e,s)}catch(c){Md(t,e,c)}}function v_(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){E_(t,e,i)},function(i){return Md(t,e,i)}):E_(t,e,n)}function E_(t,e,n){e.status="fulfilled",e.value=n,RT(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,wT(t,n)))}function Md(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,RT(e),e=e.next;while(e!==i)}t.action=null}function RT(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function CT(t,e){return e}function T_(t,e){if(me){var n=Ae.formState;if(n!==null){e:{var i=re;if(me){if(xe){t:{for(var r=xe,s=sn;r.nodeType!==8;){if(!s){r=null;break t}if(r=un(r.nextSibling),r===null){r=null;break t}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){xe=un(r.nextSibling),i=r.data==="F!";break e}}rr(i)}i=!1}i&&(e=n[0])}}return n=Rt(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:CT,lastRenderedState:e},n.queue=i,n=HT.bind(null,re,i),i.dispatch=n,i=Od(!1),s=gp.bind(null,re,!1,i.queue),i=Rt(),r={state:e,dispatch:null,action:t,pending:null},i.queue=r,n=mC.bind(null,re,r,s,n),r.dispatch=n,i.memoizedState=t,[e,n,!1]}function b_(t){var e=Ge();return IT(e,be,t)}function IT(t,e,n){if(e=hp(t,e,CT)[0],t=xu(ai)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=yl(e)}catch(a){throw a===da?nh:a}else i=e;e=Ge();var r=e.queue,s=r.dispatch;return n!==e.memoizedState&&(re.flags|=2048,$s(9,{destroy:void 0},pC.bind(null,r,n),null)),[i,s,t]}function pC(t,e){t.action=e}function S_(t){var e=Ge(),n=be;if(n!==null)return IT(e,n,t);Ge(),e=e.memoizedState,n=Ge();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function $s(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=re.updateQueue,e===null&&(e=ih(),re.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function xT(){return Ge().memoizedState}function Du(t,e,n,i){var r=Rt();re.flags|=t,r.memoizedState=$s(1|e,{destroy:void 0},n,i===void 0?null:i)}function sh(t,e,n,i){var r=Ge();i=i===void 0?null:i;var s=r.memoizedState.inst;be!==null&&i!==null&&sp(i,be.memoizedState.deps)?r.memoizedState=$s(e,s,n,i):(re.flags|=t,r.memoizedState=$s(1|e,s,n,i))}function A_(t,e){Du(8390656,8,t,e)}function fp(t,e){sh(2048,8,t,e)}function gC(t){re.flags|=4;var e=re.updateQueue;if(e===null)e=ih(),re.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function DT(t){var e=Ge().memoizedState;return gC({ref:e,nextImpl:t}),function(){if(ge&2)throw Error(z(440));return e.impl.apply(void 0,arguments)}}function NT(t,e){return sh(4,2,t,e)}function OT(t,e){return sh(4,4,t,e)}function MT(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function VT(t,e,n){n=n!=null?n.concat([t]):null,sh(4,4,MT.bind(null,e,t),n)}function dp(){}function kT(t,e){var n=Ge();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&sp(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function LT(t,e){var n=Ge();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&sp(e,i[1]))return i[0];if(i=t(),Gr){Pi(!0);try{t()}finally{Pi(!1)}}return n.memoizedState=[i,e],i}function mp(t,e,n){return n===void 0||si&1073741824&&!(fe&261930)?t.memoizedState=e:(t.memoizedState=n,t=Ab(),re.lanes|=t,ar|=t,n)}function PT(t,e,n,i){return Xt(n,e)?n:Ks.current!==null?(t=mp(t,n,i),Xt(t,e)||(Je=!0),t):!(si&42)||si&1073741824&&!(fe&261930)?(Je=!0,t.memoizedState=n):(t=Ab(),re.lanes|=t,ar|=t,e)}function UT(t,e,n,i,r){var s=ye.p;ye.p=s!==0&&8>s?s:8;var a=ee.T,l={};ee.T=l,gp(t,!1,e,n);try{var u=r(),c=ee.S;if(c!==null&&c(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var f=hC(u,i);Ro(t,e,f,Yt(t))}else Ro(t,e,i,Yt(t))}catch(d){Ro(t,e,{then:function(){},status:"rejected",reason:d},Yt())}finally{ye.p=s,a!==null&&l.types!==null&&(a.types=l.types),ee.T=a}}function yC(){}function Vd(t,e,n,i){if(t.tag!==5)throw Error(z(476));var r=jT(t).queue;UT(t,r,e,Vr,n===null?yC:function(){return zT(t),n(i)})}function jT(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Vr,baseState:Vr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:Vr},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function zT(t){var e=jT(t);e.next===null&&(e=t.alternate.memoizedState),Ro(t,e.next.queue,{},Yt())}function pp(){return pt(Wo)}function BT(){return Ge().memoizedState}function qT(){return Ge().memoizedState}function _C(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=Yt();t=Gi(n);var i=Qi(e,t,n);i!==null&&(Pt(i,e,n),So(i,e,n)),e={cache:ep()},t.payload=e;return}e=e.return}}function vC(t,e,n){var i=Yt();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ah(t)?FT(e,n):(n=Xm(t,e,n,i),n!==null&&(Pt(n,t,i),GT(n,e,i)))}function HT(t,e,n){var i=Yt();Ro(t,e,n,i)}function Ro(t,e,n,i){var r={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(ah(t))FT(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,n);if(r.hasEagerState=!0,r.eagerState=l,Xt(l,a))return th(t,e,r,0),Ae===null&&eh(),!1}catch{}finally{}if(n=Xm(t,e,r,i),n!==null)return Pt(n,t,i),GT(n,e,i),!0}return!1}function gp(t,e,n,i){if(i={lane:2,revertLane:wp(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},ah(t)){if(e)throw Error(z(479))}else e=Xm(t,n,i,2),e!==null&&Pt(e,t,2)}function ah(t){var e=t.alternate;return t===re||e!==null&&e===re}function FT(t,e){Ps=lc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function GT(t,e,n){if(n&4194048){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,D0(t,n)}}var $o={readContext:pt,use:rh,useCallback:ze,useContext:ze,useEffect:ze,useImperativeHandle:ze,useLayoutEffect:ze,useInsertionEffect:ze,useMemo:ze,useReducer:ze,useRef:ze,useState:ze,useDebugValue:ze,useDeferredValue:ze,useTransition:ze,useSyncExternalStore:ze,useId:ze,useHostTransitionStatus:ze,useFormState:ze,useActionState:ze,useOptimistic:ze,useMemoCache:ze,useCacheRefresh:ze};$o.useEffectEvent=ze;var QT={readContext:pt,use:rh,useCallback:function(t,e){return Rt().memoizedState=[t,e===void 0?null:e],t},useContext:pt,useEffect:A_,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Du(4194308,4,MT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Du(4194308,4,t,e)},useInsertionEffect:function(t,e){Du(4,2,t,e)},useMemo:function(t,e){var n=Rt();e=e===void 0?null:e;var i=t();if(Gr){Pi(!0);try{t()}finally{Pi(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=Rt();if(n!==void 0){var r=n(e);if(Gr){Pi(!0);try{n(e)}finally{Pi(!1)}}}else r=e;return i.memoizedState=i.baseState=r,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},i.queue=t,t=t.dispatch=vC.bind(null,re,t),[i.memoizedState,t]},useRef:function(t){var e=Rt();return t={current:t},e.memoizedState=t},useState:function(t){t=Od(t);var e=t.queue,n=HT.bind(null,re,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:dp,useDeferredValue:function(t,e){var n=Rt();return mp(n,t,e)},useTransition:function(){var t=Od(!1);return t=UT.bind(null,re,t.queue,!0,!1),Rt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=re,r=Rt();if(me){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),Ae===null)throw Error(z(349));fe&127||vT(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,A_(TT.bind(null,i,s,t),[t]),i.flags|=2048,$s(9,{destroy:void 0},ET.bind(null,i,s,n,e),null),n},useId:function(){var t=Rt(),e=Ae.identifierPrefix;if(me){var n=wn,i=An;n=(i&~(1<<32-$t(i)-1)).toString(32)+n,e="_"+e+"R_"+n,n=uc++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=fC++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:pp,useFormState:T_,useActionState:T_,useOptimistic:function(t){var e=Rt();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=gp.bind(null,re,!0,n),n.dispatch=e,[t,e]},useMemoCache:cp,useCacheRefresh:function(){return Rt().memoizedState=_C.bind(null,re)},useEffectEvent:function(t){var e=Rt(),n={impl:t};return e.memoizedState=n,function(){if(ge&2)throw Error(z(440));return n.impl.apply(void 0,arguments)}}},yp={readContext:pt,use:rh,useCallback:kT,useContext:pt,useEffect:fp,useImperativeHandle:VT,useInsertionEffect:NT,useLayoutEffect:OT,useMemo:LT,useReducer:xu,useRef:xT,useState:function(){return xu(ai)},useDebugValue:dp,useDeferredValue:function(t,e){var n=Ge();return PT(n,be.memoizedState,t,e)},useTransition:function(){var t=xu(ai)[0],e=Ge().memoizedState;return[typeof t=="boolean"?t:yl(t),e]},useSyncExternalStore:_T,useId:BT,useHostTransitionStatus:pp,useFormState:b_,useActionState:b_,useOptimistic:function(t,e){var n=Ge();return AT(n,be,t,e)},useMemoCache:cp,useCacheRefresh:qT};yp.useEffectEvent=DT;var KT={readContext:pt,use:rh,useCallback:kT,useContext:pt,useEffect:fp,useImperativeHandle:VT,useInsertionEffect:NT,useLayoutEffect:OT,useMemo:LT,useReducer:Sf,useRef:xT,useState:function(){return Sf(ai)},useDebugValue:dp,useDeferredValue:function(t,e){var n=Ge();return be===null?mp(n,t,e):PT(n,be.memoizedState,t,e)},useTransition:function(){var t=Sf(ai)[0],e=Ge().memoizedState;return[typeof t=="boolean"?t:yl(t),e]},useSyncExternalStore:_T,useId:BT,useHostTransitionStatus:pp,useFormState:S_,useActionState:S_,useOptimistic:function(t,e){var n=Ge();return be!==null?AT(n,be,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:cp,useCacheRefresh:qT};KT.useEffectEvent=DT;function Af(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Oe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var kd={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Yt(),r=Gi(i);r.payload=e,n!=null&&(r.callback=n),e=Qi(t,r,i),e!==null&&(Pt(e,t,i),So(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Yt(),r=Gi(i);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=Qi(t,r,i),e!==null&&(Pt(e,t,i),So(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Yt(),i=Gi(n);i.tag=2,e!=null&&(i.callback=e),e=Qi(t,i,n),e!==null&&(Pt(e,t,n),So(e,t,n))}};function w_(t,e,n,i,r,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!Ho(n,i)||!Ho(r,s):!0}function R_(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&kd.enqueueReplaceState(e,e.state,null)}function Qr(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=Oe({},n));for(var r in t)n[r]===void 0&&(n[r]=t[r])}return n}function $T(t){tc(t)}function YT(t){console.error(t)}function XT(t){tc(t)}function cc(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function C_(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Ld(t,e,n){return n=Gi(n),n.tag=3,n.payload={element:null},n.callback=function(){cc(t,e)},n}function WT(t){return t=Gi(t),t.tag=3,t}function JT(t,e,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;t.payload=function(){return r(s)},t.callback=function(){C_(e,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){C_(e,n,i),typeof r!="function"&&(Ki===null?Ki=new Set([this]):Ki.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function EC(t,e,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&fa(e,n,r,!0),n=Wt.current,n!==null){switch(n.tag){case 31:case 13:return ln===null?pc():n.alternate===null&&Be===0&&(Be=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===sc?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),kf(t,i,r)),!1;case 22:return n.flags|=65536,i===sc?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),kf(t,i,r)),!1}throw Error(z(435,n.tag))}return kf(t,i,r),pc(),!1}if(me)return e=Wt.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=r,i!==Sd&&(t=Error(z(422),{cause:i}),Go(rn(t,n)))):(i!==Sd&&(e=Error(z(423),{cause:i}),Go(rn(e,n))),t=t.current.alternate,t.flags|=65536,r&=-r,t.lanes|=r,i=rn(i,n),r=Ld(t.stateNode,i,r),bf(t,r),Be!==4&&(Be=2)),!1;var s=Error(z(520),{cause:i});if(s=rn(s,n),xo===null?xo=[s]:xo.push(s),Be!==4&&(Be=2),e===null)return!0;i=rn(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=r&-r,n.lanes|=t,t=Ld(n.stateNode,i,t),bf(n,t),!1;case 1:if(e=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Ki===null||!Ki.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=WT(r),JT(r,t,n,i),bf(n,r),!1}n=n.return}while(n!==null);return!1}var _p=Error(z(461)),Je=!1;function ct(t,e,n,i){e.child=t===null?fT(e,null,n,i):Fr(e,t.child,n,i)}function I_(t,e,n,i,r){n=n.render;var s=e.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return Hr(e),i=ap(t,e,n,a,s,r),l=op(),t!==null&&!Je?(lp(t,e,r),oi(t,e,r)):(me&&l&&Jm(e),e.flags|=1,ct(t,e,i,r),e.child)}function x_(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Wm(s)&&s.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=s,ZT(t,e,s,i,r)):(t=Cu(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!vp(t,r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ho,n(a,i)&&t.ref===e.ref)return oi(t,e,r)}return e.flags|=1,t=Jn(s,i),t.ref=e.ref,t.return=e,e.child=t}function ZT(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Ho(s,i)&&t.ref===e.ref)if(Je=!1,e.pendingProps=i=s,vp(t,r))t.flags&131072&&(Je=!0);else return e.lanes=t.lanes,oi(t,e,r)}return Pd(t,e,n,i,r)}function eb(t,e,n,i){var r=i.children,s=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if(e.flags&128){if(s=s!==null?s.baseLanes|n:n,t!==null){for(i=e.child=t.child,r=0;i!==null;)r=r|i.lanes|i.childLanes,i=i.sibling;i=r&~s}else i=0,e.child=null;return D_(t,e,s,n,i)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Iu(e,s!==null?s.cachePool:null),s!==null?__(e,s):Dd(),pT(e);else return i=e.lanes=536870912,D_(t,e,s!==null?s.baseLanes|n:n,n,i)}else s!==null?(Iu(e,s.cachePool),__(e,s),Ni(),e.memoizedState=null):(t!==null&&Iu(e,null),Dd(),Ni());return ct(t,e,r,n),e.child}function uo(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function D_(t,e,n,i,r){var s=tp();return s=s===null?null:{parent:Xe._currentValue,pool:s},e.memoizedState={baseLanes:n,cachePool:s},t!==null&&Iu(e,null),Dd(),pT(e),t!==null&&fa(t,e,i,!0),e.childLanes=r,null}function Nu(t,e){return e=hc({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function N_(t,e,n){return Fr(e,t.child,null,n),t=Nu(e,e.pendingProps),t.flags|=2,qt(e),e.memoizedState=null,t}function TC(t,e,n){var i=e.pendingProps,r=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(me){if(i.mode==="hidden")return t=Nu(e,i),e.lanes=536870912,uo(null,t);if(Nd(e),(t=xe)?(t=Qb(t,sn),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:ir!==null?{id:An,overflow:wn}:null,retryLane:536870912,hydrationErrors:null},n=sT(t),n.return=e,e.child=n,dt=e,xe=null)):t=null,t===null)throw rr(e);return e.lanes=536870912,null}return Nu(e,i)}var s=t.memoizedState;if(s!==null){var a=s.dehydrated;if(Nd(e),r)if(e.flags&256)e.flags&=-257,e=N_(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(z(558));else if(Je||fa(t,e,n,!1),r=(n&t.childLanes)!==0,Je||r){if(i=Ae,i!==null&&(a=N0(i,n),a!==0&&a!==s.retryLane))throw s.retryLane=a,ts(t,a),Pt(i,t,a),_p;pc(),e=N_(t,e,n)}else t=s.treeContext,xe=un(a.nextSibling),dt=e,me=!0,Fi=null,sn=!1,t!==null&&oT(e,t),e=Nu(e,i),e.flags|=4096;return e}return t=Jn(t.child,{mode:i.mode,children:i.children}),t.ref=e.ref,e.child=t,t.return=e,t}function Ou(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(z(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function Pd(t,e,n,i,r){return Hr(e),n=ap(t,e,n,i,void 0,r),i=op(),t!==null&&!Je?(lp(t,e,r),oi(t,e,r)):(me&&i&&Jm(e),e.flags|=1,ct(t,e,n,r),e.child)}function O_(t,e,n,i,r,s){return Hr(e),e.updateQueue=null,n=yT(e,i,n,r),gT(t),i=op(),t!==null&&!Je?(lp(t,e,s),oi(t,e,s)):(me&&i&&Jm(e),e.flags|=1,ct(t,e,n,s),e.child)}function M_(t,e,n,i,r){if(Hr(e),e.stateNode===null){var s=Cs,a=n.contextType;typeof a=="object"&&a!==null&&(s=pt(a)),s=new n(i,s),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=kd,e.stateNode=s,s._reactInternals=e,s=e.stateNode,s.props=i,s.state=e.memoizedState,s.refs={},ip(e),a=n.contextType,s.context=typeof a=="object"&&a!==null?pt(a):Cs,s.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(Af(e,n,a,i),s.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&kd.enqueueReplaceState(s,s.state,null),wo(e,i,s,r),Ao(),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){s=e.stateNode;var l=e.memoizedProps,u=Qr(n,l);s.props=u;var c=s.context,f=n.contextType;a=Cs,typeof f=="object"&&f!==null&&(a=pt(f));var d=n.getDerivedStateFromProps;f=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function",l=e.pendingProps!==l,f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l||c!==a)&&R_(e,s,i,a),Ii=!1;var m=e.memoizedState;s.state=m,wo(e,i,s,r),Ao(),c=e.memoizedState,l||m!==c||Ii?(typeof d=="function"&&(Af(e,n,d,i),c=e.memoizedState),(u=Ii||w_(e,n,u,i,m,c,a))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),s.props=i,s.state=c,s.context=a,i=u):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,Id(t,e),a=e.memoizedProps,f=Qr(n,a),s.props=f,d=e.pendingProps,m=s.context,c=n.contextType,u=Cs,typeof c=="object"&&c!==null&&(u=pt(c)),l=n.getDerivedStateFromProps,(c=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||m!==u)&&R_(e,s,i,u),Ii=!1,m=e.memoizedState,s.state=m,wo(e,i,s,r),Ao();var v=e.memoizedState;a!==d||m!==v||Ii||t!==null&&t.dependencies!==null&&rc(t.dependencies)?(typeof l=="function"&&(Af(e,n,l,i),v=e.memoizedState),(f=Ii||w_(e,n,f,i,m,v,u)||t!==null&&t.dependencies!==null&&rc(t.dependencies))?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,v,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,v,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),s.props=i,s.state=v,s.context=u,i=f):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),i=!1)}return s=i,Ou(t,e),i=(e.flags&128)!==0,s||i?(s=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),e.flags|=1,t!==null&&i?(e.child=Fr(e,t.child,null,r),e.child=Fr(e,null,n,r)):ct(t,e,n,r),e.memoizedState=s.state,t=e.child):t=oi(t,e,r),t}function V_(t,e,n,i){return qr(),e.flags|=256,ct(t,e,n,i),e.child}var wf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Rf(t){return{baseLanes:t,cachePool:uT()}}function Cf(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Ft),t}function tb(t,e,n){var i=e.pendingProps,r=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(Fe.current&2)!==0),a&&(r=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(me){if(r?Di(e):Ni(),(t=xe)?(t=Qb(t,sn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:ir!==null?{id:An,overflow:wn}:null,retryLane:536870912,hydrationErrors:null},n=sT(t),n.return=e,e.child=n,dt=e,xe=null)):t=null,t===null)throw rr(e);return Wd(t)?e.lanes=32:e.lanes=536870912,null}var l=i.children;return i=i.fallback,r?(Ni(),r=e.mode,l=hc({mode:"hidden",children:l},r),i=kr(i,r,n,null),l.return=e,i.return=e,l.sibling=i,e.child=l,i=e.child,i.memoizedState=Rf(n),i.childLanes=Cf(t,a,n),e.memoizedState=wf,uo(null,i)):(Di(e),Ud(e,l))}var u=t.memoizedState;if(u!==null&&(l=u.dehydrated,l!==null)){if(s)e.flags&256?(Di(e),e.flags&=-257,e=If(t,e,n)):e.memoizedState!==null?(Ni(),e.child=t.child,e.flags|=128,e=null):(Ni(),l=i.fallback,r=e.mode,i=hc({mode:"visible",children:i.children},r),l=kr(l,r,n,null),l.flags|=2,i.return=e,l.return=e,i.sibling=l,e.child=i,Fr(e,t.child,null,n),i=e.child,i.memoizedState=Rf(n),i.childLanes=Cf(t,a,n),e.memoizedState=wf,e=uo(null,i));else if(Di(e),Wd(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var c=a.dgst;a=c,i=Error(z(419)),i.stack="",i.digest=a,Go({value:i,source:null,stack:null}),e=If(t,e,n)}else if(Je||fa(t,e,n,!1),a=(n&t.childLanes)!==0,Je||a){if(a=Ae,a!==null&&(i=N0(a,n),i!==0&&i!==u.retryLane))throw u.retryLane=i,ts(t,i),Pt(a,t,i),_p;Xd(l)||pc(),e=If(t,e,n)}else Xd(l)?(e.flags|=192,e.child=t.child,e=null):(t=u.treeContext,xe=un(l.nextSibling),dt=e,me=!0,Fi=null,sn=!1,t!==null&&oT(e,t),e=Ud(e,i.children),e.flags|=4096);return e}return r?(Ni(),l=i.fallback,r=e.mode,u=t.child,c=u.sibling,i=Jn(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,c!==null?l=Jn(c,l):(l=kr(l,r,n,null),l.flags|=2),l.return=e,i.return=e,i.sibling=l,e.child=i,uo(null,i),i=e.child,l=t.child.memoizedState,l===null?l=Rf(n):(r=l.cachePool,r!==null?(u=Xe._currentValue,r=r.parent!==u?{parent:u,pool:u}:r):r=uT(),l={baseLanes:l.baseLanes|n,cachePool:r}),i.memoizedState=l,i.childLanes=Cf(t,a,n),e.memoizedState=wf,uo(t.child,i)):(Di(e),n=t.child,t=n.sibling,n=Jn(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function Ud(t,e){return e=hc({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function hc(t,e){return t=Ht(22,t,null,e),t.lanes=0,t}function If(t,e,n){return Fr(e,t.child,null,n),t=Ud(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function k_(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),wd(t.return,e,n)}function xf(t,e,n,i,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,treeForkCount:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r,a.treeForkCount=s)}function nb(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;i=i.children;var a=Fe.current,l=(a&2)!==0;if(l?(a=a&1|2,e.flags|=128):a&=1,Re(Fe,a),ct(t,e,i,n),i=me?Fo:0,!l&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&k_(t,n,e);else if(t.tag===19)k_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&oc(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),xf(e,!1,r,n,s,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&oc(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}xf(e,!0,n,null,s,i);break;case"together":xf(e,!1,null,null,void 0,i);break;default:e.memoizedState=null}return e.child}function oi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ar|=e.lanes,!(n&e.childLanes))if(t!==null){if(fa(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Jn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Jn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function vp(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&rc(t)))}function bC(t,e,n){switch(e.tag){case 3:Wu(e,e.stateNode.containerInfo),xi(e,Xe,t.memoizedState.cache),qr();break;case 27:case 5:fd(e);break;case 4:Wu(e,e.stateNode.containerInfo);break;case 10:xi(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,Nd(e),null;break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(Di(e),e.flags|=128,null):n&e.child.childLanes?tb(t,e,n):(Di(e),t=oi(t,e,n),t!==null?t.sibling:null);Di(e);break;case 19:var r=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(fa(t,e,n,!1),i=(n&e.childLanes)!==0),r){if(i)return nb(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Re(Fe,Fe.current),i)break;return null;case 22:return e.lanes=0,eb(t,e,n,e.pendingProps);case 24:xi(e,Xe,t.memoizedState.cache)}return oi(t,e,n)}function ib(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)Je=!0;else{if(!vp(t,n)&&!(e.flags&128))return Je=!1,bC(t,e,n);Je=!!(t.flags&131072)}else Je=!1,me&&e.flags&1048576&&aT(e,Fo,e.index);switch(e.lanes=0,e.tag){case 16:e:{var i=e.pendingProps;if(t=Dr(e.elementType),e.type=t,typeof t=="function")Wm(t)?(i=Qr(t,i),e.tag=1,e=M_(null,e,t,i,n)):(e.tag=0,e=Pd(null,e,t,i,n));else{if(t!=null){var r=t.$$typeof;if(r===Pm){e.tag=11,e=I_(null,e,t,i,n);break e}else if(r===Um){e.tag=14,e=x_(null,e,t,i,n);break e}}throw e=cd(t)||t,Error(z(306,e,""))}}return e;case 0:return Pd(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,r=Qr(i,e.pendingProps),M_(t,e,i,r,n);case 3:e:{if(Wu(e,e.stateNode.containerInfo),t===null)throw Error(z(387));i=e.pendingProps;var s=e.memoizedState;r=s.element,Id(t,e),wo(e,i,null,n);var a=e.memoizedState;if(i=a.cache,xi(e,Xe,i),i!==s.cache&&Rd(e,[Xe],n,!0),Ao(),i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){e=V_(t,e,i,n);break e}else if(i!==r){r=rn(Error(z(424)),e),Go(r),e=V_(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(xe=un(t.firstChild),dt=e,me=!0,Fi=null,sn=!0,n=fT(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(qr(),i===r){e=oi(t,e,n);break e}ct(t,e,i,n)}e=e.child}return e;case 26:return Ou(t,e),t===null?(n=tv(e.type,null,e.pendingProps,null))?e.memoizedState=n:me||(n=e.type,t=e.pendingProps,i=vc(Hi.current).createElement(n),i[ft]=e,i[Ut]=t,gt(i,n,t),ot(i),e.stateNode=i):e.memoizedState=tv(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return fd(e),t===null&&me&&(i=e.stateNode=Kb(e.type,e.pendingProps,Hi.current),dt=e,sn=!0,r=xe,mr(e.type)?(Jd=r,xe=un(i.firstChild)):xe=r),ct(t,e,e.pendingProps.children,n),Ou(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&me&&((r=i=xe)&&(i=JC(i,e.type,e.pendingProps,sn),i!==null?(e.stateNode=i,dt=e,xe=un(i.firstChild),sn=!1,r=!0):r=!1),r||rr(e)),fd(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,i=s.children,$d(r,s)?i=null:a!==null&&$d(r,a)&&(e.flags|=32),e.memoizedState!==null&&(r=ap(t,e,dC,null,null,n),Wo._currentValue=r),Ou(t,e),ct(t,e,i,n),e.child;case 6:return t===null&&me&&((t=n=xe)&&(n=ZC(n,e.pendingProps,sn),n!==null?(e.stateNode=n,dt=e,xe=null,t=!0):t=!1),t||rr(e)),null;case 13:return tb(t,e,n);case 4:return Wu(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Fr(e,null,i,n):ct(t,e,i,n),e.child;case 11:return I_(t,e,e.type,e.pendingProps,n);case 7:return ct(t,e,e.pendingProps,n),e.child;case 8:return ct(t,e,e.pendingProps.children,n),e.child;case 12:return ct(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,xi(e,e.type,i.value),ct(t,e,i.children,n),e.child;case 9:return r=e.type._context,i=e.pendingProps.children,Hr(e),r=pt(r),i=i(r),e.flags|=1,ct(t,e,i,n),e.child;case 14:return x_(t,e,e.type,e.pendingProps,n);case 15:return ZT(t,e,e.type,e.pendingProps,n);case 19:return nb(t,e,n);case 31:return TC(t,e,n);case 22:return eb(t,e,n,e.pendingProps);case 24:return Hr(e),i=pt(Xe),t===null?(r=tp(),r===null&&(r=Ae,s=ep(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),e.memoizedState={parent:i,cache:r},ip(e),xi(e,Xe,r)):(t.lanes&n&&(Id(t,e),wo(e,null,null,n),Ao()),r=t.memoizedState,s=e.memoizedState,r.parent!==i?(r={parent:i,cache:i},e.memoizedState=r,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=r),xi(e,Xe,i)):(i=s.cache,xi(e,Xe,i),i!==r.cache&&Rd(e,[Xe],n,!0))),ct(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(z(156,e.tag))}function jn(t){t.flags|=4}function Df(t,e,n,i,r){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(r&335544128)===r)if(t.stateNode.complete)t.flags|=8192;else if(Cb())t.flags|=8192;else throw Pr=sc,np}else t.flags&=-16777217}function L_(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!Xb(e))if(Cb())t.flags|=8192;else throw Pr=sc,np}function ou(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?I0():536870912,t.lanes|=e,Ys|=e)}function eo(t,e){if(!me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ie(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function SC(t,e,n){var i=e.pendingProps;switch(Zm(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ie(e),null;case 1:return Ie(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),Zn(Xe),Hs(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(cs(e)?jn(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Tf())),Ie(e),null;case 26:var r=e.type,s=e.memoizedState;return t===null?(jn(e),s!==null?(Ie(e),L_(e,s)):(Ie(e),Df(e,r,null,i,n))):s?s!==t.memoizedState?(jn(e),Ie(e),L_(e,s)):(Ie(e),e.flags&=-16777217):(t=t.memoizedProps,t!==i&&jn(e),Ie(e),Df(e,r,t,i,n)),null;case 27:if(Ju(e),n=Hi.current,r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&jn(e);else{if(!i){if(e.stateNode===null)throw Error(z(166));return Ie(e),null}t=Cn.current,cs(e)?h_(e):(t=Kb(r,i,n),e.stateNode=t,jn(e))}return Ie(e),null;case 5:if(Ju(e),r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&jn(e);else{if(!i){if(e.stateNode===null)throw Error(z(166));return Ie(e),null}if(s=Cn.current,cs(e))h_(e);else{var a=vc(Hi.current);switch(s){case 1:s=a.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:s=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":s=a.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":s=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":s=a.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof i.is=="string"?a.createElement("select",{is:i.is}):a.createElement("select"),i.multiple?s.multiple=!0:i.size&&(s.size=i.size);break;default:s=typeof i.is=="string"?a.createElement(r,{is:i.is}):a.createElement(r)}}s[ft]=e,s[Ut]=i;e:for(a=e.child;a!==null;){if(a.tag===5||a.tag===6)s.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}e.stateNode=s;e:switch(gt(s,r,i),r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&jn(e)}}return Ie(e),Df(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&jn(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(z(166));if(t=Hi.current,cs(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,r=dt,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}t[ft]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||Hb(t.nodeValue,n)),t||rr(e,!0)}else t=vc(t).createTextNode(i),t[ft]=e,e.stateNode=t}return Ie(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(i=cs(e),n!==null){if(t===null){if(!i)throw Error(z(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(557));t[ft]=e}else qr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ie(e),t=!1}else n=Tf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(qt(e),e):(qt(e),null);if(e.flags&128)throw Error(z(558))}return Ie(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(r=cs(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(z(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(z(317));r[ft]=e}else qr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ie(e),r=!1}else r=Tf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),r=!0;if(!r)return e.flags&256?(qt(e),e):(qt(e),null)}return qt(e),e.flags&128?(e.lanes=n,e):(n=i!==null,t=t!==null&&t.memoizedState!==null,n&&(i=e.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),ou(e,e.updateQueue),Ie(e),null);case 4:return Hs(),t===null&&Rp(e.stateNode.containerInfo),Ie(e),null;case 10:return Zn(e.type),Ie(e),null;case 19:if(lt(Fe),i=e.memoizedState,i===null)return Ie(e),null;if(r=(e.flags&128)!==0,s=i.rendering,s===null)if(r)eo(i,!1);else{if(Be!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=oc(t),s!==null){for(e.flags|=128,eo(i,!1),t=s.updateQueue,e.updateQueue=t,ou(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)rT(n,t),n=n.sibling;return Re(Fe,Fe.current&1|2),me&&Fn(e,i.treeForkCount),e.child}t=t.sibling}i.tail!==null&&Qt()>dc&&(e.flags|=128,r=!0,eo(i,!1),e.lanes=4194304)}else{if(!r)if(t=oc(s),t!==null){if(e.flags|=128,r=!0,t=t.updateQueue,e.updateQueue=t,ou(e,t),eo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!me)return Ie(e),null}else 2*Qt()-i.renderingStartTime>dc&&n!==536870912&&(e.flags|=128,r=!0,eo(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(t=i.last,t!==null?t.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Qt(),t.sibling=null,n=Fe.current,Re(Fe,r?n&1|2:n&1),me&&Fn(e,i.treeForkCount),t):(Ie(e),null);case 22:case 23:return qt(e),rp(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(Ie(e),e.subtreeFlags&6&&(e.flags|=8192)):Ie(e),n=e.updateQueue,n!==null&&ou(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&lt(Lr),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Zn(Xe),Ie(e),null;case 25:return null;case 30:return null}throw Error(z(156,e.tag))}function AC(t,e){switch(Zm(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Zn(Xe),Hs(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Ju(e),null;case 31:if(e.memoizedState!==null){if(qt(e),e.alternate===null)throw Error(z(340));qr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(qt(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));qr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return lt(Fe),null;case 4:return Hs(),null;case 10:return Zn(e.type),null;case 22:case 23:return qt(e),rp(),t!==null&&lt(Lr),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Zn(Xe),null;case 25:return null;default:return null}}function rb(t,e){switch(Zm(e),e.tag){case 3:Zn(Xe),Hs();break;case 26:case 27:case 5:Ju(e);break;case 4:Hs();break;case 31:e.memoizedState!==null&&qt(e);break;case 13:qt(e);break;case 19:lt(Fe);break;case 10:Zn(e.type);break;case 22:case 23:qt(e),rp(),t!==null&&lt(Lr);break;case 24:Zn(Xe)}}function _l(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&t)===t){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(l){Ee(e,e.return,l)}}function sr(t,e,n){try{var i=e.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&t)===t){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,r=e;var u=n,c=l;try{c()}catch(f){Ee(r,u,f)}}}i=i.next}while(i!==s)}}catch(f){Ee(e,e.return,f)}}function sb(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{mT(e,n)}catch(i){Ee(t,t.return,i)}}}function ab(t,e,n){n.props=Qr(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){Ee(t,e,i)}}function Co(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(r){Ee(t,e,r)}}function Rn(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){Ee(t,e,r)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Ee(t,e,r)}else n.current=null}function ob(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Ee(t,t.return,r)}}function Nf(t,e,n){try{var i=t.stateNode;QC(i,t.type,n,e),i[Ut]=e}catch(r){Ee(t,t.return,r)}}function lb(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&mr(t.type)||t.tag===4}function Of(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||lb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&mr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jd(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=$n));else if(i!==4&&(i===27&&mr(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(jd(t,e,n),t=t.sibling;t!==null;)jd(t,e,n),t=t.sibling}function fc(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&mr(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(fc(t,e,n),t=t.sibling;t!==null;)fc(t,e,n),t=t.sibling}function ub(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,r=e.attributes;r.length;)e.removeAttributeNode(r[0]);gt(e,i,n),e[ft]=t,e[Ut]=n}catch(s){Ee(t,t.return,s)}}var Gn=!1,Ye=!1,Mf=!1,P_=typeof WeakSet=="function"?WeakSet:Set,at=null;function wC(t,e){if(t=t.containerInfo,Qd=Sc,t=X0(t),$m(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,c=0,f=0,d=t,m=null;t:for(;;){for(var v;d!==n||r!==0&&d.nodeType!==3||(l=a+r),d!==s||i!==0&&d.nodeType!==3||(u=a+i),d.nodeType===3&&(a+=d.nodeValue.length),(v=d.firstChild)!==null;)m=d,d=v;for(;;){if(d===t)break t;if(m===n&&++c===r&&(l=a),m===s&&++f===i&&(u=a),(v=d.nextSibling)!==null)break;d=m,m=d.parentNode}d=v}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Kd={focusedElem:t,selectionRange:n},Sc=!1,at=e;at!==null;)if(e=at,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,at=t;else for(;at!==null;){switch(e=at,s=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)r=t[n],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&s!==null){t=void 0,n=e,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var x=Qr(n.type,r);t=i.getSnapshotBeforeUpdate(x,s),i.__reactInternalSnapshotBeforeUpdate=t}catch(M){Ee(n,n.return,M)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Yd(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Yd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(z(163))}if(t=e.sibling,t!==null){t.return=e.return,at=t;break}at=e.return}}function cb(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Bn(t,n),i&4&&_l(5,n);break;case 1:if(Bn(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(a){Ee(n,n.return,a)}else{var r=Qr(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(r,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){Ee(n,n.return,a)}}i&64&&sb(n),i&512&&Co(n,n.return);break;case 3:if(Bn(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{mT(t,e)}catch(a){Ee(n,n.return,a)}}break;case 27:e===null&&i&4&&ub(n);case 26:case 5:Bn(t,n),e===null&&i&4&&ob(n),i&512&&Co(n,n.return);break;case 12:Bn(t,n);break;case 31:Bn(t,n),i&4&&db(t,n);break;case 13:Bn(t,n),i&4&&mb(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=VC.bind(null,n),eI(t,n))));break;case 22:if(i=n.memoizedState!==null||Gn,!i){e=e!==null&&e.memoizedState!==null||Ye,r=Gn;var s=Ye;Gn=i,(Ye=e)&&!s?qn(t,n,(n.subtreeFlags&8772)!==0):Bn(t,n),Gn=r,Ye=s}break;case 30:break;default:Bn(t,n)}}function hb(t){var e=t.alternate;e!==null&&(t.alternate=null,hb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&qm(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Me=null,Mt=!1;function zn(t,e,n){for(n=n.child;n!==null;)fb(t,e,n),n=n.sibling}function fb(t,e,n){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(hl,n)}catch{}switch(n.tag){case 26:Ye||Rn(n,e),zn(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Ye||Rn(n,e);var i=Me,r=Mt;mr(n.type)&&(Me=n.stateNode,Mt=!1),zn(t,e,n),No(n.stateNode),Me=i,Mt=r;break;case 5:Ye||Rn(n,e);case 6:if(i=Me,r=Mt,Me=null,zn(t,e,n),Me=i,Mt=r,Me!==null)if(Mt)try{(Me.nodeType===9?Me.body:Me.nodeName==="HTML"?Me.ownerDocument.body:Me).removeChild(n.stateNode)}catch(s){Ee(n,e,s)}else try{Me.removeChild(n.stateNode)}catch(s){Ee(n,e,s)}break;case 18:Me!==null&&(Mt?(t=Me,X_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Zs(t)):X_(Me,n.stateNode));break;case 4:i=Me,r=Mt,Me=n.stateNode.containerInfo,Mt=!0,zn(t,e,n),Me=i,Mt=r;break;case 0:case 11:case 14:case 15:sr(2,n,e),Ye||sr(4,n,e),zn(t,e,n);break;case 1:Ye||(Rn(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&ab(n,e,i)),zn(t,e,n);break;case 21:zn(t,e,n);break;case 22:Ye=(i=Ye)||n.memoizedState!==null,zn(t,e,n),Ye=i;break;default:zn(t,e,n)}}function db(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Zs(t)}catch(n){Ee(e,e.return,n)}}}function mb(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Zs(t)}catch(n){Ee(e,e.return,n)}}function RC(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new P_),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new P_),e;default:throw Error(z(435,t.tag))}}function lu(t,e){var n=RC(t);e.forEach(function(i){if(!n.has(i)){n.add(i);var r=kC.bind(null,t,i);i.then(r,r)}})}function Nt(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 27:if(mr(l.type)){Me=l.stateNode,Mt=!1;break e}break;case 5:Me=l.stateNode,Mt=!1;break e;case 3:case 4:Me=l.stateNode.containerInfo,Mt=!0;break e}l=l.return}if(Me===null)throw Error(z(160));fb(s,a,r),Me=null,Mt=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)pb(e,t),e=e.sibling}var fn=null;function pb(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Nt(e,t),Ot(t),i&4&&(sr(3,t,t.return),_l(3,t),sr(5,t,t.return));break;case 1:Nt(e,t),Ot(t),i&512&&(Ye||n===null||Rn(n,n.return)),i&64&&Gn&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=fn;if(Nt(e,t),Ot(t),i&512&&(Ye||n===null||Rn(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[ml]||s[ft]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),gt(s,i,n),s[ft]=t,ot(s),i=s;break e;case"link":var a=iv("link","href",r).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(s=a[l],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break t}}s=r.createElement(i),gt(s,i,n),r.head.appendChild(s);break;case"meta":if(a=iv("meta","content",r).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(s=a[l],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break t}}s=r.createElement(i),gt(s,i,n),r.head.appendChild(s);break;default:throw Error(z(468,i))}s[ft]=t,ot(s),i=s}t.stateNode=i}else rv(r,t.type,t.stateNode);else t.stateNode=nv(r,i,t.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?rv(r,t.type,t.stateNode):nv(r,i,t.memoizedProps)):i===null&&t.stateNode!==null&&Nf(t,t.memoizedProps,n.memoizedProps)}break;case 27:Nt(e,t),Ot(t),i&512&&(Ye||n===null||Rn(n,n.return)),n!==null&&i&4&&Nf(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Nt(e,t),Ot(t),i&512&&(Ye||n===null||Rn(n,n.return)),t.flags&32){r=t.stateNode;try{Gs(r,"")}catch(x){Ee(t,t.return,x)}}i&4&&t.stateNode!=null&&(r=t.memoizedProps,Nf(t,r,n!==null?n.memoizedProps:r)),i&1024&&(Mf=!0);break;case 6:if(Nt(e,t),Ot(t),i&4){if(t.stateNode===null)throw Error(z(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(x){Ee(t,t.return,x)}}break;case 3:if(ku=null,r=fn,fn=Ec(e.containerInfo),Nt(e,t),fn=r,Ot(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Zs(e.containerInfo)}catch(x){Ee(t,t.return,x)}Mf&&(Mf=!1,gb(t));break;case 4:i=fn,fn=Ec(t.stateNode.containerInfo),Nt(e,t),Ot(t),fn=i;break;case 12:Nt(e,t),Ot(t);break;case 31:Nt(e,t),Ot(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,lu(t,i)));break;case 13:Nt(e,t),Ot(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(oh=Qt()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,lu(t,i)));break;case 22:r=t.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,c=Gn,f=Ye;if(Gn=c||r,Ye=f||u,Nt(e,t),Ye=f,Gn=c,Ot(t),i&8192)e:for(e=t.stateNode,e._visibility=r?e._visibility&-2:e._visibility|1,r&&(n===null||u||Gn||Ye||Nr(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){u=n=e;try{if(s=u.stateNode,r)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var d=u.memoizedProps.style,m=d!=null&&d.hasOwnProperty("display")?d.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(x){Ee(u,u.return,x)}}}else if(e.tag===6){if(n===null){u=e;try{u.stateNode.nodeValue=r?"":u.memoizedProps}catch(x){Ee(u,u.return,x)}}}else if(e.tag===18){if(n===null){u=e;try{var v=u.stateNode;r?W_(v,!0):W_(u.stateNode,!1)}catch(x){Ee(u,u.return,x)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,lu(t,n))));break;case 19:Nt(e,t),Ot(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,lu(t,i)));break;case 30:break;case 21:break;default:Nt(e,t),Ot(t)}}function Ot(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(lb(i)){n=i;break}i=i.return}if(n==null)throw Error(z(160));switch(n.tag){case 27:var r=n.stateNode,s=Of(t);fc(t,s,r);break;case 5:var a=n.stateNode;n.flags&32&&(Gs(a,""),n.flags&=-33);var l=Of(t);fc(t,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,c=Of(t);jd(t,c,u);break;default:throw Error(z(161))}}catch(f){Ee(t,t.return,f)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function gb(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;gb(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Bn(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)cb(t,e.alternate,e),e=e.sibling}function Nr(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:sr(4,e,e.return),Nr(e);break;case 1:Rn(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&ab(e,e.return,n),Nr(e);break;case 27:No(e.stateNode);case 26:case 5:Rn(e,e.return),Nr(e);break;case 22:e.memoizedState===null&&Nr(e);break;case 30:Nr(e);break;default:Nr(e)}t=t.sibling}}function qn(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,r=t,s=e,a=s.flags;switch(s.tag){case 0:case 11:case 15:qn(r,s,n),_l(4,s);break;case 1:if(qn(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(c){Ee(i,i.return,c)}if(i=s,r=i.updateQueue,r!==null){var l=i.stateNode;try{var u=r.shared.hiddenCallbacks;if(u!==null)for(r.shared.hiddenCallbacks=null,r=0;r<u.length;r++)dT(u[r],l)}catch(c){Ee(i,i.return,c)}}n&&a&64&&sb(s),Co(s,s.return);break;case 27:ub(s);case 26:case 5:qn(r,s,n),n&&i===null&&a&4&&ob(s),Co(s,s.return);break;case 12:qn(r,s,n);break;case 31:qn(r,s,n),n&&a&4&&db(r,s);break;case 13:qn(r,s,n),n&&a&4&&mb(r,s);break;case 22:s.memoizedState===null&&qn(r,s,n),Co(s,s.return);break;case 30:break;default:qn(r,s,n)}e=e.sibling}}function Ep(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&gl(n))}function Tp(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&gl(t))}function hn(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)yb(t,e,n,i),e=e.sibling}function yb(t,e,n,i){var r=e.flags;switch(e.tag){case 0:case 11:case 15:hn(t,e,n,i),r&2048&&_l(9,e);break;case 1:hn(t,e,n,i);break;case 3:hn(t,e,n,i),r&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&gl(t)));break;case 12:if(r&2048){hn(t,e,n,i),t=e.stateNode;try{var s=e.memoizedProps,a=s.id,l=s.onPostCommit;typeof l=="function"&&l(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(u){Ee(e,e.return,u)}}else hn(t,e,n,i);break;case 31:hn(t,e,n,i);break;case 13:hn(t,e,n,i);break;case 23:break;case 22:s=e.stateNode,a=e.alternate,e.memoizedState!==null?s._visibility&2?hn(t,e,n,i):Io(t,e):s._visibility&2?hn(t,e,n,i):(s._visibility|=2,ds(t,e,n,i,(e.subtreeFlags&10256)!==0||!1)),r&2048&&Ep(a,e);break;case 24:hn(t,e,n,i),r&2048&&Tp(e.alternate,e);break;default:hn(t,e,n,i)}}function ds(t,e,n,i,r){for(r=r&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var s=t,a=e,l=n,u=i,c=a.flags;switch(a.tag){case 0:case 11:case 15:ds(s,a,l,u,r),_l(8,a);break;case 23:break;case 22:var f=a.stateNode;a.memoizedState!==null?f._visibility&2?ds(s,a,l,u,r):Io(s,a):(f._visibility|=2,ds(s,a,l,u,r)),r&&c&2048&&Ep(a.alternate,a);break;case 24:ds(s,a,l,u,r),r&&c&2048&&Tp(a.alternate,a);break;default:ds(s,a,l,u,r)}e=e.sibling}}function Io(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,r=i.flags;switch(i.tag){case 22:Io(n,i),r&2048&&Ep(i.alternate,i);break;case 24:Io(n,i),r&2048&&Tp(i.alternate,i);break;default:Io(n,i)}e=e.sibling}}var co=8192;function hs(t,e,n){if(t.subtreeFlags&co)for(t=t.child;t!==null;)_b(t,e,n),t=t.sibling}function _b(t,e,n){switch(t.tag){case 26:hs(t,e,n),t.flags&co&&t.memoizedState!==null&&fI(n,fn,t.memoizedState,t.memoizedProps);break;case 5:hs(t,e,n);break;case 3:case 4:var i=fn;fn=Ec(t.stateNode.containerInfo),hs(t,e,n),fn=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=co,co=16777216,hs(t,e,n),co=i):hs(t,e,n));break;default:hs(t,e,n)}}function vb(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function to(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];at=i,Tb(i,t)}vb(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Eb(t),t=t.sibling}function Eb(t){switch(t.tag){case 0:case 11:case 15:to(t),t.flags&2048&&sr(9,t,t.return);break;case 3:to(t);break;case 12:to(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Mu(t)):to(t);break;default:to(t)}}function Mu(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];at=i,Tb(i,t)}vb(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:sr(8,e,e.return),Mu(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Mu(e));break;default:Mu(e)}t=t.sibling}}function Tb(t,e){for(;at!==null;){var n=at;switch(n.tag){case 0:case 11:case 15:sr(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:gl(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,at=i;else e:for(n=t;at!==null;){i=at;var r=i.sibling,s=i.return;if(hb(i),i===n){at=null;break e}if(r!==null){r.return=s,at=r;break e}at=s}}}var CC={getCacheForType:function(t){var e=pt(Xe),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return pt(Xe).controller.signal}},IC=typeof WeakMap=="function"?WeakMap:Map,ge=0,Ae=null,oe=null,fe=0,ve=0,Bt=null,ji=!1,ma=!1,bp=!1,li=0,Be=0,ar=0,Ur=0,Sp=0,Ft=0,Ys=0,xo=null,Vt=null,zd=!1,oh=0,bb=0,dc=1/0,mc=null,Ki=null,tt=0,$i=null,Xs=null,ei=0,Bd=0,qd=null,Sb=null,Do=0,Hd=null;function Yt(){return ge&2&&fe!==0?fe&-fe:ee.T!==null?wp():O0()}function Ab(){if(Ft===0)if(!(fe&536870912)||me){var t=eu;eu<<=1,!(eu&3932160)&&(eu=262144),Ft=t}else Ft=536870912;return t=Wt.current,t!==null&&(t.flags|=32),Ft}function Pt(t,e,n){(t===Ae&&(ve===2||ve===9)||t.cancelPendingCommit!==null)&&(Ws(t,0),zi(t,fe,Ft,!1)),dl(t,n),(!(ge&2)||t!==Ae)&&(t===Ae&&(!(ge&2)&&(Ur|=n),Be===4&&zi(t,fe,Ft,!1)),Pn(t))}function wb(t,e,n){if(ge&6)throw Error(z(327));var i=!n&&(e&127)===0&&(e&t.expiredLanes)===0||fl(t,e),r=i?NC(t,e):Vf(t,e,!0),s=i;do{if(r===0){ma&&!i&&zi(t,e,0,!1);break}else{if(n=t.current.alternate,s&&!xC(n)){r=Vf(t,e,!1),s=!1;continue}if(r===2){if(s=e,t.errorRecoveryDisabledLanes&s)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var l=t;r=xo;var u=l.current.memoizedState.isDehydrated;if(u&&(Ws(l,a).flags|=256),a=Vf(l,a,!1),a!==2){if(bp&&!u){l.errorRecoveryDisabledLanes|=s,Ur|=s,r=4;break e}s=Vt,Vt=r,s!==null&&(Vt===null?Vt=s:Vt.push.apply(Vt,s))}r=a}if(s=!1,r!==2)continue}}if(r===1){Ws(t,0),zi(t,e,0,!0);break}e:{switch(i=t,s=r,s){case 0:case 1:throw Error(z(345));case 4:if((e&4194048)!==e)break;case 6:zi(i,e,Ft,!ji);break e;case 2:Vt=null;break;case 3:case 5:break;default:throw Error(z(329))}if((e&62914560)===e&&(r=oh+300-Qt(),10<r)){if(zi(i,e,Ft,!ji),Xc(i,0,!0)!==0)break e;ei=e,i.timeoutHandle=Gb(U_.bind(null,i,n,Vt,mc,zd,e,Ft,Ur,Ys,ji,s,"Throttled",-0,0),r);break e}U_(i,n,Vt,mc,zd,e,Ft,Ur,Ys,ji,s,null,-0,0)}}break}while(!0);Pn(t)}function U_(t,e,n,i,r,s,a,l,u,c,f,d,m,v){if(t.timeoutHandle=-1,d=e.subtreeFlags,d&8192||(d&16785408)===16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:$n},_b(e,s,d);var x=(s&62914560)===s?oh-Qt():(s&4194048)===s?bb-Qt():0;if(x=dI(d,x),x!==null){ei=s,t.cancelPendingCommit=x(z_.bind(null,t,e,s,n,i,r,a,l,u,f,d,null,m,v)),zi(t,s,a,!c);return}}z_(t,e,s,n,i,r,a,l,u)}function xC(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Xt(s(),r))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zi(t,e,n,i){e&=~Sp,e&=~Ur,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var r=e;0<r;){var s=31-$t(r),a=1<<s;i[s]=-1,r&=~a}n!==0&&x0(t,n,e)}function lh(){return ge&6?!0:(vl(0),!1)}function Ap(){if(oe!==null){if(ve===0)var t=oe.return;else t=oe,Yn=ns=null,up(t),Ls=null,Qo=0,t=oe;for(;t!==null;)rb(t.alternate,t),t=t.return;oe=null}}function Ws(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,YC(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),ei=0,Ap(),Ae=t,oe=n=Jn(t.current,null),fe=e,ve=0,Bt=null,ji=!1,ma=fl(t,e),bp=!1,Ys=Ft=Sp=Ur=ar=Be=0,Vt=xo=null,zd=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var r=31-$t(i),s=1<<r;e|=t[r],i&=~s}return li=e,eh(),n}function Rb(t,e){re=null,ee.H=$o,e===da||e===nh?(e=g_(),ve=3):e===np?(e=g_(),ve=4):ve=e===_p?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Bt=e,oe===null&&(Be=1,cc(t,rn(e,t.current)))}function Cb(){var t=Wt.current;return t===null?!0:(fe&4194048)===fe?ln===null:(fe&62914560)===fe||fe&536870912?t===ln:!1}function Ib(){var t=ee.H;return ee.H=$o,t===null?$o:t}function xb(){var t=ee.A;return ee.A=CC,t}function pc(){Be=4,ji||(fe&4194048)!==fe&&Wt.current!==null||(ma=!0),!(ar&134217727)&&!(Ur&134217727)||Ae===null||zi(Ae,fe,Ft,!1)}function Vf(t,e,n){var i=ge;ge|=2;var r=Ib(),s=xb();(Ae!==t||fe!==e)&&(mc=null,Ws(t,e)),e=!1;var a=Be;e:do try{if(ve!==0&&oe!==null){var l=oe,u=Bt;switch(ve){case 8:Ap(),a=6;break e;case 3:case 2:case 9:case 6:Wt.current===null&&(e=!0);var c=ve;if(ve=0,Bt=null,Ds(t,l,u,c),n&&ma){a=0;break e}break;default:c=ve,ve=0,Bt=null,Ds(t,l,u,c)}}DC(),a=Be;break}catch(f){Rb(t,f)}while(!0);return e&&t.shellSuspendCounter++,Yn=ns=null,ge=i,ee.H=r,ee.A=s,oe===null&&(Ae=null,fe=0,eh()),a}function DC(){for(;oe!==null;)Db(oe)}function NC(t,e){var n=ge;ge|=2;var i=Ib(),r=xb();Ae!==t||fe!==e?(mc=null,dc=Qt()+500,Ws(t,e)):ma=fl(t,e);e:do try{if(ve!==0&&oe!==null){e=oe;var s=Bt;t:switch(ve){case 1:ve=0,Bt=null,Ds(t,e,s,1);break;case 2:case 9:if(p_(s)){ve=0,Bt=null,j_(e);break}e=function(){ve!==2&&ve!==9||Ae!==t||(ve=7),Pn(t)},s.then(e,e);break e;case 3:ve=7;break e;case 4:ve=5;break e;case 7:p_(s)?(ve=0,Bt=null,j_(e)):(ve=0,Bt=null,Ds(t,e,s,7));break;case 5:var a=null;switch(oe.tag){case 26:a=oe.memoizedState;case 5:case 27:var l=oe;if(a?Xb(a):l.stateNode.complete){ve=0,Bt=null;var u=l.sibling;if(u!==null)oe=u;else{var c=l.return;c!==null?(oe=c,uh(c)):oe=null}break t}}ve=0,Bt=null,Ds(t,e,s,5);break;case 6:ve=0,Bt=null,Ds(t,e,s,6);break;case 8:Ap(),Be=6;break e;default:throw Error(z(462))}}OC();break}catch(f){Rb(t,f)}while(!0);return Yn=ns=null,ee.H=i,ee.A=r,ge=n,oe!==null?0:(Ae=null,fe=0,eh(),Be)}function OC(){for(;oe!==null&&!tR();)Db(oe)}function Db(t){var e=ib(t.alternate,t,li);t.memoizedProps=t.pendingProps,e===null?uh(t):oe=e}function j_(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=O_(n,e,e.pendingProps,e.type,void 0,fe);break;case 11:e=O_(n,e,e.pendingProps,e.type.render,e.ref,fe);break;case 5:up(e);default:rb(n,e),e=oe=rT(e,li),e=ib(n,e,li)}t.memoizedProps=t.pendingProps,e===null?uh(t):oe=e}function Ds(t,e,n,i){Yn=ns=null,up(e),Ls=null,Qo=0;var r=e.return;try{if(EC(t,r,e,n,fe)){Be=1,cc(t,rn(n,t.current)),oe=null;return}}catch(s){if(r!==null)throw oe=r,s;Be=1,cc(t,rn(n,t.current)),oe=null;return}e.flags&32768?(me||i===1?t=!0:ma||fe&536870912?t=!1:(ji=t=!0,(i===2||i===9||i===3||i===6)&&(i=Wt.current,i!==null&&i.tag===13&&(i.flags|=16384))),Nb(e,t)):uh(e)}function uh(t){var e=t;do{if(e.flags&32768){Nb(e,ji);return}t=e.return;var n=SC(e.alternate,e,li);if(n!==null){oe=n;return}if(e=e.sibling,e!==null){oe=e;return}oe=e=t}while(e!==null);Be===0&&(Be=5)}function Nb(t,e){do{var n=AC(t.alternate,t);if(n!==null){n.flags&=32767,oe=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){oe=t;return}oe=t=n}while(t!==null);Be=6,oe=null}function z_(t,e,n,i,r,s,a,l,u){t.cancelPendingCommit=null;do ch();while(tt!==0);if(ge&6)throw Error(z(327));if(e!==null){if(e===t.current)throw Error(z(177));if(s=e.lanes|e.childLanes,s|=Ym,hR(t,n,s,a,l,u),t===Ae&&(oe=Ae=null,fe=0),Xs=e,$i=t,ei=n,Bd=s,qd=r,Sb=i,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,LC(Zu,function(){return Lb(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=ee.T,ee.T=null,r=ye.p,ye.p=2,a=ge,ge|=4;try{wC(t,e,n)}finally{ge=a,ye.p=r,ee.T=i}}tt=1,Ob(),Mb(),Vb()}}function Ob(){if(tt===1){tt=0;var t=$i,e=Xs,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=ee.T,ee.T=null;var i=ye.p;ye.p=2;var r=ge;ge|=4;try{pb(e,t);var s=Kd,a=X0(t.containerInfo),l=s.focusedElem,u=s.selectionRange;if(a!==l&&l&&l.ownerDocument&&Y0(l.ownerDocument.documentElement,l)){if(u!==null&&$m(l)){var c=u.start,f=u.end;if(f===void 0&&(f=c),"selectionStart"in l)l.selectionStart=c,l.selectionEnd=Math.min(f,l.value.length);else{var d=l.ownerDocument||document,m=d&&d.defaultView||window;if(m.getSelection){var v=m.getSelection(),x=l.textContent.length,M=Math.min(u.start,x),O=u.end===void 0?M:Math.min(u.end,x);!v.extend&&M>O&&(a=O,O=M,M=a);var A=l_(l,M),T=l_(l,O);if(A&&T&&(v.rangeCount!==1||v.anchorNode!==A.node||v.anchorOffset!==A.offset||v.focusNode!==T.node||v.focusOffset!==T.offset)){var E=d.createRange();E.setStart(A.node,A.offset),v.removeAllRanges(),M>O?(v.addRange(E),v.extend(T.node,T.offset)):(E.setEnd(T.node,T.offset),v.addRange(E))}}}}for(d=[],v=l;v=v.parentNode;)v.nodeType===1&&d.push({element:v,left:v.scrollLeft,top:v.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<d.length;l++){var N=d[l];N.element.scrollLeft=N.left,N.element.scrollTop=N.top}}Sc=!!Qd,Kd=Qd=null}finally{ge=r,ye.p=i,ee.T=n}}t.current=e,tt=2}}function Mb(){if(tt===2){tt=0;var t=$i,e=Xs,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=ee.T,ee.T=null;var i=ye.p;ye.p=2;var r=ge;ge|=4;try{cb(t,e.alternate,e)}finally{ge=r,ye.p=i,ee.T=n}}tt=3}}function Vb(){if(tt===4||tt===3){tt=0,nR();var t=$i,e=Xs,n=ei,i=Sb;e.subtreeFlags&10256||e.flags&10256?tt=5:(tt=0,Xs=$i=null,kb(t,t.pendingLanes));var r=t.pendingLanes;if(r===0&&(Ki=null),Bm(n),e=e.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(hl,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=ee.T,r=ye.p,ye.p=2,ee.T=null;try{for(var s=t.onRecoverableError,a=0;a<i.length;a++){var l=i[a];s(l.value,{componentStack:l.stack})}}finally{ee.T=e,ye.p=r}}ei&3&&ch(),Pn(t),r=t.pendingLanes,n&261930&&r&42?t===Hd?Do++:(Do=0,Hd=t):Do=0,vl(0)}}function kb(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,gl(e)))}function ch(){return Ob(),Mb(),Vb(),Lb()}function Lb(){if(tt!==5)return!1;var t=$i,e=Bd;Bd=0;var n=Bm(ei),i=ee.T,r=ye.p;try{ye.p=32>n?32:n,ee.T=null,n=qd,qd=null;var s=$i,a=ei;if(tt=0,Xs=$i=null,ei=0,ge&6)throw Error(z(331));var l=ge;if(ge|=4,Eb(s.current),yb(s,s.current,a,n),ge=l,vl(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(hl,s)}catch{}return!0}finally{ye.p=r,ee.T=i,kb(t,e)}}function B_(t,e,n){e=rn(n,e),e=Ld(t.stateNode,e,2),t=Qi(t,e,2),t!==null&&(dl(t,2),Pn(t))}function Ee(t,e,n){if(t.tag===3)B_(t,t,n);else for(;e!==null;){if(e.tag===3){B_(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ki===null||!Ki.has(i))){t=rn(n,t),n=WT(2),i=Qi(e,n,2),i!==null&&(JT(n,i,e,t),dl(i,2),Pn(i));break}}e=e.return}}function kf(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new IC;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(bp=!0,r.add(n),t=MC.bind(null,t,e,n),e.then(t,t))}function MC(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Ae===t&&(fe&n)===n&&(Be===4||Be===3&&(fe&62914560)===fe&&300>Qt()-oh?!(ge&2)&&Ws(t,0):Sp|=n,Ys===fe&&(Ys=0)),Pn(t)}function Pb(t,e){e===0&&(e=I0()),t=ts(t,e),t!==null&&(dl(t,e),Pn(t))}function VC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Pb(t,n)}function kC(t,e){var n=0;switch(t.tag){case 31:case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(z(314))}i!==null&&i.delete(e),Pb(t,n)}function LC(t,e){return jm(t,e)}var gc=null,ms=null,Fd=!1,yc=!1,Lf=!1,Bi=0;function Pn(t){t!==ms&&t.next===null&&(ms===null?gc=ms=t:ms=ms.next=t),yc=!0,Fd||(Fd=!0,UC())}function vl(t,e){if(!Lf&&yc){Lf=!0;do for(var n=!1,i=gc;i!==null;){if(t!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var a=i.suspendedLanes,l=i.pingedLanes;s=(1<<31-$t(42|t)+1)-1,s&=r&~(a&~l),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,q_(i,s))}else s=fe,s=Xc(i,i===Ae?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||fl(i,s)||(n=!0,q_(i,s));i=i.next}while(n);Lf=!1}}function PC(){Ub()}function Ub(){yc=Fd=!1;var t=0;Bi!==0&&$C()&&(t=Bi);for(var e=Qt(),n=null,i=gc;i!==null;){var r=i.next,s=jb(i,e);s===0?(i.next=null,n===null?gc=r:n.next=r,r===null&&(ms=n)):(n=i,(t!==0||s&3)&&(yc=!0)),i=r}tt!==0&&tt!==5||vl(t),Bi!==0&&(Bi=0)}function jb(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes&-62914561;0<s;){var a=31-$t(s),l=1<<a,u=r[a];u===-1?(!(l&n)||l&i)&&(r[a]=cR(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}if(e=Ae,n=fe,n=Xc(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(ve===2||ve===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&cf(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||fl(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&cf(i),Bm(n)){case 2:case 8:n=R0;break;case 32:n=Zu;break;case 268435456:n=C0;break;default:n=Zu}return i=zb.bind(null,t),n=jm(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&cf(i),t.callbackPriority=2,t.callbackNode=null,2}function zb(t,e){if(tt!==0&&tt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(ch()&&t.callbackNode!==n)return null;var i=fe;return i=Xc(t,t===Ae?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(wb(t,i,e),jb(t,Qt()),t.callbackNode!=null&&t.callbackNode===n?zb.bind(null,t):null)}function q_(t,e){if(ch())return null;wb(t,e,!0)}function UC(){XC(function(){ge&6?jm(w0,PC):Ub()})}function wp(){if(Bi===0){var t=Qs;t===0&&(t=Zl,Zl<<=1,!(Zl&261888)&&(Zl=256)),Bi=t}return Bi}function H_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Au(""+t)}function F_(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function jC(t,e,n,i,r){if(e==="submit"&&n&&n.stateNode===r){var s=H_((r[Ut]||null).action),a=i.submitter;a&&(e=(e=a[Ut]||null)?H_(e.formAction):a.getAttribute("formAction"),e!==null&&(s=e,a=null));var l=new Wc("action","action",null,i,r);t.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Bi!==0){var u=a?F_(r,a):new FormData(r);Vd(n,{pending:!0,data:u,method:r.method,action:s},null,u)}}else typeof s=="function"&&(l.preventDefault(),u=a?F_(r,a):new FormData(r),Vd(n,{pending:!0,data:u,method:r.method,action:s},s,u))},currentTarget:r}]})}}for(var Pf=0;Pf<bd.length;Pf++){var Uf=bd[Pf],zC=Uf.toLowerCase(),BC=Uf[0].toUpperCase()+Uf.slice(1);_n(zC,"on"+BC)}_n(J0,"onAnimationEnd");_n(Z0,"onAnimationIteration");_n(eT,"onAnimationStart");_n("dblclick","onDoubleClick");_n("focusin","onFocus");_n("focusout","onBlur");_n(iC,"onTransitionRun");_n(rC,"onTransitionStart");_n(sC,"onTransitionCancel");_n(tT,"onTransitionEnd");Fs("onMouseEnter",["mouseout","mouseover"]);Fs("onMouseLeave",["mouseout","mouseover"]);Fs("onPointerEnter",["pointerout","pointerover"]);Fs("onPointerLeave",["pointerout","pointerover"]);Jr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yo));function Bb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==s&&r.isPropagationStopped())break e;s=l,r.currentTarget=c;try{s(r)}catch(f){tc(f)}r.currentTarget=null,s=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,c=l.currentTarget,l=l.listener,u!==s&&r.isPropagationStopped())break e;s=l,r.currentTarget=c;try{s(r)}catch(f){tc(f)}r.currentTarget=null,s=u}}}}function ae(t,e){var n=e[md];n===void 0&&(n=e[md]=new Set);var i=t+"__bubble";n.has(i)||(qb(e,t,2,!1),n.add(i))}function jf(t,e,n){var i=0;e&&(i|=4),qb(n,t,i,e)}var uu="_reactListening"+Math.random().toString(36).slice(2);function Rp(t){if(!t[uu]){t[uu]=!0,M0.forEach(function(n){n!=="selectionchange"&&(qC.has(n)||jf(n,!1,t),jf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[uu]||(e[uu]=!0,jf("selectionchange",!1,e))}}function qb(t,e,n,i){switch(t1(e)){case 2:var r=gI;break;case 8:r=yI;break;default:r=Dp}n=r.bind(null,e,n,t),r=void 0,!vd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function zf(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===r)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;l!==null;){if(a=Ts(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=s=a;continue e}l=l.parentNode}}i=i.return}B0(function(){var c=s,f=Fm(n),d=[];e:{var m=nT.get(t);if(m!==void 0){var v=Wc,x=t;switch(t){case"keypress":if(Ru(n)===0)break e;case"keydown":case"keyup":v=kR;break;case"focusin":x="focus",v=pf;break;case"focusout":x="blur",v=pf;break;case"beforeblur":case"afterblur":v=pf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Jy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=SR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=UR;break;case J0:case Z0:case eT:v=RR;break;case tT:v=zR;break;case"scroll":case"scrollend":v=TR;break;case"wheel":v=qR;break;case"copy":case"cut":case"paste":v=IR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=e_;break;case"toggle":case"beforetoggle":v=FR}var M=(e&4)!==0,O=!M&&(t==="scroll"||t==="scrollend"),A=M?m!==null?m+"Capture":null:m;M=[];for(var T=c,E;T!==null;){var N=T;if(E=N.stateNode,N=N.tag,N!==5&&N!==26&&N!==27||E===null||A===null||(N=Bo(T,A),N!=null&&M.push(Xo(T,N,E))),O)break;T=T.return}0<M.length&&(m=new v(m,x,null,n,f),d.push({event:m,listeners:M}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",m&&n!==_d&&(x=n.relatedTarget||n.fromElement)&&(Ts(x)||x[ca]))break e;if((v||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,v?(x=n.relatedTarget||n.toElement,v=c,x=x?Ts(x):null,x!==null&&(O=cl(x),M=x.tag,x!==O||M!==5&&M!==27&&M!==6)&&(x=null)):(v=null,x=c),v!==x)){if(M=Jy,N="onMouseLeave",A="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(M=e_,N="onPointerLeave",A="onPointerEnter",T="pointer"),O=v==null?m:lo(v),E=x==null?m:lo(x),m=new M(N,T+"leave",v,n,f),m.target=O,m.relatedTarget=E,N=null,Ts(f)===c&&(M=new M(A,T+"enter",x,n,f),M.target=E,M.relatedTarget=O,N=M),O=N,v&&x)t:{for(M=HC,A=v,T=x,E=0,N=A;N;N=M(N))E++;N=0;for(var P=T;P;P=M(P))N++;for(;0<E-N;)A=M(A),E--;for(;0<N-E;)T=M(T),N--;for(;E--;){if(A===T||T!==null&&A===T.alternate){M=A;break t}A=M(A),T=M(T)}M=null}else M=null;v!==null&&G_(d,m,v,M,!1),x!==null&&O!==null&&G_(d,O,x,M,!0)}}e:{if(m=c?lo(c):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var G=r_;else if(i_(m))if(K0)G=eC;else{G=JR;var y=WR}else v=m.nodeName,!v||v.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?c&&Hm(c.elementType)&&(G=r_):G=ZR;if(G&&(G=G(t,c))){Q0(d,G,n,f);break e}y&&y(t,m,c),t==="focusout"&&c&&m.type==="number"&&c.memoizedProps.value!=null&&yd(m,"number",m.value)}switch(y=c?lo(c):window,t){case"focusin":(i_(y)||y.contentEditable==="true")&&(As=y,Ed=c,To=null);break;case"focusout":To=Ed=As=null;break;case"mousedown":Td=!0;break;case"contextmenu":case"mouseup":case"dragend":Td=!1,u_(d,n,f);break;case"selectionchange":if(nC)break;case"keydown":case"keyup":u_(d,n,f)}var _;if(Km)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Ss?F0(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(H0&&n.locale!=="ko"&&(Ss||S!=="onCompositionStart"?S==="onCompositionEnd"&&Ss&&(_=q0()):(Ui=f,Gm="value"in Ui?Ui.value:Ui.textContent,Ss=!0)),y=_c(c,S),0<y.length&&(S=new Zy(S,t,null,n,f),d.push({event:S,listeners:y}),_?S.data=_:(_=G0(n),_!==null&&(S.data=_)))),(_=QR?KR(t,n):$R(t,n))&&(S=_c(c,"onBeforeInput"),0<S.length&&(y=new Zy("onBeforeInput","beforeinput",null,n,f),d.push({event:y,listeners:S}),y.data=_)),jC(d,t,c,n,f)}Bb(d,e)})}function Xo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function _c(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=Bo(t,n),r!=null&&i.unshift(Xo(t,r,s)),r=Bo(t,e),r!=null&&i.push(Xo(t,r,s))),t.tag===3)return i;t=t.return}return[]}function HC(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function G_(t,e,n,i,r){for(var s=e._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,c=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||c===null||(u=c,r?(c=Bo(n,s),c!=null&&a.unshift(Xo(n,c,u))):r||(c=Bo(n,s),c!=null&&a.push(Xo(n,c,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var FC=/\r\n?/g,GC=/\u0000|\uFFFD/g;function Q_(t){return(typeof t=="string"?t:""+t).replace(FC,`
`).replace(GC,"")}function Hb(t,e){return e=Q_(e),Q_(t)===e}function Te(t,e,n,i,r,s){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||Gs(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&Gs(t,""+i);break;case"className":nu(t,"class",i);break;case"tabIndex":nu(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":nu(t,n,i);break;case"style":z0(t,i,s);break;case"data":if(e!=="object"){nu(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Au(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(e!=="input"&&Te(t,e,"name",r.name,r,null),Te(t,e,"formEncType",r.formEncType,r,null),Te(t,e,"formMethod",r.formMethod,r,null),Te(t,e,"formTarget",r.formTarget,r,null)):(Te(t,e,"encType",r.encType,r,null),Te(t,e,"method",r.method,r,null),Te(t,e,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Au(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=$n);break;case"onScroll":i!=null&&ae("scroll",t);break;case"onScrollEnd":i!=null&&ae("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(z(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(z(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=Au(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":ae("beforetoggle",t),ae("toggle",t),Su(t,"popover",i);break;case"xlinkActuate":Un(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Un(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Un(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Un(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Un(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Un(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Un(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Un(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Un(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Su(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=vR.get(n)||n,Su(t,n,i))}}function Gd(t,e,n,i,r,s){switch(n){case"style":z0(t,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(z(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(z(60));t.innerHTML=n}}break;case"children":typeof i=="string"?Gs(t,i):(typeof i=="number"||typeof i=="bigint")&&Gs(t,""+i);break;case"onScroll":i!=null&&ae("scroll",t);break;case"onScrollEnd":i!=null&&ae("scrollend",t);break;case"onClick":i!=null&&(t.onclick=$n);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!V0.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),e=n.slice(2,r?n.length-7:void 0),s=t[Ut]||null,s=s!=null?s[n]:null,typeof s=="function"&&t.removeEventListener(e,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,r);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):Su(t,n,i)}}}function gt(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ae("error",t),ae("load",t);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(z(137,e));default:Te(t,e,s,a,n,null)}}r&&Te(t,e,"srcSet",n.srcSet,n,null),i&&Te(t,e,"src",n.src,n,null);return;case"input":ae("invalid",t);var l=s=a=r=null,u=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var f=n[i];if(f!=null)switch(i){case"name":r=f;break;case"type":a=f;break;case"checked":u=f;break;case"defaultChecked":c=f;break;case"value":s=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(z(137,e));break;default:Te(t,e,i,f,n,null)}}P0(t,s,l,u,c,a,r,!1);return;case"select":ae("invalid",t),i=a=s=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":s=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:Te(t,e,r,l,n,null)}e=s,n=a,t.multiple=!!i,e!=null?Ms(t,!!i,e,!1):n!=null&&Ms(t,!!i,n,!0);return;case"textarea":ae("invalid",t),s=r=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":r=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(z(91));break;default:Te(t,e,a,l,n,null)}j0(t,i,r,s);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Te(t,e,u,i,n,null)}return;case"dialog":ae("beforetoggle",t),ae("toggle",t),ae("cancel",t),ae("close",t);break;case"iframe":case"object":ae("load",t);break;case"video":case"audio":for(i=0;i<Yo.length;i++)ae(Yo[i],t);break;case"image":ae("error",t),ae("load",t);break;case"details":ae("toggle",t);break;case"embed":case"source":case"link":ae("error",t),ae("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(z(137,e));default:Te(t,e,c,i,n,null)}return;default:if(Hm(e)){for(f in n)n.hasOwnProperty(f)&&(i=n[f],i!==void 0&&Gd(t,e,f,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&Te(t,e,l,i,n,null))}function QC(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,l=null,u=null,c=null,f=null;for(v in n){var d=n[v];if(n.hasOwnProperty(v)&&d!=null)switch(v){case"checked":break;case"value":break;case"defaultValue":u=d;default:i.hasOwnProperty(v)||Te(t,e,v,null,i,d)}}for(var m in i){var v=i[m];if(d=n[m],i.hasOwnProperty(m)&&(v!=null||d!=null))switch(m){case"type":s=v;break;case"name":r=v;break;case"checked":c=v;break;case"defaultChecked":f=v;break;case"value":a=v;break;case"defaultValue":l=v;break;case"children":case"dangerouslySetInnerHTML":if(v!=null)throw Error(z(137,e));break;default:v!==d&&Te(t,e,m,v,i,d)}}gd(t,a,l,u,c,f,s,r);return;case"select":v=a=l=m=null;for(s in n)if(u=n[s],n.hasOwnProperty(s)&&u!=null)switch(s){case"value":break;case"multiple":v=u;default:i.hasOwnProperty(s)||Te(t,e,s,null,i,u)}for(r in i)if(s=i[r],u=n[r],i.hasOwnProperty(r)&&(s!=null||u!=null))switch(r){case"value":m=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==u&&Te(t,e,r,s,i,u)}e=l,n=a,i=v,m!=null?Ms(t,!!n,m,!1):!!i!=!!n&&(e!=null?Ms(t,!!n,e,!0):Ms(t,!!n,n?[]:"",!1));return;case"textarea":v=m=null;for(l in n)if(r=n[l],n.hasOwnProperty(l)&&r!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Te(t,e,l,null,i,r)}for(a in i)if(r=i[a],s=n[a],i.hasOwnProperty(a)&&(r!=null||s!=null))switch(a){case"value":m=r;break;case"defaultValue":v=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(z(91));break;default:r!==s&&Te(t,e,a,r,i,s)}U0(t,m,v);return;case"option":for(var x in n)if(m=n[x],n.hasOwnProperty(x)&&m!=null&&!i.hasOwnProperty(x))switch(x){case"selected":t.selected=!1;break;default:Te(t,e,x,null,i,m)}for(u in i)if(m=i[u],v=n[u],i.hasOwnProperty(u)&&m!==v&&(m!=null||v!=null))switch(u){case"selected":t.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Te(t,e,u,m,i,v)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var M in n)m=n[M],n.hasOwnProperty(M)&&m!=null&&!i.hasOwnProperty(M)&&Te(t,e,M,null,i,m);for(c in i)if(m=i[c],v=n[c],i.hasOwnProperty(c)&&m!==v&&(m!=null||v!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(z(137,e));break;default:Te(t,e,c,m,i,v)}return;default:if(Hm(e)){for(var O in n)m=n[O],n.hasOwnProperty(O)&&m!==void 0&&!i.hasOwnProperty(O)&&Gd(t,e,O,void 0,i,m);for(f in i)m=i[f],v=n[f],!i.hasOwnProperty(f)||m===v||m===void 0&&v===void 0||Gd(t,e,f,m,i,v);return}}for(var A in n)m=n[A],n.hasOwnProperty(A)&&m!=null&&!i.hasOwnProperty(A)&&Te(t,e,A,null,i,m);for(d in i)m=i[d],v=n[d],!i.hasOwnProperty(d)||m===v||m==null&&v==null||Te(t,e,d,m,i,v)}function K_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function KC(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var r=n[i],s=r.transferSize,a=r.initiatorType,l=r.duration;if(s&&l&&K_(a)){for(a=0,l=r.responseEnd,i+=1;i<n.length;i++){var u=n[i],c=u.startTime;if(c>l)break;var f=u.transferSize,d=u.initiatorType;f&&K_(d)&&(u=u.responseEnd,a+=f*(u<l?1:(l-c)/(u-c)))}if(--i,e+=8*(s+a)/(r.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Qd=null,Kd=null;function vc(t){return t.nodeType===9?t:t.ownerDocument}function $_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Fb(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function $d(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bf=null;function $C(){var t=window.event;return t&&t.type==="popstate"?t===Bf?!1:(Bf=t,!0):(Bf=null,!1)}var Gb=typeof setTimeout=="function"?setTimeout:void 0,YC=typeof clearTimeout=="function"?clearTimeout:void 0,Y_=typeof Promise=="function"?Promise:void 0,XC=typeof queueMicrotask=="function"?queueMicrotask:typeof Y_<"u"?function(t){return Y_.resolve(null).then(t).catch(WC)}:Gb;function WC(t){setTimeout(function(){throw t})}function mr(t){return t==="head"}function X_(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"||n==="/&"){if(i===0){t.removeChild(r),Zs(e);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")No(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,No(n);for(var s=n.firstChild;s;){var a=s.nextSibling,l=s.nodeName;s[ml]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=a}}else n==="body"&&No(t.ownerDocument.body);n=r}while(n);Zs(e)}function W_(t,e){var n=t;t=0;do{var i=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=i}while(n)}function Yd(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Yd(n),qm(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function JC(t,e,n,i){for(;t.nodeType===1;){var r=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[ml])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(s=t.getAttribute("rel"),s==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(s!==r.rel||t.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||t.getAttribute("title")!==(r.title==null?null:r.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(s=t.getAttribute("src"),(s!==(r.src==null?null:r.src)||t.getAttribute("type")!==(r.type==null?null:r.type)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&t.getAttribute("name")===s)return t}else return t;if(t=un(t.nextSibling),t===null)break}return null}function ZC(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=un(t.nextSibling),t===null))return null;return t}function Qb(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=un(t.nextSibling),t===null))return null;return t}function Xd(t){return t.data==="$?"||t.data==="$~"}function Wd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function eI(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function un(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var Jd=null;function J_(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return un(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function Z_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function Kb(t,e,n){switch(e=vc(n),t){case"html":if(t=e.documentElement,!t)throw Error(z(452));return t;case"head":if(t=e.head,!t)throw Error(z(453));return t;case"body":if(t=e.body,!t)throw Error(z(454));return t;default:throw Error(z(451))}}function No(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);qm(t)}var cn=new Map,ev=new Set;function Ec(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var gi=ye.d;ye.d={f:tI,r:nI,D:iI,C:rI,L:sI,m:aI,X:lI,S:oI,M:uI};function tI(){var t=gi.f(),e=lh();return t||e}function nI(t){var e=ha(t);e!==null&&e.tag===5&&e.type==="form"?zT(e):gi.r(t)}var pa=typeof document>"u"?null:document;function $b(t,e,n){var i=pa;if(i&&typeof e=="string"&&e){var r=nn(e);r='link[rel="'+t+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),ev.has(r)||(ev.add(r),t={rel:t,crossOrigin:n,href:e},i.querySelector(r)===null&&(e=i.createElement("link"),gt(e,"link",t),ot(e),i.head.appendChild(e)))}}function iI(t){gi.D(t),$b("dns-prefetch",t,null)}function rI(t,e){gi.C(t,e),$b("preconnect",t,e)}function sI(t,e,n){gi.L(t,e,n);var i=pa;if(i&&t&&e){var r='link[rel="preload"][as="'+nn(e)+'"]';e==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+nn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+nn(n.imageSizes)+'"]')):r+='[href="'+nn(t)+'"]';var s=r;switch(e){case"style":s=Js(t);break;case"script":s=ga(t)}cn.has(s)||(t=Oe({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),cn.set(s,t),i.querySelector(r)!==null||e==="style"&&i.querySelector(El(s))||e==="script"&&i.querySelector(Tl(s))||(e=i.createElement("link"),gt(e,"link",t),ot(e),i.head.appendChild(e)))}}function aI(t,e){gi.m(t,e);var n=pa;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",r='link[rel="modulepreload"][as="'+nn(i)+'"][href="'+nn(t)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=ga(t)}if(!cn.has(s)&&(t=Oe({rel:"modulepreload",href:t},e),cn.set(s,t),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Tl(s)))return}i=n.createElement("link"),gt(i,"link",t),ot(i),n.head.appendChild(i)}}}function oI(t,e,n){gi.S(t,e,n);var i=pa;if(i&&t){var r=Os(i).hoistableStyles,s=Js(t);e=e||"default";var a=r.get(s);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(El(s)))l.loading=5;else{t=Oe({rel:"stylesheet",href:t,"data-precedence":e},n),(n=cn.get(s))&&Cp(t,n);var u=a=i.createElement("link");ot(u),gt(u,"link",t),u._p=new Promise(function(c,f){u.onload=c,u.onerror=f}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Vu(a,e,i)}a={type:"stylesheet",instance:a,count:1,state:l},r.set(s,a)}}}function lI(t,e){gi.X(t,e);var n=pa;if(n&&t){var i=Os(n).hoistableScripts,r=ga(t),s=i.get(r);s||(s=n.querySelector(Tl(r)),s||(t=Oe({src:t,async:!0},e),(e=cn.get(r))&&Ip(t,e),s=n.createElement("script"),ot(s),gt(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function uI(t,e){gi.M(t,e);var n=pa;if(n&&t){var i=Os(n).hoistableScripts,r=ga(t),s=i.get(r);s||(s=n.querySelector(Tl(r)),s||(t=Oe({src:t,async:!0,type:"module"},e),(e=cn.get(r))&&Ip(t,e),s=n.createElement("script"),ot(s),gt(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function tv(t,e,n,i){var r=(r=Hi.current)?Ec(r):null;if(!r)throw Error(z(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Js(n.href),n=Os(r).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Js(n.href);var s=Os(r).hoistableStyles,a=s.get(t);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(t,a),(s=r.querySelector(El(t)))&&!s._p&&(a.instance=s,a.state.loading=5),cn.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},cn.set(t,n),s||cI(r,t,n,a.state))),e&&i===null)throw Error(z(528,""));return a}if(e&&i!==null)throw Error(z(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=ga(n),n=Os(r).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(z(444,t))}}function Js(t){return'href="'+nn(t)+'"'}function El(t){return'link[rel="stylesheet"]['+t+"]"}function Yb(t){return Oe({},t,{"data-precedence":t.precedence,precedence:null})}function cI(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),gt(e,"link",n),ot(e),t.head.appendChild(e))}function ga(t){return'[src="'+nn(t)+'"]'}function Tl(t){return"script[async]"+t}function nv(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+nn(n.href)+'"]');if(i)return e.instance=i,ot(i),i;var r=Oe({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),ot(i),gt(i,"style",r),Vu(i,n.precedence,t),e.instance=i;case"stylesheet":r=Js(n.href);var s=t.querySelector(El(r));if(s)return e.state.loading|=4,e.instance=s,ot(s),s;i=Yb(n),(r=cn.get(r))&&Cp(i,r),s=(t.ownerDocument||t).createElement("link"),ot(s);var a=s;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),gt(s,"link",i),e.state.loading|=4,Vu(s,n.precedence,t),e.instance=s;case"script":return s=ga(n.src),(r=t.querySelector(Tl(s)))?(e.instance=r,ot(r),r):(i=n,(r=cn.get(s))&&(i=Oe({},n),Ip(i,r)),t=t.ownerDocument||t,r=t.createElement("script"),ot(r),gt(r,"link",i),t.head.appendChild(r),e.instance=r);case"void":return null;default:throw Error(z(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,Vu(i,n.precedence,t));return e.instance}function Vu(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===e)s=l;else if(s!==r)break}s?s.parentNode.insertBefore(t,s.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Cp(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Ip(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var ku=null;function iv(t,e,n){if(ku===null){var i=new Map,r=ku=new Map;r.set(n,i)}else r=ku,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),r=0;r<n.length;r++){var s=n[r];if(!(s[ml]||s[ft]||t==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(e)||"";a=t+a;var l=i.get(a);l?l.push(s):i.set(a,[s])}}return i}function rv(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function hI(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function Xb(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function fI(t,e,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var r=Js(i.href),s=e.querySelector(El(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=Tc.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=s,ot(s);return}s=e.ownerDocument||e,i=Yb(i),(r=cn.get(r))&&Cp(i,r),s=s.createElement("link"),ot(s);var a=s;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),gt(s,"link",i),n.instance=s}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=Tc.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var qf=0;function dI(t,e){return t.stylesheets&&t.count===0&&Lu(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var i=setTimeout(function(){if(t.stylesheets&&Lu(t,t.stylesheets),t.unsuspend){var s=t.unsuspend;t.unsuspend=null,s()}},6e4+e);0<t.imgBytes&&qf===0&&(qf=62500*KC());var r=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Lu(t,t.stylesheets),t.unsuspend)){var s=t.unsuspend;t.unsuspend=null,s()}},(t.imgBytes>qf?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(i),clearTimeout(r)}}:null}function Tc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Lu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var bc=null;function Lu(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,bc=new Map,e.forEach(mI,t),bc=null,Tc.call(t))}function mI(t,e){if(!(e.state.loading&4)){var n=bc.get(t);if(n)var i=n.get(null);else{n=new Map,bc.set(t,n);for(var r=t.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}r=e.instance,a=r.getAttribute("data-precedence"),s=n.get(a)||i,s===i&&n.set(null,r),n.set(a,r),this.count++,i=Tc.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(r,t.firstChild)),e.state.loading|=4}}var Wo={$$typeof:Kn,Provider:null,Consumer:null,_currentValue:Vr,_currentValue2:Vr,_threadCount:0};function pI(t,e,n,i,r,s,a,l,u){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hf(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hf(0),this.hiddenUpdates=hf(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=u,this.incompleteTransitions=new Map}function Wb(t,e,n,i,r,s,a,l,u,c,f,d){return t=new pI(t,e,n,a,u,c,f,d,l),e=1,s===!0&&(e|=24),s=Ht(3,null,null,e),t.current=s,s.stateNode=t,e=ep(),e.refCount++,t.pooledCache=e,e.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:e},ip(s),t}function Jb(t){return t?(t=Cs,t):Cs}function Zb(t,e,n,i,r,s){r=Jb(r),i.context===null?i.context=r:i.pendingContext=r,i=Gi(e),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=Qi(t,i,e),n!==null&&(Pt(n,t,e),So(n,t,e))}function sv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function xp(t,e){sv(t,e),(t=t.alternate)&&sv(t,e)}function e1(t){if(t.tag===13||t.tag===31){var e=ts(t,67108864);e!==null&&Pt(e,t,67108864),xp(t,67108864)}}function av(t){if(t.tag===13||t.tag===31){var e=Yt();e=zm(e);var n=ts(t,e);n!==null&&Pt(n,t,e),xp(t,e)}}var Sc=!0;function gI(t,e,n,i){var r=ee.T;ee.T=null;var s=ye.p;try{ye.p=2,Dp(t,e,n,i)}finally{ye.p=s,ee.T=r}}function yI(t,e,n,i){var r=ee.T;ee.T=null;var s=ye.p;try{ye.p=8,Dp(t,e,n,i)}finally{ye.p=s,ee.T=r}}function Dp(t,e,n,i){if(Sc){var r=Zd(i);if(r===null)zf(t,e,i,Ac,n),ov(t,i);else if(vI(r,t,e,n,i))i.stopPropagation();else if(ov(t,i),e&4&&-1<_I.indexOf(t)){for(;r!==null;){var s=ha(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=xr(s.pendingLanes);if(a!==0){var l=s;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-$t(a);l.entanglements[1]|=u,a&=~u}Pn(s),!(ge&6)&&(dc=Qt()+500,vl(0))}}break;case 31:case 13:l=ts(s,2),l!==null&&Pt(l,s,2),lh(),xp(s,2)}if(s=Zd(i),s===null&&zf(t,e,i,Ac,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else zf(t,e,i,null,n)}}function Zd(t){return t=Fm(t),Np(t)}var Ac=null;function Np(t){if(Ac=null,t=Ts(t),t!==null){var e=cl(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=E0(e),t!==null)return t;t=null}else if(n===31){if(t=T0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Ac=t,null}function t1(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(iR()){case w0:return 2;case R0:return 8;case Zu:case rR:return 32;case C0:return 268435456;default:return 32}default:return 32}}var em=!1,Yi=null,Xi=null,Wi=null,Jo=new Map,Zo=new Map,Oi=[],_I="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ov(t,e){switch(t){case"focusin":case"focusout":Yi=null;break;case"dragenter":case"dragleave":Xi=null;break;case"mouseover":case"mouseout":Wi=null;break;case"pointerover":case"pointerout":Jo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zo.delete(e.pointerId)}}function no(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=ha(e),e!==null&&e1(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function vI(t,e,n,i,r){switch(e){case"focusin":return Yi=no(Yi,t,e,n,i,r),!0;case"dragenter":return Xi=no(Xi,t,e,n,i,r),!0;case"mouseover":return Wi=no(Wi,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Jo.set(s,no(Jo.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Zo.set(s,no(Zo.get(s)||null,t,e,n,i,r)),!0}return!1}function n1(t){var e=Ts(t.target);if(e!==null){var n=cl(e);if(n!==null){if(e=n.tag,e===13){if(e=E0(n),e!==null){t.blockedOn=e,Gy(t.priority,function(){av(n)});return}}else if(e===31){if(e=T0(n),e!==null){t.blockedOn=e,Gy(t.priority,function(){av(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Pu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Zd(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);_d=i,n.target.dispatchEvent(i),_d=null}else return e=ha(n),e!==null&&e1(e),t.blockedOn=n,!1;e.shift()}return!0}function lv(t,e,n){Pu(t)&&n.delete(e)}function EI(){em=!1,Yi!==null&&Pu(Yi)&&(Yi=null),Xi!==null&&Pu(Xi)&&(Xi=null),Wi!==null&&Pu(Wi)&&(Wi=null),Jo.forEach(lv),Zo.forEach(lv)}function cu(t,e){t.blockedOn===e&&(t.blockedOn=null,em||(em=!0,it.unstable_scheduleCallback(it.unstable_NormalPriority,EI)))}var hu=null;function uv(t){hu!==t&&(hu=t,it.unstable_scheduleCallback(it.unstable_NormalPriority,function(){hu===t&&(hu=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],r=t[e+2];if(typeof i!="function"){if(Np(i||n)===null)continue;break}var s=ha(n);s!==null&&(t.splice(e,3),e-=3,Vd(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function Zs(t){function e(u){return cu(u,t)}Yi!==null&&cu(Yi,t),Xi!==null&&cu(Xi,t),Wi!==null&&cu(Wi,t),Jo.forEach(e),Zo.forEach(e);for(var n=0;n<Oi.length;n++){var i=Oi[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<Oi.length&&(n=Oi[0],n.blockedOn===null);)n1(n),n.blockedOn===null&&Oi.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[Ut]||null;if(typeof s=="function")a||uv(n);else if(a){var l=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[Ut]||null)l=a.formAction;else if(Np(r)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),uv(n)}}}function i1(){function t(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(a){return r=a})},focusReset:"manual",scroll:"manual"})}function e(){r!==null&&(r(),r=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,r=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),r!==null&&(r(),r=null)}}}function Op(t){this._internalRoot=t}hh.prototype.render=Op.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));var n=e.current,i=Yt();Zb(n,i,t,e,null,null)};hh.prototype.unmount=Op.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Zb(t.current,2,null,t,null,null),lh(),e[ca]=null}};function hh(t){this._internalRoot=t}hh.prototype.unstable_scheduleHydration=function(t){if(t){var e=O0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Oi.length&&e!==0&&e<Oi[n].priority;n++);Oi.splice(n,0,t),n===0&&n1(t)}};var cv=_0.version;if(cv!=="19.2.0")throw Error(z(527,cv,"19.2.0"));ye.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=Xw(e),t=t!==null?b0(t):null,t=t===null?null:t.stateNode,t};var TI={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fu.isDisabled&&fu.supportsFiber)try{hl=fu.inject(TI),Kt=fu}catch{}}$c.createRoot=function(t,e){if(!v0(t))throw Error(z(299));var n=!1,i="",r=$T,s=YT,a=XT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(r=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=Wb(t,1,!1,null,null,n,i,null,r,s,a,i1),t[ca]=e.current,Rp(t),new Op(e)};$c.hydrateRoot=function(t,e,n){if(!v0(t))throw Error(z(299));var i=!1,r="",s=$T,a=YT,l=XT,u=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.formState!==void 0&&(u=n.formState)),e=Wb(t,1,!0,e,n??null,i,r,u,s,a,l,i1),e.context=Jb(null),n=e.current,i=Yt(),i=zm(i),r=Gi(i),r.callback=null,Qi(n,r,i),n=i,e.current.lanes=n,dl(e,n),Pn(e),t[ca]=e.current,Rp(t),new hh(e)};$c.version="19.2.0";function r1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r1)}catch(t){console.error(t)}}r1(),f0.exports=$c;var bI=f0.exports;/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var hv="popstate";function SI(t={}){function e(i,r){let{pathname:s,search:a,hash:l}=i.location;return tm("",{pathname:s,search:a,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:el(r)}return wI(e,n,null,t)}function Ve(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function pn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AI(){return Math.random().toString(36).substring(2,10)}function fv(t,e){return{usr:t.state,key:t.key,idx:e}}function tm(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ya(e):e,state:n,key:e&&e.key||i||AI()}}function el({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ya(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function wI(t,e,n,i={}){let{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,l="POP",u=null,c=f();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function f(){return(a.state||{idx:null}).idx}function d(){l="POP";let O=f(),A=O==null?null:O-c;c=O,u&&u({action:l,location:M.location,delta:A})}function m(O,A){l="PUSH";let T=tm(M.location,O,A);c=f()+1;let E=fv(T,c),N=M.createHref(T);try{a.pushState(E,"",N)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;r.location.assign(N)}s&&u&&u({action:l,location:M.location,delta:1})}function v(O,A){l="REPLACE";let T=tm(M.location,O,A);c=f();let E=fv(T,c),N=M.createHref(T);a.replaceState(E,"",N),s&&u&&u({action:l,location:M.location,delta:0})}function x(O){return RI(O)}let M={get action(){return l},get location(){return t(r,a)},listen(O){if(u)throw new Error("A history only accepts one active listener");return r.addEventListener(hv,d),u=O,()=>{r.removeEventListener(hv,d),u=null}},createHref(O){return e(r,O)},createURL:x,encodeLocation(O){let A=x(O);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:m,replace:v,go(O){return a.go(O)}};return M}function RI(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ve(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:el(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function s1(t,e,n="/"){return CI(t,e,n,!1)}function CI(t,e,n,i){let r=typeof e=="string"?ya(e):e,s=ui(r.pathname||"/",n);if(s==null)return null;let a=a1(t);II(a);let l=null;for(let u=0;l==null&&u<a.length;++u){let c=jI(s);l=PI(a[u],c,i)}return l}function a1(t,e=[],n=[],i="",r=!1){let s=(a,l,u=r,c)=>{let f={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(i)&&u)return;Ve(f.relativePath.startsWith(i),`Absolute route path "${f.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(i.length)}let d=ti([i,f.relativePath]),m=n.concat(f);a.children&&a.children.length>0&&(Ve(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),a1(a.children,e,m,d,u)),!(a.path==null&&!a.index)&&e.push({path:d,score:kI(d,a.index),routesMeta:m})};return t.forEach((a,l)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))s(a,l);else for(let c of o1(a.path))s(a,l,!0,c)}),e}function o1(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let a=o1(i.join("/")),l=[];return l.push(...a.map(u=>u===""?s:[s,u].join("/"))),r&&l.push(...a),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function II(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:LI(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var xI=/^:[\w-]+$/,DI=3,NI=2,OI=1,MI=10,VI=-2,dv=t=>t==="*";function kI(t,e){let n=t.split("/"),i=n.length;return n.some(dv)&&(i+=VI),e&&(i+=NI),n.filter(r=>!dv(r)).reduce((r,s)=>r+(xI.test(s)?DI:s===""?OI:MI),i)}function LI(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function PI(t,e,n=!1){let{routesMeta:i}=t,r={},s="/",a=[];for(let l=0;l<i.length;++l){let u=i[l],c=l===i.length-1,f=s==="/"?e:e.slice(s.length)||"/",d=wc({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},f),m=u.route;if(!d&&c&&n&&!i[i.length-1].route.index&&(d=wc({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!d)return null;Object.assign(r,d.params),a.push({params:r,pathname:ti([s,d.pathname]),pathnameBase:HI(ti([s,d.pathnameBase])),route:m}),d.pathnameBase!=="/"&&(s=ti([s,d.pathnameBase]))}return a}function wc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=UI(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:i.reduce((c,{paramName:f,isOptional:d},m)=>{if(f==="*"){let x=l[m]||"";a=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const v=l[m];return d&&!v?c[f]=void 0:c[f]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:t}}function UI(t,e=!1,n=!0){pn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,u)=>(i.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function jI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return pn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ui(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function zI(t,e="/"){let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?ya(t):t;return{pathname:n?n.startsWith("/")?n:BI(n,e):e,search:FI(i),hash:GI(r)}}function BI(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Hf(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function qI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Mp(t){let e=qI(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function Vp(t,e,n,i=!1){let r;typeof t=="string"?r=ya(t):(r={...t},Ve(!r.pathname||!r.pathname.includes("?"),Hf("?","pathname","search",r)),Ve(!r.pathname||!r.pathname.includes("#"),Hf("#","pathname","hash",r)),Ve(!r.search||!r.search.includes("#"),Hf("#","search","hash",r)));let s=t===""||r.pathname==="",a=s?"/":r.pathname,l;if(a==null)l=n;else{let d=e.length-1;if(!i&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),d-=1;r.pathname=m.join("/")}l=d>=0?e[d]:"/"}let u=zI(r,l),c=a&&a!=="/"&&a.endsWith("/"),f=(s||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||f)&&(u.pathname+="/"),u}var ti=t=>t.join("/").replace(/\/\/+/g,"/"),HI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),FI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,GI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function QI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var l1=["POST","PUT","PATCH","DELETE"];new Set(l1);var KI=["GET",...l1];new Set(KI);var _a=D.createContext(null);_a.displayName="DataRouter";var fh=D.createContext(null);fh.displayName="DataRouterState";D.createContext(!1);var u1=D.createContext({isTransitioning:!1});u1.displayName="ViewTransition";var $I=D.createContext(new Map);$I.displayName="Fetchers";var YI=D.createContext(null);YI.displayName="Await";var vn=D.createContext(null);vn.displayName="Navigation";var bl=D.createContext(null);bl.displayName="Location";var En=D.createContext({outlet:null,matches:[],isDataRoute:!1});En.displayName="Route";var kp=D.createContext(null);kp.displayName="RouteError";function XI(t,{relative:e}={}){Ve(va(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=D.useContext(vn),{hash:r,pathname:s,search:a}=Al(t,{relative:e}),l=s;return n!=="/"&&(l=s==="/"?n:ti([n,s])),i.createHref({pathname:l,search:a,hash:r})}function va(){return D.useContext(bl)!=null}function yi(){return Ve(va(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(bl).location}var c1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function h1(t){D.useContext(vn).static||D.useLayoutEffect(t)}function Sl(){let{isDataRoute:t}=D.useContext(En);return t?c2():WI()}function WI(){Ve(va(),"useNavigate() may be used only in the context of a <Router> component.");let t=D.useContext(_a),{basename:e,navigator:n}=D.useContext(vn),{matches:i}=D.useContext(En),{pathname:r}=yi(),s=JSON.stringify(Mp(i)),a=D.useRef(!1);return h1(()=>{a.current=!0}),D.useCallback((u,c={})=>{if(pn(a.current,c1),!a.current)return;if(typeof u=="number"){n.go(u);return}let f=Vp(u,JSON.parse(s),r,c.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:ti([e,f.pathname])),(c.replace?n.replace:n.push)(f,c.state,c)},[e,n,s,r,t])}D.createContext(null);function JI(){let{matches:t}=D.useContext(En),e=t[t.length-1];return e?e.params:{}}function Al(t,{relative:e}={}){let{matches:n}=D.useContext(En),{pathname:i}=yi(),r=JSON.stringify(Mp(n));return D.useMemo(()=>Vp(t,JSON.parse(r),i,e==="path"),[t,r,i,e])}function ZI(t,e){return f1(t,e)}function f1(t,e,n,i,r){var T;Ve(va(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=D.useContext(vn),{matches:a}=D.useContext(En),l=a[a.length-1],u=l?l.params:{},c=l?l.pathname:"/",f=l?l.pathnameBase:"/",d=l&&l.route;{let E=d&&d.path||"";d1(c,!d||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let m=yi(),v;if(e){let E=typeof e=="string"?ya(e):e;Ve(f==="/"||((T=E.pathname)==null?void 0:T.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${E.pathname}" was given in the \`location\` prop.`),v=E}else v=m;let x=v.pathname||"/",M=x;if(f!=="/"){let E=f.replace(/^\//,"").split("/");M="/"+x.replace(/^\//,"").split("/").slice(E.length).join("/")}let O=s1(t,{pathname:M});pn(d||O!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),pn(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=r2(O&&O.map(E=>Object.assign({},E,{params:Object.assign({},u,E.params),pathname:ti([f,s.encodeLocation?s.encodeLocation(E.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?f:ti([f,s.encodeLocation?s.encodeLocation(E.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathnameBase])})),a,n,i,r);return e&&A?D.createElement(bl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},A):A}function e2(){let t=u2(),e=QI(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=D.createElement(D.Fragment,null,D.createElement("p",null,"💿 Hey developer 👋"),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:s},"ErrorBoundary")," or"," ",D.createElement("code",{style:s},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:r},n):null,a)}var t2=D.createElement(e2,null),n2=class extends D.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?D.createElement(En.Provider,{value:this.props.routeContext},D.createElement(kp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function i2({routeContext:t,match:e,children:n}){let i=D.useContext(_a);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),D.createElement(En.Provider,{value:t},n)}function r2(t,e=[],n=null,i=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,a=n==null?void 0:n.errors;if(a!=null){let c=s.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);Ve(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let l=!1,u=-1;if(n)for(let c=0;c<s.length;c++){let f=s[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=c),f.route.id){let{loaderData:d,errors:m}=n,v=f.route.loader&&!d.hasOwnProperty(f.route.id)&&(!m||m[f.route.id]===void 0);if(f.route.lazy||v){l=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((c,f,d)=>{let m,v=!1,x=null,M=null;n&&(m=a&&f.route.id?a[f.route.id]:void 0,x=f.route.errorElement||t2,l&&(u<0&&d===0?(d1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,M=null):u===d&&(v=!0,M=f.route.hydrateFallbackElement||null)));let O=e.concat(s.slice(0,d+1)),A=()=>{let T;return m?T=x:v?T=M:f.route.Component?T=D.createElement(f.route.Component,null):f.route.element?T=f.route.element:T=c,D.createElement(i2,{match:f,routeContext:{outlet:c,matches:O,isDataRoute:n!=null},children:T})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?D.createElement(n2,{location:n.location,revalidation:n.revalidation,component:x,error:m,children:A(),routeContext:{outlet:null,matches:O,isDataRoute:!0},unstable_onError:i}):A()},null)}function Lp(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function s2(t){let e=D.useContext(_a);return Ve(e,Lp(t)),e}function a2(t){let e=D.useContext(fh);return Ve(e,Lp(t)),e}function o2(t){let e=D.useContext(En);return Ve(e,Lp(t)),e}function Pp(t){let e=o2(t),n=e.matches[e.matches.length-1];return Ve(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function l2(){return Pp("useRouteId")}function u2(){var i;let t=D.useContext(kp),e=a2("useRouteError"),n=Pp("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[n]}function c2(){let{router:t}=s2("useNavigate"),e=Pp("useNavigate"),n=D.useRef(!1);return h1(()=>{n.current=!0}),D.useCallback(async(r,s={})=>{pn(n.current,c1),n.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...s}))},[t,e])}var mv={};function d1(t,e,n){!e&&!mv[t]&&(mv[t]=!0,pn(!1,n))}D.memo(h2);function h2({routes:t,future:e,state:n,unstable_onError:i}){return f1(t,void 0,n,i,e)}function f2({to:t,replace:e,state:n,relative:i}){Ve(va(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=D.useContext(vn);pn(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=D.useContext(En),{pathname:a}=yi(),l=Sl(),u=Vp(t,Mp(s),a,i==="path"),c=JSON.stringify(u);return D.useEffect(()=>{l(JSON.parse(c),{replace:e,state:n,relative:i})},[l,c,i,e,n]),null}function Hn(t){Ve(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function d2({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:r,static:s=!1}){Ve(!va(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),l=D.useMemo(()=>({basename:a,navigator:r,static:s,future:{}}),[a,r,s]);typeof n=="string"&&(n=ya(n));let{pathname:u="/",search:c="",hash:f="",state:d=null,key:m="default"}=n,v=D.useMemo(()=>{let x=ui(u,a);return x==null?null:{location:{pathname:x,search:c,hash:f,state:d,key:m},navigationType:i}},[a,u,c,f,d,m,i]);return pn(v!=null,`<Router basename="${a}"> is not able to match the URL "${u}${c}${f}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:D.createElement(vn.Provider,{value:l},D.createElement(bl.Provider,{children:e,value:v}))}function m2({children:t,location:e}){return ZI(nm(t),e)}function nm(t,e=[]){let n=[];return D.Children.forEach(t,(i,r)=>{if(!D.isValidElement(i))return;let s=[...e,r];if(i.type===D.Fragment){n.push.apply(n,nm(i.props.children,s));return}Ve(i.type===Hn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ve(!i.props.index||!i.props.children,"An index route cannot have child routes.");let a={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=nm(i.props.children,s)),n.push(a)}),n}var Uu="get",ju="application/x-www-form-urlencoded";function dh(t){return t!=null&&typeof t.tagName=="string"}function p2(t){return dh(t)&&t.tagName.toLowerCase()==="button"}function g2(t){return dh(t)&&t.tagName.toLowerCase()==="form"}function y2(t){return dh(t)&&t.tagName.toLowerCase()==="input"}function _2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function v2(t,e){return t.button===0&&(!e||e==="_self")&&!_2(t)}var du=null;function E2(){if(du===null)try{new FormData(document.createElement("form"),0),du=!1}catch{du=!0}return du}var T2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ff(t){return t!=null&&!T2.has(t)?(pn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ju}"`),null):t}function b2(t,e){let n,i,r,s,a;if(g2(t)){let l=t.getAttribute("action");i=l?ui(l,e):null,n=t.getAttribute("method")||Uu,r=Ff(t.getAttribute("enctype"))||ju,s=new FormData(t)}else if(p2(t)||y2(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||l.getAttribute("action");if(i=u?ui(u,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||Uu,r=Ff(t.getAttribute("formenctype"))||Ff(l.getAttribute("enctype"))||ju,s=new FormData(l,t),!E2()){let{name:c,type:f,value:d}=t;if(f==="image"){let m=c?`${c}.`:"";s.append(`${m}x`,"0"),s.append(`${m}y`,"0")}else c&&s.append(c,d)}}else{if(dh(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Uu,i=null,r=ju,a=t}return s&&r==="text/plain"&&(a=s,s=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Up(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function S2(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&ui(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function A2(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function w2(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function R2(t,e,n){let i=await Promise.all(t.map(async r=>{let s=e.routes[r.route.id];if(s){let a=await A2(s,n);return a.links?a.links():[]}return[]}));return D2(i.flat(1).filter(w2).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function pv(t,e,n,i,r,s){let a=(u,c)=>n[c]?u.route.id!==n[c].route.id:!0,l=(u,c)=>{var f;return n[c].pathname!==u.pathname||((f=n[c].route.path)==null?void 0:f.endsWith("*"))&&n[c].params["*"]!==u.params["*"]};return s==="assets"?e.filter((u,c)=>a(u,c)||l(u,c)):s==="data"?e.filter((u,c)=>{var d;let f=i.routes[u.route.id];if(!f||!f.hasLoader)return!1;if(a(u,c)||l(u,c))return!0;if(u.route.shouldRevalidate){let m=u.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function C2(t,e,{includeHydrateFallback:n}={}){return I2(t.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function I2(t){return[...new Set(t)]}function x2(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function D2(t,e){let n=new Set;return new Set(e),t.reduce((i,r)=>{let s=JSON.stringify(x2(r));return n.has(s)||(n.add(s),i.push({key:s,link:r})),i},[])}function m1(){let t=D.useContext(_a);return Up(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function N2(){let t=D.useContext(fh);return Up(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var jp=D.createContext(void 0);jp.displayName="FrameworkContext";function p1(){let t=D.useContext(jp);return Up(t,"You must render this element inside a <HydratedRouter> element"),t}function O2(t,e){let n=D.useContext(jp),[i,r]=D.useState(!1),[s,a]=D.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:c,onMouseLeave:f,onTouchStart:d}=e,m=D.useRef(null);D.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let M=A=>{A.forEach(T=>{a(T.isIntersecting)})},O=new IntersectionObserver(M,{threshold:.5});return m.current&&O.observe(m.current),()=>{O.disconnect()}}},[t]),D.useEffect(()=>{if(i){let M=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(M)}}},[i]);let v=()=>{r(!0)},x=()=>{r(!1),a(!1)};return n?t!=="intent"?[s,m,{}]:[s,m,{onFocus:io(l,v),onBlur:io(u,x),onMouseEnter:io(c,v),onMouseLeave:io(f,x),onTouchStart:io(d,v)}]:[!1,m,{}]}function io(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function M2({page:t,...e}){let{router:n}=m1(),i=D.useMemo(()=>s1(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?D.createElement(k2,{page:t,matches:i,...e}):null}function V2(t){let{manifest:e,routeModules:n}=p1(),[i,r]=D.useState([]);return D.useEffect(()=>{let s=!1;return R2(t,e,n).then(a=>{s||r(a)}),()=>{s=!0}},[t,e,n]),i}function k2({page:t,matches:e,...n}){let i=yi(),{manifest:r,routeModules:s}=p1(),{basename:a}=m1(),{loaderData:l,matches:u}=N2(),c=D.useMemo(()=>pv(t,e,u,r,i,"data"),[t,e,u,r,i]),f=D.useMemo(()=>pv(t,e,u,r,i,"assets"),[t,e,u,r,i]),d=D.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let x=new Set,M=!1;if(e.forEach(A=>{var E;let T=r.routes[A.route.id];!T||!T.hasLoader||(!c.some(N=>N.route.id===A.route.id)&&A.route.id in l&&((E=s[A.route.id])!=null&&E.shouldRevalidate)||T.hasClientLoader?M=!0:x.add(A.route.id))}),x.size===0)return[];let O=S2(t,a,"data");return M&&x.size>0&&O.searchParams.set("_routes",e.filter(A=>x.has(A.route.id)).map(A=>A.route.id).join(",")),[O.pathname+O.search]},[a,l,i,r,c,e,t,s]),m=D.useMemo(()=>C2(f,r),[f,r]),v=V2(f);return D.createElement(D.Fragment,null,d.map(x=>D.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),m.map(x=>D.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),v.map(({key:x,link:M})=>D.createElement("link",{key:x,nonce:n.nonce,...M})))}function L2(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var g1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{g1&&(window.__reactRouterVersion="7.9.4")}catch{}function P2({basename:t,children:e,window:n}){let i=D.useRef();i.current==null&&(i.current=SI({window:n,v5Compat:!0}));let r=i.current,[s,a]=D.useState({action:r.action,location:r.location}),l=D.useCallback(u=>{D.startTransition(()=>a(u))},[a]);return D.useLayoutEffect(()=>r.listen(l),[r,l]),D.createElement(d2,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:r})}var y1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Mi=D.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:r,reloadDocument:s,replace:a,state:l,target:u,to:c,preventScrollReset:f,viewTransition:d,...m},v){let{basename:x}=D.useContext(vn),M=typeof c=="string"&&y1.test(c),O,A=!1;if(typeof c=="string"&&M&&(O=c,g1))try{let S=new URL(window.location.href),w=c.startsWith("//")?new URL(S.protocol+c):new URL(c),C=ui(w.pathname,x);w.origin===S.origin&&C!=null?c=C+w.search+w.hash:A=!0}catch{pn(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=XI(c,{relative:r}),[E,N,P]=O2(i,m),G=B2(c,{replace:a,state:l,target:u,preventScrollReset:f,relative:r,viewTransition:d});function y(S){e&&e(S),S.defaultPrevented||G(S)}let _=D.createElement("a",{...m,...P,href:O||T,onClick:A||s?e:y,ref:L2(v,N),target:u,"data-discover":!M&&n==="render"?"true":void 0});return E&&!M?D.createElement(D.Fragment,null,_,D.createElement(M2,{page:T})):_});Mi.displayName="Link";var U2=D.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:r=!1,style:s,to:a,viewTransition:l,children:u,...c},f){let d=Al(a,{relative:c.relative}),m=yi(),v=D.useContext(fh),{navigator:x,basename:M}=D.useContext(vn),O=v!=null&&Q2(d)&&l===!0,A=x.encodeLocation?x.encodeLocation(d).pathname:d.pathname,T=m.pathname,E=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(T=T.toLowerCase(),E=E?E.toLowerCase():null,A=A.toLowerCase()),E&&M&&(E=ui(E,M)||E);const N=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let P=T===A||!r&&T.startsWith(A)&&T.charAt(N)==="/",G=E!=null&&(E===A||!r&&E.startsWith(A)&&E.charAt(A.length)==="/"),y={isActive:P,isPending:G,isTransitioning:O},_=P?e:void 0,S;typeof i=="function"?S=i(y):S=[i,P?"active":null,G?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let w=typeof s=="function"?s(y):s;return D.createElement(Mi,{...c,"aria-current":_,className:S,ref:f,style:w,to:a,viewTransition:l},typeof u=="function"?u(y):u)});U2.displayName="NavLink";var j2=D.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:r,state:s,method:a=Uu,action:l,onSubmit:u,relative:c,preventScrollReset:f,viewTransition:d,...m},v)=>{let x=F2(),M=G2(l,{relative:c}),O=a.toLowerCase()==="get"?"get":"post",A=typeof l=="string"&&y1.test(l),T=E=>{if(u&&u(E),E.defaultPrevented)return;E.preventDefault();let N=E.nativeEvent.submitter,P=(N==null?void 0:N.getAttribute("formmethod"))||a;x(N||E.currentTarget,{fetcherKey:e,method:P,navigate:n,replace:r,state:s,relative:c,preventScrollReset:f,viewTransition:d})};return D.createElement("form",{ref:v,method:O,action:M,onSubmit:i?u:T,...m,"data-discover":!A&&t==="render"?"true":void 0})});j2.displayName="Form";function z2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _1(t){let e=D.useContext(_a);return Ve(e,z2(t)),e}function B2(t,{target:e,replace:n,state:i,preventScrollReset:r,relative:s,viewTransition:a}={}){let l=Sl(),u=yi(),c=Al(t,{relative:s});return D.useCallback(f=>{if(v2(f,e)){f.preventDefault();let d=n!==void 0?n:el(u)===el(c);l(t,{replace:d,state:i,preventScrollReset:r,relative:s,viewTransition:a})}},[u,l,c,n,i,e,t,r,s,a])}var q2=0,H2=()=>`__${String(++q2)}__`;function F2(){let{router:t}=_1("useSubmit"),{basename:e}=D.useContext(vn),n=l2();return D.useCallback(async(i,r={})=>{let{action:s,method:a,encType:l,formData:u,body:c}=b2(i,e);if(r.navigate===!1){let f=r.fetcherKey||H2();await t.fetch(f,n,r.action||s,{preventScrollReset:r.preventScrollReset,formData:u,body:c,formMethod:r.method||a,formEncType:r.encType||l,flushSync:r.flushSync})}else await t.navigate(r.action||s,{preventScrollReset:r.preventScrollReset,formData:u,body:c,formMethod:r.method||a,formEncType:r.encType||l,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}function G2(t,{relative:e}={}){let{basename:n}=D.useContext(vn),i=D.useContext(En);Ve(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),s={...Al(t||".",{relative:e})},a=yi();if(t==null){s.search=a.search;let l=new URLSearchParams(s.search),u=l.getAll("index");if(u.some(f=>f==="")){l.delete("index"),u.filter(d=>d).forEach(d=>l.append("index",d));let f=l.toString();s.search=f?`?${f}`:""}}return(!t||t===".")&&r.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:ti([n,s.pathname])),el(s)}function Q2(t,{relative:e}={}){let n=D.useContext(u1);Ve(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=_1("useViewTransitionState"),r=Al(t,{relative:e});if(!n.isTransitioning)return!1;let s=ui(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=ui(n.nextLocation.pathname,i)||n.nextLocation.pathname;return wc(r.pathname,a)!=null||wc(r.pathname,s)!=null}const K2=()=>{};var gv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},$2=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],a=t[n++],l=t[n++],u=((r&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return e.join("")},E1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],a=r+1<t.length,l=a?t[r+1]:0,u=r+2<t.length,c=u?t[r+2]:0,f=s>>2,d=(s&3)<<4|l>>4;let m=(l&15)<<2|c>>6,v=c&63;u||(v=64,a||(m=64)),i.push(n[f],n[d],n[m],n[v])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(v1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):$2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||l==null||c==null||d==null)throw new Y2;const m=s<<2|l>>4;if(i.push(m),c!==64){const v=l<<4&240|c>>2;if(i.push(v),d!==64){const x=c<<6&192|d;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Y2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const X2=function(t){const e=v1(t);return E1.encodeByteArray(e,!0)},Rc=function(t){return X2(t).replace(/\./g,"")},T1=function(t){try{return E1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=()=>W2().__FIREBASE_DEFAULTS__,Z2=()=>{if(typeof process>"u"||typeof gv>"u")return;const t=gv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ex=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&T1(t[1]);return e&&JSON.parse(e)},mh=()=>{try{return K2()||J2()||Z2()||ex()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},b1=t=>{var e,n;return(n=(e=mh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},tx=t=>{const e=b1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},S1=()=>{var t;return(t=mh())==null?void 0:t.config},A1=t=>{var e;return(e=mh())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ea(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function w1(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Rc(JSON.stringify(n)),Rc(JSON.stringify(a)),""].join(".")}const Oo={};function rx(){const t={prod:[],emulator:[]};for(const e of Object.keys(Oo))Oo[e]?t.emulator.push(e):t.prod.push(e);return t}function sx(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let yv=!1;function R1(t,e){if(typeof window>"u"||typeof document>"u"||!Ea(window.location.host)||Oo[t]===e||Oo[t]||yv)return;Oo[t]=e;function n(m){return`__firebase__banner__${m}`}const i="__firebase__banner",s=rx().prod.length>0;function a(){const m=document.getElementById(i);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,v){m.setAttribute("width","24"),m.setAttribute("id",v),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function c(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{yv=!0,a()},m}function f(m,v){m.setAttribute("id",v),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function d(){const m=sx(i),v=n("text"),x=document.getElementById(v)||document.createElement("span"),M=n("learnmore"),O=document.getElementById(M)||document.createElement("a"),A=n("preprendIcon"),T=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const E=m.element;l(E),f(O,M);const N=c();u(T,A),E.append(T,x,O,N),document.body.appendChild(E)}s?(x.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ax(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bt())}function ox(){var e;const t=(e=mh())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ux(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function cx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hx(){const t=bt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function fx(){return!ox()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dx(){try{return typeof indexedDB=="object"}catch{return!1}}function mx(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px="FirebaseError";class _i extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=px,Object.setPrototypeOf(this,_i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wl.prototype.create)}}class wl{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],a=s?gx(s,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new _i(r,l,i)}}function gx(t,e){return t.replace(yx,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const yx=/\{\$([^}]+)}/g;function _x(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ci(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],a=e[r];if(_v(s)&&_v(a)){if(!ci(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function _v(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function ho(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function fo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function vx(t,e){const n=new Ex(t,e);return n.subscribe.bind(n)}class Ex{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");Tx(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Gf),r.error===void 0&&(r.error=Gf),r.complete===void 0&&(r.complete=Gf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Tx(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Gf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(t){return t&&t._delegate?t._delegate:t}class Kr{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new nx;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ax(e))try{this.getOrInitializeService({instanceIdentifier:Or})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Or){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Or){return this.instances.has(e)}getOptions(e=Or){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);i===l&&a.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Sx(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Or){return this.component?this.component.multipleInstances?e:Or:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Sx(t){return t===Or?void 0:t}function Ax(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new bx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const Rx={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},Cx=ue.INFO,Ix={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},xx=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=Ix[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zp{constructor(e){this.name=e,this._logLevel=Cx,this._logHandler=xx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Rx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}const Dx=(t,e)=>e.some(n=>t instanceof n);let vv,Ev;function Nx(){return vv||(vv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ox(){return Ev||(Ev=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const C1=new WeakMap,im=new WeakMap,I1=new WeakMap,Qf=new WeakMap,Bp=new WeakMap;function Mx(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Ji(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&C1.set(n,t)}).catch(()=>{}),Bp.set(e,t),e}function Vx(t){if(im.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});im.set(t,e)}let rm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return im.get(t);if(e==="objectStoreNames")return t.objectStoreNames||I1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ji(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function kx(t){rm=t(rm)}function Lx(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Kf(this),e,...n);return I1.set(i,e.sort?e.sort():[e]),Ji(i)}:Ox().includes(t)?function(...e){return t.apply(Kf(this),e),Ji(C1.get(this))}:function(...e){return Ji(t.apply(Kf(this),e))}}function Px(t){return typeof t=="function"?Lx(t):(t instanceof IDBTransaction&&Vx(t),Dx(t,Nx())?new Proxy(t,rm):t)}function Ji(t){if(t instanceof IDBRequest)return Mx(t);if(Qf.has(t))return Qf.get(t);const e=Px(t);return e!==t&&(Qf.set(t,e),Bp.set(e,t)),e}const Kf=t=>Bp.get(t);function Ux(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(t,e),l=Ji(a);return i&&a.addEventListener("upgradeneeded",u=>{i(Ji(a.result),u.oldVersion,u.newVersion,Ji(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const jx=["get","getKey","getAll","getAllKeys","count"],zx=["put","add","delete","clear"],$f=new Map;function Tv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($f.get(e))return $f.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=zx.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||jx.includes(n)))return;const s=async function(a,...l){const u=this.transaction(a,r?"readwrite":"readonly");let c=u.store;return i&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),r&&u.done]))[0]};return $f.set(e,s),s}kx(t=>({...t,get:(e,n,i)=>Tv(e,n)||t.get(e,n,i),has:(e,n)=>!!Tv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qx(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function qx(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sm="@firebase/app",bv="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi=new zp("@firebase/app"),Hx="@firebase/app-compat",Fx="@firebase/analytics-compat",Gx="@firebase/analytics",Qx="@firebase/app-check-compat",Kx="@firebase/app-check",$x="@firebase/auth",Yx="@firebase/auth-compat",Xx="@firebase/database",Wx="@firebase/data-connect",Jx="@firebase/database-compat",Zx="@firebase/functions",eD="@firebase/functions-compat",tD="@firebase/installations",nD="@firebase/installations-compat",iD="@firebase/messaging",rD="@firebase/messaging-compat",sD="@firebase/performance",aD="@firebase/performance-compat",oD="@firebase/remote-config",lD="@firebase/remote-config-compat",uD="@firebase/storage",cD="@firebase/storage-compat",hD="@firebase/firestore",fD="@firebase/ai",dD="@firebase/firestore-compat",mD="firebase",pD="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am="[DEFAULT]",gD={[sm]:"fire-core",[Hx]:"fire-core-compat",[Gx]:"fire-analytics",[Fx]:"fire-analytics-compat",[Kx]:"fire-app-check",[Qx]:"fire-app-check-compat",[$x]:"fire-auth",[Yx]:"fire-auth-compat",[Xx]:"fire-rtdb",[Wx]:"fire-data-connect",[Jx]:"fire-rtdb-compat",[Zx]:"fire-fn",[eD]:"fire-fn-compat",[tD]:"fire-iid",[nD]:"fire-iid-compat",[iD]:"fire-fcm",[rD]:"fire-fcm-compat",[sD]:"fire-perf",[aD]:"fire-perf-compat",[oD]:"fire-rc",[lD]:"fire-rc-compat",[uD]:"fire-gcs",[cD]:"fire-gcs-compat",[hD]:"fire-fst",[dD]:"fire-fst-compat",[fD]:"fire-vertex","fire-js":"fire-js",[mD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=new Map,yD=new Map,om=new Map;function Sv(t,e){try{t.container.addComponent(e)}catch(n){hi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ea(t){const e=t.name;if(om.has(e))return hi.debug(`There were multiple attempts to register component ${e}.`),!1;om.set(e,t);for(const n of Cc.values())Sv(n,t);for(const n of yD.values())Sv(n,t);return!0}function qp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function an(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zi=new wl("app","Firebase",_D);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Kr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta=pD;function x1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:am,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw Zi.create("bad-app-name",{appName:String(r)});if(n||(n=S1()),!n)throw Zi.create("no-options");const s=Cc.get(r);if(s){if(ci(n,s.options)&&ci(i,s.config))return s;throw Zi.create("duplicate-app",{appName:r})}const a=new wx(r);for(const u of om.values())a.addComponent(u);const l=new vD(n,i,a);return Cc.set(r,l),l}function D1(t=am){const e=Cc.get(t);if(!e&&t===am&&S1())return x1();if(!e)throw Zi.create("no-app",{appName:t});return e}function er(t,e,n){let i=gD[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),s=e.match(/\s|\//);if(r||s){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hi.warn(a.join(" "));return}ea(new Kr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED="firebase-heartbeat-database",TD=1,tl="firebase-heartbeat-store";let Yf=null;function N1(){return Yf||(Yf=Ux(ED,TD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(tl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Zi.create("idb-open",{originalErrorMessage:t.message})})),Yf}async function bD(t){try{const n=(await N1()).transaction(tl),i=await n.objectStore(tl).get(O1(t));return await n.done,i}catch(e){if(e instanceof _i)hi.warn(e.message);else{const n=Zi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});hi.warn(n.message)}}}async function Av(t,e){try{const i=(await N1()).transaction(tl,"readwrite");await i.objectStore(tl).put(e,O1(t)),await i.done}catch(n){if(n instanceof _i)hi.warn(n.message);else{const i=Zi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});hi.warn(i.message)}}}function O1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD=1024,AD=30;class wD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new CD(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=wv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>AD){const a=ID(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){hi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=wv(),{heartbeatsToSend:i,unsentEntries:r}=RD(this._heartbeatsCache.heartbeats),s=Rc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return hi.warn(n),""}}}function wv(){return new Date().toISOString().substring(0,10)}function RD(t,e=SD){const n=[];let i=t.slice();for(const r of t){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),Rv(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Rv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class CD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dx()?mx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await bD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Av(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Av(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Rv(t){return Rc(JSON.stringify({version:2,heartbeats:t})).length}function ID(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(t){ea(new Kr("platform-logger",e=>new Bx(e),"PRIVATE")),ea(new Kr("heartbeat",e=>new wD(e),"PRIVATE")),er(sm,bv,t),er(sm,bv,"esm2020"),er("fire-js","")}xD("");var Cv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tr,M1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(y,_){function S(){}S.prototype=_.prototype,y.F=_.prototype,y.prototype=new S,y.prototype.constructor=y,y.D=function(w,C,R){for(var I=Array(arguments.length-2),j=2;j<arguments.length;j++)I[j-2]=arguments[j];return _.prototype[C].apply(w,I)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(y,_,S){S||(S=0);const w=Array(16);if(typeof _=="string")for(var C=0;C<16;++C)w[C]=_.charCodeAt(S++)|_.charCodeAt(S++)<<8|_.charCodeAt(S++)<<16|_.charCodeAt(S++)<<24;else for(C=0;C<16;++C)w[C]=_[S++]|_[S++]<<8|_[S++]<<16|_[S++]<<24;_=y.g[0],S=y.g[1],C=y.g[2];let R=y.g[3],I;I=_+(R^S&(C^R))+w[0]+3614090360&4294967295,_=S+(I<<7&4294967295|I>>>25),I=R+(C^_&(S^C))+w[1]+3905402710&4294967295,R=_+(I<<12&4294967295|I>>>20),I=C+(S^R&(_^S))+w[2]+606105819&4294967295,C=R+(I<<17&4294967295|I>>>15),I=S+(_^C&(R^_))+w[3]+3250441966&4294967295,S=C+(I<<22&4294967295|I>>>10),I=_+(R^S&(C^R))+w[4]+4118548399&4294967295,_=S+(I<<7&4294967295|I>>>25),I=R+(C^_&(S^C))+w[5]+1200080426&4294967295,R=_+(I<<12&4294967295|I>>>20),I=C+(S^R&(_^S))+w[6]+2821735955&4294967295,C=R+(I<<17&4294967295|I>>>15),I=S+(_^C&(R^_))+w[7]+4249261313&4294967295,S=C+(I<<22&4294967295|I>>>10),I=_+(R^S&(C^R))+w[8]+1770035416&4294967295,_=S+(I<<7&4294967295|I>>>25),I=R+(C^_&(S^C))+w[9]+2336552879&4294967295,R=_+(I<<12&4294967295|I>>>20),I=C+(S^R&(_^S))+w[10]+4294925233&4294967295,C=R+(I<<17&4294967295|I>>>15),I=S+(_^C&(R^_))+w[11]+2304563134&4294967295,S=C+(I<<22&4294967295|I>>>10),I=_+(R^S&(C^R))+w[12]+1804603682&4294967295,_=S+(I<<7&4294967295|I>>>25),I=R+(C^_&(S^C))+w[13]+4254626195&4294967295,R=_+(I<<12&4294967295|I>>>20),I=C+(S^R&(_^S))+w[14]+2792965006&4294967295,C=R+(I<<17&4294967295|I>>>15),I=S+(_^C&(R^_))+w[15]+1236535329&4294967295,S=C+(I<<22&4294967295|I>>>10),I=_+(C^R&(S^C))+w[1]+4129170786&4294967295,_=S+(I<<5&4294967295|I>>>27),I=R+(S^C&(_^S))+w[6]+3225465664&4294967295,R=_+(I<<9&4294967295|I>>>23),I=C+(_^S&(R^_))+w[11]+643717713&4294967295,C=R+(I<<14&4294967295|I>>>18),I=S+(R^_&(C^R))+w[0]+3921069994&4294967295,S=C+(I<<20&4294967295|I>>>12),I=_+(C^R&(S^C))+w[5]+3593408605&4294967295,_=S+(I<<5&4294967295|I>>>27),I=R+(S^C&(_^S))+w[10]+38016083&4294967295,R=_+(I<<9&4294967295|I>>>23),I=C+(_^S&(R^_))+w[15]+3634488961&4294967295,C=R+(I<<14&4294967295|I>>>18),I=S+(R^_&(C^R))+w[4]+3889429448&4294967295,S=C+(I<<20&4294967295|I>>>12),I=_+(C^R&(S^C))+w[9]+568446438&4294967295,_=S+(I<<5&4294967295|I>>>27),I=R+(S^C&(_^S))+w[14]+3275163606&4294967295,R=_+(I<<9&4294967295|I>>>23),I=C+(_^S&(R^_))+w[3]+4107603335&4294967295,C=R+(I<<14&4294967295|I>>>18),I=S+(R^_&(C^R))+w[8]+1163531501&4294967295,S=C+(I<<20&4294967295|I>>>12),I=_+(C^R&(S^C))+w[13]+2850285829&4294967295,_=S+(I<<5&4294967295|I>>>27),I=R+(S^C&(_^S))+w[2]+4243563512&4294967295,R=_+(I<<9&4294967295|I>>>23),I=C+(_^S&(R^_))+w[7]+1735328473&4294967295,C=R+(I<<14&4294967295|I>>>18),I=S+(R^_&(C^R))+w[12]+2368359562&4294967295,S=C+(I<<20&4294967295|I>>>12),I=_+(S^C^R)+w[5]+4294588738&4294967295,_=S+(I<<4&4294967295|I>>>28),I=R+(_^S^C)+w[8]+2272392833&4294967295,R=_+(I<<11&4294967295|I>>>21),I=C+(R^_^S)+w[11]+1839030562&4294967295,C=R+(I<<16&4294967295|I>>>16),I=S+(C^R^_)+w[14]+4259657740&4294967295,S=C+(I<<23&4294967295|I>>>9),I=_+(S^C^R)+w[1]+2763975236&4294967295,_=S+(I<<4&4294967295|I>>>28),I=R+(_^S^C)+w[4]+1272893353&4294967295,R=_+(I<<11&4294967295|I>>>21),I=C+(R^_^S)+w[7]+4139469664&4294967295,C=R+(I<<16&4294967295|I>>>16),I=S+(C^R^_)+w[10]+3200236656&4294967295,S=C+(I<<23&4294967295|I>>>9),I=_+(S^C^R)+w[13]+681279174&4294967295,_=S+(I<<4&4294967295|I>>>28),I=R+(_^S^C)+w[0]+3936430074&4294967295,R=_+(I<<11&4294967295|I>>>21),I=C+(R^_^S)+w[3]+3572445317&4294967295,C=R+(I<<16&4294967295|I>>>16),I=S+(C^R^_)+w[6]+76029189&4294967295,S=C+(I<<23&4294967295|I>>>9),I=_+(S^C^R)+w[9]+3654602809&4294967295,_=S+(I<<4&4294967295|I>>>28),I=R+(_^S^C)+w[12]+3873151461&4294967295,R=_+(I<<11&4294967295|I>>>21),I=C+(R^_^S)+w[15]+530742520&4294967295,C=R+(I<<16&4294967295|I>>>16),I=S+(C^R^_)+w[2]+3299628645&4294967295,S=C+(I<<23&4294967295|I>>>9),I=_+(C^(S|~R))+w[0]+4096336452&4294967295,_=S+(I<<6&4294967295|I>>>26),I=R+(S^(_|~C))+w[7]+1126891415&4294967295,R=_+(I<<10&4294967295|I>>>22),I=C+(_^(R|~S))+w[14]+2878612391&4294967295,C=R+(I<<15&4294967295|I>>>17),I=S+(R^(C|~_))+w[5]+4237533241&4294967295,S=C+(I<<21&4294967295|I>>>11),I=_+(C^(S|~R))+w[12]+1700485571&4294967295,_=S+(I<<6&4294967295|I>>>26),I=R+(S^(_|~C))+w[3]+2399980690&4294967295,R=_+(I<<10&4294967295|I>>>22),I=C+(_^(R|~S))+w[10]+4293915773&4294967295,C=R+(I<<15&4294967295|I>>>17),I=S+(R^(C|~_))+w[1]+2240044497&4294967295,S=C+(I<<21&4294967295|I>>>11),I=_+(C^(S|~R))+w[8]+1873313359&4294967295,_=S+(I<<6&4294967295|I>>>26),I=R+(S^(_|~C))+w[15]+4264355552&4294967295,R=_+(I<<10&4294967295|I>>>22),I=C+(_^(R|~S))+w[6]+2734768916&4294967295,C=R+(I<<15&4294967295|I>>>17),I=S+(R^(C|~_))+w[13]+1309151649&4294967295,S=C+(I<<21&4294967295|I>>>11),I=_+(C^(S|~R))+w[4]+4149444226&4294967295,_=S+(I<<6&4294967295|I>>>26),I=R+(S^(_|~C))+w[11]+3174756917&4294967295,R=_+(I<<10&4294967295|I>>>22),I=C+(_^(R|~S))+w[2]+718787259&4294967295,C=R+(I<<15&4294967295|I>>>17),I=S+(R^(C|~_))+w[9]+3951481745&4294967295,y.g[0]=y.g[0]+_&4294967295,y.g[1]=y.g[1]+(C+(I<<21&4294967295|I>>>11))&4294967295,y.g[2]=y.g[2]+C&4294967295,y.g[3]=y.g[3]+R&4294967295}i.prototype.v=function(y,_){_===void 0&&(_=y.length);const S=_-this.blockSize,w=this.C;let C=this.h,R=0;for(;R<_;){if(C==0)for(;R<=S;)r(this,y,R),R+=this.blockSize;if(typeof y=="string"){for(;R<_;)if(w[C++]=y.charCodeAt(R++),C==this.blockSize){r(this,w),C=0;break}}else for(;R<_;)if(w[C++]=y[R++],C==this.blockSize){r(this,w),C=0;break}}this.h=C,this.o+=_},i.prototype.A=function(){var y=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);y[0]=128;for(var _=1;_<y.length-8;++_)y[_]=0;_=this.o*8;for(var S=y.length-8;S<y.length;++S)y[S]=_&255,_/=256;for(this.v(y),y=Array(16),_=0,S=0;S<4;++S)for(let w=0;w<32;w+=8)y[_++]=this.g[S]>>>w&255;return y};function s(y,_){var S=l;return Object.prototype.hasOwnProperty.call(S,y)?S[y]:S[y]=_(y)}function a(y,_){this.h=_;const S=[];let w=!0;for(let C=y.length-1;C>=0;C--){const R=y[C]|0;w&&R==_||(S[C]=R,w=!1)}this.g=S}var l={};function u(y){return-128<=y&&y<128?s(y,function(_){return new a([_|0],_<0?-1:0)}):new a([y|0],y<0?-1:0)}function c(y){if(isNaN(y)||!isFinite(y))return d;if(y<0)return O(c(-y));const _=[];let S=1;for(let w=0;y>=S;w++)_[w]=y/S|0,S*=4294967296;return new a(_,0)}function f(y,_){if(y.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(y.charAt(0)=="-")return O(f(y.substring(1),_));if(y.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=c(Math.pow(_,8));let w=d;for(let R=0;R<y.length;R+=8){var C=Math.min(8,y.length-R);const I=parseInt(y.substring(R,R+C),_);C<8?(C=c(Math.pow(_,C)),w=w.j(C).add(c(I))):(w=w.j(S),w=w.add(c(I)))}return w}var d=u(0),m=u(1),v=u(16777216);t=a.prototype,t.m=function(){if(M(this))return-O(this).m();let y=0,_=1;for(let S=0;S<this.g.length;S++){const w=this.i(S);y+=(w>=0?w:4294967296+w)*_,_*=4294967296}return y},t.toString=function(y){if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(x(this))return"0";if(M(this))return"-"+O(this).toString(y);const _=c(Math.pow(y,6));var S=this;let w="";for(;;){const C=N(S,_).g;S=A(S,C.j(_));let R=((S.g.length>0?S.g[0]:S.h)>>>0).toString(y);if(S=C,x(S))return R+w;for(;R.length<6;)R="0"+R;w=R+w}},t.i=function(y){return y<0?0:y<this.g.length?this.g[y]:this.h};function x(y){if(y.h!=0)return!1;for(let _=0;_<y.g.length;_++)if(y.g[_]!=0)return!1;return!0}function M(y){return y.h==-1}t.l=function(y){return y=A(this,y),M(y)?-1:x(y)?0:1};function O(y){const _=y.g.length,S=[];for(let w=0;w<_;w++)S[w]=~y.g[w];return new a(S,~y.h).add(m)}t.abs=function(){return M(this)?O(this):this},t.add=function(y){const _=Math.max(this.g.length,y.g.length),S=[];let w=0;for(let C=0;C<=_;C++){let R=w+(this.i(C)&65535)+(y.i(C)&65535),I=(R>>>16)+(this.i(C)>>>16)+(y.i(C)>>>16);w=I>>>16,R&=65535,I&=65535,S[C]=I<<16|R}return new a(S,S[S.length-1]&-2147483648?-1:0)};function A(y,_){return y.add(O(_))}t.j=function(y){if(x(this)||x(y))return d;if(M(this))return M(y)?O(this).j(O(y)):O(O(this).j(y));if(M(y))return O(this.j(O(y)));if(this.l(v)<0&&y.l(v)<0)return c(this.m()*y.m());const _=this.g.length+y.g.length,S=[];for(var w=0;w<2*_;w++)S[w]=0;for(w=0;w<this.g.length;w++)for(let C=0;C<y.g.length;C++){const R=this.i(w)>>>16,I=this.i(w)&65535,j=y.i(C)>>>16,$=y.i(C)&65535;S[2*w+2*C]+=I*$,T(S,2*w+2*C),S[2*w+2*C+1]+=R*$,T(S,2*w+2*C+1),S[2*w+2*C+1]+=I*j,T(S,2*w+2*C+1),S[2*w+2*C+2]+=R*j,T(S,2*w+2*C+2)}for(y=0;y<_;y++)S[y]=S[2*y+1]<<16|S[2*y];for(y=_;y<2*_;y++)S[y]=0;return new a(S,0)};function T(y,_){for(;(y[_]&65535)!=y[_];)y[_+1]+=y[_]>>>16,y[_]&=65535,_++}function E(y,_){this.g=y,this.h=_}function N(y,_){if(x(_))throw Error("division by zero");if(x(y))return new E(d,d);if(M(y))return _=N(O(y),_),new E(O(_.g),O(_.h));if(M(_))return _=N(y,O(_)),new E(O(_.g),_.h);if(y.g.length>30){if(M(y)||M(_))throw Error("slowDivide_ only works with positive integers.");for(var S=m,w=_;w.l(y)<=0;)S=P(S),w=P(w);var C=G(S,1),R=G(w,1);for(w=G(w,2),S=G(S,2);!x(w);){var I=R.add(w);I.l(y)<=0&&(C=C.add(S),R=I),w=G(w,1),S=G(S,1)}return _=A(y,C.j(_)),new E(C,_)}for(C=d;y.l(_)>=0;){for(S=Math.max(1,Math.floor(y.m()/_.m())),w=Math.ceil(Math.log(S)/Math.LN2),w=w<=48?1:Math.pow(2,w-48),R=c(S),I=R.j(_);M(I)||I.l(y)>0;)S-=w,R=c(S),I=R.j(_);x(R)&&(R=m),C=C.add(R),y=A(y,I)}return new E(C,y)}t.B=function(y){return N(this,y).h},t.and=function(y){const _=Math.max(this.g.length,y.g.length),S=[];for(let w=0;w<_;w++)S[w]=this.i(w)&y.i(w);return new a(S,this.h&y.h)},t.or=function(y){const _=Math.max(this.g.length,y.g.length),S=[];for(let w=0;w<_;w++)S[w]=this.i(w)|y.i(w);return new a(S,this.h|y.h)},t.xor=function(y){const _=Math.max(this.g.length,y.g.length),S=[];for(let w=0;w<_;w++)S[w]=this.i(w)^y.i(w);return new a(S,this.h^y.h)};function P(y){const _=y.g.length+1,S=[];for(let w=0;w<_;w++)S[w]=y.i(w)<<1|y.i(w-1)>>>31;return new a(S,y.h)}function G(y,_){const S=_>>5;_%=32;const w=y.g.length-S,C=[];for(let R=0;R<w;R++)C[R]=_>0?y.i(R+S)>>>_|y.i(R+S+1)<<32-_:y.i(R+S);return new a(C,y.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,M1=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=f,tr=a}).apply(typeof Cv<"u"?Cv:typeof self<"u"?self:typeof window<"u"?window:{});var mu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var V1,mo,k1,zu,lm,L1,P1,U1;(function(){var t,e=Object.defineProperty;function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof mu=="object"&&mu];for(var h=0;h<o.length;++h){var p=o[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var i=n(this);function r(o,h){if(h)e:{var p=i;o=o.split(".");for(var b=0;b<o.length-1;b++){var V=o[b];if(!(V in p))break e;p=p[V]}o=o[o.length-1],b=p[o],h=h(b),h!=b&&h!=null&&e(p,o,{configurable:!0,writable:!0,value:h})}}r("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(o){return o||function(h){var p=[],b;for(b in h)Object.prototype.hasOwnProperty.call(h,b)&&p.push([b,h[b]]);return p}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function l(o){var h=typeof o;return h=="object"&&o!=null||h=="function"}function u(o,h,p){return o.call.apply(o.bind,arguments)}function c(o,h,p){return c=u,c.apply(null,arguments)}function f(o,h){var p=Array.prototype.slice.call(arguments,1);return function(){var b=p.slice();return b.push.apply(b,arguments),o.apply(this,b)}}function d(o,h){function p(){}p.prototype=h.prototype,o.Z=h.prototype,o.prototype=new p,o.prototype.constructor=o,o.Ob=function(b,V,k){for(var Q=Array(arguments.length-2),se=2;se<arguments.length;se++)Q[se-2]=arguments[se];return h.prototype[V].apply(b,Q)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function v(o){const h=o.length;if(h>0){const p=Array(h);for(let b=0;b<h;b++)p[b]=o[b];return p}return[]}function x(o,h){for(let b=1;b<arguments.length;b++){const V=arguments[b];var p=typeof V;if(p=p!="object"?p:V?Array.isArray(V)?"array":p:"null",p=="array"||p=="object"&&typeof V.length=="number"){p=o.length||0;const k=V.length||0;o.length=p+k;for(let Q=0;Q<k;Q++)o[p+Q]=V[Q]}else o.push(V)}}class M{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function O(o){a.setTimeout(()=>{throw o},0)}function A(){var o=y;let h=null;return o.g&&(h=o.g,o.g=o.g.next,o.g||(o.h=null),h.next=null),h}class T{constructor(){this.h=this.g=null}add(h,p){const b=E.get();b.set(h,p),this.h?this.h.next=b:this.g=b,this.h=b}}var E=new M(()=>new N,o=>o.reset());class N{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let P,G=!1,y=new T,_=()=>{const o=Promise.resolve(void 0);P=()=>{o.then(S)}};function S(){for(var o;o=A();){try{o.h.call(o.g)}catch(p){O(p)}var h=E;h.j(o),h.h<100&&(h.h++,o.next=h.g,h.g=o)}G=!1}function w(){this.u=this.u,this.C=this.C}w.prototype.u=!1,w.prototype.dispose=function(){this.u||(this.u=!0,this.N())},w.prototype[Symbol.dispose]=function(){this.dispose()},w.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(o,h){this.type=o,this.g=this.target=h,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,h=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return o}();function I(o){return/^[\s\xa0]*$/.test(o)}function j(o,h){C.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,h)}d(j,C),j.prototype.init=function(o,h){const p=this.type=o.type,b=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=h,h=o.relatedTarget,h||(p=="mouseover"?h=o.fromElement:p=="mouseout"&&(h=o.toElement)),this.relatedTarget=h,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&j.Z.h.call(this)},j.prototype.h=function(){j.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var $="closure_listenable_"+(Math.random()*1e6|0),H=0;function L(o,h,p,b,V){this.listener=o,this.proxy=null,this.src=h,this.type=p,this.capture=!!b,this.ha=V,this.key=++H,this.da=this.fa=!1}function q(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function F(o,h,p){for(const b in o)h.call(p,o[b],b,o)}function W(o,h){for(const p in o)h.call(void 0,o[p],p,o)}function de(o){const h={};for(const p in o)h[p]=o[p];return h}const ke="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ut(o,h){let p,b;for(let V=1;V<arguments.length;V++){b=arguments[V];for(p in b)o[p]=b[p];for(let k=0;k<ke.length;k++)p=ke[k],Object.prototype.hasOwnProperty.call(b,p)&&(o[p]=b[p])}}function le(o){this.src=o,this.g={},this.h=0}le.prototype.add=function(o,h,p,b,V){const k=o.toString();o=this.g[k],o||(o=this.g[k]=[],this.h++);const Q=Ma(o,h,b,V);return Q>-1?(h=o[Q],p||(h.fa=!1)):(h=new L(h,this.src,k,!!b,V),h.fa=p,o.push(h)),h};function Le(o,h){const p=h.type;if(p in o.g){var b=o.g[p],V=Array.prototype.indexOf.call(b,h,void 0),k;(k=V>=0)&&Array.prototype.splice.call(b,V,1),k&&(q(h),o.g[p].length==0&&(delete o.g[p],o.h--))}}function Ma(o,h,p,b){for(let V=0;V<o.length;++V){const k=o[V];if(!k.da&&k.listener==h&&k.capture==!!p&&k.ha==b)return V}return-1}var Er="closure_lm_"+(Math.random()*1e6|0),Uh={};function jg(o,h,p,b,V){if(Array.isArray(h)){for(let k=0;k<h.length;k++)jg(o,h[k],p,b,V);return null}return p=qg(p),o&&o[$]?o.J(h,p,l(b)?!!b.capture:!1,V):YA(o,h,p,!1,b,V)}function YA(o,h,p,b,V,k){if(!h)throw Error("Invalid event type");const Q=l(V)?!!V.capture:!!V;let se=zh(o);if(se||(o[Er]=se=new le(o)),p=se.add(h,p,b,Q,k),p.proxy)return p;if(b=XA(),p.proxy=b,b.src=o,b.listener=p,o.addEventListener)R||(V=Q),V===void 0&&(V=!1),o.addEventListener(h.toString(),b,V);else if(o.attachEvent)o.attachEvent(Bg(h.toString()),b);else if(o.addListener&&o.removeListener)o.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return p}function XA(){function o(p){return h.call(o.src,o.listener,p)}const h=WA;return o}function zg(o,h,p,b,V){if(Array.isArray(h))for(var k=0;k<h.length;k++)zg(o,h[k],p,b,V);else b=l(b)?!!b.capture:!!b,p=qg(p),o&&o[$]?(o=o.i,k=String(h).toString(),k in o.g&&(h=o.g[k],p=Ma(h,p,b,V),p>-1&&(q(h[p]),Array.prototype.splice.call(h,p,1),h.length==0&&(delete o.g[k],o.h--)))):o&&(o=zh(o))&&(h=o.g[h.toString()],o=-1,h&&(o=Ma(h,p,b,V)),(p=o>-1?h[o]:null)&&jh(p))}function jh(o){if(typeof o!="number"&&o&&!o.da){var h=o.src;if(h&&h[$])Le(h.i,o);else{var p=o.type,b=o.proxy;h.removeEventListener?h.removeEventListener(p,b,o.capture):h.detachEvent?h.detachEvent(Bg(p),b):h.addListener&&h.removeListener&&h.removeListener(b),(p=zh(h))?(Le(p,o),p.h==0&&(p.src=null,h[Er]=null)):q(o)}}}function Bg(o){return o in Uh?Uh[o]:Uh[o]="on"+o}function WA(o,h){if(o.da)o=!0;else{h=new j(h,this);const p=o.listener,b=o.ha||o.src;o.fa&&jh(o),o=p.call(b,h)}return o}function zh(o){return o=o[Er],o instanceof le?o:null}var Bh="__closure_events_fn_"+(Math.random()*1e9>>>0);function qg(o){return typeof o=="function"?o:(o[Bh]||(o[Bh]=function(h){return o.handleEvent(h)}),o[Bh])}function _t(){w.call(this),this.i=new le(this),this.M=this,this.G=null}d(_t,w),_t.prototype[$]=!0,_t.prototype.removeEventListener=function(o,h,p,b){zg(this,o,h,p,b)};function St(o,h){var p,b=o.G;if(b)for(p=[];b;b=b.G)p.push(b);if(o=o.M,b=h.type||h,typeof h=="string")h=new C(h,o);else if(h instanceof C)h.target=h.target||o;else{var V=h;h=new C(b,o),ut(h,V)}V=!0;let k,Q;if(p)for(Q=p.length-1;Q>=0;Q--)k=h.g=p[Q],V=jl(k,b,!0,h)&&V;if(k=h.g=o,V=jl(k,b,!0,h)&&V,V=jl(k,b,!1,h)&&V,p)for(Q=0;Q<p.length;Q++)k=h.g=p[Q],V=jl(k,b,!1,h)&&V}_t.prototype.N=function(){if(_t.Z.N.call(this),this.i){var o=this.i;for(const h in o.g){const p=o.g[h];for(let b=0;b<p.length;b++)q(p[b]);delete o.g[h],o.h--}}this.G=null},_t.prototype.J=function(o,h,p,b){return this.i.add(String(o),h,!1,p,b)},_t.prototype.K=function(o,h,p,b){return this.i.add(String(o),h,!0,p,b)};function jl(o,h,p,b){if(h=o.i.g[String(h)],!h)return!0;h=h.concat();let V=!0;for(let k=0;k<h.length;++k){const Q=h[k];if(Q&&!Q.da&&Q.capture==p){const se=Q.listener,et=Q.ha||Q.src;Q.fa&&Le(o.i,Q),V=se.call(et,b)!==!1&&V}}return V&&!b.defaultPrevented}function JA(o,h){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=c(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:a.setTimeout(o,h||0)}function Hg(o){o.g=JA(()=>{o.g=null,o.i&&(o.i=!1,Hg(o))},o.l);const h=o.h;o.h=null,o.m.apply(null,h)}class ZA extends w{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Hg(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Va(o){w.call(this),this.h=o,this.g={}}d(Va,w);var Fg=[];function Gg(o){F(o.g,function(h,p){this.g.hasOwnProperty(p)&&jh(h)},o),o.g={}}Va.prototype.N=function(){Va.Z.N.call(this),Gg(this)},Va.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qh=a.JSON.stringify,ew=a.JSON.parse,tw=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function Qg(){}function Kg(){}var ka={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Hh(){C.call(this,"d")}d(Hh,C);function Fh(){C.call(this,"c")}d(Fh,C);var Tr={},$g=null;function zl(){return $g=$g||new _t}Tr.Ia="serverreachability";function Yg(o){C.call(this,Tr.Ia,o)}d(Yg,C);function La(o){const h=zl();St(h,new Yg(h))}Tr.STAT_EVENT="statevent";function Xg(o,h){C.call(this,Tr.STAT_EVENT,o),this.stat=h}d(Xg,C);function At(o){const h=zl();St(h,new Xg(h,o))}Tr.Ja="timingevent";function Wg(o,h){C.call(this,Tr.Ja,o),this.size=h}d(Wg,C);function Pa(o,h){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},h)}function Ua(){this.g=!0}Ua.prototype.ua=function(){this.g=!1};function nw(o,h,p,b,V,k){o.info(function(){if(o.g)if(k){var Q="",se=k.split("&");for(let Se=0;Se<se.length;Se++){var et=se[Se].split("=");if(et.length>1){const rt=et[0];et=et[1];const bn=rt.split("_");Q=bn.length>=2&&bn[1]=="type"?Q+(rt+"="+et+"&"):Q+(rt+"=redacted&")}}}else Q=null;else Q=k;return"XMLHTTP REQ ("+b+") [attempt "+V+"]: "+h+`
`+p+`
`+Q})}function iw(o,h,p,b,V,k,Q){o.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+V+"]: "+h+`
`+p+`
`+k+" "+Q})}function os(o,h,p,b){o.info(function(){return"XMLHTTP TEXT ("+h+"): "+sw(o,p)+(b?" "+b:"")})}function rw(o,h){o.info(function(){return"TIMEOUT: "+h})}Ua.prototype.info=function(){};function sw(o,h){if(!o.g)return h;if(!h)return null;try{const k=JSON.parse(h);if(k){for(o=0;o<k.length;o++)if(Array.isArray(k[o])){var p=k[o];if(!(p.length<2)){var b=p[1];if(Array.isArray(b)&&!(b.length<1)){var V=b[0];if(V!="noop"&&V!="stop"&&V!="close")for(let Q=1;Q<b.length;Q++)b[Q]=""}}}}return qh(k)}catch{return h}}var Bl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Jg={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Zg;function Gh(){}d(Gh,Qg),Gh.prototype.g=function(){return new XMLHttpRequest},Zg=new Gh;function ja(o){return encodeURIComponent(String(o))}function aw(o){var h=1;o=o.split(":");const p=[];for(;h>0&&o.length;)p.push(o.shift()),h--;return o.length&&p.push(o.join(":")),p}function vi(o,h,p,b){this.j=o,this.i=h,this.l=p,this.S=b||1,this.V=new Va(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ey}function ey(){this.i=null,this.g="",this.h=!1}var ty={},Qh={};function Kh(o,h,p){o.M=1,o.A=Hl(Tn(h)),o.u=p,o.R=!0,ny(o,null)}function ny(o,h){o.F=Date.now(),ql(o),o.B=Tn(o.A);var p=o.B,b=o.S;Array.isArray(b)||(b=[String(b)]),py(p.i,"t",b),o.C=0,p=o.j.L,o.h=new ey,o.g=My(o.j,p?h:null,!o.u),o.P>0&&(o.O=new ZA(c(o.Y,o,o.g),o.P)),h=o.V,p=o.g,b=o.ba;var V="readystatechange";Array.isArray(V)||(V&&(Fg[0]=V.toString()),V=Fg);for(let k=0;k<V.length;k++){const Q=jg(p,V[k],b||h.handleEvent,!1,h.h||h);if(!Q)break;h.g[Q.key]=Q}h=o.J?de(o.J):{},o.u?(o.v||(o.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,h)):(o.v="GET",o.g.ea(o.B,o.v,null,h)),La(),nw(o.i,o.v,o.B,o.l,o.S,o.u)}vi.prototype.ba=function(o){o=o.target;const h=this.O;h&&bi(o)==3?h.j():this.Y(o)},vi.prototype.Y=function(o){try{if(o==this.g)e:{const se=bi(this.g),et=this.g.ya(),Se=this.g.ca();if(!(se<3)&&(se!=3||this.g&&(this.h.h||this.g.la()||by(this.g)))){this.K||se!=4||et==7||(et==8||Se<=0?La(3):La(2)),$h(this);var h=this.g.ca();this.X=h;var p=ow(this);if(this.o=h==200,iw(this.i,this.v,this.B,this.l,this.S,se,h),this.o){if(this.U&&!this.L){t:{if(this.g){var b,V=this.g;if((b=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(b)){var k=b;break t}}k=null}if(o=k)os(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Yh(this,o);else{this.o=!1,this.m=3,At(12),br(this),za(this);break e}}if(this.R){o=!0;let rt;for(;!this.K&&this.C<p.length;)if(rt=lw(this,p),rt==Qh){se==4&&(this.m=4,At(14),o=!1),os(this.i,this.l,null,"[Incomplete Response]");break}else if(rt==ty){this.m=4,At(15),os(this.i,this.l,p,"[Invalid Chunk]"),o=!1;break}else os(this.i,this.l,rt,null),Yh(this,rt);if(iy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),se!=4||p.length!=0||this.h.h||(this.m=1,At(16),o=!1),this.o=this.o&&o,!o)os(this.i,this.l,p,"[Invalid Chunked Response]"),br(this),za(this);else if(p.length>0&&!this.W){this.W=!0;var Q=this.j;Q.g==this&&Q.aa&&!Q.P&&(Q.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),rf(Q),Q.P=!0,At(11))}}else os(this.i,this.l,p,null),Yh(this,p);se==4&&br(this),this.o&&!this.K&&(se==4?xy(this.j,this):(this.o=!1,ql(this)))}else bw(this.g),h==400&&p.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),br(this),za(this)}}}catch{}finally{}};function ow(o){if(!iy(o))return o.g.la();const h=by(o.g);if(h==="")return"";let p="";const b=h.length,V=bi(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return br(o),za(o),"";o.h.i=new a.TextDecoder}for(let k=0;k<b;k++)o.h.h=!0,p+=o.h.i.decode(h[k],{stream:!(V&&k==b-1)});return h.length=0,o.h.g+=p,o.C=0,o.h.g}function iy(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function lw(o,h){var p=o.C,b=h.indexOf(`
`,p);return b==-1?Qh:(p=Number(h.substring(p,b)),isNaN(p)?ty:(b+=1,b+p>h.length?Qh:(h=h.slice(b,b+p),o.C=b+p,h)))}vi.prototype.cancel=function(){this.K=!0,br(this)};function ql(o){o.T=Date.now()+o.H,ry(o,o.H)}function ry(o,h){if(o.D!=null)throw Error("WatchDog timer not null");o.D=Pa(c(o.aa,o),h)}function $h(o){o.D&&(a.clearTimeout(o.D),o.D=null)}vi.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(rw(this.i,this.B),this.M!=2&&(La(),At(17)),br(this),this.m=2,za(this)):ry(this,this.T-o)};function za(o){o.j.I==0||o.K||xy(o.j,o)}function br(o){$h(o);var h=o.O;h&&typeof h.dispose=="function"&&h.dispose(),o.O=null,Gg(o.V),o.g&&(h=o.g,o.g=null,h.abort(),h.dispose())}function Yh(o,h){try{var p=o.j;if(p.I!=0&&(p.g==o||Xh(p.h,o))){if(!o.L&&Xh(p.h,o)&&p.I==3){try{var b=p.Ba.g.parse(h)}catch{b=null}if(Array.isArray(b)&&b.length==3){var V=b;if(V[0]==0){e:if(!p.v){if(p.g)if(p.g.F+3e3<o.F)$l(p),Ql(p);else break e;nf(p),At(18)}}else p.xa=V[1],0<p.xa-p.K&&V[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=Pa(c(p.Va,p),6e3));oy(p.h)<=1&&p.ta&&(p.ta=void 0)}else Ar(p,11)}else if((o.L||p.g==o)&&$l(p),!I(h))for(V=p.Ba.g.parse(h),h=0;h<V.length;h++){let Se=V[h];const rt=Se[0];if(!(rt<=p.K))if(p.K=rt,Se=Se[1],p.I==2)if(Se[0]=="c"){p.M=Se[1],p.ba=Se[2];const bn=Se[3];bn!=null&&(p.ka=bn,p.j.info("VER="+p.ka));const wr=Se[4];wr!=null&&(p.za=wr,p.j.info("SVER="+p.za));const Si=Se[5];Si!=null&&typeof Si=="number"&&Si>0&&(b=1.5*Si,p.O=b,p.j.info("backChannelRequestTimeoutMs_="+b)),b=p;const Ai=o.g;if(Ai){const Xl=Ai.g?Ai.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xl){var k=b.h;k.g||Xl.indexOf("spdy")==-1&&Xl.indexOf("quic")==-1&&Xl.indexOf("h2")==-1||(k.j=k.l,k.g=new Set,k.h&&(Wh(k,k.h),k.h=null))}if(b.G){const sf=Ai.g?Ai.g.getResponseHeader("X-HTTP-Session-Id"):null;sf&&(b.wa=sf,Ce(b.J,b.G,sf))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-o.F,p.j.info("Handshake RTT: "+p.T+"ms")),b=p;var Q=o;if(b.na=Oy(b,b.L?b.ba:null,b.W),Q.L){ly(b.h,Q);var se=Q,et=b.O;et&&(se.H=et),se.D&&($h(se),ql(se)),b.g=Q}else Cy(b);p.i.length>0&&Kl(p)}else Se[0]!="stop"&&Se[0]!="close"||Ar(p,7);else p.I==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?Ar(p,7):tf(p):Se[0]!="noop"&&p.l&&p.l.qa(Se),p.A=0)}}La(4)}catch{}}var uw=class{constructor(o,h){this.g=o,this.map=h}};function sy(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ay(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function oy(o){return o.h?1:o.g?o.g.size:0}function Xh(o,h){return o.h?o.h==h:o.g?o.g.has(h):!1}function Wh(o,h){o.g?o.g.add(h):o.h=h}function ly(o,h){o.h&&o.h==h?o.h=null:o.g&&o.g.has(h)&&o.g.delete(h)}sy.prototype.cancel=function(){if(this.i=uy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function uy(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let h=o.i;for(const p of o.g.values())h=h.concat(p.G);return h}return v(o.i)}var cy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cw(o,h){if(o){o=o.split("&");for(let p=0;p<o.length;p++){const b=o[p].indexOf("=");let V,k=null;b>=0?(V=o[p].substring(0,b),k=o[p].substring(b+1)):V=o[p],h(V,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function Ei(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;o instanceof Ei?(this.l=o.l,Ba(this,o.j),this.o=o.o,this.g=o.g,qa(this,o.u),this.h=o.h,Jh(this,gy(o.i)),this.m=o.m):o&&(h=String(o).match(cy))?(this.l=!1,Ba(this,h[1]||"",!0),this.o=Ha(h[2]||""),this.g=Ha(h[3]||"",!0),qa(this,h[4]),this.h=Ha(h[5]||"",!0),Jh(this,h[6]||"",!0),this.m=Ha(h[7]||"")):(this.l=!1,this.i=new Ga(null,this.l))}Ei.prototype.toString=function(){const o=[];var h=this.j;h&&o.push(Fa(h,hy,!0),":");var p=this.g;return(p||h=="file")&&(o.push("//"),(h=this.o)&&o.push(Fa(h,hy,!0),"@"),o.push(ja(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&o.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&o.push("/"),o.push(Fa(p,p.charAt(0)=="/"?dw:fw,!0))),(p=this.i.toString())&&o.push("?",p),(p=this.m)&&o.push("#",Fa(p,pw)),o.join("")},Ei.prototype.resolve=function(o){const h=Tn(this);let p=!!o.j;p?Ba(h,o.j):p=!!o.o,p?h.o=o.o:p=!!o.g,p?h.g=o.g:p=o.u!=null;var b=o.h;if(p)qa(h,o.u);else if(p=!!o.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var V=h.h.lastIndexOf("/");V!=-1&&(b=h.h.slice(0,V+1)+b)}if(V=b,V==".."||V==".")b="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){b=V.lastIndexOf("/",0)==0,V=V.split("/");const k=[];for(let Q=0;Q<V.length;){const se=V[Q++];se=="."?b&&Q==V.length&&k.push(""):se==".."?((k.length>1||k.length==1&&k[0]!="")&&k.pop(),b&&Q==V.length&&k.push("")):(k.push(se),b=!0)}b=k.join("/")}else b=V}return p?h.h=b:p=o.i.toString()!=="",p?Jh(h,gy(o.i)):p=!!o.m,p&&(h.m=o.m),h};function Tn(o){return new Ei(o)}function Ba(o,h,p){o.j=p?Ha(h,!0):h,o.j&&(o.j=o.j.replace(/:$/,""))}function qa(o,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);o.u=h}else o.u=null}function Jh(o,h,p){h instanceof Ga?(o.i=h,gw(o.i,o.l)):(p||(h=Fa(h,mw)),o.i=new Ga(h,o.l))}function Ce(o,h,p){o.i.set(h,p)}function Hl(o){return Ce(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function Ha(o,h){return o?h?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Fa(o,h,p){return typeof o=="string"?(o=encodeURI(o).replace(h,hw),p&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function hw(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var hy=/[#\/\?@]/g,fw=/[#\?:]/g,dw=/[#\?]/g,mw=/[#\?@]/g,pw=/#/g;function Ga(o,h){this.h=this.g=null,this.i=o||null,this.j=!!h}function Sr(o){o.g||(o.g=new Map,o.h=0,o.i&&cw(o.i,function(h,p){o.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Ga.prototype,t.add=function(o,h){Sr(this),this.i=null,o=ls(this,o);let p=this.g.get(o);return p||this.g.set(o,p=[]),p.push(h),this.h+=1,this};function fy(o,h){Sr(o),h=ls(o,h),o.g.has(h)&&(o.i=null,o.h-=o.g.get(h).length,o.g.delete(h))}function dy(o,h){return Sr(o),h=ls(o,h),o.g.has(h)}t.forEach=function(o,h){Sr(this),this.g.forEach(function(p,b){p.forEach(function(V){o.call(h,V,b,this)},this)},this)};function my(o,h){Sr(o);let p=[];if(typeof h=="string")dy(o,h)&&(p=p.concat(o.g.get(ls(o,h))));else for(o=Array.from(o.g.values()),h=0;h<o.length;h++)p=p.concat(o[h]);return p}t.set=function(o,h){return Sr(this),this.i=null,o=ls(this,o),dy(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[h]),this.h+=1,this},t.get=function(o,h){return o?(o=my(this,o),o.length>0?String(o[0]):h):h};function py(o,h,p){fy(o,h),p.length>0&&(o.i=null,o.g.set(ls(o,h),v(p)),o.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],h=Array.from(this.g.keys());for(let b=0;b<h.length;b++){var p=h[b];const V=ja(p);p=my(this,p);for(let k=0;k<p.length;k++){let Q=V;p[k]!==""&&(Q+="="+ja(p[k])),o.push(Q)}}return this.i=o.join("&")};function gy(o){const h=new Ga;return h.i=o.i,o.g&&(h.g=new Map(o.g),h.h=o.h),h}function ls(o,h){return h=String(h),o.j&&(h=h.toLowerCase()),h}function gw(o,h){h&&!o.j&&(Sr(o),o.i=null,o.g.forEach(function(p,b){const V=b.toLowerCase();b!=V&&(fy(this,b),py(this,V,p))},o)),o.j=h}function yw(o,h){const p=new Ua;if(a.Image){const b=new Image;b.onload=f(Ti,p,"TestLoadImage: loaded",!0,h,b),b.onerror=f(Ti,p,"TestLoadImage: error",!1,h,b),b.onabort=f(Ti,p,"TestLoadImage: abort",!1,h,b),b.ontimeout=f(Ti,p,"TestLoadImage: timeout",!1,h,b),a.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=o}else h(!1)}function _w(o,h){const p=new Ua,b=new AbortController,V=setTimeout(()=>{b.abort(),Ti(p,"TestPingServer: timeout",!1,h)},1e4);fetch(o,{signal:b.signal}).then(k=>{clearTimeout(V),k.ok?Ti(p,"TestPingServer: ok",!0,h):Ti(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(V),Ti(p,"TestPingServer: error",!1,h)})}function Ti(o,h,p,b,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),b(p)}catch{}}function vw(){this.g=new tw}function Zh(o){this.i=o.Sb||null,this.h=o.ab||!1}d(Zh,Qg),Zh.prototype.g=function(){return new Fl(this.i,this.h)};function Fl(o,h){_t.call(this),this.H=o,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Fl,_t),t=Fl.prototype,t.open=function(o,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=h,this.readyState=1,Ka(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(h.body=o),(this.H||a).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Qa(this)),this.readyState=0},t.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Ka(this)),this.g&&(this.readyState=3,Ka(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;yy(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function yy(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}t.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var h=o.value?o.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!o.done}))&&(this.response=this.responseText+=h)}o.done?Qa(this):Ka(this),this.readyState==3&&yy(this)}},t.Oa=function(o){this.g&&(this.response=this.responseText=o,Qa(this))},t.Na=function(o){this.g&&(this.response=o,Qa(this))},t.ga=function(){this.g&&Qa(this)};function Qa(o){o.readyState=4,o.l=null,o.j=null,o.B=null,Ka(o)}t.setRequestHeader=function(o,h){this.A.append(o,h)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,o.push(p[0]+": "+p[1]),p=h.next();return o.join(`\r
`)};function Ka(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Fl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function _y(o){let h="";return F(o,function(p,b){h+=b,h+=":",h+=p,h+=`\r
`}),h}function ef(o,h,p){e:{for(b in p){var b=!1;break e}b=!0}b||(p=_y(p),typeof o=="string"?p!=null&&ja(p):Ce(o,h,p))}function je(o){_t.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(je,_t);var Ew=/^https?$/i,Tw=["POST","PUT"];t=je.prototype,t.Fa=function(o){this.H=o},t.ea=function(o,h,p,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);h=h?h.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Zg.g(),this.g.onreadystatechange=m(c(this.Ca,this));try{this.B=!0,this.g.open(h,String(o),!0),this.B=!1}catch(k){vy(this,k);return}if(o=p||"",p=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var V in b)p.set(V,b[V]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const k of b.keys())p.set(k,b.get(k));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(p.keys()).find(k=>k.toLowerCase()=="content-type"),V=a.FormData&&o instanceof a.FormData,!(Array.prototype.indexOf.call(Tw,h,void 0)>=0)||b||V||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[k,Q]of p)this.g.setRequestHeader(k,Q);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(k){vy(this,k)}};function vy(o,h){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=h,o.o=5,Ey(o),Gl(o)}function Ey(o){o.A||(o.A=!0,St(o,"complete"),St(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,St(this,"complete"),St(this,"abort"),Gl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gl(this,!0)),je.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ty(this):this.Xa())},t.Xa=function(){Ty(this)};function Ty(o){if(o.h&&typeof s<"u"){if(o.v&&bi(o)==4)setTimeout(o.Ca.bind(o),0);else if(St(o,"readystatechange"),bi(o)==4){o.h=!1;try{const k=o.ca();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var b;if(b=k===0){let Q=String(o.D).match(cy)[1]||null;!Q&&a.self&&a.self.location&&(Q=a.self.location.protocol.slice(0,-1)),b=!Ew.test(Q?Q.toLowerCase():"")}p=b}if(p)St(o,"complete"),St(o,"success");else{o.o=6;try{var V=bi(o)>2?o.g.statusText:""}catch{V=""}o.l=V+" ["+o.ca()+"]",Ey(o)}}finally{Gl(o)}}}}function Gl(o,h){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const p=o.g;o.g=null,h||St(o,"ready");try{p.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function bi(o){return o.g?o.g.readyState:0}t.ca=function(){try{return bi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(o){if(this.g){var h=this.g.responseText;return o&&h.indexOf(o)==0&&(h=h.substring(o.length)),ew(h)}};function by(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function bw(o){const h={};o=(o.g&&bi(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<o.length;b++){if(I(o[b]))continue;var p=aw(o[b]);const V=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const k=h[V]||[];h[V]=k,k.push(p)}W(h,function(b){return b.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function $a(o,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[o]||h}function Sy(o){this.za=0,this.i=[],this.j=new Ua,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=$a("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=$a("baseRetryDelayMs",5e3,o),this.Za=$a("retryDelaySeedMs",1e4,o),this.Ta=$a("forwardChannelMaxRetries",2,o),this.va=$a("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new sy(o&&o.concurrentRequestLimit),this.Ba=new vw,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Sy.prototype,t.ka=8,t.I=1,t.connect=function(o,h,p,b){At(0),this.W=o,this.H=h||{},p&&b!==void 0&&(this.H.OSID=p,this.H.OAID=b),this.F=this.X,this.J=Oy(this,null,this.W),Kl(this)};function tf(o){if(Ay(o),o.I==3){var h=o.V++,p=Tn(o.J);if(Ce(p,"SID",o.M),Ce(p,"RID",h),Ce(p,"TYPE","terminate"),Ya(o,p),h=new vi(o,o.j,h),h.M=2,h.A=Hl(Tn(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.A.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.A,p=!0),p||(h.g=My(h.j,null),h.g.ea(h.A)),h.F=Date.now(),ql(h)}Ny(o)}function Ql(o){o.g&&(rf(o),o.g.cancel(),o.g=null)}function Ay(o){Ql(o),o.v&&(a.clearTimeout(o.v),o.v=null),$l(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&a.clearTimeout(o.m),o.m=null)}function Kl(o){if(!ay(o.h)&&!o.m){o.m=!0;var h=o.Ea;P||_(),G||(P(),G=!0),y.add(h,o),o.D=0}}function Sw(o,h){return oy(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=h.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=Pa(c(o.Ea,o,h),Dy(o,o.D)),o.D++,!0)}t.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const V=new vi(this,this.j,o);let k=this.o;if(this.U&&(k?(k=de(k),ut(k,this.U)):k=this.U),this.u!==null||this.R||(V.J=k,k=null),this.S)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var b=this.i[p];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(h+=b,h>4096){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Ry(this,V,h),p=Tn(this.J),Ce(p,"RID",o),Ce(p,"CVER",22),this.G&&Ce(p,"X-HTTP-Session-Id",this.G),Ya(this,p),k&&(this.R?h="headers="+ja(_y(k))+"&"+h:this.u&&ef(p,this.u,k)),Wh(this.h,V),this.Ra&&Ce(p,"TYPE","init"),this.S?(Ce(p,"$req",h),Ce(p,"SID","null"),V.U=!0,Kh(V,p,null)):Kh(V,p,h),this.I=2}}else this.I==3&&(o?wy(this,o):this.i.length==0||ay(this.h)||wy(this))};function wy(o,h){var p;h?p=h.l:p=o.V++;const b=Tn(o.J);Ce(b,"SID",o.M),Ce(b,"RID",p),Ce(b,"AID",o.K),Ya(o,b),o.u&&o.o&&ef(b,o.u,o.o),p=new vi(o,o.j,p,o.D+1),o.u===null&&(p.J=o.o),h&&(o.i=h.G.concat(o.i)),h=Ry(o,p,1e3),p.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),Wh(o.h,p),Kh(p,b,h)}function Ya(o,h){o.H&&F(o.H,function(p,b){Ce(h,b,p)}),o.l&&F({},function(p,b){Ce(h,b,p)})}function Ry(o,h,p){p=Math.min(o.i.length,p);const b=o.l?c(o.l.Ka,o.l,o):null;e:{var V=o.i;let se=-1;for(;;){const et=["count="+p];se==-1?p>0?(se=V[0].g,et.push("ofs="+se)):se=0:et.push("ofs="+se);let Se=!0;for(let rt=0;rt<p;rt++){var k=V[rt].g;const bn=V[rt].map;if(k-=se,k<0)se=Math.max(0,V[rt].g-100),Se=!1;else try{k="req"+k+"_"||"";try{var Q=bn instanceof Map?bn:Object.entries(bn);for(const[wr,Si]of Q){let Ai=Si;l(Si)&&(Ai=qh(Si)),et.push(k+wr+"="+encodeURIComponent(Ai))}}catch(wr){throw et.push(k+"type="+encodeURIComponent("_badmap")),wr}}catch{b&&b(bn)}}if(Se){Q=et.join("&");break e}}Q=void 0}return o=o.i.splice(0,p),h.G=o,Q}function Cy(o){if(!o.g&&!o.v){o.Y=1;var h=o.Da;P||_(),G||(P(),G=!0),y.add(h,o),o.A=0}}function nf(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=Pa(c(o.Da,o),Dy(o,o.A)),o.A++,!0)}t.Da=function(){if(this.v=null,Iy(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=Pa(c(this.Wa,this),o)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),Ql(this),Iy(this))};function rf(o){o.B!=null&&(a.clearTimeout(o.B),o.B=null)}function Iy(o){o.g=new vi(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var h=Tn(o.na);Ce(h,"RID","rpc"),Ce(h,"SID",o.M),Ce(h,"AID",o.K),Ce(h,"CI",o.F?"0":"1"),!o.F&&o.ia&&Ce(h,"TO",o.ia),Ce(h,"TYPE","xmlhttp"),Ya(o,h),o.u&&o.o&&ef(h,o.u,o.o),o.O&&(o.g.H=o.O);var p=o.g;o=o.ba,p.M=1,p.A=Hl(Tn(h)),p.u=null,p.R=!0,ny(p,o)}t.Va=function(){this.C!=null&&(this.C=null,Ql(this),nf(this),At(19))};function $l(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function xy(o,h){var p=null;if(o.g==h){$l(o),rf(o),o.g=null;var b=2}else if(Xh(o.h,h))p=h.G,ly(o.h,h),b=1;else return;if(o.I!=0){if(h.o)if(b==1){p=h.u?h.u.length:0,h=Date.now()-h.F;var V=o.D;b=zl(),St(b,new Wg(b,p)),Kl(o)}else Cy(o);else if(V=h.m,V==3||V==0&&h.X>0||!(b==1&&Sw(o,h)||b==2&&nf(o)))switch(p&&p.length>0&&(h=o.h,h.i=h.i.concat(p)),V){case 1:Ar(o,5);break;case 4:Ar(o,10);break;case 3:Ar(o,6);break;default:Ar(o,2)}}}function Dy(o,h){let p=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(p*=2),p*h}function Ar(o,h){if(o.j.info("Error code "+h),h==2){var p=c(o.bb,o),b=o.Ua;const V=!b;b=new Ei(b||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ba(b,"https"),Hl(b),V?yw(b.toString(),p):_w(b.toString(),p)}else At(2);o.I=0,o.l&&o.l.pa(h),Ny(o),Ay(o)}t.bb=function(o){o?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function Ny(o){if(o.I=0,o.ja=[],o.l){const h=uy(o.h);(h.length!=0||o.i.length!=0)&&(x(o.ja,h),x(o.ja,o.i),o.h.i.length=0,v(o.i),o.i.length=0),o.l.oa()}}function Oy(o,h,p){var b=p instanceof Ei?Tn(p):new Ei(p);if(b.g!="")h&&(b.g=h+"."+b.g),qa(b,b.u);else{var V=a.location;b=V.protocol,h=h?h+"."+V.hostname:V.hostname,V=+V.port;const k=new Ei(null);b&&Ba(k,b),h&&(k.g=h),V&&qa(k,V),p&&(k.h=p),b=k}return p=o.G,h=o.wa,p&&h&&Ce(b,p,h),Ce(b,"VER",o.ka),Ya(o,b),b}function My(o,h,p){if(h&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=o.Aa&&!o.ma?new je(new Zh({ab:p})):new je(o.ma),h.Fa(o.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vy(){}t=Vy.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Yl(){}Yl.prototype.g=function(o,h){return new zt(o,h)};function zt(o,h){_t.call(this),this.g=new Sy(h),this.l=o,this.h=h&&h.messageUrlParams||null,o=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(o?o["X-WebChannel-Content-Type"]=h.messageContentType:o={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(o?o["X-WebChannel-Client-Profile"]=h.sa:o={"X-WebChannel-Client-Profile":h.sa}),this.g.U=o,(o=h&&h.Qb)&&!I(o)&&(this.g.u=o),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!I(h)&&(this.g.G=h,o=this.h,o!==null&&h in o&&(o=this.h,h in o&&delete o[h])),this.j=new us(this)}d(zt,_t),zt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){tf(this.g)},zt.prototype.o=function(o){var h=this.g;if(typeof o=="string"){var p={};p.__data__=o,o=p}else this.v&&(p={},p.__data__=qh(o),o=p);h.i.push(new uw(h.Ya++,o)),h.I==3&&Kl(h)},zt.prototype.N=function(){this.g.l=null,delete this.j,tf(this.g),delete this.g,zt.Z.N.call(this)};function ky(o){Hh.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var h=o.__sm__;if(h){e:{for(const p in h){o=p;break e}o=void 0}(this.i=o)&&(o=this.i,h=h!==null&&o in h?h[o]:void 0),this.data=h}else this.data=o}d(ky,Hh);function Ly(){Fh.call(this),this.status=1}d(Ly,Fh);function us(o){this.g=o}d(us,Vy),us.prototype.ra=function(){St(this.g,"a")},us.prototype.qa=function(o){St(this.g,new ky(o))},us.prototype.pa=function(o){St(this.g,new Ly)},us.prototype.oa=function(){St(this.g,"b")},Yl.prototype.createWebChannel=Yl.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,U1=function(){return new Yl},P1=function(){return zl()},L1=Tr,lm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Bl.NO_ERROR=0,Bl.TIMEOUT=8,Bl.HTTP_ERROR=6,zu=Bl,Jg.COMPLETE="complete",k1=Jg,Kg.EventType=ka,ka.OPEN="a",ka.CLOSE="b",ka.ERROR="c",ka.MESSAGE="d",_t.prototype.listen=_t.prototype.J,mo=Kg,je.prototype.listenOnce=je.prototype.K,je.prototype.getLastError=je.prototype.Ha,je.prototype.getLastErrorCode=je.prototype.ya,je.prototype.getStatus=je.prototype.ca,je.prototype.getResponseJson=je.prototype.La,je.prototype.getResponseText=je.prototype.la,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Fa,V1=je}).apply(typeof mu<"u"?mu:typeof self<"u"?self:typeof window<"u"?window:{});const Iv="@firebase/firestore",xv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Et.UNAUTHENTICATED=new Et(null),Et.GOOGLE_CREDENTIALS=new Et("google-credentials-uid"),Et.FIRST_PARTY=new Et("first-party-uid"),Et.MOCK_USER=new Et("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ba="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r=new zp("@firebase/firestore");function ps(){return $r.logLevel}function Y(t,...e){if($r.logLevel<=ue.DEBUG){const n=e.map(Hp);$r.debug(`Firestore (${ba}): ${t}`,...n)}}function fi(t,...e){if($r.logLevel<=ue.ERROR){const n=e.map(Hp);$r.error(`Firestore (${ba}): ${t}`,...n)}}function ta(t,...e){if($r.logLevel<=ue.WARN){const n=e.map(Hp);$r.warn(`Firestore (${ba}): ${t}`,...n)}}function Hp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,j1(t,i,n)}function j1(t,e,n){let i=`FIRESTORE (${ba}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw fi(i),new Error(i)}function _e(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||j1(e,r,i)}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends _i{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class DD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Et.UNAUTHENTICATED))}shutdown(){}}class ND{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class OD{constructor(e){this.t=e,this.currentUser=Et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_e(this.o===void 0,42304);let i=this.i;const r=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let s=new ni;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ni,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ni)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(_e(typeof i.accessToken=="string",31837,{l:i}),new z1(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string",2055,{h:e}),new Et(e)}}class MD{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Et.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class VD{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new MD(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Et.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Dv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kD{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,an(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){_e(this.o===void 0,3512);const i=s=>{s.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,Y("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Dv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Dv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=LD(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%62))}return i}}function ce(t,e){return t<e?-1:t>e?1:0}function um(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),s=e.charAt(i);if(r!==s)return Xf(r)===Xf(s)?ce(r,s):Xf(r)?1:-1}return ce(t.length,e.length)}const PD=55296,UD=57343;function Xf(t){const e=t.charCodeAt(0);return e>=PD&&e<=UD}function na(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm="__name__";class Sn{constructor(e,n,i){n===void 0?n=0:n>e.length&&Z(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Z(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Sn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Sn?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=Sn.compareSegments(e.get(r),n.get(r));if(s!==0)return s}return ce(e.length,n.length)}static compareSegments(e,n){const i=Sn.isNumericId(e),r=Sn.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Sn.extractNumericId(e).compare(Sn.extractNumericId(n)):um(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return tr.fromString(e.substring(4,e.length-2))}}class we extends Sn{construct(e,n,i){return new we(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new K(U.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new we(n)}static emptyPath(){return new we([])}}const jD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mt extends Sn{construct(e,n,i){return new mt(e,n,i)}static isValidIdentifier(e){return jD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===cm}static keyField(){return new mt([cm])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new K(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new K(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new K(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(s(),r++)}if(s(),a)throw new K(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mt(n)}static emptyPath(){return new mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.path=e}static fromPath(e){return new X(we.fromString(e))}static fromName(e){return new X(we.fromString(e).popFirst(5))}static empty(){return new X(we.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&we.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return we.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new we(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(t,e,n){if(!n)throw new K(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function zD(t,e,n,i){if(e===!0&&i===!0)throw new K(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Nv(t){if(!X.isDocumentKey(t))throw new K(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ov(t){if(X.isDocumentKey(t))throw new K(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function q1(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ph(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z(12329,{type:typeof t})}function It(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ph(t);throw new K(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(t,e){const n={typeString:t};return e&&(n.value=e),n}function Cl(t,e){if(!q1(t))throw new K(U.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,s="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new K(U.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv=-62135596800,Vv=1e6;class De{static now(){return De.fromMillis(Date.now())}static fromDate(e){return De.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Vv);return new De(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Mv)throw new K(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Vv}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:De._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Cl(e,De._jsonSchema))return new De(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Mv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}De._jsonSchemaVersion="firestore/timestamp/1.0",De._jsonSchema={type:Ze("string",De._jsonSchemaVersion),seconds:Ze("number"),nanoseconds:Ze("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{static fromTimestamp(e){return new te(e)}static min(){return new te(new De(0,0))}static max(){return new te(new De(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl=-1;function BD(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=te.fromTimestamp(i===1e9?new De(n+1,0):new De(n,i));return new or(r,X.empty(),e)}function qD(t){return new or(t.readTime,t.key,nl)}class or{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new or(te.min(),X.empty(),nl)}static max(){return new or(te.max(),X.empty(),nl)}}function HD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sa(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==FD)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,i)=>{n(e)})}static reject(e){return new B((n,i)=>{i(e)})}static waitFor(e){return new B((n,i)=>{let r=0,s=0,a=!1;e.forEach(l=>{++r,l.next(()=>{++s,a&&s===r&&n()},u=>i(u))}),a=!0,s===r&&n()})}static or(e){let n=B.resolve(!1);for(const i of e)n=n.next(r=>r?B.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new B((i,r)=>{const s=e.length,a=new Array(s);let l=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(f=>{a[c]=f,++l,l===s&&i(a)},f=>r(f))}})}static doWhile(e,n){return new B((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function QD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Aa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}gh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp=-1;function yh(t){return t==null}function Ic(t){return t===0&&1/t==-1/0}function KD(t){return typeof t=="number"&&Number.isInteger(t)&&!Ic(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1="";function $D(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=kv(e)),e=YD(t.get(n),e);return kv(e)}function YD(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const s=t.charAt(r);switch(s){case"\0":n+="";break;case H1:n+="";break;default:n+=s}}return n}function kv(t){return t+H1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function pr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function F1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){this.comparator=e,this.root=n||ht.EMPTY}insert(e,n){return new Ue(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ht.BLACK,null,null))}remove(e){return new Ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pu(this.root,e,this.comparator,!1)}getReverseIterator(){return new pu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pu(this.root,e,this.comparator,!0)}}class pu{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ht{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??ht.RED,this.left=r??ht.EMPTY,this.right=s??ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new ht(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return ht.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Z(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Z(27949);return e+(this.isRed()?0:1)}}ht.EMPTY=null,ht.RED=!0,ht.BLACK=!1;ht.EMPTY=new class{constructor(){this.size=0}get key(){throw Z(57766)}get value(){throw Z(16141)}get color(){throw Z(16727)}get left(){throw Z(29726)}get right(){throw Z(36894)}copy(e,n,i,r,s){return this}insert(e,n,i){return new ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Pv(this.data.getIterator())}getIteratorFrom(e){return new Pv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof nt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new nt(this.comparator);return n.data=e,n}}class Pv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.fields=e,e.sort(mt.comparator)}static empty(){return new Gt([])}unionWith(e){let n=new nt(mt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Gt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return na(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new G1("Invalid base64 string: "+s):s}}(e);return new yt(n)}static fromUint8Array(e){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(e);return new yt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yt.EMPTY_BYTE_STRING=new yt("");const XD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lr(t){if(_e(!!t,39018),typeof t=="string"){let e=0;const n=XD.exec(t);if(_e(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:He(t.seconds),nanos:He(t.nanos)}}function He(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ur(t){return typeof t=="string"?yt.fromBase64String(t):yt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="server_timestamp",K1="__type__",$1="__previous_value__",Y1="__local_write_time__";function Qp(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[K1])==null?void 0:i.stringValue)===Q1}function _h(t){const e=t.mapValue.fields[$1];return Qp(e)?_h(e):e}function il(t){const e=lr(t.mapValue.fields[Y1].timestampValue);return new De(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e,n,i,r,s,a,l,u,c,f){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=f}}const xc="(default)";class rl{constructor(e,n){this.projectId=e,this.database=n||xc}static empty(){return new rl("","")}get isDefaultDatabase(){return this.database===xc}isEqual(e){return e instanceof rl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1="__type__",JD="__max__",gu={mapValue:{}},W1="__vector__",Dc="value";function cr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Qp(t)?4:eN(t)?9007199254740991:ZD(t)?10:11:Z(28295,{value:t})}function Vn(t,e){if(t===e)return!0;const n=cr(t);if(n!==cr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return il(t).isEqual(il(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=lr(r.timestampValue),l=lr(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return ur(r.bytesValue).isEqual(ur(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return He(r.geoPointValue.latitude)===He(s.geoPointValue.latitude)&&He(r.geoPointValue.longitude)===He(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return He(r.integerValue)===He(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=He(r.doubleValue),l=He(s.doubleValue);return a===l?Ic(a)===Ic(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return na(t.arrayValue.values||[],e.arrayValue.values||[],Vn);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},l=s.mapValue.fields||{};if(Lv(a)!==Lv(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Vn(a[u],l[u])))return!1;return!0}(t,e);default:return Z(52216,{left:t})}}function sl(t,e){return(t.values||[]).find(n=>Vn(n,e))!==void 0}function ia(t,e){if(t===e)return 0;const n=cr(t),i=cr(e);if(n!==i)return ce(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(s,a){const l=He(s.integerValue||s.doubleValue),u=He(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Uv(t.timestampValue,e.timestampValue);case 4:return Uv(il(t),il(e));case 5:return um(t.stringValue,e.stringValue);case 6:return function(s,a){const l=ur(s),u=ur(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),u=a.split("/");for(let c=0;c<l.length&&c<u.length;c++){const f=ce(l[c],u[c]);if(f!==0)return f}return ce(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const l=ce(He(s.latitude),He(a.latitude));return l!==0?l:ce(He(s.longitude),He(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return jv(t.arrayValue,e.arrayValue);case 10:return function(s,a){var m,v,x,M;const l=s.fields||{},u=a.fields||{},c=(m=l[Dc])==null?void 0:m.arrayValue,f=(v=u[Dc])==null?void 0:v.arrayValue,d=ce(((x=c==null?void 0:c.values)==null?void 0:x.length)||0,((M=f==null?void 0:f.values)==null?void 0:M.length)||0);return d!==0?d:jv(c,f)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===gu.mapValue&&a===gu.mapValue)return 0;if(s===gu.mapValue)return 1;if(a===gu.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),c=a.fields||{},f=Object.keys(c);u.sort(),f.sort();for(let d=0;d<u.length&&d<f.length;++d){const m=um(u[d],f[d]);if(m!==0)return m;const v=ia(l[u[d]],c[f[d]]);if(v!==0)return v}return ce(u.length,f.length)}(t.mapValue,e.mapValue);default:throw Z(23264,{he:n})}}function Uv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=lr(t),i=lr(e),r=ce(n.seconds,i.seconds);return r!==0?r:ce(n.nanos,i.nanos)}function jv(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=ia(n[r],i[r]);if(s)return s}return ce(n.length,i.length)}function ra(t){return hm(t)}function hm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=lr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ur(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return X.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=hm(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${hm(n.fields[a])}`;return r+"}"}(t.mapValue):Z(61005,{value:t})}function Bu(t){switch(cr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=_h(t);return e?16+Bu(e):16;case 5:return 2*t.stringValue.length;case 6:return ur(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+Bu(s),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return pr(i.fields,(s,a)=>{r+=s.length+Bu(a)}),r}(t.mapValue);default:throw Z(13486,{value:t})}}function zv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function fm(t){return!!t&&"integerValue"in t}function Kp(t){return!!t&&"arrayValue"in t}function Bv(t){return!!t&&"nullValue"in t}function qv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function qu(t){return!!t&&"mapValue"in t}function ZD(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[X1])==null?void 0:i.stringValue)===W1}function Mo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return pr(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Mo(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Mo(t.arrayValue.values[n]);return e}return{...t}}function eN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===JD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.value=e}static empty(){return new Lt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!qu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mo(n)}setAll(e){let n=mt.emptyPath(),i={},r=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,r),i={},r=[],n=l.popLast()}a?i[l.lastSegment()]=Mo(a):r.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());qu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Vn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];qu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){pr(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Lt(Mo(this.value))}}function J1(t){const e=[];return pr(t.fields,(n,i)=>{const r=new mt([n]);if(qu(i)){const s=J1(i.mapValue).fields;if(s.length===0)e.push(r);else for(const a of s)e.push(r.child(a))}else e.push(r)}),new Gt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n,i,r,s,a,l){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Tt(e,0,te.min(),te.min(),te.min(),Lt.empty(),0)}static newFoundDocument(e,n,i,r){return new Tt(e,1,n,te.min(),i,r,0)}static newNoDocument(e,n){return new Tt(e,2,n,te.min(),te.min(),Lt.empty(),0)}static newUnknownDocument(e,n){return new Tt(e,3,n,te.min(),te.min(),Lt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Lt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Lt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,n){this.position=e,this.inclusive=n}}function Hv(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],a=t.position[r];if(s.field.isKeyField()?i=X.comparator(X.fromName(a.referenceValue),n.key):i=ia(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function Fv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Vn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,n="asc"){this.field=e,this.dir=n}}function tN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{}class We extends Z1{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new iN(e,n,i):n==="array-contains"?new aN(e,i):n==="in"?new oN(e,i):n==="not-in"?new lN(e,i):n==="array-contains-any"?new uN(e,i):new We(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new rN(e,i):new sN(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ia(n,this.value)):n!==null&&cr(this.value)===cr(n)&&this.matchesComparison(ia(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gn extends Z1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new gn(e,n)}matches(e){return eS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function eS(t){return t.op==="and"}function tS(t){return nN(t)&&eS(t)}function nN(t){for(const e of t.filters)if(e instanceof gn)return!1;return!0}function dm(t){if(t instanceof We)return t.field.canonicalString()+t.op.toString()+ra(t.value);if(tS(t))return t.filters.map(e=>dm(e)).join(",");{const e=t.filters.map(n=>dm(n)).join(",");return`${t.op}(${e})`}}function nS(t,e){return t instanceof We?function(i,r){return r instanceof We&&i.op===r.op&&i.field.isEqual(r.field)&&Vn(i.value,r.value)}(t,e):t instanceof gn?function(i,r){return r instanceof gn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,l)=>s&&nS(a,r.filters[l]),!0):!1}(t,e):void Z(19439)}function iS(t){return t instanceof We?function(n){return`${n.field.canonicalString()} ${n.op} ${ra(n.value)}`}(t):t instanceof gn?function(n){return n.op.toString()+" {"+n.getFilters().map(iS).join(" ,")+"}"}(t):"Filter"}class iN extends We{constructor(e,n,i){super(e,n,i),this.key=X.fromName(i.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class rN extends We{constructor(e,n){super(e,"in",n),this.keys=rS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class sN extends We{constructor(e,n){super(e,"not-in",n),this.keys=rS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function rS(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>X.fromName(i.referenceValue))}class aN extends We{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Kp(n)&&sl(n.arrayValue,this.value)}}class oN extends We{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&sl(this.value.arrayValue,n)}}class lN extends We{constructor(e,n){super(e,"not-in",n)}matches(e){if(sl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!sl(this.value.arrayValue,n)}}class uN extends We{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Kp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>sl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e,n=null,i=[],r=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=l,this.Te=null}}function Gv(t,e=null,n=[],i=[],r=null,s=null,a=null){return new cN(t,e,n,i,r,s,a)}function $p(t){const e=ne(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>dm(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),yh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>ra(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>ra(i)).join(",")),e.Te=n}return e.Te}function Yp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!tN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!nS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Fv(t.startAt,e.startAt)&&Fv(t.endAt,e.endAt)}function mm(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,n=null,i=[],r=[],s=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function hN(t,e,n,i,r,s,a,l){return new wa(t,e,n,i,r,s,a,l)}function vh(t){return new wa(t)}function Qv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function sS(t){return t.collectionGroup!==null}function Vo(t){const e=ne(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new nt(mt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new al(s,i))}),n.has(mt.keyField().canonicalString())||e.Ie.push(new al(mt.keyField(),i))}return e.Ie}function In(t){const e=ne(t);return e.Ee||(e.Ee=fN(e,Vo(t))),e.Ee}function fN(t,e){if(t.limitType==="F")return Gv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new al(r.field,s)});const n=t.endAt?new Nc(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Nc(t.startAt.position,t.startAt.inclusive):null;return Gv(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function pm(t,e){const n=t.filters.concat([e]);return new wa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function gm(t,e,n){return new wa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Eh(t,e){return Yp(In(t),In(e))&&t.limitType===e.limitType}function aS(t){return`${$p(In(t))}|lt:${t.limitType}`}function gs(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>iS(r)).join(", ")}]`),yh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>ra(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>ra(r)).join(",")),`Target(${i})`}(In(t))}; limitType=${t.limitType})`}function Th(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):X.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of Vo(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,l,u){const c=Hv(a,l,u);return a.inclusive?c<=0:c<0}(i.startAt,Vo(i),r)||i.endAt&&!function(a,l,u){const c=Hv(a,l,u);return a.inclusive?c>=0:c>0}(i.endAt,Vo(i),r))}(t,e)}function dN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function oS(t){return(e,n)=>{let i=!1;for(const r of Vo(t)){const s=mN(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function mN(t,e,n){const i=t.field.isKeyField()?X.comparator(e.key,n.key):function(s,a,l){const u=a.data.field(s),c=l.data.field(s);return u!==null&&c!==null?ia(u,c):Z(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Z(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){pr(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return F1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN=new Ue(X.comparator);function di(){return pN}const lS=new Ue(X.comparator);function po(...t){let e=lS;for(const n of t)e=e.insert(n.key,n);return e}function uS(t){let e=lS;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Mr(){return ko()}function cS(){return ko()}function ko(){return new is(t=>t.toString(),(t,e)=>t.isEqual(e))}const gN=new Ue(X.comparator),yN=new nt(X.comparator);function he(...t){let e=yN;for(const n of t)e=e.add(n);return e}const _N=new nt(ce);function vN(){return _N}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ic(e)?"-0":e}}function hS(t){return{integerValue:""+t}}function EN(t,e){return KD(e)?hS(e):Xp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(){this._=void 0}}function TN(t,e,n){return t instanceof ol?function(r,s){const a={fields:{[K1]:{stringValue:Q1},[Y1]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Qp(s)&&(s=_h(s)),s&&(a.fields[$1]=s),{mapValue:a}}(n,e):t instanceof sa?dS(t,e):t instanceof aa?mS(t,e):function(r,s){const a=fS(r,s),l=Kv(a)+Kv(r.Ae);return fm(a)&&fm(r.Ae)?hS(l):Xp(r.serializer,l)}(t,e)}function bN(t,e,n){return t instanceof sa?dS(t,e):t instanceof aa?mS(t,e):n}function fS(t,e){return t instanceof Oc?function(i){return fm(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class ol extends bh{}class sa extends bh{constructor(e){super(),this.elements=e}}function dS(t,e){const n=pS(e);for(const i of t.elements)n.some(r=>Vn(r,i))||n.push(i);return{arrayValue:{values:n}}}class aa extends bh{constructor(e){super(),this.elements=e}}function mS(t,e){let n=pS(e);for(const i of t.elements)n=n.filter(r=>!Vn(r,i));return{arrayValue:{values:n}}}class Oc extends bh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Kv(t){return He(t.integerValue||t.doubleValue)}function pS(t){return Kp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,n){this.field=e,this.transform=n}}function SN(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof sa&&r instanceof sa||i instanceof aa&&r instanceof aa?na(i.elements,r.elements,Vn):i instanceof Oc&&r instanceof Oc?Vn(i.Ae,r.Ae):i instanceof ol&&r instanceof ol}(t.transform,e.transform)}class AN{constructor(e,n){this.version=e,this.transformResults=n}}class xt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xt}static exists(e){return new xt(void 0,e)}static updateTime(e){return new xt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Sh{}function gS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ah(t.key,xt.none()):new Il(t.key,t.data,xt.none());{const n=t.data,i=Lt.empty();let r=new nt(mt.comparator);for(let s of e.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new gr(t.key,i,new Gt(r.toArray()),xt.none())}}function wN(t,e,n){t instanceof Il?function(r,s,a){const l=r.value.clone(),u=Yv(r.fieldTransforms,s,a.transformResults);l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof gr?function(r,s,a){if(!Hu(r.precondition,s))return void s.convertToUnknownDocument(a.version);const l=Yv(r.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(yS(r)),u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Lo(t,e,n,i){return t instanceof Il?function(s,a,l,u){if(!Hu(s.precondition,a))return l;const c=s.value.clone(),f=Xv(s.fieldTransforms,u,a);return c.setAll(f),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,n,i):t instanceof gr?function(s,a,l,u){if(!Hu(s.precondition,a))return l;const c=Xv(s.fieldTransforms,u,a),f=a.data;return f.setAll(yS(s)),f.setAll(c),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(s,a,l){return Hu(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function RN(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=fS(i.transform,r||null);s!=null&&(n===null&&(n=Lt.empty()),n.set(i.field,s))}return n||null}function $v(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&na(i,r,(s,a)=>SN(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Il extends Sh{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class gr extends Sh{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function yS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Yv(t,e,n){const i=new Map;_e(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const s=t[r],a=s.transform,l=e.data.field(s.field);i.set(s.field,bN(a,l,n[r]))}return i}function Xv(t,e,n){const i=new Map;for(const r of t){const s=r.transform,a=n.data.field(r.field);i.set(r.field,TN(s,a,e))}return i}class Ah extends Sh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class CN extends Sh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&wN(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Lo(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Lo(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=cS();return this.mutations.forEach(r=>{const s=e.get(r.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(r.key)?null:l;const u=gS(a,l);u!==null&&i.set(r.key,u),a.isValidDocument()||a.convertToNoDocument(te.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&na(this.mutations,e.mutations,(n,i)=>$v(n,i))&&na(this.baseMutations,e.baseMutations,(n,i)=>$v(n,i))}}class Jp{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){_e(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=function(){return gN}();const s=e.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new Jp(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke,pe;function NN(t){switch(t){case U.OK:return Z(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return Z(15467,{code:t})}}function _S(t){if(t===void 0)return fi("GRPC error has no .code"),U.UNKNOWN;switch(t){case Ke.OK:return U.OK;case Ke.CANCELLED:return U.CANCELLED;case Ke.UNKNOWN:return U.UNKNOWN;case Ke.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Ke.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Ke.INTERNAL:return U.INTERNAL;case Ke.UNAVAILABLE:return U.UNAVAILABLE;case Ke.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Ke.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Ke.NOT_FOUND:return U.NOT_FOUND;case Ke.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Ke.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Ke.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Ke.ABORTED:return U.ABORTED;case Ke.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Ke.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Ke.DATA_LOSS:return U.DATA_LOSS;default:return Z(39323,{code:t})}}(pe=Ke||(Ke={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN=new tr([4294967295,4294967295],0);function Wv(t){const e=ON().encode(t),n=new M1;return n.update(e),new Uint8Array(n.digest())}function Jv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new tr([n,i],0),new tr([r,s],0)]}class Zp{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new go(`Invalid padding: ${n}`);if(i<0)throw new go(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new go(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new go(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=tr.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(tr.fromNumber(i)));return r.compare(MN)===1&&(r=new tr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Wv(e),[i,r]=Jv(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);if(!this.we(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new Zp(s,r,n);return i.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=Wv(e),[i,r]=Jv(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class go extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,xl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new wh(te.min(),r,new Ue(ce),di(),he())}}class xl{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new xl(i,n,he(),he(),he())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,n,i,r){this.be=e,this.removedTargetIds=n,this.key=i,this.De=r}}class vS{constructor(e,n){this.targetId=e,this.Ce=n}}class ES{constructor(e,n,i=yt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class Zv{constructor(){this.ve=0,this.Fe=eE(),this.Me=yt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=he(),n=he(),i=he();return this.Fe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Z(38017,{changeType:s})}}),new xl(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=eE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,_e(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class VN{constructor(e){this.Ge=e,this.ze=new Map,this.je=di(),this.Je=yu(),this.He=yu(),this.Ye=new Ue(ce)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Z(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const s=r.target;if(mm(s))if(i===0){const a=new X(s.path);this.et(n,a,Tt.newNoDocument(a,te.min()))}else _e(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const l=this.ut(e),u=l?this.ct(l,e,a):1;if(u!==0){this.it(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,l;try{a=ur(i).toUint8Array()}catch(u){if(u instanceof G1)return ta("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Zp(a,r,s)}catch(u){return ta(u instanceof go?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.et(n,s,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((s,a)=>{const l=this.ot(a);if(l){if(s.current&&mm(l.target)){const u=new X(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,Tt.newNoDocument(u,e))}s.Be&&(n.set(a,s.ke()),s.qe())}});let i=he();this.He.forEach((s,a)=>{let l=!0;a.forEachWhile(u=>{const c=this.ot(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(s))}),this.je.forEach((s,a)=>a.setReadTime(e));const r=new wh(e,n,this.Ye,this.je,i);return this.je=di(),this.Je=yu(),this.He=yu(),this.Ye=new Ue(ce),r}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Zv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new nt(ce),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new nt(ce),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Zv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function yu(){return new Ue(X.comparator)}function eE(){return new Ue(X.comparator)}const kN={asc:"ASCENDING",desc:"DESCENDING"},LN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PN={and:"AND",or:"OR"};class UN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ym(t,e){return t.useProto3Json||yh(e)?e:{value:e}}function Mc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function jN(t,e){return Mc(t,e.toTimestamp())}function xn(t){return _e(!!t,49232),te.fromTimestamp(function(n){const i=lr(n);return new De(i.seconds,i.nanos)}(t))}function eg(t,e){return _m(t,e).canonicalString()}function _m(t,e){const n=function(r){return new we(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function bS(t){const e=we.fromString(t);return _e(CS(e),10190,{key:e.toString()}),e}function vm(t,e){return eg(t.databaseId,e.path)}function Wf(t,e){const n=bS(e);if(n.get(1)!==t.databaseId.projectId)throw new K(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(AS(n))}function SS(t,e){return eg(t.databaseId,e)}function zN(t){const e=bS(t);return e.length===4?we.emptyPath():AS(e)}function Em(t){return new we(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function AS(t){return _e(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function tE(t,e,n){return{name:vm(t,e),fields:n.value.mapValue.fields}}function BN(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Z(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,f){return c.useProto3Json?(_e(f===void 0||typeof f=="string",58123),yt.fromBase64String(f||"")):(_e(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),yt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(c){const f=c.code===void 0?U.UNKNOWN:_S(c.code);return new K(f,c.message||"")}(a);n=new ES(i,r,s,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Wf(t,i.document.name),s=xn(i.document.updateTime),a=i.document.createTime?xn(i.document.createTime):te.min(),l=new Lt({mapValue:{fields:i.document.fields}}),u=Tt.newFoundDocument(r,s,a,l),c=i.targetIds||[],f=i.removedTargetIds||[];n=new Fu(c,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Wf(t,i.document),s=i.readTime?xn(i.readTime):te.min(),a=Tt.newNoDocument(r,s),l=i.removedTargetIds||[];n=new Fu([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Wf(t,i.document),s=i.removedTargetIds||[];n=new Fu([],s,r,null)}else{if(!("filter"in e))return Z(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new DN(r,s),l=i.targetId;n=new vS(l,a)}}return n}function qN(t,e){let n;if(e instanceof Il)n={update:tE(t,e.key,e.value)};else if(e instanceof Ah)n={delete:vm(t,e.key)};else if(e instanceof gr)n={update:tE(t,e.key,e.data),updateMask:WN(e.fieldMask)};else{if(!(e instanceof CN))return Z(16599,{Vt:e.type});n={verify:vm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,a){const l=a.transform;if(l instanceof ol)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof sa)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof aa)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Oc)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw Z(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:jN(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Z(27497)}(t,e.precondition)),n}function HN(t,e){return t&&t.length>0?(_e(e!==void 0,14353),t.map(n=>function(r,s){let a=r.updateTime?xn(r.updateTime):xn(s);return a.isEqual(te.min())&&(a=xn(s)),new AN(a,r.transformResults||[])}(n,e))):[]}function FN(t,e){return{documents:[SS(t,e.path)]}}function GN(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=SS(t,r);const s=function(c){if(c.length!==0)return RS(gn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(c){if(c.length!==0)return c.map(f=>function(m){return{field:ys(m.field),direction:$N(m.dir)}}(f))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=ym(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:r}}function QN(t){let e=zN(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){_e(i===1,65062);const f=n.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(d){const m=wS(d);return m instanceof gn&&tS(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(d){return d.map(m=>function(x){return new al(_s(x.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(d){let m;return m=typeof d=="object"?d.value:d,yh(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(d){const m=!!d.before,v=d.values||[];return new Nc(v,m)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const m=!d.before,v=d.values||[];return new Nc(v,m)}(n.endAt)),hN(e,r,a,s,l,"F",u,c)}function KN(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function wS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=_s(n.unaryFilter.field);return We.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=_s(n.unaryFilter.field);return We.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=_s(n.unaryFilter.field);return We.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=_s(n.unaryFilter.field);return We.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Z(61313);default:return Z(60726)}}(t):t.fieldFilter!==void 0?function(n){return We.create(_s(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Z(58110);default:return Z(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return gn.create(n.compositeFilter.filters.map(i=>wS(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Z(1026)}}(n.compositeFilter.op))}(t):Z(30097,{filter:t})}function $N(t){return kN[t]}function YN(t){return LN[t]}function XN(t){return PN[t]}function ys(t){return{fieldPath:t.canonicalString()}}function _s(t){return mt.fromServerFormat(t.fieldPath)}function RS(t){return t instanceof We?function(n){if(n.op==="=="){if(qv(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NAN"}};if(Bv(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(qv(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NOT_NAN"}};if(Bv(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ys(n.field),op:YN(n.op),value:n.value}}}(t):t instanceof gn?function(n){const i=n.getFilters().map(r=>RS(r));return i.length===1?i[0]:{compositeFilter:{op:XN(n.op),filters:i}}}(t):Z(54877,{filter:t})}function WN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function CS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,n,i,r,s=te.min(),a=te.min(),l=yt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new qi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new qi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e){this.yt=e}}function ZN(t){const e=QN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?gm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(){this.Cn=new tO}addToCollectionParentIndex(e,n){return this.Cn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(or.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(or.min())}updateCollectionGroup(e,n,i){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class tO{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new nt(we.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new nt(we.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},IS=41943040;class kt{static withCacheSize(e){return new kt(e,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kt.DEFAULT_COLLECTION_PERCENTILE=10,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kt.DEFAULT=new kt(IS,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kt.DISABLED=new kt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new oa(0)}static cr(){return new oa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="LruGarbageCollector",nO=1048576;function rE([t,e],[n,i]){const r=ce(t,n);return r===0?ce(e,i):r}class iO{constructor(e){this.Ir=e,this.buffer=new nt(rE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();rE(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class rO{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Y(iE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Aa(n)?Y(iE,"Ignoring IndexedDB error during garbage collection: ",n):await Sa(n)}await this.Vr(3e5)})}}class sO{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return B.resolve(gh.ce);const i=new iO(n);return this.mr.forEachTarget(e,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(nE)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nE):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,r,s,a,l,u,c;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,a=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(i=d,l=Date.now(),this.removeTargets(e,i,n))).next(d=>(s=d,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(c=Date.now(),ps()<=ue.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${d} documents in `+(c-u)+`ms
Total Duration: ${c-f}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:d})))}}function aO(t,e){return new sO(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(){this.changes=new is(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Tt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?B.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Lo(i.mutation,r,Gt.empty(),De.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,he()).next(()=>i))}getLocalViewOfDocuments(e,n,i=he()){const r=Mr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let a=po();return s.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=Mr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,he()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,i,r){let s=di();const a=ko(),l=function(){return ko()}();return n.forEach((u,c)=>{const f=i.get(c.key);r.has(c.key)&&(f===void 0||f.mutation instanceof gr)?s=s.insert(c.key,c):f!==void 0?(a.set(c.key,f.mutation.getFieldMask()),Lo(f.mutation,c,f.mutation.getFieldMask(),De.now())):a.set(c.key,Gt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,f)=>a.set(c,f)),n.forEach((c,f)=>l.set(c,new lO(f,a.get(c)??null))),l))}recalculateAndSaveOverlays(e,n){const i=ko();let r=new Ue((a,l)=>a-l),s=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let f=i.get(u)||Gt.empty();f=l.applyToLocalView(c,f),i.set(u,f);const d=(r.get(l.batchId)||he()).add(u);r=r.insert(l.batchId,d)})}).next(()=>{const a=[],l=r.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,f=u.value,d=cS();f.forEach(m=>{if(!s.has(m)){const v=gS(n.get(m),i.get(m));v!==null&&d.set(m,v),s=s.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,d))}return B.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return X.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):sS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):B.resolve(Mr());let l=nl,u=s;return a.next(c=>B.forEach(c,(f,d)=>(l<d.largestBatchId&&(l=d.largestBatchId),s.get(f)?B.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{u=u.insert(f,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,he())).next(f=>({batchId:l,changes:uS(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(i=>{let r=po();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let a=po();return this.indexManager.getCollectionParents(e,s).next(l=>B.forEach(l,u=>{const c=function(d,m){return new wa(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(f=>{f.forEach((d,m)=>{a=a.insert(d,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(a=>{s.forEach((u,c)=>{const f=c.getKey();a.get(f)===null&&(a=a.insert(f,Tt.newInvalidDocument(f)))});let l=po();return a.forEach((u,c)=>{const f=s.get(u);f!==void 0&&Lo(f.mutation,c,Gt.empty(),De.now()),Th(n,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return B.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:xn(r.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:ZN(r.bundledQuery),readTime:xn(r.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(){this.overlays=new Ue(X.comparator),this.qr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Mr();return B.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.St(e,n,s)}),B.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(i)),B.resolve()}getOverlaysForCollection(e,n,i){const r=Mr(),s=n.length+1,a=new X(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>i&&r.set(u.getKey(),u)}return B.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Ue((c,f)=>c-f);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let f=s.get(c.largestBatchId);f===null&&(f=Mr(),s=s.insert(c.largestBatchId,f)),f.set(c.getKey(),c)}}const l=Mr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,f)=>l.set(c,f)),!(l.size()>=r)););return B.resolve(l)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new xN(n,i));let s=this.qr.get(n);s===void 0&&(s=he(),this.qr.set(n,s)),this.qr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(){this.sessionToken=yt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(){this.Qr=new nt(st.$r),this.Ur=new nt(st.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new st(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new st(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new X(new we([])),i=new st(n,e),r=new st(n,e+1),s=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new X(new we([])),i=new st(n,e),r=new st(n,e+1);let s=he();return this.Ur.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new st(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class st{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return X.comparator(e.key,n.key)||ce(e.Yr,n.Yr)}static Kr(e,n){return ce(e.Yr,n.Yr)||X.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new nt(st.$r)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new IN(s,n,i,r);this.mutationQueue.push(a);for(const l of r)this.Zr=this.Zr.add(new st(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return B.resolve(a)}lookupMutationBatch(e,n){return B.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ei(i),s=r<0?0:r;return B.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?Gp:this.tr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new st(n,0),r=new st(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([i,r],a=>{const l=this.Xr(a.Yr);s.push(l)}),B.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new nt(ce);return n.forEach(r=>{const s=new st(r,0),a=new st(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],l=>{i=i.add(l.Yr)})}),B.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;X.isDocumentKey(s)||(s=s.child(""));const a=new st(new X(s),0);let l=new nt(ce);return this.Zr.forEachWhile(u=>{const c=u.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(l=l.add(u.Yr)),!0)},a),B.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){_e(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return B.forEach(n.mutations,r=>{const s=new st(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new st(n,0),r=this.Zr.firstAfterOrEqual(i);return B.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e){this.ri=e,this.docs=function(){return new Ue(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return B.resolve(i?i.document.mutableCopy():Tt.newInvalidDocument(n))}getEntries(e,n){let i=di();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Tt.newInvalidDocument(r))}),B.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=di();const a=n.path,l=new X(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:f}}=u.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||HD(qD(f),i)<=0||(r.has(f.key)||Th(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return B.resolve(s)}getAllFromCollectionGroup(e,n,i,r){Z(9500)}ii(e,n){return B.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new pO(this)}getSize(e){return B.resolve(this.size)}}class pO extends oO{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),B.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e){this.persistence=e,this.si=new is(n=>$p(n),Yp),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.oi=0,this._i=new tg,this.targetCount=0,this.ai=oa.ur()}forEachTarget(e,n){return this.si.forEach((i,r)=>n(r)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),B.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new oa(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Pr(n),B.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),B.waitFor(s).next(()=>r)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return B.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),B.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(e,a))}),B.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return B.resolve(i)}containsKey(e,n){return B.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,n){this.ui={},this.overlays={},this.ci=new gh(0),this.li=!1,this.li=!0,this.hi=new fO,this.referenceDelegate=e(this),this.Pi=new gO(this),this.indexManager=new eO,this.remoteDocumentCache=function(r){return new mO(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new JN(n),this.Ii=new cO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new hO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new dO(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){Y("MemoryPersistence","Starting transaction:",e);const r=new yO(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ai(e,n){return B.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class yO extends GD{constructor(e){super(),this.currentSequenceNumber=e}}class ng{constructor(e){this.persistence=e,this.Ri=new tg,this.Vi=null}static mi(e){return new ng(e)}get fi(){if(this.Vi)return this.Vi;throw Z(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),B.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),B.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.fi.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.fi,i=>{const r=X.fromPath(i);return this.gi(e,r).next(s=>{s||n.removeEntry(r,te.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return B.or([()=>B.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Vc{constructor(e,n){this.persistence=e,this.pi=new is(i=>$D(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=aO(this,n)}static mi(e,n){return new Vc(e,n)}Ei(){}di(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return B.forEach(this.pi,(i,r)=>this.br(e,i,r).next(s=>s?B.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(e,a=>this.br(e,a,n).next(l=>{l||(i++,s.removeEntry(a,te.min()))})).next(()=>s.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),B.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Bu(e.data.value)),n}br(e,n,i){return B.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return B.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=r}static As(e,n){let i=he(),r=he();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new ig(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return fx()?8:QD(bt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.ys(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(e,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new _O;return this.Ss(e,n,a).next(l=>{if(s.result=l,this.Vs)return this.bs(e,n,a,l.size)})}).next(()=>s.result)}bs(e,n,i,r){return i.documentReadCount<this.fs?(ps()<=ue.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",gs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),B.resolve()):(ps()<=ue.DEBUG&&Y("QueryEngine","Query:",gs(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(ps()<=ue.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",gs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,In(n))):B.resolve())}ys(e,n){if(Qv(n))return B.resolve(null);let i=In(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=gm(n,null,"F"),i=In(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const a=he(...s);return this.ps.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{const c=this.Ds(n,l);return this.Cs(n,c,a,u.readTime)?this.ys(e,gm(n,null,"F")):this.vs(e,c,n,u)}))})))}ws(e,n,i,r){return Qv(n)||r.isEqual(te.min())?B.resolve(null):this.ps.getDocuments(e,i).next(s=>{const a=this.Ds(n,s);return this.Cs(n,a,i,r)?B.resolve(null):(ps()<=ue.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),gs(n)),this.vs(e,a,n,BD(r,nl)).next(l=>l))})}Ds(e,n){let i=new nt(oS(e));return n.forEach((r,s)=>{Th(e,s)&&(i=i.add(s))}),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,n,i){return ps()<=ue.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",gs(n)),this.ps.getDocumentsMatchingQuery(e,n,or.min(),i)}vs(e,n,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg="LocalStore",EO=3e8;class TO{constructor(e,n,i,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Ue(ce),this.xs=new is(s=>$p(s),Yp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uO(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function bO(t,e,n,i){return new TO(t,e,n,i)}async function DS(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],l=[];let u=he();for(const c of r){a.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}for(const c of s){l.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(i,u).next(c=>({Ls:c,removedBatchIds:a,addedBatchIds:l}))})})}function SO(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,c,f){const d=c.batch,m=d.keys();let v=B.resolve();return m.forEach(x=>{v=v.next(()=>f.getEntry(u,x)).next(M=>{const O=c.docVersions.get(x);_e(O!==null,48541),M.version.compareTo(O)<0&&(d.applyToRemoteDocument(M,c),M.isValidDocument()&&(M.setReadTime(c.commitVersion),f.addEntry(M)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(u,d))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=he();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function NS(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function AO(t,e){const n=ne(t),i=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];e.targetChanges.forEach((f,d)=>{const m=r.get(d);if(!m)return;l.push(n.Pi.removeMatchingKeys(s,f.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(s,f.addedDocuments,d)));let v=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?v=v.withResumeToken(yt.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):f.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(f.resumeToken,i)),r=r.insert(d,v),function(M,O,A){return M.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=EO?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(m,v,f)&&l.push(n.Pi.updateTargetData(s,v))});let u=di(),c=he();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),l.push(wO(s,a,e.documentUpdates).next(f=>{u=f.ks,c=f.qs})),!i.isEqual(te.min())){const f=n.Pi.getLastRemoteSnapshotVersion(s).next(d=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,i));l.push(f)}return B.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.Ms=r,s))}function wO(t,e,n){let i=he(),r=he();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let a=di();return n.forEach((l,u)=>{const c=s.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(te.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):Y(rg,"Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{ks:a,qs:r}})}function RO(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Gp),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function CO(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,e).next(s=>s?(r=s,B.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new qi(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function Tm(t,e,n){const i=ne(t),r=i.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!Aa(a))throw a;Y(rg,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function sE(t,e,n){const i=ne(t);let r=te.min(),s=he();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,c,f){const d=ne(u),m=d.xs.get(f);return m!==void 0?B.resolve(d.Ms.get(m)):d.Pi.getTargetData(c,f)}(i,a,In(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{s=u})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,e,n?r:te.min(),n?s:he())).next(l=>(IO(i,dN(e),l),{documents:l,Qs:s})))}function IO(t,e,n){let i=t.Os.get(e)||te.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.Os.set(e,i)}class aE{constructor(){this.activeTargetIds=vN()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xO{constructor(){this.Mo=new aE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new aE,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="ConnectivityMonitor";class lE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Y(oE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Y(oE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _u=null;function bm(){return _u===null?_u=function(){return 268435456+Math.round(2147483648*Math.random())}():_u++,"0x"+_u.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf="RestConnection",NO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class OO{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===xc?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,n,i,r,s){const a=bm(),l=this.zo(e,n.toUriEncodedString());Y(Jf,`Sending RPC '${e}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,r,s);const{host:c}=new URL(l),f=Ea(c);return this.Jo(e,l,u,i,f).then(d=>(Y(Jf,`Received RPC '${e}' ${a}: `,d),d),d=>{throw ta(Jf,`RPC '${e}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}Ho(e,n,i,r,s,a){return this.Go(e,n,i,r,s)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ba}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}zo(e,n){const i=NO[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vt="WebChannelConnection";class VO extends OO{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,s){const a=bm();return new Promise((l,u)=>{const c=new V1;c.setWithCredentials(!0),c.listenOnce(k1.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case zu.NO_ERROR:const d=c.getResponseJson();Y(vt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),l(d);break;case zu.TIMEOUT:Y(vt,`RPC '${e}' ${a} timed out`),u(new K(U.DEADLINE_EXCEEDED,"Request time out"));break;case zu.HTTP_ERROR:const m=c.getStatus();if(Y(vt,`RPC '${e}' ${a} failed with status:`,m,"response text:",c.getResponseText()),m>0){let v=c.getResponseJson();Array.isArray(v)&&(v=v[0]);const x=v==null?void 0:v.error;if(x&&x.status&&x.message){const M=function(A){const T=A.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(T)>=0?T:U.UNKNOWN}(x.status);u(new K(M,x.message))}else u(new K(U.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new K(U.UNAVAILABLE,"Connection failed."));break;default:Z(9055,{l_:e,streamId:a,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{Y(vt,`RPC '${e}' ${a} completed.`)}});const f=JSON.stringify(r);Y(vt,`RPC '${e}' ${a} sending request:`,r),c.send(n,"POST",f,i,15)})}T_(e,n,i){const r=bm(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=U1(),l=P1(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const f=s.join("");Y(vt,`Creating RPC '${e}' stream ${r}: ${f}`,u);const d=a.createWebChannel(f,u);this.I_(d);let m=!1,v=!1;const x=new MO({Yo:O=>{v?Y(vt,`Not sending because RPC '${e}' stream ${r} is closed:`,O):(m||(Y(vt,`Opening RPC '${e}' stream ${r} transport.`),d.open(),m=!0),Y(vt,`RPC '${e}' stream ${r} sending:`,O),d.send(O))},Zo:()=>d.close()}),M=(O,A,T)=>{O.listen(A,E=>{try{T(E)}catch(N){setTimeout(()=>{throw N},0)}})};return M(d,mo.EventType.OPEN,()=>{v||(Y(vt,`RPC '${e}' stream ${r} transport opened.`),x.o_())}),M(d,mo.EventType.CLOSE,()=>{v||(v=!0,Y(vt,`RPC '${e}' stream ${r} transport closed`),x.a_(),this.E_(d))}),M(d,mo.EventType.ERROR,O=>{v||(v=!0,ta(vt,`RPC '${e}' stream ${r} transport errored. Name:`,O.name,"Message:",O.message),x.a_(new K(U.UNAVAILABLE,"The operation could not be completed")))}),M(d,mo.EventType.MESSAGE,O=>{var A;if(!v){const T=O.data[0];_e(!!T,16349);const E=T,N=(E==null?void 0:E.error)||((A=E[0])==null?void 0:A.error);if(N){Y(vt,`RPC '${e}' stream ${r} received error:`,N);const P=N.status;let G=function(S){const w=Ke[S];if(w!==void 0)return _S(w)}(P),y=N.message;G===void 0&&(G=U.INTERNAL,y="Unknown error status: "+P+" with message "+N.message),v=!0,x.a_(new K(G,y)),d.close()}else Y(vt,`RPC '${e}' stream ${r} received:`,T),x.u_(T)}}),M(l,L1.STAT_EVENT,O=>{O.stat===lm.PROXY?Y(vt,`RPC '${e}' stream ${r} detected buffering proxy`):O.stat===lm.NOPROXY&&Y(vt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{x.__()},0),x}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Zf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(t){return new UN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,n,i=1e3,r=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&Y("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="PersistentStream";class MS{constructor(e,n,i,r,s,a,l,u){this.Mi=e,this.S_=i,this.b_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new OS(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(fi(n.toString()),fi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{e(()=>{const r=new K(U.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Y(uE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Y(uE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class kO extends MS{constructor(e,n,i,r,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=BN(this.serializer,e),i=function(s){if(!("targetChange"in s))return te.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?te.min():a.readTime?xn(a.readTime):te.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=Em(this.serializer),n.addTarget=function(s,a){let l;const u=a.target;if(l=mm(u)?{documents:FN(s,u)}:{query:GN(s,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=TS(s,a.resumeToken);const c=ym(s,a.expectedCount);c!==null&&(l.expectedCount=c)}else if(a.snapshotVersion.compareTo(te.min())>0){l.readTime=Mc(s,a.snapshotVersion.toTimestamp());const c=ym(s,a.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const i=KN(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=Em(this.serializer),n.removeTarget=e,this.q_(n)}}class LO extends MS{constructor(e,n,i,r,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return _e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){_e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=HN(e.writeResults,e.commitTime),i=xn(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Em(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>qN(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{}class UO extends PO{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new K(U.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(e,_m(n,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K(U.UNKNOWN,s.toString())})}Ho(e,n,i,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(e,_m(n,i),r,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new K(U.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class jO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(fi(n),this.aa=!1):Y("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr="RemoteStore";class zO{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{rs(this)&&(Y(Yr,"Restarting streams for network reachability change."),await async function(u){const c=ne(u);c.Ea.add(4),await Dl(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Ch(c)}(this))})}),this.Ra=new jO(i,r)}}async function Ch(t){if(rs(t))for(const e of t.da)await e(!0)}async function Dl(t){for(const e of t.da)await e(!1)}function VS(t,e){const n=ne(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),lg(n)?og(n):Ra(n).O_()&&ag(n,e))}function sg(t,e){const n=ne(t),i=Ra(n);n.Ia.delete(e),i.O_()&&kS(n,e),n.Ia.size===0&&(i.O_()?i.L_():rs(n)&&n.Ra.set("Unknown"))}function ag(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ra(t).Y_(e)}function kS(t,e){t.Va.Ue(e),Ra(t).Z_(e)}function og(t){t.Va=new VN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ra(t).start(),t.Ra.ua()}function lg(t){return rs(t)&&!Ra(t).x_()&&t.Ia.size>0}function rs(t){return ne(t).Ea.size===0}function LS(t){t.Va=void 0}async function BO(t){t.Ra.set("Online")}async function qO(t){t.Ia.forEach((e,n)=>{ag(t,e)})}async function HO(t,e){LS(t),lg(t)?(t.Ra.ha(e),og(t)):t.Ra.set("Unknown")}async function FO(t,e,n){if(t.Ra.set("Online"),e instanceof ES&&e.state===2&&e.cause)try{await async function(r,s){const a=s.cause;for(const l of s.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.Ia.delete(l),r.Va.removeTarget(l))}(t,e)}catch(i){Y(Yr,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await kc(t,i)}else if(e instanceof Fu?t.Va.Ze(e):e instanceof vS?t.Va.st(e):t.Va.tt(e),!n.isEqual(te.min()))try{const i=await NS(t.localStore);n.compareTo(i)>=0&&await function(s,a){const l=s.Va.Tt(a);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.Ia.get(c);f&&s.Ia.set(c,f.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,c)=>{const f=s.Ia.get(u);if(!f)return;s.Ia.set(u,f.withResumeToken(yt.EMPTY_BYTE_STRING,f.snapshotVersion)),kS(s,u);const d=new qi(f.target,u,c,f.sequenceNumber);ag(s,d)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(i){Y(Yr,"Failed to raise snapshot:",i),await kc(t,i)}}async function kc(t,e,n){if(!Aa(e))throw e;t.Ea.add(1),await Dl(t),t.Ra.set("Offline"),n||(n=()=>NS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y(Yr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ch(t)})}function PS(t,e){return e().catch(n=>kc(t,n,e))}async function Ih(t){const e=ne(t),n=hr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Gp;for(;GO(e);)try{const r=await RO(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,QO(e,r)}catch(r){await kc(e,r)}US(e)&&jS(e)}function GO(t){return rs(t)&&t.Ta.length<10}function QO(t,e){t.Ta.push(e);const n=hr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function US(t){return rs(t)&&!hr(t).x_()&&t.Ta.length>0}function jS(t){hr(t).start()}async function KO(t){hr(t).ra()}async function $O(t){const e=hr(t);for(const n of t.Ta)e.ea(n.mutations)}async function YO(t,e,n){const i=t.Ta.shift(),r=Jp.from(i,e,n);await PS(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Ih(t)}async function XO(t,e){e&&hr(t).X_&&await async function(i,r){if(function(a){return NN(a)&&a!==U.ABORTED}(r.code)){const s=i.Ta.shift();hr(i).B_(),await PS(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Ih(i)}}(t,e),US(t)&&jS(t)}async function cE(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),Y(Yr,"RemoteStore received new credentials");const i=rs(n);n.Ea.add(3),await Dl(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ch(n)}async function WO(t,e){const n=ne(t);e?(n.Ea.delete(2),await Ch(n)):e||(n.Ea.add(2),await Dl(n),n.Ra.set("Unknown"))}function Ra(t){return t.ma||(t.ma=function(n,i,r){const s=ne(n);return s.sa(),new kO(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Xo:BO.bind(null,t),t_:qO.bind(null,t),r_:HO.bind(null,t),H_:FO.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),lg(t)?og(t):t.Ra.set("Unknown")):(await t.ma.stop(),LS(t))})),t.ma}function hr(t){return t.fa||(t.fa=function(n,i,r){const s=ne(n);return s.sa(),new LO(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:KO.bind(null,t),r_:XO.bind(null,t),ta:$O.bind(null,t),na:YO.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Ih(t)):(await t.fa.stop(),t.Ta.length>0&&(Y(Yr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const a=Date.now()+i,l=new ug(e,n,a,r,s);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cg(t,e){if(fi("AsyncQueue",`${e}: ${t}`),Aa(t))return new K(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{static emptySet(e){return new js(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||X.comparator(n.key,i.key):(n,i)=>X.comparator(n.key,i.key),this.keyedMap=po(),this.sortedSet=new Ue(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof js)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new js;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(){this.ga=new Ue(X.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Z(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class la{constructor(e,n,i,r,s,a,l,u,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,r,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new la(e,n,js.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Eh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class ZO{constructor(){this.queries=fE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=ne(n),s=r.queries;r.queries=fE(),s.forEach((a,l)=>{for(const u of l.Sa)u.onError(i)})})(this,new K(U.ABORTED,"Firestore shutting down"))}}function fE(){return new is(t=>aS(t),Eh)}async function hg(t,e){const n=ne(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.ba()&&e.Da()&&(i=2):(s=new JO,i=e.Da()?0:1);try{switch(i){case 0:s.wa=await n.onListen(r,!0);break;case 1:s.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const l=cg(a,`Initialization of query '${gs(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&dg(n)}async function fg(t,e){const n=ne(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?r=e.Da()?0:1:!s.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function eM(t,e){const n=ne(t);let i=!1;for(const r of e){const s=r.query,a=n.queries.get(s);if(a){for(const l of a.Sa)l.Fa(r)&&(i=!0);a.wa=r}}i&&dg(n)}function tM(t,e,n){const i=ne(t),r=i.queries.get(e);if(r)for(const s of r.Sa)s.onError(n);i.queries.delete(e)}function dg(t){t.Ca.forEach(e=>{e.next()})}var Sm,dE;(dE=Sm||(Sm={})).Ma="default",dE.Cache="cache";class mg{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new la(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=la.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Sm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e){this.key=e}}class BS{constructor(e){this.key=e}}class nM{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=he(),this.mutatedKeys=he(),this.eu=oS(e),this.tu=new js(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new hE,r=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,l=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((f,d)=>{const m=r.get(f),v=Th(this.query,d)?d:null,x=!!m&&this.mutatedKeys.has(m.key),M=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let O=!1;m&&v?m.data.isEqual(v.data)?x!==M&&(i.track({type:3,doc:v}),O=!0):this.su(m,v)||(i.track({type:2,doc:v}),O=!0,(u&&this.eu(v,u)>0||c&&this.eu(v,c)<0)&&(l=!0)):!m&&v?(i.track({type:0,doc:v}),O=!0):m&&!v&&(i.track({type:1,doc:m}),O=!0,(u||c)&&(l=!0)),O&&(v?(a=a.add(v),s=M?s.add(f):s.delete(f)):(a=a.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),s=s.delete(f.key),i.track({type:1,doc:f})}return{tu:a,iu:i,Cs:l,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((f,d)=>function(v,x){const M=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z(20277,{Rt:O})}};return M(v)-M(x)}(f.type,d.type)||this.eu(f.doc,d.doc)),this.ou(i),r=r??!1;const l=n&&!r?this._u():[],u=this.Xa.size===0&&this.current&&!r?1:0,c=u!==this.Za;return this.Za=u,a.length!==0||c?{snapshot:new la(this.query,e.tu,s,a,e.mutatedKeys,u===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new hE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=he(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new BS(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new zS(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=he();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return la.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const pg="SyncEngine";class iM{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class rM{constructor(e){this.key=e,this.hu=!1}}class sM{constructor(e,n,i,r,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new is(l=>aS(l),Eh),this.Iu=new Map,this.Eu=new Set,this.du=new Ue(X.comparator),this.Au=new Map,this.Ru=new tg,this.Vu={},this.mu=new Map,this.fu=oa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function aM(t,e,n=!0){const i=KS(t);let r;const s=i.Tu.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.lu()):r=await qS(i,e,n,!0),r}async function oM(t,e){const n=KS(t);await qS(n,e,!0,!1)}async function qS(t,e,n,i){const r=await CO(t.localStore,In(e)),s=r.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let l;return i&&(l=await lM(t,e,s,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&VS(t.remoteStore,r),l}async function lM(t,e,n,i,r){t.pu=(d,m,v)=>async function(M,O,A,T){let E=O.view.ru(A);E.Cs&&(E=await sE(M.localStore,O.query,!1).then(({documents:y})=>O.view.ru(y,E)));const N=T&&T.targetChanges.get(O.targetId),P=T&&T.targetMismatches.get(O.targetId)!=null,G=O.view.applyChanges(E,M.isPrimaryClient,N,P);return pE(M,O.targetId,G.au),G.snapshot}(t,d,m,v);const s=await sE(t.localStore,e,!0),a=new nM(e,s.Qs),l=a.ru(s.documents),u=xl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),c=a.applyChanges(l,t.isPrimaryClient,u);pE(t,n,c.au);const f=new iM(e,n,a);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function uM(t,e,n){const i=ne(t),r=i.Tu.get(e),s=i.Iu.get(r.targetId);if(s.length>1)return i.Iu.set(r.targetId,s.filter(a=>!Eh(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Tm(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&sg(i.remoteStore,r.targetId),Am(i,r.targetId)}).catch(Sa)):(Am(i,r.targetId),await Tm(i.localStore,r.targetId,!0))}async function cM(t,e){const n=ne(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),sg(n.remoteStore,i.targetId))}async function hM(t,e,n){const i=_M(t);try{const r=await function(a,l){const u=ne(a),c=De.now(),f=l.reduce((v,x)=>v.add(x.key),he());let d,m;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let x=di(),M=he();return u.Ns.getEntries(v,f).next(O=>{x=O,x.forEach((A,T)=>{T.isValidDocument()||(M=M.add(A))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,x)).next(O=>{d=O;const A=[];for(const T of l){const E=RN(T,d.get(T.key).overlayedDocument);E!=null&&A.push(new gr(T.key,E,J1(E.value.mapValue),xt.exists(!0)))}return u.mutationQueue.addMutationBatch(v,c,A,l)}).next(O=>{m=O;const A=O.applyToLocalDocumentSet(d,M);return u.documentOverlayCache.saveOverlays(v,O.batchId,A)})}).then(()=>({batchId:m.batchId,changes:uS(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,l,u){let c=a.Vu[a.currentUser.toKey()];c||(c=new Ue(ce)),c=c.insert(l,u),a.Vu[a.currentUser.toKey()]=c}(i,r.batchId,n),await Nl(i,r.changes),await Ih(i.remoteStore)}catch(r){const s=cg(r,"Failed to persist write");n.reject(s)}}async function HS(t,e){const n=ne(t);try{const i=await AO(n.localStore,e);e.targetChanges.forEach((r,s)=>{const a=n.Au.get(s);a&&(_e(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?_e(a.hu,14607):r.removedDocuments.size>0&&(_e(a.hu,42227),a.hu=!1))}),await Nl(n,i,e)}catch(i){await Sa(i)}}function mE(t,e,n){const i=ne(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((s,a)=>{const l=a.view.va(e);l.snapshot&&r.push(l.snapshot)}),function(a,l){const u=ne(a);u.onlineState=l;let c=!1;u.queries.forEach((f,d)=>{for(const m of d.Sa)m.va(l)&&(c=!0)}),c&&dg(u)}(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function fM(t,e,n){const i=ne(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),s=r&&r.key;if(s){let a=new Ue(X.comparator);a=a.insert(s,Tt.newNoDocument(s,te.min()));const l=he().add(s),u=new wh(te.min(),new Map,new Ue(ce),a,l);await HS(i,u),i.du=i.du.remove(s),i.Au.delete(e),gg(i)}else await Tm(i.localStore,e,!1).then(()=>Am(i,e,n)).catch(Sa)}async function dM(t,e){const n=ne(t),i=e.batch.batchId;try{const r=await SO(n.localStore,e);GS(n,i,null),FS(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Nl(n,r)}catch(r){await Sa(r)}}async function mM(t,e,n){const i=ne(t);try{const r=await function(a,l){const u=ne(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let f;return u.mutationQueue.lookupMutationBatch(c,l).next(d=>(_e(d!==null,37113),f=d.keys(),u.mutationQueue.removeMutationBatch(c,d))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,f)).next(()=>u.localDocuments.getDocuments(c,f))})}(i.localStore,e);GS(i,e,n),FS(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Nl(i,r)}catch(r){await Sa(r)}}function FS(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function GS(t,e,n){const i=ne(t);let r=i.Vu[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function Am(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||QS(t,i)})}function QS(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(sg(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),gg(t))}function pE(t,e,n){for(const i of n)i instanceof zS?(t.Ru.addReference(i.key,e),pM(t,i)):i instanceof BS?(Y(pg,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||QS(t,i.key)):Z(19791,{wu:i})}function pM(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(Y(pg,"New document in limbo: "+n),t.Eu.add(i),gg(t))}function gg(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new X(we.fromString(e)),i=t.fu.next();t.Au.set(i,new rM(n)),t.du=t.du.insert(n,i),VS(t.remoteStore,new qi(In(vh(n.path)),i,"TargetPurposeLimboResolution",gh.ce))}}async function Nl(t,e,n){const i=ne(t),r=[],s=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,e,n).then(c=>{var f;if((c||n)&&i.isPrimaryClient){const d=c?!c.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:f.current;i.sharedClientState.updateQueryState(u.targetId,d?"current":"not-current")}if(c){r.push(c);const d=ig.As(u.targetId,c);s.push(d)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(u,c){const f=ne(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>B.forEach(c,m=>B.forEach(m.Es,v=>f.persistence.referenceDelegate.addReference(d,m.targetId,v)).next(()=>B.forEach(m.ds,v=>f.persistence.referenceDelegate.removeReference(d,m.targetId,v)))))}catch(d){if(!Aa(d))throw d;Y(rg,"Failed to update sequence numbers: "+d)}for(const d of c){const m=d.targetId;if(!d.fromCache){const v=f.Ms.get(m),x=v.snapshotVersion,M=v.withLastLimboFreeSnapshotVersion(x);f.Ms=f.Ms.insert(m,M)}}}(i.localStore,s))}async function gM(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){Y(pg,"User change. New user:",e.toKey());const i=await DS(n.localStore,e);n.currentUser=e,function(s,a){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new K(U.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Nl(n,i.Ls)}}function yM(t,e){const n=ne(t),i=n.Au.get(e);if(i&&i.hu)return he().add(i.key);{let r=he();const s=n.Iu.get(e);if(!s)return r;for(const a of s){const l=n.Tu.get(a);r=r.unionWith(l.view.nu)}return r}}function KS(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=HS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fM.bind(null,e),e.Pu.H_=eM.bind(null,e.eventManager),e.Pu.yu=tM.bind(null,e.eventManager),e}function _M(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mM.bind(null,e),e}class Lc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return bO(this.persistence,new vO,e.initialUser,this.serializer)}Cu(e){return new xS(ng.mi,this.serializer)}Du(e){return new xO}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lc.provider={build:()=>new Lc};class vM extends Lc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){_e(this.persistence.referenceDelegate instanceof Vc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new rO(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?kt.withCacheSize(this.cacheSizeBytes):kt.DEFAULT;return new xS(i=>Vc.mi(i,n),this.serializer)}}class wm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>mE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=gM.bind(null,this.syncEngine),await WO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new ZO}()}createDatastore(e){const n=Rh(e.databaseInfo.databaseId),i=function(s){return new VO(s)}(e.databaseInfo);return function(s,a,l,u){return new UO(s,a,l,u)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,a,l){return new zO(i,r,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>mE(this.syncEngine,n,0),function(){return lE.v()?new lE:new DO}())}createSyncEngine(e,n){return function(r,s,a,l,u,c,f){const d=new sM(r,s,a,l,u,c);return f&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=ne(r);Y(Yr,"RemoteStore shutting down."),s.Ea.add(5),await Dl(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}wm.provider={build:()=>new wm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):fi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr="FirestoreClient";class EM{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Et.UNAUTHENTICATED,this.clientId=Fp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async a=>{Y(fr,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(Y(fr,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=cg(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function ed(t,e){t.asyncQueue.verifyOperationInProgress(),Y(fr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await DS(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function gE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await TM(t);Y(fr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>cE(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>cE(e.remoteStore,r)),t._onlineComponents=e}async function TM(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y(fr,"Using user provided OfflineComponentProvider");try{await ed(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===U.FAILED_PRECONDITION||r.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;ta("Error using user provided cache. Falling back to memory cache: "+n),await ed(t,new Lc)}}else Y(fr,"Using default OfflineComponentProvider"),await ed(t,new vM(void 0));return t._offlineComponents}async function $S(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y(fr,"Using user provided OnlineComponentProvider"),await gE(t,t._uninitializedComponentsProvider._online)):(Y(fr,"Using default OnlineComponentProvider"),await gE(t,new wm))),t._onlineComponents}function bM(t){return $S(t).then(e=>e.syncEngine)}async function Pc(t){const e=await $S(t),n=e.eventManager;return n.onListen=aM.bind(null,e.syncEngine),n.onUnlisten=uM.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=oM.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=cM.bind(null,e.syncEngine),n}function SM(t,e,n={}){const i=new ni;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,u,c){const f=new yg({next:m=>{f.Nu(),a.enqueueAndForget(()=>fg(s,d));const v=m.docs.has(l);!v&&m.fromCache?c.reject(new K(U.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&u&&u.source==="server"?c.reject(new K(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),d=new mg(vh(l.path),f,{includeMetadataChanges:!0,qa:!0});return hg(s,d)}(await Pc(t),t.asyncQueue,e,n,i)),i.promise}function AM(t,e,n={}){const i=new ni;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,u,c){const f=new yg({next:m=>{f.Nu(),a.enqueueAndForget(()=>fg(s,d)),m.fromCache&&u.source==="server"?c.reject(new K(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),d=new mg(l,f,{includeMetadataChanges:!0,qa:!0});return hg(s,d)}(await Pc(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS="firestore.googleapis.com",_E=!0;class vE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new K(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=XS,this.ssl=_E}else this.host=e.host,this.ssl=e.ssl??_E;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=IS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nO)throw new K(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YS(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xh{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new DD;switch(i.type){case"firstParty":return new VD(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new K(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=yE.get(n);i&&(Y("ComponentProvider","Removing Datastore"),yE.delete(n),i.terminate())}(this),Promise.resolve()}}function wM(t,e,n,i={}){var c;t=It(t,xh);const r=Ea(e),s=t._getSettings(),a={...s,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;r&&(w1(`https://${l}`),R1("Firestore",!0)),s.host!==XS&&s.host!==l&&ta("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:r,emulatorOptions:i};if(!ci(u,a)&&(t._setSettings(u),i.mockUserToken)){let f,d;if(typeof i.mockUserToken=="string")f=i.mockUserToken,d=Et.MOCK_USER;else{f=ix(i.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new K(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Et(m)}t._authCredentials=new ND(new z1(f,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new yr(this.firestore,e,this._query)}}class qe{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qe(this.firestore,e,this._key)}toJSON(){return{type:qe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Cl(n,qe._jsonSchema))return new qe(e,i||null,new X(we.fromString(n.referencePath)))}}qe._jsonSchemaVersion="firestore/documentReference/1.0",qe._jsonSchema={type:Ze("string",qe._jsonSchemaVersion),referencePath:Ze("string")};class nr extends yr{constructor(e,n,i){super(e,n,vh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qe(this.firestore,null,new X(e))}withConverter(e){return new nr(this.firestore,e,this._path)}}function mi(t,e,...n){if(t=Qe(t),B1("collection","path",e),t instanceof xh){const i=we.fromString(e,...n);return Ov(i),new nr(t,null,i)}{if(!(t instanceof qe||t instanceof nr))throw new K(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(we.fromString(e,...n));return Ov(i),new nr(t.firestore,null,i)}}function mn(t,e,...n){if(t=Qe(t),arguments.length===1&&(e=Fp.newId()),B1("doc","path",e),t instanceof xh){const i=we.fromString(e,...n);return Nv(i),new qe(t,null,new X(i))}{if(!(t instanceof qe||t instanceof nr))throw new K(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(we.fromString(e,...n));return Nv(i),new qe(t.firestore,t instanceof nr?t.converter:null,new X(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="AsyncQueue";class TE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new OS(this,"async_queue_retry"),this._c=()=>{const i=Zf();i&&Y(EE,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Zf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Zf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ni;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Aa(e))throw e;Y(EE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,fi("INTERNAL UNHANDLED ERROR: ",bE(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=ug.createAndSchedule(this,e,n,i,s=>this.hc(s));return this.tc.push(r),r}uc(){this.nc&&Z(47125,{Pc:bE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function bE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class kn extends xh{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new TE,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new TE(e),this._firestoreClient=void 0,await e}}}function RM(t,e){const n=typeof t=="object"?t:D1(),i=typeof t=="string"?t:xc,r=qp(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=tx("firestore");s&&wM(r,...s)}return r}function Ol(t){if(t._terminated)throw new K(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||CM(t),t._firestoreClient}function CM(t){var i,r,s;const e=t._freezeSettings(),n=function(l,u,c,f){return new WD(l,u,c,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,YS(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new EM(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this._byteString=e}static fromBase64String(e){try{return new on(yt.fromBase64String(e))}catch(n){throw new K(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new on(yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:on._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Cl(e,on._jsonSchema))return on.fromBase64String(e.bytes)}}on._jsonSchemaVersion="firestore/bytes/1.0",on._jsonSchema={type:Ze("string",on._jsonSchemaVersion),bytes:Ze("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function WS(){return new Ca(cm)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Dn._jsonSchemaVersion}}static fromJSON(e){if(Cl(e,Dn._jsonSchema))return new Dn(e.latitude,e.longitude)}}Dn._jsonSchemaVersion="firestore/geoPoint/1.0",Dn._jsonSchema={type:Ze("string",Dn._jsonSchemaVersion),latitude:Ze("number"),longitude:Ze("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Nn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Cl(e,Nn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Nn(e.vectorValues);throw new K(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Nn._jsonSchemaVersion="firestore/vectorValue/1.0",Nn._jsonSchema={type:Ze("string",Nn._jsonSchemaVersion),vectorValues:Ze("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IM=/^__.*__$/;class xM{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new gr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Il(e,this.data,n,this.fieldTransforms)}}class JS{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new gr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ZS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z(40011,{Ac:t})}}class Dh{constructor(e,n,i,r,s,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Dh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Uc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(ZS(this.Ac)&&IM.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class DM{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Rh(e)}Cc(e,n,i,r=!1){return new Dh({Ac:e,methodName:n,Dc:i,path:mt.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ml(t){const e=t._freezeSettings(),n=Rh(t._databaseId);return new DM(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _g(t,e,n,i,r,s={}){const a=t.Cc(s.merge||s.mergeFields?2:0,e,n,r);bg("Data must be an object, but it was:",a,i);const l=iA(i,a);let u,c;if(s.merge)u=new Gt(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const f=[];for(const d of s.mergeFields){const m=Rm(e,d,n);if(!a.contains(m))throw new K(U.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);sA(f,m)||f.push(m)}u=new Gt(f),c=a.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=a.fieldTransforms;return new xM(new Lt(l),u,c)}class Nh extends Ia{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nh}}function eA(t,e,n){return new Dh({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class vg extends Ia{_toFieldTransform(e){return new Wp(e.path,new ol)}isEqual(e){return e instanceof vg}}class Eg extends Ia{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=eA(this,e,!0),i=this.vc.map(s=>ss(s,n)),r=new sa(i);return new Wp(e.path,r)}isEqual(e){return e instanceof Eg&&ci(this.vc,e.vc)}}class Tg extends Ia{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=eA(this,e,!0),i=this.vc.map(s=>ss(s,n)),r=new aa(i);return new Wp(e.path,r)}isEqual(e){return e instanceof Tg&&ci(this.vc,e.vc)}}function tA(t,e,n,i){const r=t.Cc(1,e,n);bg("Data must be an object, but it was:",r,i);const s=[],a=Lt.empty();pr(i,(u,c)=>{const f=Sg(e,u,n);c=Qe(c);const d=r.yc(f);if(c instanceof Nh)s.push(f);else{const m=ss(c,d);m!=null&&(s.push(f),a.set(f,m))}});const l=new Gt(s);return new JS(a,l,r.fieldTransforms)}function nA(t,e,n,i,r,s){const a=t.Cc(1,e,n),l=[Rm(e,i,n)],u=[r];if(s.length%2!=0)throw new K(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)l.push(Rm(e,s[m])),u.push(s[m+1]);const c=[],f=Lt.empty();for(let m=l.length-1;m>=0;--m)if(!sA(c,l[m])){const v=l[m];let x=u[m];x=Qe(x);const M=a.yc(v);if(x instanceof Nh)c.push(v);else{const O=ss(x,M);O!=null&&(c.push(v),f.set(v,O))}}const d=new Gt(c);return new JS(f,d,a.fieldTransforms)}function NM(t,e,n,i=!1){return ss(n,t.Cc(i?4:3,e))}function ss(t,e){if(rA(t=Qe(t)))return bg("Unsupported field value:",e,t),iA(t,e);if(t instanceof Ia)return function(i,r){if(!ZS(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const l of i){let u=ss(l,r.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=Qe(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return EN(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=De.fromDate(i);return{timestampValue:Mc(r.serializer,s)}}if(i instanceof De){const s=new De(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Mc(r.serializer,s)}}if(i instanceof Dn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof on)return{bytesValue:TS(r.serializer,i._byteString)};if(i instanceof qe){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:eg(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Nn)return function(a,l){return{mapValue:{fields:{[X1]:{stringValue:W1},[Dc]:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw l.Sc("VectorValues must only contain numeric values.");return Xp(l.serializer,c)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${ph(i)}`)}(t,e)}function iA(t,e){const n={};return F1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pr(t,(i,r)=>{const s=ss(r,e.mc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function rA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof De||t instanceof Dn||t instanceof on||t instanceof qe||t instanceof Ia||t instanceof Nn)}function bg(t,e,n){if(!rA(n)||!q1(n)){const i=ph(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function Rm(t,e,n){if((e=Qe(e))instanceof Ca)return e._internalPath;if(typeof e=="string")return Sg(t,e);throw Uc("Field path arguments must be of type string or ",t,!1,void 0,n)}const OM=new RegExp("[~\\*/\\[\\]]");function Sg(t,e,n){if(e.search(OM)>=0)throw Uc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ca(...e.split("."))._internalPath}catch{throw Uc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Uc(t,e,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${i}`),a&&(u+=` in document ${r}`),u+=")"),new K(U.INVALID_ARGUMENT,l+t+u)}function sA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new MM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Oh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class MM extends aA{data(){return super.data()}}function Oh(t,e){return typeof e=="string"?Sg(t,e):e instanceof Ca?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ag{}class lA extends Ag{}function xa(t,e,...n){let i=[];e instanceof Ag&&i.push(e),i=i.concat(n),function(s){const a=s.filter(u=>u instanceof wg).length,l=s.filter(u=>u instanceof Mh).length;if(a>1||a>0&&l>0)throw new K(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class Mh extends lA{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Mh(e,n,i)}_apply(e){const n=this._parse(e);return cA(e._query,n),new yr(e.firestore,e.converter,pm(e._query,n))}_parse(e){const n=Ml(e.firestore);return function(s,a,l,u,c,f,d){let m;if(c.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new K(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){wE(d,f);const x=[];for(const M of d)x.push(AE(u,s,M));m={arrayValue:{values:x}}}else m=AE(u,s,d)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||wE(d,f),m=NM(l,a,d,f==="in"||f==="not-in");return We.create(c,f,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function uA(t,e,n){const i=e,r=Oh("where",t);return Mh._create(r,i,n)}class wg extends Ag{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new wg(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:gn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let a=r;const l=s.getFlattenedFilters();for(const u of l)cA(a,u),a=pm(a,u)}(e._query,n),new yr(e.firestore,e.converter,pm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Rg extends lA{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Rg(e,n)}_apply(e){const n=function(r,s,a){if(r.startAt!==null)throw new K(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new K(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new al(s,a)}(e._query,this._field,this._direction);return new yr(e.firestore,e.converter,function(r,s){const a=r.explicitOrderBy.concat([s]);return new wa(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function Vh(t,e="asc"){const n=e,i=Oh("orderBy",t);return Rg._create(i,n)}function AE(t,e,n){if(typeof(n=Qe(n))=="string"){if(n==="")throw new K(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sS(e)&&n.indexOf("/")!==-1)throw new K(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(we.fromString(n));if(!X.isDocumentKey(i))throw new K(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return zv(t,new X(i))}if(n instanceof qe)return zv(t,n._key);throw new K(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ph(n)}.`)}function wE(t,e){if(!Array.isArray(t)||t.length===0)throw new K(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function cA(t,e){const n=function(r,s){for(const a of r)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class VM{convertValue(e,n="none"){switch(cr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return He(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ur(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return pr(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var i,r,s;const n=(s=(r=(i=e.fields)==null?void 0:i[Dc].arrayValue)==null?void 0:r.values)==null?void 0:s.map(a=>He(a.doubleValue));return new Nn(n)}convertGeoPoint(e){return new Dn(He(e.latitude),He(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=_h(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(il(e));default:return null}}convertTimestamp(e){const n=lr(e);return new De(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=we.fromString(e);_e(CS(i),9688,{name:e});const r=new rl(i.get(1),i.get(3)),s=new X(i.popFirst(5));return r.isEqual(n)||fi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class yo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jr extends aA{constructor(e,n,i,r,s,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Gu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Oh("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new K(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=jr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}jr._jsonSchemaVersion="firestore/documentSnapshot/1.0",jr._jsonSchema={type:Ze("string",jr._jsonSchemaVersion),bundleSource:Ze("string","DocumentSnapshot"),bundleName:Ze("string"),bundle:Ze("string")};class Gu extends jr{data(e={}){return super.data(e)}}class zr{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new yo(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Gu(this._firestore,this._userDataWriter,i.key,i,new yo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const u=new Gu(r._firestore,r._userDataWriter,l.doc.key,l.doc,new yo(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Gu(r._firestore,r._userDataWriter,l.doc.key,l.doc,new yo(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,f=-1;return l.type!==0&&(c=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),f=a.indexOf(l.doc.key)),{type:kM(l.type),doc:u,oldIndex:c,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new K(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=zr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Fp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function kM(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LM(t){t=It(t,qe);const e=It(t.firestore,kn);return SM(Ol(e),t._key).then(n=>hA(e,t,n))}zr._jsonSchemaVersion="firestore/querySnapshot/1.0",zr._jsonSchema={type:Ze("string",zr._jsonSchemaVersion),bundleSource:Ze("string","QuerySnapshot"),bundleName:Ze("string"),bundle:Ze("string")};class Ig extends VM{constructor(e){super(),this.firestore=e}convertBytes(e){return new on(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qe(this.firestore,null,n)}}function Da(t){t=It(t,yr);const e=It(t.firestore,kn),n=Ol(e),i=new Ig(e);return oA(t._query),AM(n,t._query).then(r=>new zr(e,i,t,r))}function PM(t,e,n){t=It(t,qe);const i=It(t.firestore,kn),r=Cg(t.converter,e,n);return Vl(i,[_g(Ml(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,xt.none())])}function UM(t,e,n,...i){t=It(t,qe);const r=It(t.firestore,kn),s=Ml(r);let a;return a=typeof(e=Qe(e))=="string"||e instanceof Ca?nA(s,"updateDoc",t._key,e,n,i):tA(s,"updateDoc",t._key,e),Vl(r,[a.toMutation(t._key,xt.exists(!0))])}function xg(t){return Vl(It(t.firestore,kn),[new Ah(t._key,xt.none())])}function jM(t,e){const n=It(t.firestore,kn),i=mn(t),r=Cg(t.converter,e);return Vl(n,[_g(Ml(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,xt.exists(!1))]).then(()=>i)}function zM(t,...e){var u,c,f;t=Qe(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||SE(e[i])||(n=e[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(SE(e[i])){const d=e[i];e[i]=(u=d.next)==null?void 0:u.bind(d),e[i+1]=(c=d.error)==null?void 0:c.bind(d),e[i+2]=(f=d.complete)==null?void 0:f.bind(d)}let s,a,l;if(t instanceof qe)a=It(t.firestore,kn),l=vh(t._key.path),s={next:d=>{e[i]&&e[i](hA(a,t,d))},error:e[i+1],complete:e[i+2]};else{const d=It(t,yr);a=It(d.firestore,kn),l=d._query;const m=new Ig(a);s={next:v=>{e[i]&&e[i](new zr(a,m,d,v))},error:e[i+1],complete:e[i+2]},oA(t._query)}return function(m,v,x,M){const O=new yg(M),A=new mg(v,O,x);return m.asyncQueue.enqueueAndForget(async()=>hg(await Pc(m),A)),()=>{O.Nu(),m.asyncQueue.enqueueAndForget(async()=>fg(await Pc(m),A))}}(Ol(a),l,r,s)}function Vl(t,e){return function(i,r){const s=new ni;return i.asyncQueue.enqueueAndForget(async()=>hM(await bM(i),r,s)),s.promise}(Ol(t),e)}function hA(t,e,n){const i=n.docs.get(e._key),r=new Ig(t);return new jr(t,r,e._key,i,new yo(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ml(e)}set(e,n,i){this._verifyNotCommitted();const r=td(e,this._firestore),s=Cg(r.converter,n,i),a=_g(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(a.toMutation(r._key,xt.none())),this}update(e,n,i,...r){this._verifyNotCommitted();const s=td(e,this._firestore);let a;return a=typeof(n=Qe(n))=="string"||n instanceof Ca?nA(this._dataReader,"WriteBatch.update",s._key,n,i,r):tA(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(a.toMutation(s._key,xt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=td(e,this._firestore);return this._mutations=this._mutations.concat(new Ah(n._key,xt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new K(U.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function td(t,e){if((t=Qe(t)).firestore!==e)throw new K(U.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Br(){return new vg("serverTimestamp")}function qM(...t){return new Eg("arrayUnion",t)}function HM(...t){return new Tg("arrayRemove",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(t){return Ol(t=It(t,kn)),new BM(t,e=>Vl(t,e))}(function(e,n=!0){(function(r){ba=r})(Ta),ea(new Kr("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),l=new kn(new OD(i.getProvider("auth-internal")),new kD(a,i.getProvider("app-check-internal")),function(c,f){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new K(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rl(c.options.projectId,f)}(a,r),a);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),er(Iv,xv,e),er(Iv,xv,"esm2020")})();var FM="firebase",GM="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */er(FM,GM,"app");function fA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const QM=fA,dA=new wl("auth","Firebase",fA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc=new zp("@firebase/auth");function KM(t,...e){jc.logLevel<=ue.WARN&&jc.warn(`Auth (${Ta}): ${t}`,...e)}function Qu(t,...e){jc.logLevel<=ue.ERROR&&jc.error(`Auth (${Ta}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(t,...e){throw Dg(t,...e)}function On(t,...e){return Dg(t,...e)}function mA(t,e,n){const i={...QM(),[e]:n};return new wl("auth","Firebase",i).create(e,{appName:t.name})}function ii(t){return mA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dg(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return dA.create(t,...e)}function J(t,e,...n){if(!t)throw Dg(e,...n)}function Xn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Qu(e),new Error(e)}function pi(t,e){t||Xn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function $M(){return RE()==="http:"||RE()==="https:"}function RE(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($M()||ux()||"connection"in navigator)?navigator.onLine:!0}function XM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,n){this.shortDelay=e,this.longDelay=n,pi(n>e,"Short delay should be less than long delay!"),this.isMobile=ax()||cx()}get(){return YM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(t,e){pi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ZM=new kl(3e4,6e4);function _r(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function vr(t,e,n,i,r={}){return gA(t,r,async()=>{let s={},a={};i&&(e==="GET"?a=i:s={body:JSON.stringify(i)});const l=Rl({key:t.config.apiKey,...a}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:u,...s};return lx()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Ea(t.emulatorConfig.host)&&(c.credentials="include"),pA.fetch()(await yA(t,t.config.apiHost,n,l),c)})}async function gA(t,e,n){t._canInitEmulator=!1;const i={...WM,...e};try{const r=new tV(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw vu(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw vu(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw vu(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw vu(t,"user-disabled",a);const f=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw mA(t,f,c);yn(t,f)}}catch(r){if(r instanceof _i)throw r;yn(t,"network-request-failed",{message:String(r)})}}async function Ll(t,e,n,i,r={}){const s=await vr(t,e,n,i,r);return"mfaPendingCredential"in s&&yn(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function yA(t,e,n,i){const r=`${e}${n}?${i}`,s=t,a=s.config.emulator?Ng(t.config,r):`${t.config.apiScheme}://${r}`;return JM.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function eV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(On(this.auth,"network-request-failed")),ZM.get())})}}function vu(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=On(t,e,i);return r.customData._tokenResponse=n,r}function CE(t){return t!==void 0&&t.enterprise!==void 0}class nV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return eV(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function iV(t,e){return vr(t,"GET","/v2/recaptchaConfig",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rV(t,e){return vr(t,"POST","/v1/accounts:delete",e)}async function zc(t,e){return vr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sV(t,e=!1){const n=Qe(t),i=await n.getIdToken(e),r=Og(i);J(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Uo(nd(r.auth_time)),issuedAtTime:Uo(nd(r.iat)),expirationTime:Uo(nd(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function nd(t){return Number(t)*1e3}function Og(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Qu("JWT malformed, contained fewer than 3 sections"),null;try{const r=T1(n);return r?JSON.parse(r):(Qu("Failed to decode base64 JWT payload"),null)}catch(r){return Qu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function IE(t){const e=Og(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ll(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof _i&&aV(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function aV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Uo(this.lastLoginAt),this.creationTime=Uo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bc(t){var d;const e=t.auth,n=await t.getIdToken(),i=await ll(t,zc(e,{idToken:n}));J(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const s=(d=r.providerUserInfo)!=null&&d.length?_A(r.providerUserInfo):[],a=uV(t.providerData,s),l=t.isAnonymous,u=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Im(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(t,f)}async function lV(t){const e=Qe(t);await Bc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uV(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function _A(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cV(t,e){const n=await gA(t,{},async()=>{const i=Rl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,a=await yA(t,r,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return t.emulatorConfig&&Ea(t.emulatorConfig.host)&&(u.credentials="include"),pA.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function hV(t,e){return vr(t,"POST","/v2/accounts:revokeToken",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):IE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){J(e.length!==0,"internal-error");const n=IE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await cV(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new zs;return i&&(J(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(J(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),s&&(J(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zs,this.toJSON())}_performRefresh(){return Xn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class dn{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new oV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Im(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await ll(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return sV(this,e)}reload(){return lV(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new dn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Bc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(an(this.auth.app))return Promise.reject(ii(this.auth));const e=await this.getIdToken();return await ll(this,rV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,c=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:d,emailVerified:m,isAnonymous:v,providerData:x,stsTokenManager:M}=n;J(d&&M,e,"internal-error");const O=zs.fromJSON(this.name,M);J(typeof d=="string",e,"internal-error"),Ri(i,e.name),Ri(r,e.name),J(typeof m=="boolean",e,"internal-error"),J(typeof v=="boolean",e,"internal-error"),Ri(s,e.name),Ri(a,e.name),Ri(l,e.name),Ri(u,e.name),Ri(c,e.name),Ri(f,e.name);const A=new dn({uid:d,auth:e,email:r,emailVerified:m,displayName:i,isAnonymous:v,photoURL:a,phoneNumber:s,tenantId:l,stsTokenManager:O,createdAt:c,lastLoginAt:f});return x&&Array.isArray(x)&&(A.providerData=x.map(T=>({...T}))),u&&(A._redirectEventId=u),A}static async _fromIdTokenResponse(e,n,i=!1){const r=new zs;r.updateFromServerResponse(n);const s=new dn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Bc(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];J(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?_A(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),l=new zs;l.updateFromIdToken(i);const u=new dn({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:a}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Im(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE=new Map;function Wn(t){pi(t instanceof Function,"Expected a class definition");let e=xE.get(t);return e?(pi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,xE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}vA.type="NONE";const DE=vA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ku(t,e,n){return`firebase:${t}:${e}:${n}`}class Bs{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Ku(this.userKey,r.apiKey,s),this.fullPersistenceKey=Ku("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await zc(this.auth,{idToken:e}).catch(()=>{});return n?dn._fromGetAccountInfoResponse(this.auth,n,e):null}return dn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Bs(Wn(DE),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||Wn(DE);const a=Ku(i,e.config.apiKey,e.name);let l=null;for(const c of n)try{const f=await c._get(a);if(f){let d;if(typeof f=="string"){const m=await zc(e,{idToken:f}).catch(()=>{});if(!m)break;d=await dn._fromGetAccountInfoResponse(e,m,f)}else d=dn._fromJSON(e,f);c!==s&&(l=d),s=c;break}}catch{}const u=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Bs(s,e,i):(s=u[0],l&&await s._set(a,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(a)}catch{}})),new Bs(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(SA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(EA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wA(e))return"Blackberry";if(RA(e))return"Webos";if(TA(e))return"Safari";if((e.includes("chrome/")||bA(e))&&!e.includes("edge/"))return"Chrome";if(AA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function EA(t=bt()){return/firefox\//i.test(t)}function TA(t=bt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bA(t=bt()){return/crios\//i.test(t)}function SA(t=bt()){return/iemobile/i.test(t)}function AA(t=bt()){return/android/i.test(t)}function wA(t=bt()){return/blackberry/i.test(t)}function RA(t=bt()){return/webos/i.test(t)}function Mg(t=bt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function fV(t=bt()){var e;return Mg(t)&&!!((e=window.navigator)!=null&&e.standalone)}function dV(){return hx()&&document.documentMode===10}function CA(t=bt()){return Mg(t)||AA(t)||RA(t)||wA(t)||/windows phone/i.test(t)||SA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(t,e=[]){let n;switch(t){case"Browser":n=NE(bt());break;case"Worker":n=`${NE(bt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ta}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((a,l)=>{try{const u=e(s);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pV(t,e={}){return vr(t,"GET","/v2/passwordPolicy",_r(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV=6;class yV{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??gV,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new OE(this),this.idTokenSubscription=new OE(this),this.beforeStateQueue=new mV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Wn(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await Bs.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await zc(this,{idToken:e}),i=await dn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(an(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Bc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(an(this.app))return Promise.reject(ii(this));const n=e?Qe(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return an(this.app)?Promise.reject(ii(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return an(this.app)?Promise.reject(ii(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await pV(this),n=new yV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wl("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await hV(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Wn(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await Bs.create(this,[Wn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,i,r);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=IA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(an(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&KM(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function as(t){return Qe(t)}class OE{constructor(e){this.auth=e,this.observer=null,this.addObserver=vx(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vV(t){kh=t}function xA(t){return kh.loadJS(t)}function EV(){return kh.recaptchaEnterpriseScript}function TV(){return kh.gapiScript}function bV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class SV{constructor(){this.enterprise=new AV}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class AV{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const wV="recaptcha-enterprise",DA="NO_RECAPTCHA";class RV{constructor(e){this.type=wV,this.auth=as(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,l)=>{iV(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const c=new nV(u);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,a(c.siteKey)}}).catch(u=>{l(u)})})}function r(s,a,l){const u=window.grecaptcha;CE(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(c=>{a(c)}).catch(()=>{a(DA)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new SV().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{i(this.auth).then(l=>{if(!n&&CE(window.grecaptcha))r(l,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=EV();u.length!==0&&(u+=l),xA(u).then(()=>{r(l,s,a)}).catch(c=>{a(c)})}}).catch(l=>{a(l)})})}}async function ME(t,e,n,i=!1,r=!1){const s=new RV(t);let a;if(r)a=DA;else try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,c=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function xm(t,e,n,i,r){var s;if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await ME(t,e,n,n==="getOobCode");return i(t,a)}else return i(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await ME(t,e,n,n==="getOobCode");return i(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CV(t,e){const n=qp(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(ci(s,e??{}))return r;yn(r,"already-initialized")}return n.initialize({options:e})}function IV(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Wn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function xV(t,e,n){const i=as(t);J(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=NA(e),{host:a,port:l}=DV(e),u=l===null?"":`:${l}`,c={url:`${s}//${a}${u}/`},f=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){J(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),J(ci(c,i.config.emulator)&&ci(f,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=c,i.emulatorConfig=f,i.settings.appVerificationDisabledForTesting=!0,Ea(a)?(w1(`${s}//${a}${u}`),R1("Auth",!0)):NV()}function NA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function DV(t){const e=NA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:VE(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:VE(a)}}}function VE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function NV(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Xn("not implemented")}_getIdTokenResponse(e){return Xn("not implemented")}_linkToIdToken(e,n){return Xn("not implemented")}_getReauthenticationResolver(e){return Xn("not implemented")}}async function OV(t,e){return vr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MV(t,e){return Ll(t,"POST","/v1/accounts:signInWithPassword",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VV(t,e){return Ll(t,"POST","/v1/accounts:signInWithEmailLink",_r(t,e))}async function kV(t,e){return Ll(t,"POST","/v1/accounts:signInWithEmailLink",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul extends Vg{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new ul(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new ul(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xm(e,n,"signInWithPassword",MV);case"emailLink":return VV(e,{email:this._email,oobCode:this._password});default:yn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xm(e,i,"signUpPassword",OV);case"emailLink":return kV(e,{idToken:n,email:this._email,oobCode:this._password});default:yn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qs(t,e){return Ll(t,"POST","/v1/accounts:signInWithIdp",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LV="http://localhost";class Xr extends Vg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Xr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):yn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...s}=n;if(!i||!r)return null;const a=new Xr(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return qs(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,qs(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,qs(e,n)}buildRequest(){const e={requestUri:LV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Rl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PV(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function UV(t){const e=ho(fo(t)).link,n=e?ho(fo(e)).deep_link_id:null,i=ho(fo(t)).deep_link_id;return(i?ho(fo(i)).link:null)||i||n||e||t}class kg{constructor(e){const n=ho(fo(e)),i=n.apiKey??null,r=n.oobCode??null,s=PV(n.mode??null);J(i&&r&&s,"argument-error"),this.apiKey=i,this.operation=s,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=UV(e);try{return new kg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(){this.providerId=Na.PROVIDER_ID}static credential(e,n){return ul._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=kg.parseLink(n);return J(i,"argument-error"),ul._fromEmailAndCode(e,i.code,i.tenantId)}}Na.PROVIDER_ID="password";Na.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Na.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl extends OA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends Pl{constructor(){super("facebook.com")}static credential(e){return Xr._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vi.credentialFromTaggedObject(e)}static credentialFromError(e){return Vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vi.credential(e.oauthAccessToken)}catch{return null}}}Vi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn extends Pl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Xr._fromParams({providerId:Qn.PROVIDER_ID,signInMethod:Qn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Qn.credentialFromTaggedObject(e)}static credentialFromError(e){return Qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Qn.credential(n,i)}catch{return null}}}Qn.GOOGLE_SIGN_IN_METHOD="google.com";Qn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends Pl{constructor(){super("github.com")}static credential(e){return Xr._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ki.credential(e.oauthAccessToken)}catch{return null}}}ki.GITHUB_SIGN_IN_METHOD="github.com";ki.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends Pl{constructor(){super("twitter.com")}static credential(e,n){return Xr._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Li.credential(n,i)}catch{return null}}}Li.TWITTER_SIGN_IN_METHOD="twitter.com";Li.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jV(t,e){return Ll(t,"POST","/v1/accounts:signUp",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await dn._fromIdTokenResponse(e,i,r),a=kE(i);return new Wr({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=kE(i);return new Wr({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function kE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc extends _i{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,qc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new qc(e,n,i,r)}}function MA(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?qc._fromErrorAndOperation(t,s,e,i):s})}async function zV(t,e,n=!1){const i=await ll(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Wr._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BV(t,e,n=!1){const{auth:i}=t;if(an(i.app))return Promise.reject(ii(i));const r="reauthenticate";try{const s=await ll(t,MA(i,r,e,t),n);J(s.idToken,i,"internal-error");const a=Og(s.idToken);J(a,i,"internal-error");const{sub:l}=a;return J(t.uid===l,i,"user-mismatch"),Wr._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&yn(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VA(t,e,n=!1){if(an(t.app))return Promise.reject(ii(t));const i="signIn",r=await MA(t,i,e),s=await Wr._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function qV(t,e){return VA(as(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kA(t){const e=as(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function HV(t,e,n){if(an(t.app))return Promise.reject(ii(t));const i=as(t),a=await xm(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",jV).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&kA(t),u}),l=await Wr._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}function FV(t,e,n){return an(t.app)?Promise.reject(ii(t)):qV(Qe(t),Na.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&kA(t),i})}function GV(t,e,n,i){return Qe(t).onIdTokenChanged(e,n,i)}function QV(t,e,n){return Qe(t).beforeAuthStateChanged(e,n)}function KV(t,e,n,i){return Qe(t).onAuthStateChanged(e,n,i)}function $V(t){return Qe(t).signOut()}const Hc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Hc,"1"),this.storage.removeItem(Hc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV=1e3,XV=10;class PA extends LA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=CA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);dV()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,XV):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},YV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}PA.type="LOCAL";const WV=PA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA extends LA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}UA.type="SESSION";const jA=UA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JV(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Lh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const l=Array.from(a).map(async c=>c(n.origin,s)),u=await JV(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((l,u)=>{const c=Lg("",20);r.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(d){const m=d;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(m.data.response);break;default:clearTimeout(f),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(){return window}function e4(t){Mn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(){return typeof Mn().WorkerGlobalScope<"u"&&typeof Mn().importScripts=="function"}async function t4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function n4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function i4(){return zA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA="firebaseLocalStorageDb",r4=1,Fc="firebaseLocalStorage",qA="fbase_key";class Ul{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ph(t,e){return t.transaction([Fc],e?"readwrite":"readonly").objectStore(Fc)}function s4(){const t=indexedDB.deleteDatabase(BA);return new Ul(t).toPromise()}function Dm(){const t=indexedDB.open(BA,r4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Fc,{keyPath:qA})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Fc)?e(i):(i.close(),await s4(),e(await Dm()))})})}async function LE(t,e,n){const i=Ph(t,!0).put({[qA]:e,value:n});return new Ul(i).toPromise()}async function a4(t,e){const n=Ph(t,!1).get(e),i=await new Ul(n).toPromise();return i===void 0?null:i.value}function PE(t,e){const n=Ph(t,!0).delete(e);return new Ul(n).toPromise()}const o4=800,l4=3;class HA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Dm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>l4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lh._getInstance(i4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await t4(),!this.activeServiceWorker)return;this.sender=new ZV(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||n4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Dm();return await LE(e,Hc,"1"),await PE(e,Hc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>LE(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>a4(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>PE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=Ph(r,!1).getAll();return new Ul(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),o4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}HA.type="LOCAL";const u4=HA;new kl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c4(t,e){return e?Wn(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg extends Vg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return qs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return qs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function h4(t){return VA(t.auth,new Pg(t),t.bypassAuthState)}function f4(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),BV(n,new Pg(t),t.bypassAuthState)}async function d4(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),zV(n,new Pg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:l}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return h4;case"linkViaPopup":case"linkViaRedirect":return d4;case"reauthViaPopup":case"reauthViaRedirect":return f4;default:yn(this.auth,"internal-error")}}resolve(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4=new kl(2e3,1e4);class Ns extends FA{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Ns.currentPopupAction&&Ns.currentPopupAction.cancel(),Ns.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return J(e,this.auth,"internal-error"),e}async onExecution(){pi(this.filter.length===1,"Popup operations only handle one event");const e=Lg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(On(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(On(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ns.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(On(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,m4.get())};e()}}Ns.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4="pendingRedirect",$u=new Map;class g4 extends FA{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=$u.get(this.auth._key());if(!e){try{const i=await y4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}$u.set(this.auth._key(),e)}return this.bypassAuthState||$u.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function y4(t,e){const n=E4(e),i=v4(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function _4(t,e){$u.set(t._key(),e)}function v4(t){return Wn(t._redirectPersistence)}function E4(t){return Ku(p4,t.config.apiKey,t.name)}async function T4(t,e,n=!1){if(an(t.app))return Promise.reject(ii(t));const i=as(t),r=c4(i,e),a=await new g4(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=10*60*1e3;class S4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!A4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!GA(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(On(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=b4&&this.cachedEventUids.clear(),this.cachedEventUids.has(UE(e))}saveEventToCache(e){this.cachedEventUids.add(UE(e)),this.lastProcessedEventTime=Date.now()}}function UE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function GA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function A4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return GA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w4(t,e={}){return vr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,C4=/^https?/;async function I4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await w4(t);for(const n of e)try{if(x4(n))return}catch{}yn(t,"unauthorized-domain")}function x4(t){const e=Cm(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!C4.test(n))return!1;if(R4.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4=new kl(3e4,6e4);function jE(){const t=Mn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function N4(t){return new Promise((e,n)=>{var r,s,a;function i(){jE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jE(),n(On(t,"network-request-failed"))},timeout:D4.get()})}if((s=(r=Mn().gapi)==null?void 0:r.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((a=Mn().gapi)!=null&&a.load)i();else{const l=bV("iframefcb");return Mn()[l]=()=>{gapi.load?i():n(On(t,"network-request-failed"))},xA(`${TV()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Yu=null,e})}let Yu=null;function O4(t){return Yu=Yu||N4(t),Yu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4=new kl(5e3,15e3),V4="__/auth/iframe",k4="emulator/auth/iframe",L4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},P4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function U4(t){const e=t.config;J(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ng(e,k4):`https://${t.config.authDomain}/${V4}`,i={apiKey:e.apiKey,appName:t.name,v:Ta},r=P4.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Rl(i).slice(1)}`}async function j4(t){const e=await O4(t),n=Mn().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:U4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:L4,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=On(t,"network-request-failed"),l=Mn().setTimeout(()=>{s(a)},M4.get());function u(){Mn().clearTimeout(l),r(i)}i.ping(u).then(u,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},B4=500,q4=600,H4="_blank",F4="http://localhost";class zE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function G4(t,e,n,i=B4,r=q4){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u={...z4,width:i.toString(),height:r.toString(),top:s,left:a},c=bt().toLowerCase();n&&(l=bA(c)?H4:n),EA(c)&&(e=e||F4,u.scrollbars="yes");const f=Object.entries(u).reduce((m,[v,x])=>`${m}${v}=${x},`,"");if(fV(c)&&l!=="_self")return Q4(e||"",l),new zE(null);const d=window.open(e||"",l,f);J(d,t,"popup-blocked");try{d.focus()}catch{}return new zE(d)}function Q4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4="__/auth/handler",$4="emulator/auth/handler",Y4=encodeURIComponent("fac");async function BE(t,e,n,i,r,s){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Ta,eventId:r};if(e instanceof OA){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",_x(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,d]of Object.entries({}))a[f]=d}if(e instanceof Pl){const f=e.getScopes().filter(d=>d!=="");f.length>0&&(a.scopes=f.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),c=u?`#${Y4}=${encodeURIComponent(u)}`:"";return`${X4(t)}?${Rl(l).slice(1)}${c}`}function X4({config:t}){return t.emulator?Ng(t,$4):`https://${t.authDomain}/${K4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id="webStorageSupport";class W4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jA,this._completeRedirectFn=T4,this._overrideRedirectResult=_4}async _openPopup(e,n,i,r){var a;pi((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await BE(e,n,i,Cm(),r);return G4(e,s,Lg())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await BE(e,n,i,Cm(),r);return e4(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(pi(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await j4(e),i=new S4(e);return n.register("authEvent",r=>(J(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(id,{type:id},r=>{var a;const s=(a=r==null?void 0:r[0])==null?void 0:a[id];s!==void 0&&n(!!s),yn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=I4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return CA()||TA()||Mg()}}const J4=W4;var qE="@firebase/auth",HE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ek(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tk(t){ea(new Kr("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;J(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:IA(t)},c=new _V(i,r,s,u);return IV(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),ea(new Kr("auth-internal",e=>{const n=as(e.getProvider("auth").getImmediate());return(i=>new Z4(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),er(qE,HE,ek(t)),er(qE,HE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk=5*60,ik=A1("authIdTokenMaxAge")||nk;let FE=null;const rk=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>ik)return;const r=n==null?void 0:n.token;FE!==r&&(FE=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function QA(t=D1()){const e=qp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=CV(t,{popupRedirectResolver:J4,persistence:[u4,WV,jA]}),i=A1("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const a=rk(s.toString());QV(n,a,()=>a(n.currentUser)),GV(n,l=>a(l))}}const r=b1("auth");return r&&xV(n,`http://${r}`),n}function sk(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}vV({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=On("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",sk().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tk("Browser");const ak={apiKey:"AIzaSyAi3z9XoTJdR4CkApjmTxRkt-yRcb28iKg",authDomain:"product-6b793.firebaseapp.com",projectId:"product-6b793",storageBucket:"product-6b793.firebasestorage.app",messagingSenderId:"20469518495",appId:"1:20469518495:web:5a5cce3ad07d61f4bcd2aa",measurementId:"G-81BF2CC2YP"},Ug=x1(ak),Pe=RM(Ug),Eu=QA(Ug);new Qn;console.log("app.options",Ug.options);console.log("auth.config",QA().config);function Oa(){const[t,e]=D.useState(null),[n,i]=D.useState(!0),[r,s]=D.useState(!1),[a,l]=D.useState(new Set);D.useEffect(()=>{const m=KV(Eu,v=>{e(v||null),l(new Set),i(!1)});return()=>m()},[]),D.useEffect(()=>{if(!t)return;s(!0);const m=mi(Pe,"users",t.uid,"saved"),v=zM(m,x=>{const M=new Set;x.forEach(O=>M.add(O.id)),l(M),s(!1)},()=>s(!1));return()=>v()},[t]);const u=D.useCallback(async(m,v)=>{await HV(Eu,m,v)},[]),c=D.useCallback(async(m,v)=>{await FV(Eu,m,v)},[]),f=D.useCallback(async()=>{await $V(Eu)},[]),d=D.useCallback(async m=>{if(!t)throw new Error("로그인 필요");const v=mn(Pe,"users",t.uid,"saved",m);a.has(m)?await xg(v):await PM(v,{productId:m,createdAt:Br()},{merge:!0})},[t,a]);return{user:t,loadingUser:n,loadingSaved:r,savedIds:a,toggleSave:d,signUp:u,signIn:c,signOut:f}}function ok({open:t,onClose:e,onSignIn:n,onSignUp:i}){const[r,s]=D.useState("signin"),[a,l]=D.useState(""),[u,c]=D.useState("");if(!t)return null;const f=async d=>{d.preventDefault();try{r==="signin"?await n(a,u):await i(a,u),e()}catch(m){alert(m.message||m.code)}};return g.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.3)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:g.jsxs("div",{style:{width:360,background:"#fff",borderRadius:12,padding:16,boxShadow:"0 10px 30px rgba(0,0,0,.15)"},children:[g.jsx("h3",{style:{margin:"0 0 8px"},children:r==="signin"?"로그인":"회원가입"}),g.jsxs("form",{onSubmit:f,style:{display:"grid",gap:8},children:[g.jsx("input",{type:"email",value:a,onChange:d=>l(d.target.value),placeholder:"이메일",required:!0,style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px"}}),g.jsx("input",{type:"password",value:u,onChange:d=>c(d.target.value),placeholder:"비밀번호",required:!0,style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px"}}),g.jsx("button",{type:"submit",style:{borderRadius:8,padding:"8px 12px",border:"1px solid #e5e7eb",background:"#111827",color:"#fff"},children:r==="signin"?"로그인":"가입"})]}),g.jsx("div",{style:{marginTop:8,fontSize:12},children:r==="signin"?g.jsx("button",{onClick:()=>s("signup"),style:{background:"none",border:"none",color:"#2563eb",cursor:"pointer"},children:"계정이 없나요? 회원가입"}):g.jsx("button",{onClick:()=>s("signin"),style:{background:"none",border:"none",color:"#2563eb",cursor:"pointer"},children:"이미 계정이 있나요? 로그인"})}),g.jsx("div",{style:{marginTop:8},children:g.jsx("button",{onClick:e,style:{background:"none",border:"none",color:"#6b7280",cursor:"pointer"},children:"닫기"})})]})})}const lk=new Set([]),uk=new Set(["k36801377@gmail.com"]);function jo(t){return t?lk.has(t.uid)||uk.has(t.email):!1}function KA({user:t,onSignIn:e,onSignUp:n,onSignOut:i,onlySaved:r,onToggleOnlySaved:s}){const[a,l]=D.useState(!1);return g.jsxs(g.Fragment,{children:[g.jsxs("nav",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 16px",borderBottom:"1px solid #e5e7eb"},children:[g.jsx("div",{style:{fontWeight:700},children:"상품관리"}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[g.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6,fontSize:12},children:[g.jsx("input",{type:"checkbox",checked:r,onChange:u=>s(u.target.checked)}),"저장만 보기"]}),jo(t)&&g.jsx(Mi,{to:"/edit",style:{fontSize:12},children:"Admin"}),t?g.jsxs(g.Fragment,{children:[g.jsx("span",{style:{fontSize:12,color:"#374151"},children:t.email}),g.jsx("button",{onClick:i,style:{borderRadius:8,padding:"6px 10px",border:"1px solid #e5e7eb",background:"#fff"},children:"로그아웃"})]}):g.jsx("button",{onClick:()=>l(!0),style:{borderRadius:8,padding:"6px 10px",border:"1px solid #e5e7eb",background:"#111827",color:"#fff"},children:"로그인"})]})]}),g.jsx(ok,{open:a,onClose:()=>l(!1),onSignIn:e,onSignUp:n})]})}function $A({product:t,user:e,isSaved:n=!1,onToggleSave:i,onTagClick:r}){const{id:s,name:a,price:l,imageUrl:u,tags:c=[],link:f,categoryL1:d,categoryL2:m}=t||{},v=()=>{if(!e){alert("로그인이 필요합니다.");return}i&&i(s)};return g.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:12,padding:12,display:"flex",flexDirection:"column",gap:8},children:[g.jsx("a",{href:f||"#",target:"_blank",rel:"noopener noreferrer",style:{width:"100%",aspectRatio:"1 / 1",background:"#f9fafb",borderRadius:8,overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",textDecoration:"none"},children:u?g.jsx("img",{src:u,alt:a,style:{width:"100%",height:"100%",objectFit:"cover"}}):g.jsx("span",{style:{color:"#9ca3af"},children:"No Image"})}),g.jsx("div",{style:{fontWeight:600},children:a}),g.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[d&&g.jsxs("span",{style:{fontSize:12,background:"#eef2ff",border:"1px solid #e5e7eb",padding:"2px 8px",borderRadius:9999},children:["L1: ",d]}),m&&g.jsxs("span",{style:{fontSize:12,background:"#ecfeff",border:"1px solid #e5e7eb",padding:"2px 8px",borderRadius:9999},children:["L2: ",m]})]}),g.jsx("div",{style:{color:"#111827"},children:typeof l=="number"?l.toLocaleString()+"원":"-"}),c.length>0&&g.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:c.map(x=>g.jsxs("button",{onClick:()=>r&&r(x),style:{fontSize:12,background:"#f3f4f6",border:"1px solid #e5e7eb",padding:"2px 8px",borderRadius:9999,cursor:"pointer"},children:["#",x]},x))}),g.jsx("button",{onClick:v,style:{marginTop:6,borderRadius:8,padding:"8px 10px",border:"1px solid #e5e7eb",background:n?"#111827":"white",color:n?"white":"#111827",cursor:"pointer"},children:n?"저장 해제":"저장하기"})]})}const GE={"청소/욕실":["청소용품(세제/브러쉬)","세탁용품(세탁망/건조대)","욕실용품(발매트/수건)","휴지통/분리수거"],"수납/정리":["수납박스/바구니","리빙박스/정리함","틈새수납","옷걸이/선반","주방수납","냉장고 정리"],주방용품:["식기(접시/그릇)","컵/물병/텀블러","밀폐용기","조리도구(칼/가위)","주방잡화(행주/수세미)"],"문구/팬시":["필기구/노트","사무용품(파일/서류)","포장용품","디자인 문구","전자기기 액세서리"],"뷰티/위생":["스킨/바디케어","마스크팩","화장소품(브러쉬)","메이크업","위생용품(마스크/밴드)"],"패션/잡화":["의류/언더웨어","가방/파우치","양말/스타킹","패션소품(액세서리)","슈즈용품"],"인테리어/원예":["홈데코(쿠션/커튼)","액자/시계","원예용품(화분/씨앗)","조명","시즌 데코"],"공구/디지털":["공구/안전용품","차량/자전거 용품","디지털 액세서리(케이블/충전기)","전지/건전지"],"스포츠/레저/취미":["캠핑/여행용품","스포츠/헬스용품","DIY/취미용품","뜨개/공예","반려동물용품"],식품:["과자/초콜릿","음료/주스","라면/즉석식품","건강식품","견과류"],"유아/완구":["아동/유아용품","완구/장난감","교육/학습용품"],"시즌/시리즈":["봄/여름 기획","전통 시리즈","캐릭터 컬래버"],"베스트/신상품":["인기 순위 상품","신상품"]};function ck(t=""){return String(t).split(/[,|#/ ]+/).map(e=>e.trim().toLowerCase()).filter(Boolean)}function hk(){const[t,e]=D.useState([]),[n,i]=D.useState(""),[r,s]=D.useState(!0),[a,l]=D.useState(!1),[u,c]=D.useState(""),[f,d]=D.useState(""),[m,v]=D.useState(""),{user:x,savedIds:M,signUp:O,signIn:A,signOutNow:T,toggleSave:E}=Oa();D.useEffect(()=>{(async()=>{s(!0);try{const _=xa(mi(Pe,"products"),Vh("updatedAt","desc")),w=(await Da(_)).docs.map(C=>({id:C.id,...C.data()})).filter(C=>C&&C.name);e(w)}finally{s(!1)}})()},[]);const N=D.useMemo(()=>{let y=t;a&&x&&(y=y.filter(w=>M.has(w.id))),u&&(y=y.filter(w=>(w.categoryL1||"")===u)),f&&(y=y.filter(w=>(w.categoryL2||"")===f));const _=ck(m);_.length&&(y=y.filter(w=>{const C=new Set((w.tags||[]).map(R=>String(R).toLowerCase()));return _.every(R=>C.has(R))}));const S=n.trim().toLowerCase();return S?y.filter(w=>[w.name,w.productCode,w.categoryL1,w.categoryL2,...w.tags||[]].filter(Boolean).join(" ").toLowerCase().includes(S)):y},[t,a,x,M,u,f,m,n]),P=()=>{c(""),d(""),v("")},G=u?GE[u]||[]:[];return g.jsxs("div",{style:{maxWidth:1100,margin:"0 auto",padding:16},children:[g.jsx(KA,{user:x,onlySaved:a,onToggleOnlySaved:y=>l(y),onSignIn:A,onSignUp:O,onSignOut:T}),g.jsx("div",{style:{marginBottom:10},children:g.jsx("input",{value:n,onChange:y=>i(y.target.value),placeholder:"검색: 상품명/코드/태그/카테고리",style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px"}})}),g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto auto 1fr auto",gap:8,alignItems:"center",border:"1px solid #e5e7eb",background:"#f9fafb",borderRadius:10,padding:10,marginBottom:12},children:[g.jsxs("select",{value:u,onChange:y=>{c(y.target.value),d("")},style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px",minWidth:220},children:[g.jsx("option",{value:"",children:"대분류(L1): 전체"}),Object.keys(GE).map(y=>g.jsx("option",{value:y,children:y},y))]}),g.jsxs("select",{value:f,onChange:y=>d(y.target.value),disabled:!u,style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px",minWidth:220,opacity:u?1:.5},children:[g.jsx("option",{value:"",children:u?"중분류(L2): 전체":"대분류 먼저 선택"}),G.map(y=>g.jsx("option",{value:y,children:y},y))]}),g.jsx("input",{value:m,onChange:y=>v(y.target.value),placeholder:"태그 필터 (쉼표/공백 구분: 전통, 봉투)",style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px",width:"100%"}}),g.jsx("button",{onClick:P,style:{borderRadius:8,padding:"8px 12px",border:"1px solid #e5e7eb",background:"white"},children:"필터 초기화"})]}),g.jsxs("div",{style:{fontSize:12,color:"#6b7280",marginBottom:8},children:["총 ",t.length.toLocaleString(),"개 / 표시 ",N.length.toLocaleString(),"개",a&&x?" · 저장만 보기":"",u?` · L1=${u}`:"",f?` · L2=${f}`:"",m?` · 태그=${m}`:"",n?` · 검색="${n}"`:""]}),r?g.jsx("div",{children:"불러오는 중…"}):N.length===0?g.jsx("div",{children:"검색/필터 결과가 없습니다."}):g.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(240px,1fr))",gap:12},children:N.map(y=>g.jsx($A,{product:y,user:x,isSaved:M.has(y.id),onToggleSave:async _=>{try{await E(_)}catch(S){alert(S.message)}}},y.id))})]})}function Tu(t){if(!t)return 0;if(typeof(t==null?void 0:t.toMillis)=="function")return t.toMillis();const e=Number(t);return Number.isFinite(e)?e:0}function fk(t){const e=[];for(let n=0;n<t.length;n+=10)e.push(t.slice(n,n+10));return e}function dk(){const{user:t,savedIds:e,loadingUser:n,loadingSaved:i,signOut:r,signIn:s,signUp:a,toggleSave:l}=Oa(),[u,c]=D.useState([]),[f,d]=D.useState(""),[m,v]=D.useState(!0),[x,M]=D.useState(""),O=D.useMemo(()=>Array.from(e||new Set),[e]),[A,T]=D.useState("");D.useEffect(()=>{const C=setTimeout(()=>T(f.trim().toLowerCase()),300);return()=>clearTimeout(C)},[f]);const E=D.useRef(0);D.useEffect(()=>{let C=!1;const R=++E.current;return(async()=>{if(M(""),!t){c([]),v(!1);return}v(!0);try{if(!O.length){c([]);return}const j=fk(O),$=await Promise.all(j.map(F=>Da(xa(mi(Pe,"products"),uA(WS(),"in",F))))),H=[];$.forEach(F=>{F.forEach(W=>H.push({id:W.id,...W.data()}))});const L=new Set(H.map(F=>F.id)),q=O.filter(F=>!L.has(F)).length;H.sort((F,W)=>{const de=Tu(F.updatedAt)||Tu(F.createdAt)||0,ke=Tu(W.updatedAt)||Tu(W.createdAt)||0;return ke!==de?ke-de:String(W.id).localeCompare(String(F.id))}),!C&&R===E.current&&(c(H),q>0&&M(`알림: 저장된 ${O.length}개 중 ${q}개는 현재 조회할 수 없습니다(삭제/권한/비공개 가능).`))}catch(j){if(!C&&R===E.current){console.error(j);const $=String((j==null?void 0:j.message)||""),H=/per-query|disjunct/i.test($)?" (힌트: Firestore 'in' 조건은 10개씩 끊어 처리해야 합니다.)":/permission|denied|insufficient/i.test($)?" (힌트: 인증/규칙 권한을 확인하세요.)":"";M(`오류: ${$||"목록을 불러오는 중 문제가 발생했습니다."}${H}`),c([])}}finally{!C&&R===E.current&&v(!1)}})(),()=>{C=!0}},[t,O]);const N=D.useMemo(()=>u.map(C=>({raw:C,hay:[C.name,C.productCode,C.categoryL1,C.categoryL2,...C.tags||[]].filter(Boolean).join(" ").toLowerCase()})),[u]),P=D.useMemo(()=>A?N.filter(C=>C.hay.includes(A)).map(C=>C.raw):u,[u,N,A]),G=async C=>{e==null||e.has(C);try{await l(C)}catch(R){alert((R==null?void 0:R.message)||"저장 상태 변경 중 오류가 발생했습니다.")}},y=O.length,_=60,[S,w]=D.useState(1);return D.useMemo(()=>O.slice(0,_*S),[O,S]),g.jsxs("div",{style:{maxWidth:1100,margin:"0 auto",padding:16},children:[g.jsx(KA,{user:t,onlySaved:!0,onToggleOnlySaved:()=>{},onSignIn:s,onSignUp:a,onSignOut:r}),t?g.jsxs(g.Fragment,{children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[g.jsx("input",{"aria-label":"저장한 상품 검색",value:f,onChange:C=>d(C.target.value),placeholder:"저장한 상품 내 검색",style:{flex:1,width:"100%",border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px"}}),f&&g.jsx("button",{onClick:()=>d(""),style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px",background:"#fafafa",cursor:"pointer"},"aria-label":"검색어 지우기",children:"지우기"})]}),x&&g.jsx("div",{style:{marginBottom:12,padding:"8px 10px",border:"1px solid #fecaca",background:"#fef2f2",color:"#991b1b",borderRadius:8},children:x}),n||i||m?g.jsx("div",{children:"불러오는 중…"}):g.jsxs(g.Fragment,{children:[g.jsxs("div",{style:{marginBottom:8,color:"#6b7280"},children:["총 저장: ",g.jsx("strong",{children:y}),"개",A&&g.jsxs(g.Fragment,{children:[" · ","검색 결과: ",g.jsx("strong",{children:P.length}),"개"]})]}),P.length===0?g.jsx("div",{children:y===0?"저장한 상품이 없습니다.":"검색 결과가 없습니다. 다른 키워드를 시도해 보세요."}):g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(240px,1fr))",gap:12},children:[P.map(C=>g.jsx($A,{product:C,user:t,isSaved:e==null?void 0:e.has(C.id),onToggleSave:G},C.id)),_*S<y&&g.jsx("button",{onClick:()=>w(C=>C+1),children:"더보기"})]})]})]}):g.jsxs("div",{style:{marginTop:24},children:[g.jsx("h3",{children:"로그인이 필요합니다"}),g.jsx("p",{children:"상단 우측에서 로그인/회원가입을 먼저 진행하세요."})]})]})}const QE={"청소/욕실":["청소용품(세제/브러쉬)","세탁용품(세탁망/건조대)","욕실용품(발매트/수건)","휴지통/분리수거"],"수납/정리":["수납박스/바구니","리빙박스/정리함","틈새수납","옷걸이/선반","주방수납","냉장고 정리"],주방용품:["식기(접시/그릇)","컵/물병/텀블러","밀폐용기","조리도구(칼/가위)","주방잡화(행주/수세미)"],"문구/팬시":["필기구/노트","사무용품(파일/서류)","포장용품","디자인 문구","전자기기 액세서리"],"뷰티/위생":["스킨/바디케어","마스크팩","화장소품(브러쉬)","메이크업","위생용품(마스크/밴드)"],"패션/잡화":["의류/언더웨어","가방/파우치","양말/스타킹","패션소품(액세서리)","슈즈용품"],"인테리어/원예":["홈데코(쿠션/커튼)","액자/시계","원예용품(화분/씨앗)","조명","시즌 데코"],"공구/디지털":["공구/안전용품","차량/자전거 용품","디지털 액세서리(케이블/충전기)","전지/건전지"],"스포츠/레저/취미":["캠핑/여행용품","스포츠/헬스용품","DIY/취미용품","뜨개/공예","반려동물용품"],식품:["과자/초콜릿","음료/주스","라면/즉석식품","건강식품","견과류"],"유아/완구":["아동/유아용품","완구/장난감","교육/학습용품"],"시즌/시리즈":["봄/여름 기획","전통 시리즈","캐릭터 컬래버"],"베스트/신상품":["인기 순위 상품","신상품"]};function mk(){const[t,e]=D.useState([]),[n,i]=D.useState(""),[r,s]=D.useState(!0),[a,l]=D.useState(new Set),[u,c]=D.useState(""),[f,d]=D.useState(""),[m,v]=D.useState("");D.useEffect(()=>{(async()=>{s(!0);try{const N=xa(mi(Pe,"products"),Vh("updatedAt","desc")),G=(await Da(N)).docs.map(y=>({id:y.id,...y.data()})).filter(y=>y&&y.name);e(G)}catch(N){console.error(N)}finally{s(!1)}})()},[]);const x=D.useMemo(()=>{const E=n.trim().toLowerCase();return E?t.filter(N=>[N.name,N.productCode,N.categoryL1||"",N.categoryL2||"",...N.tags||[]].filter(Boolean).join(" ").toLowerCase().includes(E)):t},[t,n]),M=E=>{l(N=>{const P=new Set(N);return P.has(E)?P.delete(E):P.add(E),P})},O=()=>l(new Set(x.map(E=>E.id))),A=()=>l(new Set),T=(E=!1)=>{const N=E?x.filter(_=>a.has(_.id)):x;if(N.length===0)return alert("내보낼 항목이 없습니다.");const P=N.map(_=>[_.id,_.name,_.productCode,_.price??"",(_.tags||[]).join(" | "),_.categoryL1,_.categoryL2].join(",")).join(`\r
`),G=new Blob(["\uFEFF"+P],{type:"text/csv;charset=utf-8"}),y=document.createElement("a");y.href=URL.createObjectURL(G),y.download=E?"선택상품.csv":"필터상품.csv",y.click()};return g.jsxs("div",{style:{maxWidth:1100,margin:"0 auto",padding:16},children:[g.jsx("h1",{style:{fontSize:22,fontWeight:700,marginBottom:12},children:"상품 관리"}),g.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8,marginBottom:16,border:"1px solid #e5e7eb",borderRadius:10,padding:12,background:"#f9fafb"},children:[g.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[g.jsx("input",{value:u,onChange:E=>c(E.target.value),placeholder:"전통, 봉투, #핑크",style:{flex:1,border:"1px solid #e5e7eb",borderRadius:8,padding:"6px 10px"}}),g.jsxs("button",{onClick:()=>alert(`선택 ${a.size}개 태그 추가 실행`),disabled:a.size===0,style:{borderRadius:8,padding:"6px 12px",background:"#111827",color:"white",border:"none"},children:["선택 ",a.size,"개 태그 추가"]}),g.jsxs("button",{onClick:()=>alert(`선택 ${a.size}개 태그 삭제 실행`),disabled:a.size===0,style:{borderRadius:8,padding:"6px 12px",background:"white",border:"1px solid #e5e7eb"},children:["선택 ",a.size,"개 태그 삭제"]})]}),g.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[g.jsxs("select",{value:f,onChange:E=>{d(E.target.value),v("")},style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"6px 10px"},children:[g.jsx("option",{value:"",children:"대분류 선택"}),Object.keys(QE).map(E=>g.jsx("option",{value:E,children:E},E))]}),g.jsxs("select",{value:m,onChange:E=>v(E.target.value),disabled:!f,style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"6px 10px"},children:[g.jsx("option",{value:"",children:f?"중분류 선택":"대분류 먼저"}),(f?QE[f]||[]:[]).map(E=>g.jsx("option",{value:E,children:E},E))]}),g.jsxs("button",{onClick:()=>alert(`선택 ${a.size}개 카테고리 지정 (${f} > ${m})`),disabled:a.size===0||!f||!m,style:{borderRadius:8,padding:"6px 12px",background:"#111827",color:"white",border:"none"},children:["선택 ",a.size,"개 카테고리 지정"]})]}),g.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[g.jsx("button",{onClick:O,style:{borderRadius:8,padding:"6px 12px",background:"white",border:"1px solid #e5e7eb"},children:"전체 선택"}),g.jsx("button",{onClick:A,style:{borderRadius:8,padding:"6px 12px",background:"white",border:"1px solid #e5e7eb"},children:"선택 해제"}),g.jsx("button",{onClick:()=>T(!1),style:{borderRadius:8,padding:"6px 12px",background:"#111827",color:"white",border:"none"},children:"CSV(필터결과)"}),g.jsx("button",{onClick:()=>T(!0),style:{borderRadius:8,padding:"6px 12px",background:"white",border:"1px solid #e5e7eb"},children:"CSV(선택만)"}),g.jsx("button",{onClick:()=>{var E;return(E=document.getElementById("csvUpsertBox"))==null?void 0:E.scrollIntoView({behavior:"smooth"})},style:{borderRadius:8,padding:"6px 12px",background:"#2563eb",color:"white",border:"none"},children:"CSV 업서트 열기"})]})]}),g.jsx("div",{style:{marginBottom:12},children:g.jsx("input",{value:n,onChange:E=>i(E.target.value),placeholder:"검색: 상품명/코드/태그/카테고리",style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px"}})}),r?g.jsx("div",{children:"불러오는 중…"}):x.length===0?g.jsx("div",{children:"검색 결과가 없습니다."}):g.jsx("div",{style:{display:"grid",gap:10},children:x.map(E=>{const N=a.has(E.id);return g.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:10,padding:10,display:"grid",gridTemplateColumns:"28px 80px 1fr",gap:12,alignItems:"center"},children:[g.jsx("input",{type:"checkbox",checked:N,onChange:()=>M(E.id)}),g.jsx("div",{style:{width:80,height:80,borderRadius:8,background:"#f3f4f6",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:E.imageUrl?g.jsx("img",{src:E.imageUrl,alt:E.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):g.jsx("span",{style:{fontSize:12,color:"#9ca3af"},children:"No Image"})}),g.jsxs("div",{children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[g.jsx("strong",{children:E.name}),g.jsxs("span",{style:{fontSize:12,color:"#6b7280"},children:["(",E.id,")"]}),g.jsx("span",{style:{marginLeft:"auto",fontSize:12,color:"#6b7280"},children:typeof E.price=="number"?E.price.toLocaleString()+"원":"-"})]}),g.jsxs("div",{style:{fontSize:12,color:"#6b7280"},children:[E.categoryL1," / ",E.categoryL2]}),g.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:4},children:(E.tags||[]).map(P=>g.jsxs("span",{style:{background:"#f3f4f6",border:"1px solid #e5e7eb",borderRadius:9999,padding:"2px 8px",fontSize:12},children:["#",P]},P))})]})]},E.id)})})]})}const KE={"청소/욕실":["청소용품(세제/브러쉬)","세탁용품(세탁망/건조대)","욕실용품(발매트/수건)","휴지통/분리수거"],"수납/정리":["수납박스/바구니","리빙박스/정리함","틈새수납","옷걸이/선반","주방수납","냉장고 정리"],주방용품:["식기(접시/그릇)","컵/물병/텀블러","밀폐용기","조리도구(칼/가위)","주방잡화(행주/수세미)"],"문구/팬시":["필기구/노트","사무용품(파일/서류)","포장용품","디자인 문구","전자기기 액세서리"],"뷰티/위생":["스킨/바디케어","마스크팩","화장소품(브러쉬)","메이크업","위생용품(마스크/밴드)"],"패션/잡화":["의류/언더웨어","가방/파우치","양말/스타킹","패션소품(액세서리)","슈즈용품"],"인테리어/원예":["홈데코(쿠션/커튼)","액자/시계","원예용품(화분/씨앗)","조명","시즌 데코"],"공구/디지털":["공구/안전용품","차량/자전거 용품","디지털 액세서리(케이블/충전기)","전지/건전지"],"스포츠/레저/취미":["캠핑/여행용품","스포츠/헬스용품","DIY/취미용품","뜨개/공예","반려동물용품"],식품:["과자/초콜릿","음료/주스","라면/즉석식품","건강식품","견과류"],"유아/완구":["아동/유아용품","완구/장난감","교육/학습용품"],"시즌/시리즈":["봄/여름 기획","전통 시리즈","캐릭터 컬래버"],"베스트/신상품":["인기 순위 상품","신상품"]};function Nm(t=""){return String(t).split(/[,|#/ ]+/).map(e=>e.trim()).filter(Boolean)}function $E(t){const e=t==null?"":String(t);return/[",\n\r]/.test(e)?`"${e.replace(/"/g,'""')}"`:e}function pk(t){const n=[["상품ID","상품명","상품코드","가격","평점","리뷰수","조회수","태그","링크","대분류(categoryL1)","중분류(categoryL2)"].map($E).join(",")];return t.forEach(i=>{n.push([i.id,i.name,i.productCode||"",i.price??"",i.rating??"",i.reviewCount??"",i.views??"",(i.tags||[]).join(" | "),i.link||"",i.categoryL1||"",i.categoryL2||""].map($E).join(","))}),n.join(`\r
`)}function gk(t,e,n="text/csv;charset=utf-8"){const i="\uFEFF",r=new Blob([i+t],{type:n}),s=URL.createObjectURL(r),a=document.createElement("a");a.href=s,a.download=e,document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(s)}function yk({open:t,onClose:e,onAfterImport:n}){const[i,r]=D.useState(""),[s,a]=D.useState(""),[l,u]=D.useState([]),[c,f]=D.useState([]),[d,m]=D.useState([]),[v,x]=D.useState(!1),[M,O]=D.useState(!0),[A,T]=D.useState(!0),[E,N]=D.useState({done:0,total:0,running:!1}),P=D.useMemo(()=>l.length?l.map(L=>C(L,c)).filter(Boolean):[],[l,c]);function G(L){let q=L.replace(/^\uFEFF/,"");const F=q.includes("	")?"	":",",W=[];let de=[],ke="",ut=!1;for(let le=0;le<q.length;le++){const Le=q[le];if(Le==='"'){ut&&q[le+1]==='"'?(ke+='"',le++):ut=!ut;continue}if(!ut&&(Le===F||Le===`
`||Le==="\r")){de.push(ke),ke="",Le===`
`&&(W.push(de),de=[]);continue}ke+=Le}return de.push(ke),de.length&&W.push(de),W.filter(le=>le.some(Le=>String(Le).trim()!==""))}function y(L=""){const q=String(L).trim().toLowerCase();return["id","상품id","문서id"].includes(q)?"id":["상품명","name","title"].includes(q)?"name":["상품코드","productcode","code","pdno"].includes(q)?"productCode":["가격","price"].includes(q)?"price":["평점","rating"].includes(q)?"rating":["리뷰수","review","reviewcount"].includes(q)?"reviewCount":["조회수","views","view"].includes(q)?"views":["태그","tags"].includes(q)?"tags":["링크","url","link"].includes(q)?"link":["이미지","이미지url","image","imageurl","thumbnail"].includes(q)?"imageUrl":["재입고","restock","restockable"].includes(q)?"restockable":["상태","status"].includes(q)?"status":["재고","stock"].includes(q)?"stock":["대분류","categoryl1","category_l1","lnb","lnb1"].includes(q)?"categoryL1":["중분류","categoryl2","category_l2","sub","lnb2"].includes(q)?"categoryL2":q}function _(L=""){const q=String(L).replace(/[\s,()보기]/g,"");if(!q)return 0;const F=q.match(/([\d.]+)\s*만/),W=q.match(/([\d.]+)\s*천/);if(F)return Math.round(parseFloat(F[1])*1e4);if(W)return Math.round(parseFloat(W[1])*1e3);const de=q.match(/[\d.]+/);return de?Number(de[0]):0}function S(L=""){const q=String(L).replace(/[^\d.]/g,"");return q?Number(q):0}function w(L=""){return String(L).replace(/\s+/g," ").replace(/^"|"$/g,"").trim()}function C(L,q){const F={};q.forEach((ut,le)=>{F[ut]=L[le]??""});const W=w(F.id||F.productCode||"");if(!W)return null;const de={id:W},ke={name:w(F.name||""),imageUrl:w(F.imageUrl||""),link:w(F.link||""),productCode:w(F.productCode||""),price:F.price!==void 0?S(F.price):void 0,rating:F.rating!==void 0?parseFloat(String(F.rating).replace(/[^\d.]/g,""))||0:void 0,reviewCount:F.reviewCount!==void 0?_(F.reviewCount):void 0,views:F.views!==void 0?_(F.views):void 0,restockable:F.restockable!==void 0?/^(true|1|예|y)$/i.test(String(F.restockable).trim()):void 0,status:F.status?String(F.status).trim():void 0,stock:F.stock!==void 0?Number(String(F.stock).replace(/[^\d-]/g,""))||0:void 0,categoryL1:F.categoryL1?w(F.categoryL1):void 0,categoryL2:F.categoryL2?w(F.categoryL2):void 0};return Object.entries(ke).forEach(([ut,le])=>{le!==void 0&&(typeof le=="string"&&!le||(de[ut]=le))}),F.tags!=null&&String(F.tags).trim()!==""&&(de.tags=Array.from(new Set(Nm(String(F.tags))))),de}function R(L){return L==null?"":Array.isArray(L)?L.join(" | "):String(L)}const I=async L=>{var W;const q=(W=L.target.files)==null?void 0:W[0];if(!q)return;r(q.name);const F=await q.text();j(F)},j=L=>{const q=G(L);if(!q.length){u([]),f([]),m([]),a("");return}const[F,...W]=q,de=F.map(y);a(L),u(W),f(de),m(F)},$=()=>{const q="\uFEFF"+["상품ID","상품명","상품코드","가격","평점","리뷰수","조회수","태그","링크","이미지URL","재입고","상태","재고","대분류(categoryL1)","중분류(categoryL2)"].join(",")+`\r
`,F=new Blob([q],{type:"text/csv;charset=utf-8"}),W=URL.createObjectURL(F),de=document.createElement("a");de.href=W,de.download="상품_업데이트_템플릿.csv",document.body.appendChild(de),de.click(),de.remove(),URL.revokeObjectURL(W)},H=async()=>{if(!P.length){alert("유효한 행이 없습니다.");return}const L=P.length;N({done:0,total:L,running:!0});try{for(let F=0;F<P.length;F+=400){const W=P.slice(F,F+400),de=Po(Pe);W.forEach(ke=>{const{id:ut,...le}=ke,Le={updatedAt:Br()};M&&le.tags&&(Le.tags=le.tags),["name","imageUrl","link","productCode","price","rating","reviewCount","views","restockable","status","stock"].forEach(Er=>{le[Er]!==void 0&&(Le[Er]=le[Er])}),A&&(le.categoryL1!==void 0&&(Le.categoryL1=le.categoryL1),le.categoryL2!==void 0&&(Le.categoryL2=le.categoryL2));const Ma=mn(Pe,"products",ut);de.set(Ma,Le,{merge:!v})}),await de.commit(),N(ke=>({...ke,done:Math.min(ke.done+W.length,L)}))}alert(`완료: ${L}개 처리
- 모드: ${v?"문서 덮어쓰기":"필드 병합 업데이트"}
- tags: ${M?"CSV값 반영/교체":"CSV 무시(기존 유지)"}
- category: ${A?"CSV값 반영/교체":"CSV 무시(기존 유지)"}`),n==null||n(),e==null||e()}catch(q){console.error(q),alert(`에러: ${q.message}`)}finally{N({done:0,total:0,running:!1})}};return t?g.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.45)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},onClick:L=>{L.target===L.currentTarget&&(e==null||e())},children:g.jsxs("div",{style:{width:"min(1080px, 96%)",maxHeight:"90vh",overflow:"auto",background:"white",borderRadius:12,padding:16},children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[g.jsx("h2",{style:{margin:0},children:"CSV 업서트(등록/업데이트)"}),g.jsx("div",{style:{marginLeft:"auto",display:"flex",gap:8},children:g.jsx("button",{onClick:e,style:{border:"1px solid #e5e7eb",background:"white",borderRadius:8,padding:"6px 10px",cursor:"pointer"},children:"닫기"})})]}),g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:10,marginBottom:12},children:[g.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[g.jsx("input",{type:"file",accept:".csv,text/csv",onChange:I,"aria-label":"CSV 파일 선택"}),g.jsx("button",{onClick:$,style:{borderRadius:8,padding:"8px 12px",border:"1px solid #e5e7eb",background:"white",cursor:"pointer"},children:"템플릿 다운로드"}),g.jsx("span",{style:{fontSize:12,color:"#6b7280"},children:i?`선택된 파일: ${i}`:"CSV(UTF-8, BOM 권장). 탭 구분도 OK"})]}),g.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",alignItems:"center"},children:[g.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[g.jsx("input",{type:"checkbox",checked:v,onChange:L=>x(L.target.checked)}),"문서 덮어쓰기(merge 아님)"]}),g.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[g.jsx("input",{type:"checkbox",checked:M,onChange:L=>O(L.target.checked)}),"CSV의 태그 반영(교체)"]}),g.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[g.jsx("input",{type:"checkbox",checked:A,onChange:L=>T(L.target.checked)}),"CSV의 카테고리 반영(교체)"]}),g.jsx("button",{onClick:H,disabled:!P.length||E.running,style:{borderRadius:8,padding:"8px 12px",border:"1px solid #e5e7eb",background:"#111827",color:"white",cursor:"pointer",minWidth:140},children:E.running?`처리중… (${E.done}/${E.total})`:`업서트 실행 (${P.length}개)`})]})]}),g.jsx("div",{style:{marginBottom:12},children:g.jsx("textarea",{value:s,onChange:L=>j(L.target.value),placeholder:`여기에 CSV/TSV를 붙여넣어도 됩니다.
예시:
상품ID,상품명,가격,태그,대분류(categoryL1),중분류(categoryL2)
1038756,전통문양 봉투 2매입,1000,"전통 | 봉투 | 핑크",전통/시리즈,전통 시리즈`,style:{width:"100%",height:140,borderRadius:8,border:"1px solid #e5e7eb",padding:8}})}),g.jsxs("h3",{style:{marginTop:10,marginBottom:8},children:["미리보기 (",P.length,"행)"]}),P.length?g.jsxs("div",{style:{overflowX:"auto",border:"1px solid #e5e7eb",borderRadius:8},children:[g.jsxs("table",{style:{borderCollapse:"collapse",width:"100%"},children:[g.jsx("thead",{children:g.jsx("tr",{style:{background:"#f9fafb"},children:["id","name","productCode","price","rating","reviewCount","views","tags","link","imageUrl","restockable","status","stock","categoryL1","categoryL2"].map(L=>g.jsx("th",{style:{textAlign:"left",padding:8,borderBottom:"1px solid #e5e7eb",whiteSpace:"nowrap"},children:L},L))})}),g.jsx("tbody",{children:P.slice(0,200).map((L,q)=>g.jsxs("tr",{style:{borderTop:"1px solid #f3f4f6"},children:[g.jsx("td",{style:{padding:8},children:R(L.id)}),g.jsx("td",{style:{padding:8},children:R(L.name)}),g.jsx("td",{style:{padding:8},children:R(L.productCode)}),g.jsx("td",{style:{padding:8},children:R(L.price)}),g.jsx("td",{style:{padding:8},children:R(L.rating)}),g.jsx("td",{style:{padding:8},children:R(L.reviewCount)}),g.jsx("td",{style:{padding:8},children:R(L.views)}),g.jsx("td",{style:{padding:8},children:R(L.tags)}),g.jsx("td",{style:{padding:8,maxWidth:240,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:R(L.link)}),g.jsx("td",{style:{padding:8,maxWidth:240,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:R(L.imageUrl)}),g.jsx("td",{style:{padding:8},children:R(L.restockable)}),g.jsx("td",{style:{padding:8},children:R(L.status)}),g.jsx("td",{style:{padding:8},children:R(L.stock)}),g.jsx("td",{style:{padding:8},children:R(L.categoryL1)}),g.jsx("td",{style:{padding:8},children:R(L.categoryL2)})]},q))})]}),P.length>200&&g.jsxs("div",{style:{padding:8,fontSize:12,color:"#6b7280"},children:["미리보기는 상위 200행까지만 표시합니다. 전체 ",P.length,"행 처리됩니다."]})]}):g.jsx("div",{style:{color:"#6b7280"},children:"파싱된 행이 없습니다."})]})}):null}function _k(){const[t,e]=D.useState([]),[n,i]=D.useState(""),[r,s]=D.useState(!0),[a,l]=D.useState(new Set),[u,c]=D.useState(""),[f,d]=D.useState(!1),[m,v]=D.useState(""),[x,M]=D.useState(""),[O,A]=D.useState(!1),T=async()=>{s(!0);try{const R=xa(mi(Pe,"products"),Vh("updatedAt","desc")),j=(await Da(R)).docs.map($=>({id:$.id,...$.data()})).filter($=>$&&$.name);e(j)}catch(R){console.error("load error",R)}finally{s(!1)}};D.useEffect(()=>{T()},[]);const E=D.useMemo(()=>{const R=n.trim().toLowerCase();return R?t.filter(I=>[I.name,I.productCode,...I.tags||[],I.categoryL1||"",I.categoryL2||""].filter(Boolean).join(" ").toLowerCase().includes(R)):t},[t,n]),N=R=>{l(I=>{const j=new Set(I);return j.has(R)?j.delete(R):j.add(R),j})},P=()=>{l(R=>{const I=new Set(R);return E.forEach(j=>I.add(j.id)),I})},G=()=>l(new Set),y=async()=>{const R=Nm(u);if(!R.length)return alert("추가할 태그를 입력하세요.");if(a.size===0)return alert("선택된 상품이 없습니다.");d(!0);try{const I=Po(Pe);a.forEach(j=>{const $=mn(Pe,"products",j);I.update($,{tags:qM(...R),updatedAt:Br()})}),await I.commit(),e(j=>j.map($=>a.has($.id)?{...$,tags:Array.from(new Set([...$.tags||[],...R]))}:$)),c("")}catch(I){console.error("bulk add error",I),alert(`벌크 추가 실패: ${I.message}`)}finally{d(!1)}},_=async()=>{const R=Nm(u);if(!R.length)return alert("삭제할 태그를 입력하세요.");if(a.size===0)return alert("선택된 상품이 없습니다.");if(window.confirm(`선택된 ${a.size}개에서 [${R.join(", ")}] 태그를 제거할까요?`)){d(!0);try{const I=Po(Pe);a.forEach(j=>{const $=mn(Pe,"products",j);I.update($,{tags:HM(...R),updatedAt:Br()})}),await I.commit(),e(j=>j.map($=>a.has($.id)?{...$,tags:($.tags||[]).filter(H=>!R.includes(H))}:$)),c("")}catch(I){console.error("bulk remove error",I),alert(`벌크 삭제 실패: ${I.message}`)}finally{d(!1)}}},S=async()=>{if(!m)return alert("대분류(L1)를 선택하세요.");if(!x)return alert("중분류(L2)를 선택하세요.");if(a.size===0)return alert("선택된 상품이 없습니다.");if(window.confirm(`선택된 ${a.size}개 상품의 카테고리를
${m} > ${x} 로 지정할까요?`)){d(!0);try{const R=Po(Pe);a.forEach(I=>{const j=mn(Pe,"products",I);R.update(j,{categoryL1:m,categoryL2:x,updatedAt:Br()})}),await R.commit(),e(I=>I.map(j=>a.has(j.id)?{...j,categoryL1:m,categoryL2:x}:j))}catch(R){console.error("bulk category error",R),alert(`카테고리 지정 실패: ${R.message}`)}finally{d(!1)}}},w=(R=!1)=>{const I=R?E.filter(L=>a.has(L.id)):E;if(I.length===0)return alert("내보낼 항목이 없습니다.");const j=pk(I),$=new Date().toISOString().slice(0,10);gk(j,`상품리스트${R?"_선택만":"_필터결과"}_${$}.csv`,"text/csv;charset=utf-8")},C=m?KE[m]||[]:[];return g.jsxs("div",{style:{maxWidth:980,margin:"0 auto",padding:16},children:[g.jsx("h1",{style:{margin:0,marginBottom:12,fontSize:22,fontWeight:700},children:"상품 태그/카테고리 편집"}),g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:8,marginBottom:12},children:[g.jsx("input",{value:n,onChange:R=>i(R.target.value),placeholder:"검색: 상품명 / 상품코드 / 태그 / 카테고리",style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px"}}),g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.2fr auto auto auto auto auto auto auto",gap:8,alignItems:"center"},children:[g.jsx("input",{value:u,onChange:R=>c(R.target.value),placeholder:"태그 입력: 전통, 핑크 #봉투",style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px"}}),g.jsx("button",{onClick:y,disabled:f||a.size===0,style:{borderRadius:8,padding:"8px 12px",border:"1px solid #e5e7eb",background:"#111827",color:"white",cursor:"pointer",minWidth:120},children:f?"처리중…":`선택 ${a.size}개 태그추가`}),g.jsxs("button",{onClick:_,disabled:f||a.size===0,style:{borderRadius:8,padding:"8px 12px",border:"1px solid #e5e7eb",background:"white",cursor:"pointer",minWidth:120},children:["선택 ",a.size,"개 태그삭제"]})," ",g.jsx("br",{}),g.jsxs("select",{value:m,onChange:R=>{v(R.target.value),M("")},style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px"},"aria-label":"대분류 선택",children:[g.jsx("option",{value:"",children:"대분류(L1)"}),Object.keys(KE).map(R=>g.jsx("option",{value:R,children:R},R))]}),g.jsxs("select",{value:x,onChange:R=>M(R.target.value),style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px"},"aria-label":"중분류 선택",disabled:!m,children:[g.jsx("option",{value:"",children:m?"중분류(L2)":"대분류 먼저 선택"}),C.map(R=>g.jsx("option",{value:R,children:R},R))]}),g.jsxs("button",{onClick:S,disabled:f||a.size===0||!m||!x,style:{borderRadius:8,padding:"8px 12px",border:"1px solid #e5e7eb",background:"#111827",color:"white",cursor:"pointer",minWidth:150},title:"선택 항목 카테고리 지정",children:["선택 ",a.size,"개 카테고리 지정"]}),g.jsx("button",{onClick:P,style:{borderRadius:8,padding:"8px 12px",border:"1px solid #e5e7eb",background:"white",cursor:"pointer"},title:"현재 검색 결과 모두 선택",children:"전체선택"}),g.jsx("button",{onClick:G,style:{borderRadius:8,padding:"8px 12px",border:"1px solid #e5e7eb",background:"white",cursor:"pointer"},title:"선택 해제",children:"선택해제"}),g.jsx("button",{onClick:()=>w(!1),style:{borderRadius:8,padding:"8px 12px",border:"1px solid #e5e7eb",background:"#111827",color:"white",cursor:"pointer",minWidth:120},title:"현재 검색/필터된 목록 CSV 저장",children:"CSV(필터결과)"}),g.jsx("button",{onClick:()=>w(!0),style:{borderRadius:8,padding:"8px 12px",border:"1px solid #e5e7eb",background:"white",cursor:"pointer",minWidth:120},title:"체크된 항목만 CSV 저장",children:"CSV(선택만)"})]}),g.jsxs("div",{style:{display:"flex",gap:8},children:[g.jsx("button",{onClick:()=>A(!0),style:{borderRadius:8,padding:"8px 12px",border:"1px solid #e5e7eb",background:"#111827",color:"white",cursor:"pointer"},children:"CSV 업서트 열기"}),g.jsx("span",{style:{fontSize:12,color:"#6b7280"},children:"모달에서 categoryL1 / categoryL2 컬럼을 인식합니다."})]})]}),r?g.jsx("div",{children:"불러오는 중…"}):E.length===0?g.jsx("div",{children:"검색 결과가 없습니다."}):g.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:10},children:E.map(R=>{const I=a.has(R.id),j=Array.from(new Set(R.tags||[]));return g.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:10,padding:10,display:"grid",gridTemplateColumns:"28px 80px 1fr",gap:12,alignItems:"center"},children:[g.jsx("input",{type:"checkbox",checked:I,onChange:()=>N(R.id),style:{width:18,height:18},"aria-label":`상품 선택: ${R.name}`}),g.jsx("div",{style:{width:80,height:80,borderRadius:8,background:"#f3f4f6",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:R.imageUrl?g.jsx("img",{src:R.imageUrl,alt:R.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):g.jsx("span",{style:{color:"#9ca3af",fontSize:12},children:"No Image"})}),g.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[g.jsx("strong",{children:R.name}),g.jsxs("span",{style:{fontSize:12,color:"#6b7280"},children:["(",R.productCode||R.id,")"]}),R.link&&g.jsx("a",{href:R.link,target:"_blank",rel:"noopener noreferrer",style:{fontSize:12},children:"원본 링크"}),I&&g.jsx("span",{style:{fontSize:11,color:"#111827",marginLeft:"auto"},children:"선택됨"})]}),g.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:R.categoryL1||R.categoryL2?g.jsxs(g.Fragment,{children:[g.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:6,fontSize:12,background:"#eef2ff",border:"1px solid #e5e7eb",padding:"2px 8px",borderRadius:9999},title:"대분류",children:["L1: ",R.categoryL1||"-"]}),g.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:6,fontSize:12,background:"#ecfeff",border:"1px solid #e5e7eb",padding:"2px 8px",borderRadius:9999},title:"중분류",children:["L2: ",R.categoryL2||"-"]})]}):g.jsx("span",{style:{color:"#9ca3af",fontSize:12},children:"카테고리 미지정"})}),g.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:j.length===0?g.jsx("span",{style:{color:"#9ca3af",fontSize:12},children:"태그 없음"}):j.map($=>g.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:6,fontSize:12,background:"#f3f4f6",border:"1px solid #e5e7eb",padding:"2px 8px",borderRadius:9999},children:["#",$]},$))})]})]},R.id)})}),g.jsx(yk,{open:O,onClose:()=>A(!1),onAfterImport:()=>T()})]})}function YE(t=""){const e=String(t).replace(/[\s,()보기]/g,"");if(!e)return 0;const n=e.match(/([\d.]+)\s*만/),i=e.match(/([\d.]+)\s*천/);if(n)return Math.round(parseFloat(n[1])*1e4);if(i)return Math.round(parseFloat(i[1])*1e3);const r=e.match(/[\d.]+/);return r?Number(r[0]):0}function vk(t=""){const e=String(t).replace(/[^\d.]/g,"");return e?Number(e):0}function Cr(t=""){return String(t).replace(/\s+/g," ").replace(/^"|"$/g,"").trim()}function Ek(t=""){return String(t).split(/[,|#/ ]+/).map(e=>e.trim()).filter(Boolean)}function Tk(t){let e=t.replace(/^\uFEFF/,"");const n=e.includes("	")?"	":",",i=[];let r=[],s="",a=!1;for(let l=0;l<e.length;l++){const u=e[l];if(u==='"'){a&&e[l+1]==='"'?(s+='"',l++):a=!a;continue}if(!a&&(u===n||u===`
`||u==="\r")){r.push(s),s="",u===`
`&&(i.push(r),r=[]);continue}s+=u}return r.push(s),r.length&&i.push(r),i.filter(l=>l.some(u=>String(u).trim()!==""))}function bk(t=""){const e=String(t).trim().toLowerCase();return["id","상품id","문서id"].includes(e)?"id":["상품명","name","title"].includes(e)?"name":["상품코드","productcode","code","pdno"].includes(e)?"productCode":["가격","price"].includes(e)?"price":["평점","rating"].includes(e)?"rating":["리뷰수","review","reviewcount"].includes(e)?"reviewCount":["조회수","views","view"].includes(e)?"views":["태그","tags"].includes(e)?"tags":["링크","url","link"].includes(e)?"link":["이미지","이미지url","image","imageurl","thumbnail"].includes(e)?"imageUrl":["재입고","restock","restockable"].includes(e)?"restockable":["상태","status"].includes(e)?"status":["재고","stock"].includes(e)?"stock":["업데이트시각","updatedat"].includes(e)?"updatedAt":["대분류","categoryl1","category_l1","lnb","lnb1"].includes(e)?"categoryL1":["중분류","categoryl2","category_l2","sub","lnb2"].includes(e)?"categoryL2":e}function Sk(t,e){const n={};e.forEach((N,P)=>{n[N]=t[P]??""});const i=Cr(n.id||n.productCode||""),r=Cr(n.name||""),s=Cr(n.imageUrl||""),a=Cr(n.link||""),l=Cr(n.productCode||""),u=n.price!==void 0?vk(n.price):void 0,c=n.rating!==void 0?parseFloat(String(n.rating).replace(/[^\d.]/g,""))||0:void 0,f=n.reviewCount!==void 0?YE(n.reviewCount):void 0,d=n.views!==void 0?YE(n.views):void 0,m=n.restockable!==void 0?/^(true|1|예|y)$/i.test(String(n.restockable).trim()):void 0,v=n.status?String(n.status).trim():void 0,x=n.stock!==void 0?Number(String(n.stock).replace(/[^\d-]/g,""))||0:void 0,M=n.tags!=null?String(n.tags):"",O=M?Array.from(new Set(Ek(M))):void 0,A=n.categoryL1!=null&&String(n.categoryL1).trim()!==""?Cr(n.categoryL1):void 0,T=n.categoryL2!=null&&String(n.categoryL2).trim()!==""?Cr(n.categoryL2):void 0;if(!i)return null;const E={id:i};return r&&(E.name=r),s&&(E.imageUrl=s),a&&(E.link=a),l&&(E.productCode=l),u!==void 0&&!Number.isNaN(u)&&(E.price=u),c!==void 0&&(E.rating=c),f!==void 0&&(E.reviewCount=f),d!==void 0&&(E.views=d),m!==void 0&&(E.restockable=m),v&&(E.status=v),x!==void 0&&(E.stock=x),O!==void 0&&(E.tags=O),A!==void 0&&(E.categoryL1=A),T!==void 0&&(E.categoryL2=T),E}function wt(t){return t==null?"":Array.isArray(t)?t.join(" | "):String(t)}function Ak(){const[t,e]=D.useState(""),[n,i]=D.useState(""),[r,s]=D.useState([]),[a,l]=D.useState([]),[u,c]=D.useState([]),[f,d]=D.useState(!1),[m,v]=D.useState(!1),[x,M]=D.useState(!0),[O,A]=D.useState({done:0,total:0,running:!1}),T=D.useMemo(()=>r.length?r.map(y=>Sk(y,a)).filter(Boolean):[],[r,a]),E=async y=>{var w;const _=(w=y.target.files)==null?void 0:w[0];if(!_)return;e(_.name);const S=await _.text();N(S)},N=y=>{const _=Tk(y);if(!_.length){s([]),l([]),c([]),i("");return}const[S,...w]=_,C=S.map(bk);i(y),s(w),l(C),c(S)},P=()=>{const _="\uFEFF"+["상품ID","상품명","상품코드","가격","평점","리뷰수","조회수","태그","링크","이미지URL","재입고","상태","재고","대분류(categoryL1)","중분류(categoryL2)"].join(",")+`\r
`,S=new Blob([_],{type:"text/csv;charset=utf-8"}),w=URL.createObjectURL(S),C=document.createElement("a");C.href=w,C.download="상품_업데이트_템플릿.csv",document.body.appendChild(C),C.click(),C.remove(),URL.revokeObjectURL(w)},G=async()=>{if(!T.length){alert("유효한 행이 없습니다.");return}const y=T.length;A({done:0,total:y,running:!0});try{for(let S=0;S<T.length;S+=400){const w=T.slice(S,S+400),C=Po(Pe);w.forEach(R=>{const{id:I,...j}=R,$={updatedAt:Br()};["name","imageUrl","link","productCode","price","rating","reviewCount","views","restockable","status","stock"].forEach(L=>{j[L]!==void 0&&($[L]=j[L])}),m&&j.tags&&($.tags=j.tags),x&&(j.categoryL1!==void 0&&($.categoryL1=j.categoryL1),j.categoryL2!==void 0&&($.categoryL2=j.categoryL2));const H=mn(Pe,"products",I);C.set(H,$,{merge:!f})}),await C.commit(),A(R=>({...R,done:Math.min(R.done+w.length,y)}))}alert(`완료: ${y}개 처리
- 모드: ${f?"문서 덮어쓰기":"필드 병합 업데이트"}
- tags: ${m?"CSV값 반영/교체":"CSV 무시(기존 유지)"}
- category: ${x?"CSV값 반영/교체":"CSV 무시(기존 유지)"}`)}catch(_){console.error(_),alert(`에러: ${_.message}`)}finally{A({done:0,total:0,running:!1})}};return g.jsxs("div",{style:{maxWidth:980,margin:"0 auto",padding:16},children:[g.jsx("h1",{style:{margin:0,marginBottom:12,fontSize:22,fontWeight:700},children:"CSV 업서트(등록/업데이트)"}),g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:10,marginBottom:12},children:[g.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[g.jsx("input",{type:"file",accept:".csv,text/csv",onChange:E,"aria-label":"CSV 파일 선택"}),g.jsx("button",{onClick:P,style:{borderRadius:8,padding:"8px 12px",border:"1px solid #e5e7eb",background:"white",cursor:"pointer"},children:"템플릿 다운로드"}),g.jsx("span",{style:{fontSize:12,color:"#6b7280"},children:t?`선택된 파일: ${t}`:"CSV(UTF-8, BOM 권장). 탭 구분도 OK"})]}),g.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",alignItems:"center"},children:[g.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[g.jsx("input",{type:"checkbox",checked:f,onChange:y=>d(y.target.checked)}),"문서 덮어쓰기(merge 아님)"]}),g.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[g.jsx("input",{type:"checkbox",checked:m,onChange:y=>v(y.target.checked)}),"CSV의 태그 반영(교체)"]}),g.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[g.jsx("input",{type:"checkbox",checked:x,onChange:y=>M(y.target.checked)}),"CSV의 카테고리 반영(교체)"]}),g.jsx("button",{onClick:G,disabled:!T.length||O.running,style:{borderRadius:8,padding:"8px 12px",border:"1px solid #e5e7eb",background:"#111827",color:"white",cursor:"pointer",minWidth:140},children:O.running?`처리중… (${O.done}/${O.total})`:`업서트 실행 (${T.length}개)`})]})]}),g.jsx("div",{style:{marginBottom:12},children:g.jsx("textarea",{value:n,onChange:y=>N(y.target.value),placeholder:`여기에 CSV/TSV를 붙여넣어도 됩니다.
예시(쉼표):
상품ID,상품명,상품코드,가격,태그,링크,이미지URL,대분류(categoryL1),중분류(categoryL2)
1038756,전통문양 봉투 2매입,1038756,1000,"전통 | 봉투 | 핑크",https://...,https://...,문구/팬시,포장용품

예시(탭):
상품ID	상품명	가격	태그	대분류(categoryL1)	중분류(categoryL2)
1038756	전통문양 봉투 2매입	1,000	전통 | 봉투	문구/팬시	포장용품`,style:{width:"100%",height:140,borderRadius:8,border:"1px solid #e5e7eb",padding:8}})}),g.jsxs("h3",{style:{marginTop:10,marginBottom:8},children:["미리보기 (",T.length,"행)"]}),T.length?g.jsxs("div",{style:{overflowX:"auto",border:"1px solid #e5e7eb",borderRadius:8},children:[g.jsxs("table",{style:{borderCollapse:"collapse",width:"100%"},children:[g.jsx("thead",{children:g.jsx("tr",{style:{background:"#f9fafb"},children:["id","name","productCode","price","rating","reviewCount","views","tags","link","imageUrl","restockable","status","stock","categoryL1","categoryL2"].map(y=>g.jsx("th",{style:{textAlign:"left",padding:8,borderBottom:"1px solid #e5e7eb",whiteSpace:"nowrap"},children:y},y))})}),g.jsx("tbody",{children:T.slice(0,200).map((y,_)=>g.jsxs("tr",{style:{borderTop:"1px solid #f3f4f6"},children:[g.jsx("td",{style:{padding:8},children:wt(y.id)}),g.jsx("td",{style:{padding:8},children:wt(y.name)}),g.jsx("td",{style:{padding:8},children:wt(y.productCode)}),g.jsx("td",{style:{padding:8},children:wt(y.price)}),g.jsx("td",{style:{padding:8},children:wt(y.rating)}),g.jsx("td",{style:{padding:8},children:wt(y.reviewCount)}),g.jsx("td",{style:{padding:8},children:wt(y.views)}),g.jsx("td",{style:{padding:8},children:wt(y.tags)}),g.jsx("td",{style:{padding:8,maxWidth:240,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:wt(y.link)}),g.jsx("td",{style:{padding:8,maxWidth:240,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:wt(y.imageUrl)}),g.jsx("td",{style:{padding:8},children:wt(y.restockable)}),g.jsx("td",{style:{padding:8},children:wt(y.status)}),g.jsx("td",{style:{padding:8},children:wt(y.stock)}),g.jsx("td",{style:{padding:8},children:wt(y.categoryL1)}),g.jsx("td",{style:{padding:8},children:wt(y.categoryL2)})]},_))})]}),T.length>200&&g.jsxs("div",{style:{padding:8,fontSize:12,color:"#6b7280"},children:["미리보기는 상위 200행까지만 표시합니다. 전체 ",T.length,"행 처리됩니다."]})]}):g.jsx("div",{style:{color:"#6b7280"},children:"파싱된 행이 없습니다."})]})}function rd({user:t,allow:e=()=>!1,children:n}){const i=yi();return t?e(t)?n:g.jsxs("div",{style:{maxWidth:720,margin:"40px auto",padding:16},children:[g.jsx("h2",{style:{marginTop:0},children:"403 · 접근 권한이 없습니다"}),g.jsx("p",{style:{color:"#6b7280"},children:"이 페이지는 관리자 전용입니다. 필요 시 운영자에게 권한 요청하세요."})]}):g.jsx(f2,{to:"/",replace:!0,state:{from:i}})}function bu(t){if(!t)return 0;if(typeof(t==null?void 0:t.toMillis)=="function")return t.toMillis();const e=Number(t);return Number.isFinite(e)?e:0}function wk(t){const e=[];for(let n=0;n<t.length;n+=10)e.push(t.slice(n,n+10));return e}const ro=(t=0)=>t.toLocaleString("ko-KR"),Rk=t=>Number(t||0)>0;function Ck(){const{user:t,savedIds:e,loadingUser:n,loadingSaved:i}=Oa(),r=Sl(),[s,a]=D.useState([]),[l,u]=D.useState({}),[c,f]=D.useState(!0),[d,m]=D.useState(""),[v,x]=D.useState(""),[M,O]=D.useState(()=>new Date().toISOString().slice(0,10)),[A,T]=D.useState(0),E=D.useMemo(()=>Array.from(e||new Set),[e]),N=D.useRef(0);D.useEffect(()=>{let j=!1;const $=++N.current;return(async()=>{if(m(""),!t){a([]),f(!1);return}f(!0);try{if(!E.length){a([]);return}const H=await Promise.all(wk(E).map(q=>Da(xa(mi(Pe,"products"),uA(WS(),"in",q))))),L=[];H.forEach(q=>q.forEach(F=>L.push({id:F.id,...F.data()}))),L.sort((q,F)=>(bu(F.updatedAt)||bu(F.createdAt)||0)-(bu(q.updatedAt)||bu(q.createdAt)||0)||String(F.id).localeCompare(String(q.id))),!j&&$===N.current&&(a(L),u(q=>{const F={...q};return L.forEach(W=>{F[W.id]==null&&(F[W.id]=typeof W.price=="number"&&W.price>0?1:0)}),F}))}catch(H){!j&&$===N.current&&(console.error(H),m((H==null?void 0:H.message)||"목록 로드 오류"),a([]))}finally{!j&&$===N.current&&f(!1)}})(),()=>{j=!0}},[t,E]);const P=D.useMemo(()=>s.map(j=>{const $=typeof j.price=="number"?j.price:0,H=Math.max(0,Number(l[j.id]??0)||0);return{...j,_price:$,_qty:H,_subtotal:$*H}}),[s,l]),G=D.useMemo(()=>P.reduce((j,$)=>j+$._qty,0),[P]),y=D.useMemo(()=>P.reduce((j,$)=>j+$._subtotal,0),[P]),_=Math.max(0,Number(A)||0),S=Math.max(0,y-_),[w,C]=D.useState(!1),R=(j,$)=>{let H=Number($);(!Number.isFinite(H)||H<0)&&(H=0),H>9999&&(H=9999),u(L=>({...L,[j]:H}))},I=async()=>{if(!t){alert("로그인 필요");return}const j=P.filter(L=>L._qty>0);if(j.length===0){alert("수량 1 이상인 상품이 없습니다.");return}const $=new Date(M);if(Number.isNaN($.getTime())){alert("주문일이 올바르지 않습니다.");return}const H={userId:t.uid,orderName:(v==null?void 0:v.trim())||"",orderDate:$.toISOString().slice(0,10),createdAt:Br(),totalQty:G,totalPrice:y,discountAmount:_,finalTotal:S,items:j.map(L=>({productId:L.id,name:L.name||"",price:L._price,qty:L._qty,subtotal:L._subtotal,imageUrl:L.imageUrl||"",productCode:L.productCode||"",categoryL1:L.categoryL1||"",categoryL2:L.categoryL2||"",link:L.link||""}))};try{const L=await jM(mi(Pe,"users",t.uid,"orders"),H);r(`/orders/${L.id}`,{replace:!0,state:{created:!0}})}catch(L){console.error(L),alert((L==null?void 0:L.message)||"주문서 생성 실패")}};return g.jsxs("div",{style:{maxWidth:1100,margin:"0 auto",padding:16},children:[g.jsx("h2",{style:{marginTop:0},children:"주문서 만들기"}),t?n||i||c?g.jsx("div",{children:"불러오는 중…"}):g.jsxs(g.Fragment,{children:[d&&g.jsx("div",{style:{marginBottom:12,padding:"8px 10px",border:"1px solid #fecaca",background:"#fef2f2",color:"#991b1b",borderRadius:8},children:d}),g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.4fr 1fr 1fr auto",gap:12,alignItems:"center",marginBottom:12},children:[g.jsx("input",{value:v,onChange:j=>x(j.target.value),placeholder:"주문서 이름 (예: 10월 MD 발주)",style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px"}}),g.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[g.jsx("span",{children:"주문일"}),g.jsx("input",{type:"date",value:M,onChange:j=>O(j.target.value),style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"6px 8px"}})]}),g.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[g.jsx("span",{children:"할인금액"}),g.jsx("input",{inputMode:"numeric",value:A,onChange:j=>T(j.target.value.replace(/[^\d]/g,"")),style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"6px 8px",width:140,textAlign:"right"},placeholder:"0"})]}),g.jsx("button",{onClick:I,disabled:G===0,style:{borderRadius:8,padding:"8px 12px",border:"1px solid #e5e7eb",background:G?"#111827":"#9ca3af",color:"#fff"},children:"주문서 만들기"})]}),g.jsxs("div",{style:{display:"flex",gap:16,alignItems:"center",justifyContent:"flex-end",marginBottom:8,color:"#374151"},children:[g.jsxs("div",{children:["총 수량 ",g.jsx("strong",{children:G}),"개"]}),g.jsxs("div",{children:["상품합계 ",g.jsx("strong",{children:ro(y)})," 원"]}),g.jsxs("div",{children:["할인 ",g.jsxs("strong",{children:["-",ro(_)]})," 원"]}),g.jsxs("div",{children:["결제합계 ",g.jsx("strong",{children:ro(S)})," 원"]})]}),P.length===0?g.jsx("div",{children:"저장한 상품이 없습니다."}):g.jsx("div",{style:{overflowX:"auto",border:"1px solid #e5e7eb",borderRadius:10},children:g.jsxs("table",{style:{borderCollapse:"collapse",width:"100%"},children:[g.jsx("thead",{children:g.jsxs("tr",{style:{background:"#f9fafb"},children:[g.jsx("th",{style:Gc,children:"상품"}),g.jsx("th",{style:Gc,children:"코드"}),g.jsx("th",{style:XE,children:"가격"}),g.jsx("th",{style:WE,children:"수량"}),g.jsx("th",{style:XE,children:"소계"}),g.jsx("th",{style:WE,children:"원본"})]})}),g.jsx("tbody",{children:P.filter(j=>Rk(j._qty)||s.length<=50).filter(j=>w||j._qty>0).map(j=>g.jsxs("tr",{style:{borderTop:"1px solid #f3f4f6"},children:[g.jsxs("td",{style:{padding:10,display:"flex",gap:10,alignItems:"center",minWidth:280},children:[g.jsx("div",{style:{width:60,height:60,background:"#f3f4f6",borderRadius:8,overflow:"hidden"},children:j.imageUrl&&g.jsx("img",{src:j.imageUrl,alt:j.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),g.jsxs("div",{children:[g.jsx("div",{style:{fontWeight:600},children:j.name}),g.jsxs("div",{style:{fontSize:12,color:"#6b7280"},children:[j.categoryL1||"-"," ",j.categoryL2?`> ${j.categoryL2}`:""]})]})]}),g.jsx("td",{style:{padding:10,fontSize:12,color:"#6b7280"},children:j.productCode||j.id}),g.jsxs("td",{style:JE,children:[ro(j._price)," 원"]}),g.jsxs("td",{style:{padding:10,textAlign:"center"},children:[g.jsxs("div",{style:{display:"inline-flex",alignItems:"center",border:"1px solid #e5e7eb",borderRadius:8},children:[g.jsx("button",{onClick:()=>R(j.id,(l[j.id]||0)-1),style:ZE,children:"−"}),g.jsx("input",{value:l[j.id]??0,onChange:$=>R(j.id,$.target.value),inputMode:"numeric",style:{width:56,textAlign:"center",border:"none",outline:"none"}}),g.jsx("button",{onClick:()=>R(j.id,(l[j.id]||0)+1),style:ZE,children:"＋"})]}),g.jsx("button",{onClick:()=>R(j.id,0),style:{marginLeft:8,border:"1px solid #e5e7eb",borderRadius:8,padding:"6px 10px",background:"#fff",cursor:"pointer",fontSize:12},title:"이 상품을 주문서에서 제외",children:"삭제"})]}),g.jsxs("td",{style:JE,children:[g.jsx("strong",{children:ro(j._subtotal)})," 원"]}),g.jsx("td",{style:{padding:10,textAlign:"center"},children:j.link?g.jsx("a",{href:j.link,target:"_blank",rel:"noopener noreferrer",style:{fontSize:12},children:"열기"}):g.jsx("span",{style:{fontSize:12,color:"#9ca3af"},children:"-"})})]},j.id))})]})})]}):g.jsxs("div",{style:{marginTop:24},children:[g.jsx("h3",{children:"로그인이 필요합니다"}),g.jsx("p",{children:"상단에서 로그인/회원가입을 진행하세요."})]})]})}const Gc={textAlign:"left",padding:10,borderBottom:"1px solid #e5e7eb",whiteSpace:"nowrap"},XE={...Gc,textAlign:"right"},WE={...Gc,textAlign:"center"},JE={padding:10,textAlign:"right"},ZE={width:32,height:32,border:"none",background:"#fff",cursor:"pointer"},Ik=(t=0)=>Number(t||0).toLocaleString("ko-KR");function xk(){const{user:t,loadingUser:e}=Oa(),[n,i]=D.useState([]),[r,s]=D.useState(!0),[a,l]=D.useState(""),u=Sl(),c=async f=>{if(t&&window.confirm("이 주문서를 삭제할까요? 되돌릴 수 없습니다."))try{await xg(mn(Pe,"users",t.uid,"orders",f)),i(d=>d.filter(m=>m.id!==f))}catch(d){console.error(d),alert((d==null?void 0:d.message)||"삭제 실패")}};return D.useEffect(()=>{if(!t){i([]),s(!1);return}(async()=>{l(""),s(!0);try{const f=xa(mi(Pe,"users",t.uid,"orders"),Vh("createdAt","desc")),m=(await Da(f)).docs.map(v=>({id:v.id,...v.data()}));i(m)}catch(f){console.error(f),l((f==null?void 0:f.message)||"주문서 조회 실패")}finally{s(!1)}})()},[t]),t?e||r?g.jsx("div",{style:{maxWidth:960,margin:"40px auto",padding:16},children:"불러오는 중…"}):g.jsxs("div",{style:{maxWidth:960,margin:"0 auto",padding:16},children:[g.jsx("h2",{style:{marginTop:0},children:"주문서 목록"}),a&&g.jsx("div",{style:{marginBottom:12,padding:"8px 10px",border:"1px solid #fecaca",background:"#fef2f2",color:"#991b1b",borderRadius:8},children:a}),n.length===0?g.jsx("div",{children:"주문서가 없습니다."}):g.jsx("div",{style:{display:"grid",gap:10},children:n.map(f=>g.jsxs("div",{style:{display:"grid",gap:6},children:[g.jsxs("div",{onClick:()=>u(`/orders/${f.id}`),role:"button",tabIndex:0,onKeyDown:d=>{(d.key==="Enter"||d.key===" ")&&u(`/orders/${f.id}`)},style:{textAlign:"left",border:"1px solid #e5e7eb",borderRadius:10,padding:12,background:"#fff",cursor:"pointer"},children:[g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:8,flexWrap:"wrap"},children:[g.jsxs("strong",{children:[f.orderName||`#${f.id.slice(0,8)}`," · ",f.orderDate||"-"]}),g.jsxs("div",{style:{color:"#374151"},children:["수량: ",g.jsx("strong",{children:f.totalQty}),"개 · 합계:"," ",g.jsx("strong",{children:Ik(f.finalTotal??f.totalPrice)})," 원"]})]}),g.jsxs("div",{style:{marginTop:8,display:"flex",gap:6,flexWrap:"wrap"},children:[(f.items||[]).slice(0,6).map(d=>g.jsxs("span",{style:{fontSize:12,background:"#f3f4f6",border:"1px solid #e5e7eb",padding:"2px 8px",borderRadius:9999},children:[d.name," × ",d.qty]},d.productId)),(f.items||[]).length>6&&g.jsxs("span",{style:{fontSize:12,color:"#6b7280"},children:["…외 ",f.items.length-6,"개"]})]})]}),g.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:g.jsx("button",{onClick:d=>{d.stopPropagation(),c(f.id)},style:{border:"1px solid #fecaca",background:"#fff",color:"#b91c1c",padding:"6px 10px",borderRadius:8,cursor:"pointer",fontSize:12},children:"주문서 삭제"})})]},f.id))})]}):g.jsx("div",{style:{maxWidth:960,margin:"40px auto",padding:16},children:g.jsx("h2",{children:"로그인 필요"})})}const so=(t=0)=>Number(t||0).toLocaleString("ko-KR");function Dk(){const{user:t,loadingUser:e}=Oa(),{orderId:n}=JI(),i=Sl(),[r,s]=D.useState(!0),[a,l]=D.useState(""),[u,c]=D.useState(null),[f,d]=D.useState(""),[m,v]=D.useState(""),[x,M]=D.useState(0),[O,A]=D.useState([]);D.useEffect(()=>{if(!t){s(!1);return}(async()=>{l(""),s(!0);try{const y=mn(mi(Pe,"users",t.uid,"orders"),n),_=await LM(y);if(!_.exists()){l("주문서를 찾을 수 없습니다."),c(null);return}const S={id:_.id,..._.data()};c(S),d(S.orderName||""),v(S.orderDate||new Date().toISOString().slice(0,10)),M(Number(S.discountAmount||0)),A((S.items||[]).map(w=>({...w,price:Number(w.price||0),qty:Number(w.qty||0),subtotal:Number(w.subtotal||Number(w.price||0)*Number(w.qty||0))})))}catch(y){console.error(y),l((y==null?void 0:y.message)||"불러오기 실패")}finally{s(!1)}})()},[t,n]);const T=D.useMemo(()=>{const y=O.reduce((C,R)=>C+(Number(R.qty)||0),0),_=O.reduce((C,R)=>C+Number(R.price||0)*Number(R.qty||0),0),S=Math.max(0,Number(x)||0),w=Math.max(0,_-S);return{totalQty:y,totalPrice:_,discount:S,finalTotal:w}},[O,x]),E=(y,_)=>{A(S=>{const w=[...S];let C=Number(_);return(!Number.isFinite(C)||C<0)&&(C=0),C>9999&&(C=9999),w[y]={...w[y],qty:C,subtotal:C*Number(w[y].price||0)},w})},N=y=>{A(_=>_.filter((S,w)=>w!==y))},P=async()=>{if(!t||!u)return;if(O.length===0){alert("최소 1개 이상의 아이템이 필요합니다.");return}if(!m||Number.isNaN(new Date(m).getTime())){alert("주문일이 올바르지 않습니다.");return}const y={orderName:(f==null?void 0:f.trim())||"",orderDate:m,discountAmount:T.discount,totalQty:T.totalQty,totalPrice:T.totalPrice,finalTotal:T.finalTotal,items:O.map(_=>({productId:_.productId,name:_.name||"",price:Number(_.price||0),qty:Number(_.qty||0),subtotal:Number(_.price||0)*Number(_.qty||0),imageUrl:_.imageUrl||"",productCode:_.productCode||"",categoryL1:_.categoryL1||"",categoryL2:_.categoryL2||"",link:_.link||""}))};try{await UM(mn(Pe,"users",t.uid,"orders",u.id),y),alert("저장 완료"),i("/orders",{replace:!0})}catch(_){console.error(_),alert((_==null?void 0:_.message)||"저장 실패")}},G=async()=>{if(!(!t||!u)&&window.confirm("이 주문서를 삭제할까요? 되돌릴 수 없습니다."))try{await xg(mn(Pe,"users",t.uid,"orders",u.id)),alert("삭제 완료"),i("/orders",{replace:!0})}catch(y){console.error(y),alert((y==null?void 0:y.message)||"삭제 실패")}};return t?e||r?g.jsx("div",{style:{maxWidth:960,margin:"40px auto",padding:16},children:"불러오는 중…"}):a?g.jsx("div",{style:{maxWidth:960,margin:"40px auto",padding:16,color:"#991b1b"},children:a}):u?g.jsxs("div",{style:{maxWidth:1100,margin:"0 auto",padding:16},children:[g.jsx("h2",{style:{marginTop:0},children:"주문서 수정"}),g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.4fr 1fr 1fr auto auto",gap:12,alignItems:"center",marginBottom:12},children:[g.jsx("input",{value:f,onChange:y=>d(y.target.value),placeholder:"주문서 이름",style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px"}}),g.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[g.jsx("span",{children:"주문일"}),g.jsx("input",{type:"date",value:m,onChange:y=>v(y.target.value),style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"6px 8px"}})]}),g.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[g.jsx("span",{children:"할인금액"}),g.jsx("input",{inputMode:"numeric",value:x,onChange:y=>M(y.target.value.replace(/[^\d]/g,"")),style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"6px 8px",width:140,textAlign:"right"},placeholder:"0"})]}),g.jsx("button",{onClick:P,disabled:O.length===0,style:{borderRadius:8,padding:"8px 12px",border:"1px solid #e5e7eb",background:O.length?"#111827":"#9ca3af",color:"#fff",cursor:O.length?"pointer":"not-allowed"},children:"저장"}),g.jsx("button",{onClick:G,style:{border:"1px solid #fecaca",background:"#fff",color:"#b91c1c",borderRadius:8,padding:"8px 12px"},children:"주문서 삭제"})]}),g.jsxs("div",{style:{display:"flex",gap:16,alignItems:"center",justifyContent:"flex-end",marginBottom:8,color:"#374151"},children:[g.jsxs("div",{children:["총 수량 ",g.jsx("strong",{children:T.totalQty}),"개"]}),g.jsxs("div",{children:["상품합계 ",g.jsx("strong",{children:so(T.totalPrice)})," 원"]}),g.jsxs("div",{children:["할인 ",g.jsxs("strong",{children:["-",so(T.discount)]})," 원"]}),g.jsxs("div",{children:["결제합계 ",g.jsx("strong",{children:so(T.finalTotal)})," 원"]})]}),g.jsx("div",{style:{overflowX:"auto",border:"1px solid #e5e7eb",borderRadius:10},children:g.jsxs("table",{style:{borderCollapse:"collapse",width:"100%"},children:[g.jsx("thead",{children:g.jsxs("tr",{style:{background:"#f9fafb"},children:[g.jsx("th",{style:Qc,children:"상품"}),g.jsx("th",{style:Qc,children:"코드"}),g.jsx("th",{style:e0,children:"가격"}),g.jsx("th",{style:t0,children:"수량"}),g.jsx("th",{style:e0,children:"소계"}),g.jsx("th",{style:t0,children:"원본/삭제"})]})}),g.jsxs("tbody",{children:[O.map((y,_)=>g.jsxs("tr",{style:{borderTop:"1px solid #f3f4f6"},children:[g.jsx("td",{style:{padding:10,minWidth:280},children:g.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[g.jsx("div",{style:{width:60,height:60,background:"#f3f4f6",borderRadius:8,overflow:"hidden"},children:y.imageUrl&&g.jsx("img",{src:y.imageUrl,alt:y.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),g.jsxs("div",{children:[g.jsx("div",{style:{fontWeight:600},children:y.name}),g.jsxs("div",{style:{fontSize:12,color:"#6b7280"},children:[y.categoryL1||"-"," ",y.categoryL2?`> ${y.categoryL2}`:""]})]})]})}),g.jsx("td",{style:{padding:10,fontSize:12,color:"#6b7280"},children:y.productCode||y.productId}),g.jsxs("td",{style:n0,children:[so(y.price)," 원"]}),g.jsx("td",{style:{padding:10,textAlign:"center"},children:g.jsx("input",{value:y.qty,onChange:S=>E(_,S.target.value),inputMode:"numeric",style:{width:64,textAlign:"center",border:"1px solid #e5e7eb",borderRadius:8,padding:"6px 8px"}})}),g.jsxs("td",{style:n0,children:[g.jsx("strong",{children:so(Number(y.price||0)*Number(y.qty||0))})," 원"]}),g.jsxs("td",{style:{padding:10,textAlign:"center",whiteSpace:"nowrap"},children:[y.link?g.jsx("a",{href:y.link,target:"_blank",rel:"noopener noreferrer",style:{fontSize:12},children:"열기"}):g.jsx("span",{style:{fontSize:12,color:"#9ca3af"},children:"-"}),g.jsx("button",{onClick:()=>N(_),style:{marginLeft:8,border:"1px solid #e5e7eb",background:"#fff",borderRadius:8,padding:"6px 10px",cursor:"pointer",fontSize:12},title:"이 상품을 주문서에서 제거",children:"삭제"})]})]},y.productId)),O.length===0&&g.jsx("tr",{children:g.jsx("td",{colSpan:6,style:{padding:16,textAlign:"center",color:"#6b7280"},children:"아이템이 없습니다. (상단에서 저장할 수 없습니다)"})})]})]})})]}):null:g.jsx("div",{style:{maxWidth:960,margin:"40px auto",padding:16},children:g.jsx("h2",{children:"로그인 필요"})})}const Qc={textAlign:"left",padding:10,borderBottom:"1px solid #e5e7eb",whiteSpace:"nowrap"},e0={...Qc,textAlign:"right"},t0={...Qc,textAlign:"center"},n0={padding:10,textAlign:"right"};function Nk({user:t}){return g.jsx("nav",{style:{width:"100%",borderBottom:"1px solid #e5e7eb",marginBottom:16,background:"white"},children:g.jsxs("div",{style:{maxWidth:960,margin:"0 auto",padding:"12px 16px",display:"flex",gap:12},children:[g.jsx(Mi,{to:"/",children:"카탈로그"}),g.jsx(Mi,{to:"/saved",children:"찜"}),g.jsx(Mi,{to:"/checkout",children:"주문서작성"}),g.jsx(Mi,{to:"/orders",children:"주문서목록"}),jo(t)&&g.jsx(Mi,{to:"/edit",children:"Admin"})]})})}function Ok(){const{user:t}=Oa();return g.jsxs(P2,{basename:"/products",children:[g.jsx(Nk,{user:t}),g.jsxs(m2,{children:[g.jsx(Hn,{path:"/",element:g.jsx(hk,{})}),g.jsx(Hn,{path:"/saved",element:g.jsx(dk,{})}),g.jsx(Hn,{path:"/checkout",element:g.jsx(Ck,{})}),g.jsx(Hn,{path:"/orders",element:g.jsx(xk,{})}),g.jsx(Hn,{path:"/orders/:orderId",element:g.jsx(Dk,{})}),g.jsx(Hn,{path:"/import",element:g.jsx(rd,{user:t,allow:jo,children:g.jsx(mk,{})})}),g.jsx(Hn,{path:"/edit",element:g.jsx(rd,{user:t,allow:jo,children:g.jsx(_k,{})})}),g.jsx(Hn,{path:"/import-csv",element:g.jsx(rd,{user:t,allow:jo,children:g.jsx(Ak,{})})})]})]})}bI.createRoot(document.getElementById("root")).render(g.jsx(Hw.StrictMode,{children:g.jsx(Ok,{})}));
