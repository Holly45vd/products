(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Iw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var o0={exports:{}},Yc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xw=Symbol.for("react.transitional.element"),Dw=Symbol.for("react.fragment");function l0(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var r in e)r!=="key"&&(n[r]=e[r])}else n=e;return e=n.ref,{$$typeof:xw,type:t,key:i,ref:e!==void 0?e:null,props:n}}Yc.Fragment=Dw;Yc.jsx=l0;Yc.jsxs=l0;o0.exports=Yc;var p=o0.exports,u0={exports:{}},ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var km=Symbol.for("react.transitional.element"),Nw=Symbol.for("react.portal"),Ow=Symbol.for("react.fragment"),Mw=Symbol.for("react.strict_mode"),Vw=Symbol.for("react.profiler"),kw=Symbol.for("react.consumer"),Lw=Symbol.for("react.context"),Pw=Symbol.for("react.forward_ref"),Uw=Symbol.for("react.suspense"),jw=Symbol.for("react.memo"),c0=Symbol.for("react.lazy"),zw=Symbol.for("react.activity"),zy=Symbol.iterator;function Bw(t){return t===null||typeof t!="object"?null:(t=zy&&t[zy]||t["@@iterator"],typeof t=="function"?t:null)}var h0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f0=Object.assign,d0={};function ha(t,e,n){this.props=t,this.context=e,this.refs=d0,this.updater=n||h0}ha.prototype.isReactComponent={};ha.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ha.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function m0(){}m0.prototype=ha.prototype;function Lm(t,e,n){this.props=t,this.context=e,this.refs=d0,this.updater=n||h0}var Pm=Lm.prototype=new m0;Pm.constructor=Lm;f0(Pm,ha.prototype);Pm.isPureReactComponent=!0;var By=Array.isArray;function ld(){}var Ne={H:null,A:null,T:null,S:null},g0=Object.prototype.hasOwnProperty;function Um(t,e,n){var i=n.ref;return{$$typeof:km,type:t,key:e,ref:i!==void 0?i:null,props:n}}function qw(t,e){return Um(t.type,e,t.props)}function jm(t){return typeof t=="object"&&t!==null&&t.$$typeof===km}function Hw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var qy=/\/+/g;function lf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Hw(""+t.key):e.toString(36)}function Fw(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(ld,ld):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function ms(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case km:case Nw:a=!0;break;case c0:return a=t._init,ms(a(t._payload),e,n,i,r)}}if(a)return r=r(t),a=i===""?"."+lf(t,0):i,By(r)?(n="",a!=null&&(n=a.replace(qy,"$&/")+"/"),ms(r,e,n,"",function(c){return c})):r!=null&&(jm(r)&&(r=qw(r,n+(r.key==null||t&&t.key===r.key?"":(""+r.key).replace(qy,"$&/")+"/")+a)),e.push(r)),1;a=0;var l=i===""?".":i+":";if(By(t))for(var u=0;u<t.length;u++)i=t[u],s=l+lf(i,u),a+=ms(i,e,n,s,r);else if(u=Bw(t),typeof u=="function")for(t=u.call(t),u=0;!(i=t.next()).done;)i=i.value,s=l+lf(i,u++),a+=ms(i,e,n,s,r);else if(s==="object"){if(typeof t.then=="function")return ms(Fw(t),e,n,i,r);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function Zl(t,e,n){if(t==null)return t;var i=[],r=0;return ms(t,i,"","",function(s){return e.call(n,s,r++)}),i}function Gw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Hy=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Qw={map:Zl,forEach:function(t,e,n){Zl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Zl(t,function(){e++}),e},toArray:function(t){return Zl(t,function(e){return e})||[]},only:function(t){if(!jm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Activity=zw;ie.Children=Qw;ie.Component=ha;ie.Fragment=Ow;ie.Profiler=Vw;ie.PureComponent=Lm;ie.StrictMode=Mw;ie.Suspense=Uw;ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ne;ie.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Ne.H.useMemoCache(t)}};ie.cache=function(t){return function(){return t.apply(null,arguments)}};ie.cacheSignal=function(){return null};ie.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=f0({},t.props),r=t.key;if(e!=null)for(s in e.key!==void 0&&(r=""+e.key),e)!g0.call(e,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&e.ref===void 0||(i[s]=e[s]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+2];i.children=a}return Um(t.type,r,i)};ie.createContext=function(t){return t={$$typeof:Lw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:kw,_context:t},t};ie.createElement=function(t,e,n){var i,r={},s=null;if(e!=null)for(i in e.key!==void 0&&(s=""+e.key),e)g0.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return Um(t,s,r)};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:Pw,render:t}};ie.isValidElement=jm;ie.lazy=function(t){return{$$typeof:c0,_payload:{_status:-1,_result:t},_init:Gw}};ie.memo=function(t,e){return{$$typeof:jw,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=Ne.T,n={};Ne.T=n;try{var i=t(),r=Ne.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(ld,Hy)}catch(s){Hy(s)}finally{e!==null&&n.types!==null&&(e.types=n.types),Ne.T=e}};ie.unstable_useCacheRefresh=function(){return Ne.H.useCacheRefresh()};ie.use=function(t){return Ne.H.use(t)};ie.useActionState=function(t,e,n){return Ne.H.useActionState(t,e,n)};ie.useCallback=function(t,e){return Ne.H.useCallback(t,e)};ie.useContext=function(t){return Ne.H.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t,e){return Ne.H.useDeferredValue(t,e)};ie.useEffect=function(t,e){return Ne.H.useEffect(t,e)};ie.useEffectEvent=function(t){return Ne.H.useEffectEvent(t)};ie.useId=function(){return Ne.H.useId()};ie.useImperativeHandle=function(t,e,n){return Ne.H.useImperativeHandle(t,e,n)};ie.useInsertionEffect=function(t,e){return Ne.H.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return Ne.H.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return Ne.H.useMemo(t,e)};ie.useOptimistic=function(t,e){return Ne.H.useOptimistic(t,e)};ie.useReducer=function(t,e,n){return Ne.H.useReducer(t,e,n)};ie.useRef=function(t){return Ne.H.useRef(t)};ie.useState=function(t){return Ne.H.useState(t)};ie.useSyncExternalStore=function(t,e,n){return Ne.H.useSyncExternalStore(t,e,n)};ie.useTransition=function(){return Ne.H.useTransition()};ie.version="19.2.0";u0.exports=ie;var D=u0.exports;const $w=Iw(D);var p0={exports:{}},Xc={},y0={exports:{}},_0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,k){var F=j.length;j.push(k);e:for(;0<F;){var q=F-1>>>1,X=j[q];if(0<r(X,k))j[q]=k,j[F]=X,F=q;else break e}}function n(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var k=j[0],F=j.pop();if(F!==k){j[0]=F;e:for(var q=0,X=j.length,le=X>>>1;q<le;){var ke=2*(q+1)-1,ut=j[ke],ue=ke+1,Le=j[ue];if(0>r(ut,F))ue<X&&0>r(Le,ut)?(j[q]=Le,j[ue]=F,q=ue):(j[q]=ut,j[ke]=F,q=ke);else if(ue<X&&0>r(Le,F))j[q]=Le,j[ue]=F,q=ue;else break e}}return k}function r(j,k){var F=j.sortIndex-k.sortIndex;return F!==0?F:j.id-k.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],f=1,m=null,d=3,_=!1,x=!1,M=!1,N=!1,w=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function O(j){for(var k=n(c);k!==null;){if(k.callback===null)i(c);else if(k.startTime<=j)i(c),k.sortIndex=k.expirationTime,e(u,k);else break;k=n(c)}}function U(j){if(M=!1,O(j),!x)if(n(u)!==null)x=!0,Q||(Q=!0,b());else{var k=n(c);k!==null&&G(U,k.startTime-j)}}var Q=!1,y=-1,v=5,A=-1;function C(){return N?!0:!(t.unstable_now()-A<v)}function I(){if(N=!1,Q){var j=t.unstable_now();A=j;var k=!0;try{e:{x=!1,M&&(M=!1,T(y),y=-1),_=!0;var F=d;try{t:{for(O(j),m=n(u);m!==null&&!(m.expirationTime>j&&C());){var q=m.callback;if(typeof q=="function"){m.callback=null,d=m.priorityLevel;var X=q(m.expirationTime<=j);if(j=t.unstable_now(),typeof X=="function"){m.callback=X,O(j),k=!0;break t}m===n(u)&&i(u),O(j)}else i(u);m=n(u)}if(m!==null)k=!0;else{var le=n(c);le!==null&&G(U,le.startTime-j),k=!1}}break e}finally{m=null,d=F,_=!1}k=void 0}}finally{k?b():Q=!1}}}var b;if(typeof E=="function")b=function(){E(I)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,L=R.port2;R.port1.onmessage=I,b=function(){L.postMessage(null)}}else b=function(){w(I,0)};function G(j,k){y=w(function(){j(t.unstable_now())},k)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_next=function(j){switch(d){case 1:case 2:case 3:var k=3;break;default:k=d}var F=d;d=k;try{return j()}finally{d=F}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function(j,k){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var F=d;d=j;try{return k()}finally{d=F}},t.unstable_scheduleCallback=function(j,k,F){var q=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?q+F:q):F=q,j){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=F+X,j={id:f++,callback:k,priorityLevel:j,startTime:F,expirationTime:X,sortIndex:-1},F>q?(j.sortIndex=F,e(c,j),n(u)===null&&j===n(c)&&(M?(T(y),y=-1):M=!0,G(U,F-q))):(j.sortIndex=X,e(u,j),x||_||(x=!0,Q||(Q=!0,b()))),j},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(j){var k=d;return function(){var F=d;d=k;try{return j.apply(this,arguments)}finally{d=F}}}})(_0);y0.exports=_0;var Kw=y0.exports,v0={exports:{}},Dt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yw=D;function E0(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function wi(){}var Ct={d:{f:wi,r:function(){throw Error(E0(522))},D:wi,C:wi,L:wi,m:wi,X:wi,S:wi,M:wi},p:0,findDOMNode:null},Xw=Symbol.for("react.portal");function Ww(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xw,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var Eo=Yw.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Wc(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Dt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ct;Dt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(E0(299));return Ww(t,e,null,n)};Dt.flushSync=function(t){var e=Eo.T,n=Ct.p;try{if(Eo.T=null,Ct.p=2,t)return t()}finally{Eo.T=e,Ct.p=n,Ct.d.f()}};Dt.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,Ct.d.C(t,e))};Dt.prefetchDNS=function(t){typeof t=="string"&&Ct.d.D(t)};Dt.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=Wc(n,e.crossOrigin),r=typeof e.integrity=="string"?e.integrity:void 0,s=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?Ct.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&Ct.d.X(t,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Dt.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Wc(e.as,e.crossOrigin);Ct.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&Ct.d.M(t)};Dt.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=Wc(n,e.crossOrigin);Ct.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Dt.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Wc(e.as,e.crossOrigin);Ct.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else Ct.d.m(t)};Dt.requestFormReset=function(t){Ct.d.r(t)};Dt.unstable_batchedUpdates=function(t,e){return t(e)};Dt.useFormState=function(t,e,n){return Eo.H.useFormState(t,e,n)};Dt.useFormStatus=function(){return Eo.H.useHostTransitionStatus()};Dt.version="19.2.0";function T0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(T0)}catch(t){console.error(t)}}T0(),v0.exports=Dt;var Jw=v0.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var it=Kw,b0=D,Zw=Jw;function B(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function S0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function fl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function A0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function w0(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Fy(t){if(fl(t)!==t)throw Error(B(188))}function eR(t){var e=t.alternate;if(!e){if(e=fl(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return Fy(r),t;if(s===i)return Fy(r),e;s=s.sibling}throw Error(B(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a)throw Error(B(189))}}if(n.alternate!==i)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function R0(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=R0(t),e!==null)return e;t=t.sibling}return null}var Oe=Object.assign,tR=Symbol.for("react.element"),eu=Symbol.for("react.transitional.element"),lo=Symbol.for("react.portal"),Ts=Symbol.for("react.fragment"),C0=Symbol.for("react.strict_mode"),ud=Symbol.for("react.profiler"),I0=Symbol.for("react.consumer"),$n=Symbol.for("react.context"),zm=Symbol.for("react.forward_ref"),cd=Symbol.for("react.suspense"),hd=Symbol.for("react.suspense_list"),Bm=Symbol.for("react.memo"),Ci=Symbol.for("react.lazy"),fd=Symbol.for("react.activity"),nR=Symbol.for("react.memo_cache_sentinel"),Gy=Symbol.iterator;function Ja(t){return t===null||typeof t!="object"?null:(t=Gy&&t[Gy]||t["@@iterator"],typeof t=="function"?t:null)}var iR=Symbol.for("react.client.reference");function dd(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===iR?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ts:return"Fragment";case ud:return"Profiler";case C0:return"StrictMode";case cd:return"Suspense";case hd:return"SuspenseList";case fd:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case lo:return"Portal";case $n:return t.displayName||"Context";case I0:return(t._context.displayName||"Context")+".Consumer";case zm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Bm:return e=t.displayName||null,e!==null?e:dd(t.type)||"Memo";case Ci:e=t._payload,t=t._init;try{return dd(t(e))}catch{}}return null}var uo=Array.isArray,ee=b0.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye=Zw.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Vr={pending:!1,data:null,method:null,action:null},md=[],bs=-1;function Ln(t){return{current:t}}function lt(t){0>bs||(t.current=md[bs],md[bs]=null,bs--)}function Re(t,e){bs++,md[bs]=t.current,t.current=e}var Cn=Ln(null),qo=Ln(null),Hi=Ln(null),Ju=Ln(null);function Zu(t,e){switch(Re(Hi,e),Re(qo,t),Re(Cn,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?W_(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=W_(e),t=Kb(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}lt(Cn),Re(Cn,t)}function Gs(){lt(Cn),lt(qo),lt(Hi)}function gd(t){t.memoizedState!==null&&Re(Ju,t);var e=Cn.current,n=Kb(e,t.type);e!==n&&(Re(qo,t),Re(Cn,n))}function ec(t){qo.current===t&&(lt(Cn),lt(qo)),Ju.current===t&&(lt(Ju),Zo._currentValue=Vr)}var uf,Qy;function Ir(t){if(uf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);uf=e&&e[1]||"",Qy=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+uf+t+Qy}var cf=!1;function hf(t,e){if(!t||cf)return"";cf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var m=function(){throw Error()};if(Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(_){var d=_}Reflect.construct(t,[],m)}else{try{m.call()}catch(_){d=_}t.call(m.prototype)}}else{try{throw Error()}catch(_){d=_}(m=t())&&typeof m.catch=="function"&&m.catch(function(){})}}catch(_){if(_&&d&&typeof _.stack=="string")return[_.stack,d.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],l=s[1];if(a&&l){var u=a.split(`
`),c=l.split(`
`);for(r=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(i===u.length||r===c.length)for(i=u.length-1,r=c.length-1;1<=i&&0<=r&&u[i]!==c[r];)r--;for(;1<=i&&0<=r;i--,r--)if(u[i]!==c[r]){if(i!==1||r!==1)do if(i--,r--,0>r||u[i]!==c[r]){var f=`
`+u[i].replace(" at new "," at ");return t.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",t.displayName)),f}while(1<=i&&0<=r);break}}}finally{cf=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Ir(n):""}function rR(t,e){switch(t.tag){case 26:case 27:case 5:return Ir(t.type);case 16:return Ir("Lazy");case 13:return t.child!==e&&e!==null?Ir("Suspense Fallback"):Ir("Suspense");case 19:return Ir("SuspenseList");case 0:case 15:return hf(t.type,!1);case 11:return hf(t.type.render,!1);case 1:return hf(t.type,!0);case 31:return Ir("Activity");default:return""}}function $y(t){try{var e="",n=null;do e+=rR(t,n),n=t,t=t.return;while(t);return e}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var pd=Object.prototype.hasOwnProperty,qm=it.unstable_scheduleCallback,ff=it.unstable_cancelCallback,sR=it.unstable_shouldYield,aR=it.unstable_requestPaint,Qt=it.unstable_now,oR=it.unstable_getCurrentPriorityLevel,x0=it.unstable_ImmediatePriority,D0=it.unstable_UserBlockingPriority,tc=it.unstable_NormalPriority,lR=it.unstable_LowPriority,N0=it.unstable_IdlePriority,uR=it.log,cR=it.unstable_setDisableYieldValue,dl=null,$t=null;function Pi(t){if(typeof uR=="function"&&cR(t),$t&&typeof $t.setStrictMode=="function")try{$t.setStrictMode(dl,t)}catch{}}var Kt=Math.clz32?Math.clz32:dR,hR=Math.log,fR=Math.LN2;function dR(t){return t>>>=0,t===0?32:31-(hR(t)/fR|0)|0}var tu=256,nu=262144,iu=4194304;function xr(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Jc(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var l=i&134217727;return l!==0?(i=l&~s,i!==0?r=xr(i):(a&=l,a!==0?r=xr(a):n||(n=l&~t,n!==0&&(r=xr(n))))):(l=i&~s,l!==0?r=xr(l):a!==0?r=xr(a):n||(n=i&~t,n!==0&&(r=xr(n)))),r===0?0:e!==0&&e!==r&&!(e&s)&&(s=r&-r,n=e&-e,s>=n||s===32&&(n&4194048)!==0)?e:r}function ml(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function mR(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function O0(){var t=iu;return iu<<=1,!(iu&62914560)&&(iu=4194304),t}function df(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function gl(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function gR(t,e,n,i,r,s){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var l=t.entanglements,u=t.expirationTimes,c=t.hiddenUpdates;for(n=a&~n;0<n;){var f=31-Kt(n),m=1<<f;l[f]=0,u[f]=-1;var d=c[f];if(d!==null)for(c[f]=null,f=0;f<d.length;f++){var _=d[f];_!==null&&(_.lane&=-536870913)}n&=~m}i!==0&&M0(t,i,0),s!==0&&r===0&&t.tag!==0&&(t.suspendedLanes|=s&~(a&~e))}function M0(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-Kt(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&261930}function V0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Kt(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}function k0(t,e){var n=e&-e;return n=n&42?1:Hm(n),n&(t.suspendedLanes|e)?0:n}function Hm(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Fm(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function L0(){var t=ye.p;return t!==0?t:(t=window.event,t===void 0?32:s1(t.type))}function Ky(t,e){var n=ye.p;try{return ye.p=t,e()}finally{ye.p=n}}var dr=Math.random().toString(36).slice(2),ft="__reactFiber$"+dr,Ut="__reactProps$"+dr,fa="__reactContainer$"+dr,yd="__reactEvents$"+dr,pR="__reactListeners$"+dr,yR="__reactHandles$"+dr,Yy="__reactResources$"+dr,pl="__reactMarker$"+dr;function Gm(t){delete t[ft],delete t[Ut],delete t[yd],delete t[pR],delete t[yR]}function Ss(t){var e=t[ft];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fa]||n[ft]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=nv(t);t!==null;){if(n=t[ft])return n;t=nv(t)}return e}t=n,n=t.parentNode}return null}function da(t){if(t=t[ft]||t[fa]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function co(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(B(33))}function Vs(t){var e=t[Yy];return e||(e=t[Yy]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function ot(t){t[pl]=!0}var P0=new Set,U0={};function Jr(t,e){Qs(t,e),Qs(t+"Capture",e)}function Qs(t,e){for(U0[t]=e,t=0;t<e.length;t++)P0.add(e[t])}var _R=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xy={},Wy={};function vR(t){return pd.call(Wy,t)?!0:pd.call(Xy,t)?!1:_R.test(t)?Wy[t]=!0:(Xy[t]=!0,!1)}function wu(t,e,n){if(vR(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function ru(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Un(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}function Zt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function j0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ER(t,e,n){var i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,s=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _d(t){if(!t._valueTracker){var e=j0(t)?"checked":"value";t._valueTracker=ER(t,e,""+t[e])}}function z0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=j0(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function nc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var TR=/[\n"\\]/g;function nn(t){return t.replace(TR,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function vd(t,e,n,i,r,s,a,l){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Zt(e)):t.value!==""+Zt(e)&&(t.value=""+Zt(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?Ed(t,a,Zt(e)):n!=null?Ed(t,a,Zt(n)):i!=null&&t.removeAttribute("value"),r==null&&s!=null&&(t.defaultChecked=!!s),r!=null&&(t.checked=r&&typeof r!="function"&&typeof r!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.name=""+Zt(l):t.removeAttribute("name")}function B0(t,e,n,i,r,s,a,l){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.type=s),e!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||e!=null)){_d(t);return}n=n!=null?""+Zt(n):"",e=e!=null?""+Zt(e):n,l||e===t.value||(t.value=e),t.defaultValue=e}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=l?t.checked:!!i,t.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a),_d(t)}function Ed(t,e,n){e==="number"&&nc(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function ks(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Zt(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function q0(t,e,n){if(e!=null&&(e=""+Zt(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Zt(n):""}function H0(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(B(92));if(uo(i)){if(1<i.length)throw Error(B(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=Zt(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i),_d(t)}function $s(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var bR=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jy(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||bR.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function F0(t,e,n){if(e!=null&&typeof e!="object")throw Error(B(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var r in e)i=e[r],e.hasOwnProperty(r)&&n[r]!==i&&Jy(t,r,i)}else for(var s in e)e.hasOwnProperty(s)&&Jy(t,s,e[s])}function Qm(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var SR=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),AR=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ru(t){return AR.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Kn(){}var Td=null;function $m(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var As=null,Ls=null;function Zy(t){var e=da(t);if(e&&(t=e.stateNode)){var n=t[Ut]||null;e:switch(t=e.stateNode,e.type){case"input":if(vd(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+nn(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=i[Ut]||null;if(!r)throw Error(B(90));vd(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&z0(i)}break e;case"textarea":q0(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&ks(t,!!n.multiple,e,!1)}}}var mf=!1;function G0(t,e,n){if(mf)return t(e,n);mf=!0;try{var i=t(e);return i}finally{if(mf=!1,(As!==null||Ls!==null)&&(ch(),As&&(e=As,t=Ls,Ls=As=null,Zy(e),t)))for(e=0;e<t.length;e++)Zy(t[e])}}function Ho(t,e){var n=t.stateNode;if(n===null)return null;var i=n[Ut]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bd=!1;if(ri)try{var Za={};Object.defineProperty(Za,"passive",{get:function(){bd=!0}}),window.addEventListener("test",Za,Za),window.removeEventListener("test",Za,Za)}catch{bd=!1}var Ui=null,Km=null,Cu=null;function Q0(){if(Cu)return Cu;var t,e=Km,n=e.length,i,r="value"in Ui?Ui.value:Ui.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[s-i];i++);return Cu=r.slice(t,1<i?1-i:void 0)}function Iu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function su(){return!0}function e_(){return!1}function jt(t){function e(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?su:e_,this.isPropagationStopped=e_,this}return Oe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=su)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=su)},persist:function(){},isPersistent:su}),e}var Zr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zc=jt(Zr),yl=Oe({},Zr,{view:0,detail:0}),wR=jt(yl),gf,pf,eo,eh=Oe({},yl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ym,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==eo&&(eo&&t.type==="mousemove"?(gf=t.screenX-eo.screenX,pf=t.screenY-eo.screenY):pf=gf=0,eo=t),gf)},movementY:function(t){return"movementY"in t?t.movementY:pf}}),t_=jt(eh),RR=Oe({},eh,{dataTransfer:0}),CR=jt(RR),IR=Oe({},yl,{relatedTarget:0}),yf=jt(IR),xR=Oe({},Zr,{animationName:0,elapsedTime:0,pseudoElement:0}),DR=jt(xR),NR=Oe({},Zr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),OR=jt(NR),MR=Oe({},Zr,{data:0}),n_=jt(MR),VR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=LR[t])?!!e[t]:!1}function Ym(){return PR}var UR=Oe({},yl,{key:function(t){if(t.key){var e=VR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Iu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?kR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ym,charCode:function(t){return t.type==="keypress"?Iu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Iu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jR=jt(UR),zR=Oe({},eh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),i_=jt(zR),BR=Oe({},yl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ym}),qR=jt(BR),HR=Oe({},Zr,{propertyName:0,elapsedTime:0,pseudoElement:0}),FR=jt(HR),GR=Oe({},eh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),QR=jt(GR),$R=Oe({},Zr,{newState:0,oldState:0}),KR=jt($R),YR=[9,13,27,32],Xm=ri&&"CompositionEvent"in window,To=null;ri&&"documentMode"in document&&(To=document.documentMode);var XR=ri&&"TextEvent"in window&&!To,$0=ri&&(!Xm||To&&8<To&&11>=To),r_=" ",s_=!1;function K0(t,e){switch(t){case"keyup":return YR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Y0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ws=!1;function WR(t,e){switch(t){case"compositionend":return Y0(e);case"keypress":return e.which!==32?null:(s_=!0,r_);case"textInput":return t=e.data,t===r_&&s_?null:t;default:return null}}function JR(t,e){if(ws)return t==="compositionend"||!Xm&&K0(t,e)?(t=Q0(),Cu=Km=Ui=null,ws=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $0&&e.locale!=="ko"?null:e.data;default:return null}}var ZR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function a_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ZR[t.type]:e==="textarea"}function X0(t,e,n,i){As?Ls?Ls.push(i):Ls=[i]:As=i,e=Ec(e,"onChange"),0<e.length&&(n=new Zc("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var bo=null,Fo=null;function eC(t){Gb(t,0)}function th(t){var e=co(t);if(z0(e))return t}function o_(t,e){if(t==="change")return e}var W0=!1;if(ri){var _f;if(ri){var vf="oninput"in document;if(!vf){var l_=document.createElement("div");l_.setAttribute("oninput","return;"),vf=typeof l_.oninput=="function"}_f=vf}else _f=!1;W0=_f&&(!document.documentMode||9<document.documentMode)}function u_(){bo&&(bo.detachEvent("onpropertychange",J0),Fo=bo=null)}function J0(t){if(t.propertyName==="value"&&th(Fo)){var e=[];X0(e,Fo,t,$m(t)),G0(eC,e)}}function tC(t,e,n){t==="focusin"?(u_(),bo=e,Fo=n,bo.attachEvent("onpropertychange",J0)):t==="focusout"&&u_()}function nC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return th(Fo)}function iC(t,e){if(t==="click")return th(e)}function rC(t,e){if(t==="input"||t==="change")return th(e)}function sC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xt=typeof Object.is=="function"?Object.is:sC;function Go(t,e){if(Xt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!pd.call(e,r)||!Xt(t[r],e[r]))return!1}return!0}function c_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function h_(t,e){var n=c_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=c_(n)}}function Z0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Z0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function eT(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=nc(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=nc(t.document)}return e}function Wm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var aC=ri&&"documentMode"in document&&11>=document.documentMode,Rs=null,Sd=null,So=null,Ad=!1;function f_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ad||Rs==null||Rs!==nc(i)||(i=Rs,"selectionStart"in i&&Wm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),So&&Go(So,i)||(So=i,i=Ec(Sd,"onSelect"),0<i.length&&(e=new Zc("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Rs)))}function Rr(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Cs={animationend:Rr("Animation","AnimationEnd"),animationiteration:Rr("Animation","AnimationIteration"),animationstart:Rr("Animation","AnimationStart"),transitionrun:Rr("Transition","TransitionRun"),transitionstart:Rr("Transition","TransitionStart"),transitioncancel:Rr("Transition","TransitionCancel"),transitionend:Rr("Transition","TransitionEnd")},Ef={},tT={};ri&&(tT=document.createElement("div").style,"AnimationEvent"in window||(delete Cs.animationend.animation,delete Cs.animationiteration.animation,delete Cs.animationstart.animation),"TransitionEvent"in window||delete Cs.transitionend.transition);function es(t){if(Ef[t])return Ef[t];if(!Cs[t])return t;var e=Cs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in tT)return Ef[t]=e[n];return t}var nT=es("animationend"),iT=es("animationiteration"),rT=es("animationstart"),oC=es("transitionrun"),lC=es("transitionstart"),uC=es("transitioncancel"),sT=es("transitionend"),aT=new Map,wd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wd.push("scrollEnd");function _n(t,e){aT.set(t,e),Jr(e,[t])}var ic=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Jt=[],Is=0,Jm=0;function nh(){for(var t=Is,e=Jm=Is=0;e<t;){var n=Jt[e];Jt[e++]=null;var i=Jt[e];Jt[e++]=null;var r=Jt[e];Jt[e++]=null;var s=Jt[e];if(Jt[e++]=null,i!==null&&r!==null){var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}s!==0&&oT(n,r,s)}}function ih(t,e,n,i){Jt[Is++]=t,Jt[Is++]=e,Jt[Is++]=n,Jt[Is++]=i,Jm|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function Zm(t,e,n,i){return ih(t,e,n,i),rc(t)}function ts(t,e){return ih(t,null,null,e),rc(t)}function oT(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=t.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(t=s.stateNode,t===null||t._visibility&1||(r=!0)),t=s,s=s.return;return t.tag===3?(s=t.stateNode,r&&e!==null&&(r=31-Kt(n),t=s.hiddenUpdates,i=t[r],i===null?t[r]=[e]:i.push(e),e.lane=n|536870912),s):null}function rc(t){if(50<Oo)throw Oo=0,Qd=null,Error(B(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var xs={};function cC(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ht(t,e,n,i){return new cC(t,e,n,i)}function eg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Jn(t,e){var n=t.alternate;return n===null?(n=Ht(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function lT(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function xu(t,e,n,i,r,s){var a=0;if(i=t,typeof t=="function")eg(t)&&(a=1);else if(typeof t=="string")a=gI(t,n,Cn.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case fd:return t=Ht(31,n,e,r),t.elementType=fd,t.lanes=s,t;case Ts:return kr(n.children,r,s,e);case C0:a=8,r|=24;break;case ud:return t=Ht(12,n,e,r|2),t.elementType=ud,t.lanes=s,t;case cd:return t=Ht(13,n,e,r),t.elementType=cd,t.lanes=s,t;case hd:return t=Ht(19,n,e,r),t.elementType=hd,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $n:a=10;break e;case I0:a=9;break e;case zm:a=11;break e;case Bm:a=14;break e;case Ci:a=16,i=null;break e}a=29,n=Error(B(130,t===null?"null":typeof t,"")),i=null}return e=Ht(a,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function kr(t,e,n,i){return t=Ht(7,t,i,e),t.lanes=n,t}function Tf(t,e,n){return t=Ht(6,t,null,e),t.lanes=n,t}function uT(t){var e=Ht(18,null,null,0);return e.stateNode=t,e}function bf(t,e,n){return e=Ht(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var d_=new WeakMap;function rn(t,e){if(typeof t=="object"&&t!==null){var n=d_.get(t);return n!==void 0?n:(e={value:t,source:e,stack:$y(e)},d_.set(t,e),e)}return{value:t,source:e,stack:$y(e)}}var Ds=[],Ns=0,sc=null,Qo=0,en=[],tn=0,ir=null,An=1,wn="";function Fn(t,e){Ds[Ns++]=Qo,Ds[Ns++]=sc,sc=t,Qo=e}function cT(t,e,n){en[tn++]=An,en[tn++]=wn,en[tn++]=ir,ir=t;var i=An;t=wn;var r=32-Kt(i)-1;i&=~(1<<r),n+=1;var s=32-Kt(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,An=1<<32-Kt(e)+r|n<<r|i,wn=s+t}else An=1<<s|n<<r|i,wn=t}function tg(t){t.return!==null&&(Fn(t,1),cT(t,1,0))}function ng(t){for(;t===sc;)sc=Ds[--Ns],Ds[Ns]=null,Qo=Ds[--Ns],Ds[Ns]=null;for(;t===ir;)ir=en[--tn],en[tn]=null,wn=en[--tn],en[tn]=null,An=en[--tn],en[tn]=null}function hT(t,e){en[tn++]=An,en[tn++]=wn,en[tn++]=ir,An=e.id,wn=e.overflow,ir=t}var dt=null,xe=null,me=!1,Fi=null,sn=!1,Rd=Error(B(519));function rr(t){var e=Error(B(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $o(rn(e,t)),Rd}function m_(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[ft]=t,e[Ut]=i,n){case"dialog":ae("cancel",e),ae("close",e);break;case"iframe":case"object":case"embed":ae("load",e);break;case"video":case"audio":for(n=0;n<Wo.length;n++)ae(Wo[n],e);break;case"source":ae("error",e);break;case"img":case"image":case"link":ae("error",e),ae("load",e);break;case"details":ae("toggle",e);break;case"input":ae("invalid",e),B0(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":ae("invalid",e);break;case"textarea":ae("invalid",e),H0(e,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||$b(e.textContent,n)?(i.popover!=null&&(ae("beforetoggle",e),ae("toggle",e)),i.onScroll!=null&&ae("scroll",e),i.onScrollEnd!=null&&ae("scrollend",e),i.onClick!=null&&(e.onclick=Kn),e=!0):e=!1,e||rr(t,!0)}function g_(t){for(dt=t.return;dt;)switch(dt.tag){case 5:case 31:case 13:sn=!1;return;case 27:case 3:sn=!0;return;default:dt=dt.return}}function cs(t){if(t!==dt)return!1;if(!me)return g_(t),me=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Wd(t.type,t.memoizedProps)),n=!n),n&&xe&&rr(t),g_(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));xe=tv(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));xe=tv(t)}else e===27?(e=xe,mr(t.type)?(t=tm,tm=null,xe=t):xe=e):xe=dt?un(t.stateNode.nextSibling):null;return!0}function qr(){xe=dt=null,me=!1}function Sf(){var t=Fi;return t!==null&&(Vt===null?Vt=t:Vt.push.apply(Vt,t),Fi=null),t}function $o(t){Fi===null?Fi=[t]:Fi.push(t)}var Cd=Ln(null),ns=null,Yn=null;function xi(t,e,n){Re(Cd,e._currentValue),e._currentValue=n}function Zn(t){t._currentValue=Cd.current,lt(Cd)}function Id(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function xd(t,e,n,i){var r=t.child;for(r!==null&&(r.return=t);r!==null;){var s=r.dependencies;if(s!==null){var a=r.child;s=s.firstContext;e:for(;s!==null;){var l=s;s=r;for(var u=0;u<e.length;u++)if(l.context===e[u]){s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Id(s.return,n,t),i||(a=null);break e}s=l.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(B(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),Id(a,n,t),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===t){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function ma(t,e,n,i){t=null;for(var r=e,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(B(387));if(a=a.memoizedProps,a!==null){var l=r.type;Xt(r.pendingProps.value,a.value)||(t!==null?t.push(l):t=[l])}}else if(r===Ju.current){if(a=r.alternate,a===null)throw Error(B(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(t!==null?t.push(Zo):t=[Zo])}r=r.return}t!==null&&xd(e,t,n,i),e.flags|=262144}function ac(t){for(t=t.firstContext;t!==null;){if(!Xt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Hr(t){ns=t,Yn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function gt(t){return fT(ns,t)}function au(t,e){return ns===null&&Hr(t),fT(t,e)}function fT(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Yn===null){if(t===null)throw Error(B(308));Yn=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Yn=Yn.next=e;return n}var hC=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},fC=it.unstable_scheduleCallback,dC=it.unstable_NormalPriority,Xe={$$typeof:$n,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ig(){return{controller:new hC,data:new Map,refCount:0}}function _l(t){t.refCount--,t.refCount===0&&fC(dC,function(){t.controller.abort()})}var Ao=null,Dd=0,Ks=0,Ps=null;function mC(t,e){if(Ao===null){var n=Ao=[];Dd=0,Ks=Ig(),Ps={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Dd++,e.then(p_,p_),e}function p_(){if(--Dd===0&&Ao!==null){Ps!==null&&(Ps.status="fulfilled");var t=Ao;Ao=null,Ks=0,Ps=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function gC(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var r=0;r<n.length;r++)(0,n[r])(e)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var y_=ee.S;ee.S=function(t,e){Rb=Qt(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&mC(t,e),y_!==null&&y_(t,e)};var Lr=Ln(null);function rg(){var t=Lr.current;return t!==null?t:Ae.pooledCache}function Du(t,e){e===null?Re(Lr,Lr.current):Re(Lr,e.pool)}function dT(){var t=rg();return t===null?null:{parent:Xe._currentValue,pool:t}}var ga=Error(B(460)),sg=Error(B(474)),rh=Error(B(542)),oc={then:function(){}};function __(t){return t=t.status,t==="fulfilled"||t==="rejected"}function mT(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Kn,Kn),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,E_(t),t;default:if(typeof e.status=="string")e.then(Kn,Kn);else{if(t=Ae,t!==null&&100<t.shellSuspendCounter)throw Error(B(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var r=e;r.status="fulfilled",r.value=i}},function(i){if(e.status==="pending"){var r=e;r.status="rejected",r.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,E_(t),t}throw Pr=e,ga}}function Dr(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Pr=n,ga):n}}var Pr=null;function v_(){if(Pr===null)throw Error(B(459));var t=Pr;return Pr=null,t}function E_(t){if(t===ga||t===rh)throw Error(B(483))}var Us=null,Ko=0;function ou(t){var e=Ko;return Ko+=1,Us===null&&(Us=[]),mT(Us,t,e)}function to(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function lu(t,e){throw e.$$typeof===tR?Error(B(525)):(t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function gT(t){function e(w,T){if(t){var E=w.deletions;E===null?(w.deletions=[T],w.flags|=16):E.push(T)}}function n(w,T){if(!t)return null;for(;T!==null;)e(w,T),T=T.sibling;return null}function i(w){for(var T=new Map;w!==null;)w.key!==null?T.set(w.key,w):T.set(w.index,w),w=w.sibling;return T}function r(w,T){return w=Jn(w,T),w.index=0,w.sibling=null,w}function s(w,T,E){return w.index=E,t?(E=w.alternate,E!==null?(E=E.index,E<T?(w.flags|=67108866,T):E):(w.flags|=67108866,T)):(w.flags|=1048576,T)}function a(w){return t&&w.alternate===null&&(w.flags|=67108866),w}function l(w,T,E,O){return T===null||T.tag!==6?(T=Tf(E,w.mode,O),T.return=w,T):(T=r(T,E),T.return=w,T)}function u(w,T,E,O){var U=E.type;return U===Ts?f(w,T,E.props.children,O,E.key):T!==null&&(T.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Ci&&Dr(U)===T.type)?(T=r(T,E.props),to(T,E),T.return=w,T):(T=xu(E.type,E.key,E.props,null,w.mode,O),to(T,E),T.return=w,T)}function c(w,T,E,O){return T===null||T.tag!==4||T.stateNode.containerInfo!==E.containerInfo||T.stateNode.implementation!==E.implementation?(T=bf(E,w.mode,O),T.return=w,T):(T=r(T,E.children||[]),T.return=w,T)}function f(w,T,E,O,U){return T===null||T.tag!==7?(T=kr(E,w.mode,O,U),T.return=w,T):(T=r(T,E),T.return=w,T)}function m(w,T,E){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return T=Tf(""+T,w.mode,E),T.return=w,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case eu:return E=xu(T.type,T.key,T.props,null,w.mode,E),to(E,T),E.return=w,E;case lo:return T=bf(T,w.mode,E),T.return=w,T;case Ci:return T=Dr(T),m(w,T,E)}if(uo(T)||Ja(T))return T=kr(T,w.mode,E,null),T.return=w,T;if(typeof T.then=="function")return m(w,ou(T),E);if(T.$$typeof===$n)return m(w,au(w,T),E);lu(w,T)}return null}function d(w,T,E,O){var U=T!==null?T.key:null;if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return U!==null?null:l(w,T,""+E,O);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case eu:return E.key===U?u(w,T,E,O):null;case lo:return E.key===U?c(w,T,E,O):null;case Ci:return E=Dr(E),d(w,T,E,O)}if(uo(E)||Ja(E))return U!==null?null:f(w,T,E,O,null);if(typeof E.then=="function")return d(w,T,ou(E),O);if(E.$$typeof===$n)return d(w,T,au(w,E),O);lu(w,E)}return null}function _(w,T,E,O,U){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return w=w.get(E)||null,l(T,w,""+O,U);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case eu:return w=w.get(O.key===null?E:O.key)||null,u(T,w,O,U);case lo:return w=w.get(O.key===null?E:O.key)||null,c(T,w,O,U);case Ci:return O=Dr(O),_(w,T,E,O,U)}if(uo(O)||Ja(O))return w=w.get(E)||null,f(T,w,O,U,null);if(typeof O.then=="function")return _(w,T,E,ou(O),U);if(O.$$typeof===$n)return _(w,T,E,au(T,O),U);lu(T,O)}return null}function x(w,T,E,O){for(var U=null,Q=null,y=T,v=T=0,A=null;y!==null&&v<E.length;v++){y.index>v?(A=y,y=null):A=y.sibling;var C=d(w,y,E[v],O);if(C===null){y===null&&(y=A);break}t&&y&&C.alternate===null&&e(w,y),T=s(C,T,v),Q===null?U=C:Q.sibling=C,Q=C,y=A}if(v===E.length)return n(w,y),me&&Fn(w,v),U;if(y===null){for(;v<E.length;v++)y=m(w,E[v],O),y!==null&&(T=s(y,T,v),Q===null?U=y:Q.sibling=y,Q=y);return me&&Fn(w,v),U}for(y=i(y);v<E.length;v++)A=_(y,w,v,E[v],O),A!==null&&(t&&A.alternate!==null&&y.delete(A.key===null?v:A.key),T=s(A,T,v),Q===null?U=A:Q.sibling=A,Q=A);return t&&y.forEach(function(I){return e(w,I)}),me&&Fn(w,v),U}function M(w,T,E,O){if(E==null)throw Error(B(151));for(var U=null,Q=null,y=T,v=T=0,A=null,C=E.next();y!==null&&!C.done;v++,C=E.next()){y.index>v?(A=y,y=null):A=y.sibling;var I=d(w,y,C.value,O);if(I===null){y===null&&(y=A);break}t&&y&&I.alternate===null&&e(w,y),T=s(I,T,v),Q===null?U=I:Q.sibling=I,Q=I,y=A}if(C.done)return n(w,y),me&&Fn(w,v),U;if(y===null){for(;!C.done;v++,C=E.next())C=m(w,C.value,O),C!==null&&(T=s(C,T,v),Q===null?U=C:Q.sibling=C,Q=C);return me&&Fn(w,v),U}for(y=i(y);!C.done;v++,C=E.next())C=_(y,w,v,C.value,O),C!==null&&(t&&C.alternate!==null&&y.delete(C.key===null?v:C.key),T=s(C,T,v),Q===null?U=C:Q.sibling=C,Q=C);return t&&y.forEach(function(b){return e(w,b)}),me&&Fn(w,v),U}function N(w,T,E,O){if(typeof E=="object"&&E!==null&&E.type===Ts&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case eu:e:{for(var U=E.key;T!==null;){if(T.key===U){if(U=E.type,U===Ts){if(T.tag===7){n(w,T.sibling),O=r(T,E.props.children),O.return=w,w=O;break e}}else if(T.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Ci&&Dr(U)===T.type){n(w,T.sibling),O=r(T,E.props),to(O,E),O.return=w,w=O;break e}n(w,T);break}else e(w,T);T=T.sibling}E.type===Ts?(O=kr(E.props.children,w.mode,O,E.key),O.return=w,w=O):(O=xu(E.type,E.key,E.props,null,w.mode,O),to(O,E),O.return=w,w=O)}return a(w);case lo:e:{for(U=E.key;T!==null;){if(T.key===U)if(T.tag===4&&T.stateNode.containerInfo===E.containerInfo&&T.stateNode.implementation===E.implementation){n(w,T.sibling),O=r(T,E.children||[]),O.return=w,w=O;break e}else{n(w,T);break}else e(w,T);T=T.sibling}O=bf(E,w.mode,O),O.return=w,w=O}return a(w);case Ci:return E=Dr(E),N(w,T,E,O)}if(uo(E))return x(w,T,E,O);if(Ja(E)){if(U=Ja(E),typeof U!="function")throw Error(B(150));return E=U.call(E),M(w,T,E,O)}if(typeof E.then=="function")return N(w,T,ou(E),O);if(E.$$typeof===$n)return N(w,T,au(w,E),O);lu(w,E)}return typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint"?(E=""+E,T!==null&&T.tag===6?(n(w,T.sibling),O=r(T,E),O.return=w,w=O):(n(w,T),O=Tf(E,w.mode,O),O.return=w,w=O),a(w)):n(w,T)}return function(w,T,E,O){try{Ko=0;var U=N(w,T,E,O);return Us=null,U}catch(y){if(y===ga||y===rh)throw y;var Q=Ht(29,y,null,w.mode);return Q.lanes=O,Q.return=w,Q}finally{}}}var Fr=gT(!0),pT=gT(!1),Ii=!1;function ag(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nd(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Gi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Qi(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,pe&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,e=rc(t),oT(t,null,n),e}return ih(t,i,e,n),rc(t)}function wo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,V0(t,n)}}function Af(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Od=!1;function Ro(){if(Od){var t=Ps;if(t!==null)throw t}}function Co(t,e,n,i){Od=!1;var r=t.updateQueue;Ii=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var u=l,c=u.next;u.next=null,a===null?s=c:a.next=c,a=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=u))}if(s!==null){var m=r.baseState;a=0,f=c=u=null,l=s;do{var d=l.lane&-536870913,_=d!==l.lane;if(_?(de&d)===d:(i&d)===d){d!==0&&d===Ks&&(Od=!0),f!==null&&(f=f.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var x=t,M=l;d=e;var N=n;switch(M.tag){case 1:if(x=M.payload,typeof x=="function"){m=x.call(N,m,d);break e}m=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=M.payload,d=typeof x=="function"?x.call(N,m,d):x,d==null)break e;m=Oe({},m,d);break e;case 2:Ii=!0}}d=l.callback,d!==null&&(t.flags|=64,_&&(t.flags|=8192),_=r.callbacks,_===null?r.callbacks=[d]:_.push(d))}else _={lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=_,u=m):f=f.next=_,a|=d;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;_=l,l=_.next,_.next=null,r.lastBaseUpdate=_,r.shared.pending=null}}while(!0);f===null&&(u=m),r.baseState=u,r.firstBaseUpdate=c,r.lastBaseUpdate=f,s===null&&(r.shared.lanes=0),ar|=a,t.lanes=a,t.memoizedState=m}}function yT(t,e){if(typeof t!="function")throw Error(B(191,t));t.call(e)}function _T(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)yT(n[t],e)}var Ys=Ln(null),lc=Ln(0);function T_(t,e){t=li,Re(lc,t),Re(Ys,e),li=t|e.baseLanes}function Md(){Re(lc,li),Re(Ys,Ys.current)}function og(){li=lc.current,lt(Ys),lt(lc)}var Wt=Ln(null),ln=null;function Di(t){var e=t.alternate;Re(Fe,Fe.current&1),Re(Wt,t),ln===null&&(e===null||Ys.current!==null||e.memoizedState!==null)&&(ln=t)}function Vd(t){Re(Fe,Fe.current),Re(Wt,t),ln===null&&(ln=t)}function vT(t){t.tag===22?(Re(Fe,Fe.current),Re(Wt,t),ln===null&&(ln=t)):Ni()}function Ni(){Re(Fe,Fe.current),Re(Wt,Wt.current)}function qt(t){lt(Wt),ln===t&&(ln=null),lt(Fe)}var Fe=Ln(0);function uc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Zd(n)||em(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var si=0,re=null,be=null,Ke=null,cc=!1,js=!1,Gr=!1,hc=0,Yo=0,zs=null,pC=0;function ze(){throw Error(B(321))}function lg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Xt(t[n],e[n]))return!1;return!0}function ug(t,e,n,i,r,s){return si=s,re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ee.H=t===null||t.memoizedState===null?XT:Eg,Gr=!1,s=n(i,r),Gr=!1,js&&(s=TT(e,n,i,r)),ET(t),s}function ET(t){ee.H=Xo;var e=be!==null&&be.next!==null;if(si=0,Ke=be=re=null,cc=!1,Yo=0,zs=null,e)throw Error(B(300));t===null||Je||(t=t.dependencies,t!==null&&ac(t)&&(Je=!0))}function TT(t,e,n,i){re=t;var r=0;do{if(js&&(zs=null),Yo=0,js=!1,25<=r)throw Error(B(301));if(r+=1,Ke=be=null,t.updateQueue!=null){var s=t.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}ee.H=WT,s=e(n,i)}while(js);return s}function yC(){var t=ee.H,e=t.useState()[0];return e=typeof e.then=="function"?vl(e):e,t=t.useState()[0],(be!==null?be.memoizedState:null)!==t&&(re.flags|=1024),e}function cg(){var t=hc!==0;return hc=0,t}function hg(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function fg(t){if(cc){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}cc=!1}si=0,Ke=be=re=null,js=!1,Yo=hc=0,zs=null}function Rt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?re.memoizedState=Ke=t:Ke=Ke.next=t,Ke}function Ge(){if(be===null){var t=re.alternate;t=t!==null?t.memoizedState:null}else t=be.next;var e=Ke===null?re.memoizedState:Ke.next;if(e!==null)Ke=e,be=t;else{if(t===null)throw re.alternate===null?Error(B(467)):Error(B(310));be=t,t={memoizedState:be.memoizedState,baseState:be.baseState,baseQueue:be.baseQueue,queue:be.queue,next:null},Ke===null?re.memoizedState=Ke=t:Ke=Ke.next=t}return Ke}function sh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vl(t){var e=Yo;return Yo+=1,zs===null&&(zs=[]),t=mT(zs,t,e),e=re,(Ke===null?e.memoizedState:Ke.next)===null&&(e=e.alternate,ee.H=e===null||e.memoizedState===null?XT:Eg),t}function ah(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return vl(t);if(t.$$typeof===$n)return gt(t)}throw Error(B(438,String(t)))}function dg(t){var e=null,n=re.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=re.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(r){return r.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=sh(),re.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=nR;return e.index++,n}function ai(t,e){return typeof e=="function"?e(t):e}function Nu(t){var e=Ge();return mg(e,be,t)}function mg(t,e,n){var i=t.queue;if(i===null)throw Error(B(311));i.lastRenderedReducer=n;var r=t.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}e.baseQueue=r=s,i.pending=null}if(s=t.baseState,r===null)t.memoizedState=s;else{e=r.next;var l=a=null,u=null,c=e,f=!1;do{var m=c.lane&-536870913;if(m!==c.lane?(de&m)===m:(si&m)===m){var d=c.revertLane;if(d===0)u!==null&&(u=u.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),m===Ks&&(f=!0);else if((si&d)===d){c=c.next,d===Ks&&(f=!0);continue}else m={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},u===null?(l=u=m,a=s):u=u.next=m,re.lanes|=d,ar|=d;m=c.action,Gr&&n(s,m),s=c.hasEagerState?c.eagerState:n(s,m)}else d={lane:m,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},u===null?(l=u=d,a=s):u=u.next=d,re.lanes|=m,ar|=m;c=c.next}while(c!==null&&c!==e);if(u===null?a=s:u.next=l,!Xt(s,t.memoizedState)&&(Je=!0,f&&(n=Ps,n!==null)))throw n;t.memoizedState=s,t.baseState=a,t.baseQueue=u,i.lastRenderedState=s}return r===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function wf(t){var e=Ge(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=t(s,a.action),a=a.next;while(a!==r);Xt(s,e.memoizedState)||(Je=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function bT(t,e,n){var i=re,r=Ge(),s=me;if(s){if(n===void 0)throw Error(B(407));n=n()}else n=e();var a=!Xt((be||r).memoizedState,n);if(a&&(r.memoizedState=n,Je=!0),r=r.queue,gg(wT.bind(null,i,r,t),[t]),r.getSnapshot!==e||a||Ke!==null&&Ke.memoizedState.tag&1){if(i.flags|=2048,Xs(9,{destroy:void 0},AT.bind(null,i,r,n,e),null),Ae===null)throw Error(B(349));s||si&127||ST(i,e,n)}return n}function ST(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=re.updateQueue,e===null?(e=sh(),re.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function AT(t,e,n,i){e.value=n,e.getSnapshot=i,RT(e)&&CT(t)}function wT(t,e,n){return n(function(){RT(e)&&CT(t)})}function RT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Xt(t,n)}catch{return!0}}function CT(t){var e=ts(t,2);e!==null&&Pt(e,t,2)}function kd(t){var e=Rt();if(typeof t=="function"){var n=t;if(t=n(),Gr){Pi(!0);try{n()}finally{Pi(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:t},e}function IT(t,e,n,i){return t.baseState=n,mg(t,be,typeof i=="function"?i:ai)}function _C(t,e,n,i,r){if(lh(t))throw Error(B(485));if(t=e.action,t!==null){var s={payload:r,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};ee.T!==null?n(!0):s.isTransition=!1,i(s),n=e.pending,n===null?(s.next=e.pending=s,xT(e,s)):(s.next=n.next,e.pending=n.next=s)}}function xT(t,e){var n=e.action,i=e.payload,r=t.state;if(e.isTransition){var s=ee.T,a={};ee.T=a;try{var l=n(r,i),u=ee.S;u!==null&&u(a,l),b_(t,e,l)}catch(c){Ld(t,e,c)}finally{s!==null&&a.types!==null&&(s.types=a.types),ee.T=s}}else try{s=n(r,i),b_(t,e,s)}catch(c){Ld(t,e,c)}}function b_(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){S_(t,e,i)},function(i){return Ld(t,e,i)}):S_(t,e,n)}function S_(t,e,n){e.status="fulfilled",e.value=n,DT(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,xT(t,n)))}function Ld(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,DT(e),e=e.next;while(e!==i)}t.action=null}function DT(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function NT(t,e){return e}function A_(t,e){if(me){var n=Ae.formState;if(n!==null){e:{var i=re;if(me){if(xe){t:{for(var r=xe,s=sn;r.nodeType!==8;){if(!s){r=null;break t}if(r=un(r.nextSibling),r===null){r=null;break t}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){xe=un(r.nextSibling),i=r.data==="F!";break e}}rr(i)}i=!1}i&&(e=n[0])}}return n=Rt(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:NT,lastRenderedState:e},n.queue=i,n=$T.bind(null,re,i),i.dispatch=n,i=kd(!1),s=vg.bind(null,re,!1,i.queue),i=Rt(),r={state:e,dispatch:null,action:t,pending:null},i.queue=r,n=_C.bind(null,re,r,s,n),r.dispatch=n,i.memoizedState=t,[e,n,!1]}function w_(t){var e=Ge();return OT(e,be,t)}function OT(t,e,n){if(e=mg(t,e,NT)[0],t=Nu(ai)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=vl(e)}catch(a){throw a===ga?rh:a}else i=e;e=Ge();var r=e.queue,s=r.dispatch;return n!==e.memoizedState&&(re.flags|=2048,Xs(9,{destroy:void 0},vC.bind(null,r,n),null)),[i,s,t]}function vC(t,e){t.action=e}function R_(t){var e=Ge(),n=be;if(n!==null)return OT(e,n,t);Ge(),e=e.memoizedState,n=Ge();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function Xs(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=re.updateQueue,e===null&&(e=sh(),re.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function MT(){return Ge().memoizedState}function Ou(t,e,n,i){var r=Rt();re.flags|=t,r.memoizedState=Xs(1|e,{destroy:void 0},n,i===void 0?null:i)}function oh(t,e,n,i){var r=Ge();i=i===void 0?null:i;var s=r.memoizedState.inst;be!==null&&i!==null&&lg(i,be.memoizedState.deps)?r.memoizedState=Xs(e,s,n,i):(re.flags|=t,r.memoizedState=Xs(1|e,s,n,i))}function C_(t,e){Ou(8390656,8,t,e)}function gg(t,e){oh(2048,8,t,e)}function EC(t){re.flags|=4;var e=re.updateQueue;if(e===null)e=sh(),re.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function VT(t){var e=Ge().memoizedState;return EC({ref:e,nextImpl:t}),function(){if(pe&2)throw Error(B(440));return e.impl.apply(void 0,arguments)}}function kT(t,e){return oh(4,2,t,e)}function LT(t,e){return oh(4,4,t,e)}function PT(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function UT(t,e,n){n=n!=null?n.concat([t]):null,oh(4,4,PT.bind(null,e,t),n)}function pg(){}function jT(t,e){var n=Ge();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&lg(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function zT(t,e){var n=Ge();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&lg(e,i[1]))return i[0];if(i=t(),Gr){Pi(!0);try{t()}finally{Pi(!1)}}return n.memoizedState=[i,e],i}function yg(t,e,n){return n===void 0||si&1073741824&&!(de&261930)?t.memoizedState=e:(t.memoizedState=n,t=Ib(),re.lanes|=t,ar|=t,n)}function BT(t,e,n,i){return Xt(n,e)?n:Ys.current!==null?(t=yg(t,n,i),Xt(t,e)||(Je=!0),t):!(si&42)||si&1073741824&&!(de&261930)?(Je=!0,t.memoizedState=n):(t=Ib(),re.lanes|=t,ar|=t,e)}function qT(t,e,n,i,r){var s=ye.p;ye.p=s!==0&&8>s?s:8;var a=ee.T,l={};ee.T=l,vg(t,!1,e,n);try{var u=r(),c=ee.S;if(c!==null&&c(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var f=gC(u,i);Io(t,e,f,Yt(t))}else Io(t,e,i,Yt(t))}catch(m){Io(t,e,{then:function(){},status:"rejected",reason:m},Yt())}finally{ye.p=s,a!==null&&l.types!==null&&(a.types=l.types),ee.T=a}}function TC(){}function Pd(t,e,n,i){if(t.tag!==5)throw Error(B(476));var r=HT(t).queue;qT(t,r,e,Vr,n===null?TC:function(){return FT(t),n(i)})}function HT(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Vr,baseState:Vr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:Vr},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function FT(t){var e=HT(t);e.next===null&&(e=t.alternate.memoizedState),Io(t,e.next.queue,{},Yt())}function _g(){return gt(Zo)}function GT(){return Ge().memoizedState}function QT(){return Ge().memoizedState}function bC(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=Yt();t=Gi(n);var i=Qi(e,t,n);i!==null&&(Pt(i,e,n),wo(i,e,n)),e={cache:ig()},t.payload=e;return}e=e.return}}function SC(t,e,n){var i=Yt();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},lh(t)?KT(e,n):(n=Zm(t,e,n,i),n!==null&&(Pt(n,t,i),YT(n,e,i)))}function $T(t,e,n){var i=Yt();Io(t,e,n,i)}function Io(t,e,n,i){var r={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(lh(t))KT(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,n);if(r.hasEagerState=!0,r.eagerState=l,Xt(l,a))return ih(t,e,r,0),Ae===null&&nh(),!1}catch{}finally{}if(n=Zm(t,e,r,i),n!==null)return Pt(n,t,i),YT(n,e,i),!0}return!1}function vg(t,e,n,i){if(i={lane:2,revertLane:Ig(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},lh(t)){if(e)throw Error(B(479))}else e=Zm(t,n,i,2),e!==null&&Pt(e,t,2)}function lh(t){var e=t.alternate;return t===re||e!==null&&e===re}function KT(t,e){js=cc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function YT(t,e,n){if(n&4194048){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,V0(t,n)}}var Xo={readContext:gt,use:ah,useCallback:ze,useContext:ze,useEffect:ze,useImperativeHandle:ze,useLayoutEffect:ze,useInsertionEffect:ze,useMemo:ze,useReducer:ze,useRef:ze,useState:ze,useDebugValue:ze,useDeferredValue:ze,useTransition:ze,useSyncExternalStore:ze,useId:ze,useHostTransitionStatus:ze,useFormState:ze,useActionState:ze,useOptimistic:ze,useMemoCache:ze,useCacheRefresh:ze};Xo.useEffectEvent=ze;var XT={readContext:gt,use:ah,useCallback:function(t,e){return Rt().memoizedState=[t,e===void 0?null:e],t},useContext:gt,useEffect:C_,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Ou(4194308,4,PT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ou(4194308,4,t,e)},useInsertionEffect:function(t,e){Ou(4,2,t,e)},useMemo:function(t,e){var n=Rt();e=e===void 0?null:e;var i=t();if(Gr){Pi(!0);try{t()}finally{Pi(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=Rt();if(n!==void 0){var r=n(e);if(Gr){Pi(!0);try{n(e)}finally{Pi(!1)}}}else r=e;return i.memoizedState=i.baseState=r,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},i.queue=t,t=t.dispatch=SC.bind(null,re,t),[i.memoizedState,t]},useRef:function(t){var e=Rt();return t={current:t},e.memoizedState=t},useState:function(t){t=kd(t);var e=t.queue,n=$T.bind(null,re,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:pg,useDeferredValue:function(t,e){var n=Rt();return yg(n,t,e)},useTransition:function(){var t=kd(!1);return t=qT.bind(null,re,t.queue,!0,!1),Rt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=re,r=Rt();if(me){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),Ae===null)throw Error(B(349));de&127||ST(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,C_(wT.bind(null,i,s,t),[t]),i.flags|=2048,Xs(9,{destroy:void 0},AT.bind(null,i,s,n,e),null),n},useId:function(){var t=Rt(),e=Ae.identifierPrefix;if(me){var n=wn,i=An;n=(i&~(1<<32-Kt(i)-1)).toString(32)+n,e="_"+e+"R_"+n,n=hc++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=pC++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:_g,useFormState:A_,useActionState:A_,useOptimistic:function(t){var e=Rt();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=vg.bind(null,re,!0,n),n.dispatch=e,[t,e]},useMemoCache:dg,useCacheRefresh:function(){return Rt().memoizedState=bC.bind(null,re)},useEffectEvent:function(t){var e=Rt(),n={impl:t};return e.memoizedState=n,function(){if(pe&2)throw Error(B(440));return n.impl.apply(void 0,arguments)}}},Eg={readContext:gt,use:ah,useCallback:jT,useContext:gt,useEffect:gg,useImperativeHandle:UT,useInsertionEffect:kT,useLayoutEffect:LT,useMemo:zT,useReducer:Nu,useRef:MT,useState:function(){return Nu(ai)},useDebugValue:pg,useDeferredValue:function(t,e){var n=Ge();return BT(n,be.memoizedState,t,e)},useTransition:function(){var t=Nu(ai)[0],e=Ge().memoizedState;return[typeof t=="boolean"?t:vl(t),e]},useSyncExternalStore:bT,useId:GT,useHostTransitionStatus:_g,useFormState:w_,useActionState:w_,useOptimistic:function(t,e){var n=Ge();return IT(n,be,t,e)},useMemoCache:dg,useCacheRefresh:QT};Eg.useEffectEvent=VT;var WT={readContext:gt,use:ah,useCallback:jT,useContext:gt,useEffect:gg,useImperativeHandle:UT,useInsertionEffect:kT,useLayoutEffect:LT,useMemo:zT,useReducer:wf,useRef:MT,useState:function(){return wf(ai)},useDebugValue:pg,useDeferredValue:function(t,e){var n=Ge();return be===null?yg(n,t,e):BT(n,be.memoizedState,t,e)},useTransition:function(){var t=wf(ai)[0],e=Ge().memoizedState;return[typeof t=="boolean"?t:vl(t),e]},useSyncExternalStore:bT,useId:GT,useHostTransitionStatus:_g,useFormState:R_,useActionState:R_,useOptimistic:function(t,e){var n=Ge();return be!==null?IT(n,be,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:dg,useCacheRefresh:QT};WT.useEffectEvent=VT;function Rf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Oe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ud={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Yt(),r=Gi(i);r.payload=e,n!=null&&(r.callback=n),e=Qi(t,r,i),e!==null&&(Pt(e,t,i),wo(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Yt(),r=Gi(i);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=Qi(t,r,i),e!==null&&(Pt(e,t,i),wo(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Yt(),i=Gi(n);i.tag=2,e!=null&&(i.callback=e),e=Qi(t,i,n),e!==null&&(Pt(e,t,n),wo(e,t,n))}};function I_(t,e,n,i,r,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!Go(n,i)||!Go(r,s):!0}function x_(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Ud.enqueueReplaceState(e,e.state,null)}function Qr(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=Oe({},n));for(var r in t)n[r]===void 0&&(n[r]=t[r])}return n}function JT(t){ic(t)}function ZT(t){console.error(t)}function eb(t){ic(t)}function fc(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function D_(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function jd(t,e,n){return n=Gi(n),n.tag=3,n.payload={element:null},n.callback=function(){fc(t,e)},n}function tb(t){return t=Gi(t),t.tag=3,t}function nb(t,e,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;t.payload=function(){return r(s)},t.callback=function(){D_(e,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){D_(e,n,i),typeof r!="function"&&($i===null?$i=new Set([this]):$i.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function AC(t,e,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&ma(e,n,r,!0),n=Wt.current,n!==null){switch(n.tag){case 31:case 13:return ln===null?yc():n.alternate===null&&Be===0&&(Be=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===oc?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),Pf(t,i,r)),!1;case 22:return n.flags|=65536,i===oc?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),Pf(t,i,r)),!1}throw Error(B(435,n.tag))}return Pf(t,i,r),yc(),!1}if(me)return e=Wt.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=r,i!==Rd&&(t=Error(B(422),{cause:i}),$o(rn(t,n)))):(i!==Rd&&(e=Error(B(423),{cause:i}),$o(rn(e,n))),t=t.current.alternate,t.flags|=65536,r&=-r,t.lanes|=r,i=rn(i,n),r=jd(t.stateNode,i,r),Af(t,r),Be!==4&&(Be=2)),!1;var s=Error(B(520),{cause:i});if(s=rn(s,n),No===null?No=[s]:No.push(s),Be!==4&&(Be=2),e===null)return!0;i=rn(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=r&-r,n.lanes|=t,t=jd(n.stateNode,i,t),Af(n,t),!1;case 1:if(e=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&($i===null||!$i.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=tb(r),nb(r,t,n,i),Af(n,r),!1}n=n.return}while(n!==null);return!1}var Tg=Error(B(461)),Je=!1;function ct(t,e,n,i){e.child=t===null?pT(e,null,n,i):Fr(e,t.child,n,i)}function N_(t,e,n,i,r){n=n.render;var s=e.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return Hr(e),i=ug(t,e,n,a,s,r),l=cg(),t!==null&&!Je?(hg(t,e,r),oi(t,e,r)):(me&&l&&tg(e),e.flags|=1,ct(t,e,i,r),e.child)}function O_(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!eg(s)&&s.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=s,ib(t,e,s,i,r)):(t=xu(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!bg(t,r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Go,n(a,i)&&t.ref===e.ref)return oi(t,e,r)}return e.flags|=1,t=Jn(s,i),t.ref=e.ref,t.return=e,e.child=t}function ib(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Go(s,i)&&t.ref===e.ref)if(Je=!1,e.pendingProps=i=s,bg(t,r))t.flags&131072&&(Je=!0);else return e.lanes=t.lanes,oi(t,e,r)}return zd(t,e,n,i,r)}function rb(t,e,n,i){var r=i.children,s=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if(e.flags&128){if(s=s!==null?s.baseLanes|n:n,t!==null){for(i=e.child=t.child,r=0;i!==null;)r=r|i.lanes|i.childLanes,i=i.sibling;i=r&~s}else i=0,e.child=null;return M_(t,e,s,n,i)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Du(e,s!==null?s.cachePool:null),s!==null?T_(e,s):Md(),vT(e);else return i=e.lanes=536870912,M_(t,e,s!==null?s.baseLanes|n:n,n,i)}else s!==null?(Du(e,s.cachePool),T_(e,s),Ni(),e.memoizedState=null):(t!==null&&Du(e,null),Md(),Ni());return ct(t,e,r,n),e.child}function ho(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function M_(t,e,n,i,r){var s=rg();return s=s===null?null:{parent:Xe._currentValue,pool:s},e.memoizedState={baseLanes:n,cachePool:s},t!==null&&Du(e,null),Md(),vT(e),t!==null&&ma(t,e,i,!0),e.childLanes=r,null}function Mu(t,e){return e=dc({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function V_(t,e,n){return Fr(e,t.child,null,n),t=Mu(e,e.pendingProps),t.flags|=2,qt(e),e.memoizedState=null,t}function wC(t,e,n){var i=e.pendingProps,r=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(me){if(i.mode==="hidden")return t=Mu(e,i),e.lanes=536870912,ho(null,t);if(Vd(e),(t=xe)?(t=Xb(t,sn),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:ir!==null?{id:An,overflow:wn}:null,retryLane:536870912,hydrationErrors:null},n=uT(t),n.return=e,e.child=n,dt=e,xe=null)):t=null,t===null)throw rr(e);return e.lanes=536870912,null}return Mu(e,i)}var s=t.memoizedState;if(s!==null){var a=s.dehydrated;if(Vd(e),r)if(e.flags&256)e.flags&=-257,e=V_(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(B(558));else if(Je||ma(t,e,n,!1),r=(n&t.childLanes)!==0,Je||r){if(i=Ae,i!==null&&(a=k0(i,n),a!==0&&a!==s.retryLane))throw s.retryLane=a,ts(t,a),Pt(i,t,a),Tg;yc(),e=V_(t,e,n)}else t=s.treeContext,xe=un(a.nextSibling),dt=e,me=!0,Fi=null,sn=!1,t!==null&&hT(e,t),e=Mu(e,i),e.flags|=4096;return e}return t=Jn(t.child,{mode:i.mode,children:i.children}),t.ref=e.ref,e.child=t,t.return=e,t}function Vu(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(B(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function zd(t,e,n,i,r){return Hr(e),n=ug(t,e,n,i,void 0,r),i=cg(),t!==null&&!Je?(hg(t,e,r),oi(t,e,r)):(me&&i&&tg(e),e.flags|=1,ct(t,e,n,r),e.child)}function k_(t,e,n,i,r,s){return Hr(e),e.updateQueue=null,n=TT(e,i,n,r),ET(t),i=cg(),t!==null&&!Je?(hg(t,e,s),oi(t,e,s)):(me&&i&&tg(e),e.flags|=1,ct(t,e,n,s),e.child)}function L_(t,e,n,i,r){if(Hr(e),e.stateNode===null){var s=xs,a=n.contextType;typeof a=="object"&&a!==null&&(s=gt(a)),s=new n(i,s),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ud,e.stateNode=s,s._reactInternals=e,s=e.stateNode,s.props=i,s.state=e.memoizedState,s.refs={},ag(e),a=n.contextType,s.context=typeof a=="object"&&a!==null?gt(a):xs,s.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(Rf(e,n,a,i),s.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&Ud.enqueueReplaceState(s,s.state,null),Co(e,i,s,r),Ro(),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){s=e.stateNode;var l=e.memoizedProps,u=Qr(n,l);s.props=u;var c=s.context,f=n.contextType;a=xs,typeof f=="object"&&f!==null&&(a=gt(f));var m=n.getDerivedStateFromProps;f=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function",l=e.pendingProps!==l,f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l||c!==a)&&x_(e,s,i,a),Ii=!1;var d=e.memoizedState;s.state=d,Co(e,i,s,r),Ro(),c=e.memoizedState,l||d!==c||Ii?(typeof m=="function"&&(Rf(e,n,m,i),c=e.memoizedState),(u=Ii||I_(e,n,u,i,d,c,a))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),s.props=i,s.state=c,s.context=a,i=u):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,Nd(t,e),a=e.memoizedProps,f=Qr(n,a),s.props=f,m=e.pendingProps,d=s.context,c=n.contextType,u=xs,typeof c=="object"&&c!==null&&(u=gt(c)),l=n.getDerivedStateFromProps,(c=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==m||d!==u)&&x_(e,s,i,u),Ii=!1,d=e.memoizedState,s.state=d,Co(e,i,s,r),Ro();var _=e.memoizedState;a!==m||d!==_||Ii||t!==null&&t.dependencies!==null&&ac(t.dependencies)?(typeof l=="function"&&(Rf(e,n,l,i),_=e.memoizedState),(f=Ii||I_(e,n,f,i,d,_,u)||t!==null&&t.dependencies!==null&&ac(t.dependencies))?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,_,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,_,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=_),s.props=i,s.state=_,s.context=u,i=f):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),i=!1)}return s=i,Vu(t,e),i=(e.flags&128)!==0,s||i?(s=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),e.flags|=1,t!==null&&i?(e.child=Fr(e,t.child,null,r),e.child=Fr(e,null,n,r)):ct(t,e,n,r),e.memoizedState=s.state,t=e.child):t=oi(t,e,r),t}function P_(t,e,n,i){return qr(),e.flags|=256,ct(t,e,n,i),e.child}var Cf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function If(t){return{baseLanes:t,cachePool:dT()}}function xf(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Ft),t}function sb(t,e,n){var i=e.pendingProps,r=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(Fe.current&2)!==0),a&&(r=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(me){if(r?Di(e):Ni(),(t=xe)?(t=Xb(t,sn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:ir!==null?{id:An,overflow:wn}:null,retryLane:536870912,hydrationErrors:null},n=uT(t),n.return=e,e.child=n,dt=e,xe=null)):t=null,t===null)throw rr(e);return em(t)?e.lanes=32:e.lanes=536870912,null}var l=i.children;return i=i.fallback,r?(Ni(),r=e.mode,l=dc({mode:"hidden",children:l},r),i=kr(i,r,n,null),l.return=e,i.return=e,l.sibling=i,e.child=l,i=e.child,i.memoizedState=If(n),i.childLanes=xf(t,a,n),e.memoizedState=Cf,ho(null,i)):(Di(e),Bd(e,l))}var u=t.memoizedState;if(u!==null&&(l=u.dehydrated,l!==null)){if(s)e.flags&256?(Di(e),e.flags&=-257,e=Df(t,e,n)):e.memoizedState!==null?(Ni(),e.child=t.child,e.flags|=128,e=null):(Ni(),l=i.fallback,r=e.mode,i=dc({mode:"visible",children:i.children},r),l=kr(l,r,n,null),l.flags|=2,i.return=e,l.return=e,i.sibling=l,e.child=i,Fr(e,t.child,null,n),i=e.child,i.memoizedState=If(n),i.childLanes=xf(t,a,n),e.memoizedState=Cf,e=ho(null,i));else if(Di(e),em(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var c=a.dgst;a=c,i=Error(B(419)),i.stack="",i.digest=a,$o({value:i,source:null,stack:null}),e=Df(t,e,n)}else if(Je||ma(t,e,n,!1),a=(n&t.childLanes)!==0,Je||a){if(a=Ae,a!==null&&(i=k0(a,n),i!==0&&i!==u.retryLane))throw u.retryLane=i,ts(t,i),Pt(a,t,i),Tg;Zd(l)||yc(),e=Df(t,e,n)}else Zd(l)?(e.flags|=192,e.child=t.child,e=null):(t=u.treeContext,xe=un(l.nextSibling),dt=e,me=!0,Fi=null,sn=!1,t!==null&&hT(e,t),e=Bd(e,i.children),e.flags|=4096);return e}return r?(Ni(),l=i.fallback,r=e.mode,u=t.child,c=u.sibling,i=Jn(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,c!==null?l=Jn(c,l):(l=kr(l,r,n,null),l.flags|=2),l.return=e,i.return=e,i.sibling=l,e.child=i,ho(null,i),i=e.child,l=t.child.memoizedState,l===null?l=If(n):(r=l.cachePool,r!==null?(u=Xe._currentValue,r=r.parent!==u?{parent:u,pool:u}:r):r=dT(),l={baseLanes:l.baseLanes|n,cachePool:r}),i.memoizedState=l,i.childLanes=xf(t,a,n),e.memoizedState=Cf,ho(t.child,i)):(Di(e),n=t.child,t=n.sibling,n=Jn(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function Bd(t,e){return e=dc({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function dc(t,e){return t=Ht(22,t,null,e),t.lanes=0,t}function Df(t,e,n){return Fr(e,t.child,null,n),t=Bd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function U_(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Id(t.return,e,n)}function Nf(t,e,n,i,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,treeForkCount:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r,a.treeForkCount=s)}function ab(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;i=i.children;var a=Fe.current,l=(a&2)!==0;if(l?(a=a&1|2,e.flags|=128):a&=1,Re(Fe,a),ct(t,e,i,n),i=me?Qo:0,!l&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&U_(t,n,e);else if(t.tag===19)U_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&uc(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Nf(e,!1,r,n,s,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&uc(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Nf(e,!0,n,null,s,i);break;case"together":Nf(e,!1,null,null,void 0,i);break;default:e.memoizedState=null}return e.child}function oi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ar|=e.lanes,!(n&e.childLanes))if(t!==null){if(ma(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=Jn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Jn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function bg(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&ac(t)))}function RC(t,e,n){switch(e.tag){case 3:Zu(e,e.stateNode.containerInfo),xi(e,Xe,t.memoizedState.cache),qr();break;case 27:case 5:gd(e);break;case 4:Zu(e,e.stateNode.containerInfo);break;case 10:xi(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,Vd(e),null;break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(Di(e),e.flags|=128,null):n&e.child.childLanes?sb(t,e,n):(Di(e),t=oi(t,e,n),t!==null?t.sibling:null);Di(e);break;case 19:var r=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(ma(t,e,n,!1),i=(n&e.childLanes)!==0),r){if(i)return ab(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Re(Fe,Fe.current),i)break;return null;case 22:return e.lanes=0,rb(t,e,n,e.pendingProps);case 24:xi(e,Xe,t.memoizedState.cache)}return oi(t,e,n)}function ob(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)Je=!0;else{if(!bg(t,n)&&!(e.flags&128))return Je=!1,RC(t,e,n);Je=!!(t.flags&131072)}else Je=!1,me&&e.flags&1048576&&cT(e,Qo,e.index);switch(e.lanes=0,e.tag){case 16:e:{var i=e.pendingProps;if(t=Dr(e.elementType),e.type=t,typeof t=="function")eg(t)?(i=Qr(t,i),e.tag=1,e=L_(null,e,t,i,n)):(e.tag=0,e=zd(null,e,t,i,n));else{if(t!=null){var r=t.$$typeof;if(r===zm){e.tag=11,e=N_(null,e,t,i,n);break e}else if(r===Bm){e.tag=14,e=O_(null,e,t,i,n);break e}}throw e=dd(t)||t,Error(B(306,e,""))}}return e;case 0:return zd(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,r=Qr(i,e.pendingProps),L_(t,e,i,r,n);case 3:e:{if(Zu(e,e.stateNode.containerInfo),t===null)throw Error(B(387));i=e.pendingProps;var s=e.memoizedState;r=s.element,Nd(t,e),Co(e,i,null,n);var a=e.memoizedState;if(i=a.cache,xi(e,Xe,i),i!==s.cache&&xd(e,[Xe],n,!0),Ro(),i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){e=P_(t,e,i,n);break e}else if(i!==r){r=rn(Error(B(424)),e),$o(r),e=P_(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(xe=un(t.firstChild),dt=e,me=!0,Fi=null,sn=!0,n=pT(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(qr(),i===r){e=oi(t,e,n);break e}ct(t,e,i,n)}e=e.child}return e;case 26:return Vu(t,e),t===null?(n=rv(e.type,null,e.pendingProps,null))?e.memoizedState=n:me||(n=e.type,t=e.pendingProps,i=Tc(Hi.current).createElement(n),i[ft]=e,i[Ut]=t,pt(i,n,t),ot(i),e.stateNode=i):e.memoizedState=rv(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return gd(e),t===null&&me&&(i=e.stateNode=Wb(e.type,e.pendingProps,Hi.current),dt=e,sn=!0,r=xe,mr(e.type)?(tm=r,xe=un(i.firstChild)):xe=r),ct(t,e,e.pendingProps.children,n),Vu(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&me&&((r=i=xe)&&(i=nI(i,e.type,e.pendingProps,sn),i!==null?(e.stateNode=i,dt=e,xe=un(i.firstChild),sn=!1,r=!0):r=!1),r||rr(e)),gd(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,i=s.children,Wd(r,s)?i=null:a!==null&&Wd(r,a)&&(e.flags|=32),e.memoizedState!==null&&(r=ug(t,e,yC,null,null,n),Zo._currentValue=r),Vu(t,e),ct(t,e,i,n),e.child;case 6:return t===null&&me&&((t=n=xe)&&(n=iI(n,e.pendingProps,sn),n!==null?(e.stateNode=n,dt=e,xe=null,t=!0):t=!1),t||rr(e)),null;case 13:return sb(t,e,n);case 4:return Zu(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Fr(e,null,i,n):ct(t,e,i,n),e.child;case 11:return N_(t,e,e.type,e.pendingProps,n);case 7:return ct(t,e,e.pendingProps,n),e.child;case 8:return ct(t,e,e.pendingProps.children,n),e.child;case 12:return ct(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,xi(e,e.type,i.value),ct(t,e,i.children,n),e.child;case 9:return r=e.type._context,i=e.pendingProps.children,Hr(e),r=gt(r),i=i(r),e.flags|=1,ct(t,e,i,n),e.child;case 14:return O_(t,e,e.type,e.pendingProps,n);case 15:return ib(t,e,e.type,e.pendingProps,n);case 19:return ab(t,e,n);case 31:return wC(t,e,n);case 22:return rb(t,e,n,e.pendingProps);case 24:return Hr(e),i=gt(Xe),t===null?(r=rg(),r===null&&(r=Ae,s=ig(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),e.memoizedState={parent:i,cache:r},ag(e),xi(e,Xe,r)):(t.lanes&n&&(Nd(t,e),Co(e,null,null,n),Ro()),r=t.memoizedState,s=e.memoizedState,r.parent!==i?(r={parent:i,cache:i},e.memoizedState=r,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=r),xi(e,Xe,i)):(i=s.cache,xi(e,Xe,i),i!==r.cache&&xd(e,[Xe],n,!0))),ct(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(B(156,e.tag))}function jn(t){t.flags|=4}function Of(t,e,n,i,r){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(r&335544128)===r)if(t.stateNode.complete)t.flags|=8192;else if(Nb())t.flags|=8192;else throw Pr=oc,sg}else t.flags&=-16777217}function j_(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!e1(e))if(Nb())t.flags|=8192;else throw Pr=oc,sg}function uu(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?O0():536870912,t.lanes|=e,Ws|=e)}function no(t,e){if(!me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ie(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function CC(t,e,n){var i=e.pendingProps;switch(ng(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ie(e),null;case 1:return Ie(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),Zn(Xe),Gs(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(cs(e)?jn(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Sf())),Ie(e),null;case 26:var r=e.type,s=e.memoizedState;return t===null?(jn(e),s!==null?(Ie(e),j_(e,s)):(Ie(e),Of(e,r,null,i,n))):s?s!==t.memoizedState?(jn(e),Ie(e),j_(e,s)):(Ie(e),e.flags&=-16777217):(t=t.memoizedProps,t!==i&&jn(e),Ie(e),Of(e,r,t,i,n)),null;case 27:if(ec(e),n=Hi.current,r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&jn(e);else{if(!i){if(e.stateNode===null)throw Error(B(166));return Ie(e),null}t=Cn.current,cs(e)?m_(e):(t=Wb(r,i,n),e.stateNode=t,jn(e))}return Ie(e),null;case 5:if(ec(e),r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&jn(e);else{if(!i){if(e.stateNode===null)throw Error(B(166));return Ie(e),null}if(s=Cn.current,cs(e))m_(e);else{var a=Tc(Hi.current);switch(s){case 1:s=a.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:s=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":s=a.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":s=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":s=a.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof i.is=="string"?a.createElement("select",{is:i.is}):a.createElement("select"),i.multiple?s.multiple=!0:i.size&&(s.size=i.size);break;default:s=typeof i.is=="string"?a.createElement(r,{is:i.is}):a.createElement(r)}}s[ft]=e,s[Ut]=i;e:for(a=e.child;a!==null;){if(a.tag===5||a.tag===6)s.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}e.stateNode=s;e:switch(pt(s,r,i),r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&jn(e)}}return Ie(e),Of(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&jn(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(B(166));if(t=Hi.current,cs(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,r=dt,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}t[ft]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||$b(t.nodeValue,n)),t||rr(e,!0)}else t=Tc(t).createTextNode(i),t[ft]=e,e.stateNode=t}return Ie(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(i=cs(e),n!==null){if(t===null){if(!i)throw Error(B(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(557));t[ft]=e}else qr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ie(e),t=!1}else n=Sf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(qt(e),e):(qt(e),null);if(e.flags&128)throw Error(B(558))}return Ie(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(r=cs(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(B(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(B(317));r[ft]=e}else qr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ie(e),r=!1}else r=Sf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),r=!0;if(!r)return e.flags&256?(qt(e),e):(qt(e),null)}return qt(e),e.flags&128?(e.lanes=n,e):(n=i!==null,t=t!==null&&t.memoizedState!==null,n&&(i=e.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),uu(e,e.updateQueue),Ie(e),null);case 4:return Gs(),t===null&&xg(e.stateNode.containerInfo),Ie(e),null;case 10:return Zn(e.type),Ie(e),null;case 19:if(lt(Fe),i=e.memoizedState,i===null)return Ie(e),null;if(r=(e.flags&128)!==0,s=i.rendering,s===null)if(r)no(i,!1);else{if(Be!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=uc(t),s!==null){for(e.flags|=128,no(i,!1),t=s.updateQueue,e.updateQueue=t,uu(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)lT(n,t),n=n.sibling;return Re(Fe,Fe.current&1|2),me&&Fn(e,i.treeForkCount),e.child}t=t.sibling}i.tail!==null&&Qt()>gc&&(e.flags|=128,r=!0,no(i,!1),e.lanes=4194304)}else{if(!r)if(t=uc(s),t!==null){if(e.flags|=128,r=!0,t=t.updateQueue,e.updateQueue=t,uu(e,t),no(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!me)return Ie(e),null}else 2*Qt()-i.renderingStartTime>gc&&n!==536870912&&(e.flags|=128,r=!0,no(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(t=i.last,t!==null?t.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Qt(),t.sibling=null,n=Fe.current,Re(Fe,r?n&1|2:n&1),me&&Fn(e,i.treeForkCount),t):(Ie(e),null);case 22:case 23:return qt(e),og(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(Ie(e),e.subtreeFlags&6&&(e.flags|=8192)):Ie(e),n=e.updateQueue,n!==null&&uu(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&lt(Lr),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Zn(Xe),Ie(e),null;case 25:return null;case 30:return null}throw Error(B(156,e.tag))}function IC(t,e){switch(ng(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Zn(Xe),Gs(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return ec(e),null;case 31:if(e.memoizedState!==null){if(qt(e),e.alternate===null)throw Error(B(340));qr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(qt(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));qr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return lt(Fe),null;case 4:return Gs(),null;case 10:return Zn(e.type),null;case 22:case 23:return qt(e),og(),t!==null&&lt(Lr),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Zn(Xe),null;case 25:return null;default:return null}}function lb(t,e){switch(ng(e),e.tag){case 3:Zn(Xe),Gs();break;case 26:case 27:case 5:ec(e);break;case 4:Gs();break;case 31:e.memoizedState!==null&&qt(e);break;case 13:qt(e);break;case 19:lt(Fe);break;case 10:Zn(e.type);break;case 22:case 23:qt(e),og(),t!==null&&lt(Lr);break;case 24:Zn(Xe)}}function El(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&t)===t){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(l){Ee(e,e.return,l)}}function sr(t,e,n){try{var i=e.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&t)===t){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,r=e;var u=n,c=l;try{c()}catch(f){Ee(r,u,f)}}}i=i.next}while(i!==s)}}catch(f){Ee(e,e.return,f)}}function ub(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{_T(e,n)}catch(i){Ee(t,t.return,i)}}}function cb(t,e,n){n.props=Qr(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){Ee(t,e,i)}}function xo(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(r){Ee(t,e,r)}}function Rn(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){Ee(t,e,r)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Ee(t,e,r)}else n.current=null}function hb(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Ee(t,t.return,r)}}function Mf(t,e,n){try{var i=t.stateNode;XC(i,t.type,n,e),i[Ut]=e}catch(r){Ee(t,t.return,r)}}function fb(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&mr(t.type)||t.tag===4}function Vf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||fb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&mr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function qd(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Kn));else if(i!==4&&(i===27&&mr(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(qd(t,e,n),t=t.sibling;t!==null;)qd(t,e,n),t=t.sibling}function mc(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&mr(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(mc(t,e,n),t=t.sibling;t!==null;)mc(t,e,n),t=t.sibling}function db(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,r=e.attributes;r.length;)e.removeAttributeNode(r[0]);pt(e,i,n),e[ft]=t,e[Ut]=n}catch(s){Ee(t,t.return,s)}}var Gn=!1,Ye=!1,kf=!1,z_=typeof WeakSet=="function"?WeakSet:Set,at=null;function xC(t,e){if(t=t.containerInfo,Yd=wc,t=eT(t),Wm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,c=0,f=0,m=t,d=null;t:for(;;){for(var _;m!==n||r!==0&&m.nodeType!==3||(l=a+r),m!==s||i!==0&&m.nodeType!==3||(u=a+i),m.nodeType===3&&(a+=m.nodeValue.length),(_=m.firstChild)!==null;)d=m,m=_;for(;;){if(m===t)break t;if(d===n&&++c===r&&(l=a),d===s&&++f===i&&(u=a),(_=m.nextSibling)!==null)break;m=d,d=m.parentNode}m=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xd={focusedElem:t,selectionRange:n},wc=!1,at=e;at!==null;)if(e=at,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,at=t;else for(;at!==null;){switch(e=at,s=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)r=t[n],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&s!==null){t=void 0,n=e,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var x=Qr(n.type,r);t=i.getSnapshotBeforeUpdate(x,s),i.__reactInternalSnapshotBeforeUpdate=t}catch(M){Ee(n,n.return,M)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Jd(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Jd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(B(163))}if(t=e.sibling,t!==null){t.return=e.return,at=t;break}at=e.return}}function mb(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Bn(t,n),i&4&&El(5,n);break;case 1:if(Bn(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(a){Ee(n,n.return,a)}else{var r=Qr(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(r,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){Ee(n,n.return,a)}}i&64&&ub(n),i&512&&xo(n,n.return);break;case 3:if(Bn(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{_T(t,e)}catch(a){Ee(n,n.return,a)}}break;case 27:e===null&&i&4&&db(n);case 26:case 5:Bn(t,n),e===null&&i&4&&hb(n),i&512&&xo(n,n.return);break;case 12:Bn(t,n);break;case 31:Bn(t,n),i&4&&yb(t,n);break;case 13:Bn(t,n),i&4&&_b(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=UC.bind(null,n),rI(t,n))));break;case 22:if(i=n.memoizedState!==null||Gn,!i){e=e!==null&&e.memoizedState!==null||Ye,r=Gn;var s=Ye;Gn=i,(Ye=e)&&!s?qn(t,n,(n.subtreeFlags&8772)!==0):Bn(t,n),Gn=r,Ye=s}break;case 30:break;default:Bn(t,n)}}function gb(t){var e=t.alternate;e!==null&&(t.alternate=null,gb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Gm(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Me=null,Mt=!1;function zn(t,e,n){for(n=n.child;n!==null;)pb(t,e,n),n=n.sibling}function pb(t,e,n){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(dl,n)}catch{}switch(n.tag){case 26:Ye||Rn(n,e),zn(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Ye||Rn(n,e);var i=Me,r=Mt;mr(n.type)&&(Me=n.stateNode,Mt=!1),zn(t,e,n),Mo(n.stateNode),Me=i,Mt=r;break;case 5:Ye||Rn(n,e);case 6:if(i=Me,r=Mt,Me=null,zn(t,e,n),Me=i,Mt=r,Me!==null)if(Mt)try{(Me.nodeType===9?Me.body:Me.nodeName==="HTML"?Me.ownerDocument.body:Me).removeChild(n.stateNode)}catch(s){Ee(n,e,s)}else try{Me.removeChild(n.stateNode)}catch(s){Ee(n,e,s)}break;case 18:Me!==null&&(Mt?(t=Me,Z_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),ta(t)):Z_(Me,n.stateNode));break;case 4:i=Me,r=Mt,Me=n.stateNode.containerInfo,Mt=!0,zn(t,e,n),Me=i,Mt=r;break;case 0:case 11:case 14:case 15:sr(2,n,e),Ye||sr(4,n,e),zn(t,e,n);break;case 1:Ye||(Rn(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&cb(n,e,i)),zn(t,e,n);break;case 21:zn(t,e,n);break;case 22:Ye=(i=Ye)||n.memoizedState!==null,zn(t,e,n),Ye=i;break;default:zn(t,e,n)}}function yb(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{ta(t)}catch(n){Ee(e,e.return,n)}}}function _b(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ta(t)}catch(n){Ee(e,e.return,n)}}function DC(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new z_),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new z_),e;default:throw Error(B(435,t.tag))}}function cu(t,e){var n=DC(t);e.forEach(function(i){if(!n.has(i)){n.add(i);var r=jC.bind(null,t,i);i.then(r,r)}})}function Nt(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 27:if(mr(l.type)){Me=l.stateNode,Mt=!1;break e}break;case 5:Me=l.stateNode,Mt=!1;break e;case 3:case 4:Me=l.stateNode.containerInfo,Mt=!0;break e}l=l.return}if(Me===null)throw Error(B(160));pb(s,a,r),Me=null,Mt=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)vb(e,t),e=e.sibling}var fn=null;function vb(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Nt(e,t),Ot(t),i&4&&(sr(3,t,t.return),El(3,t),sr(5,t,t.return));break;case 1:Nt(e,t),Ot(t),i&512&&(Ye||n===null||Rn(n,n.return)),i&64&&Gn&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=fn;if(Nt(e,t),Ot(t),i&512&&(Ye||n===null||Rn(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[pl]||s[ft]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),pt(s,i,n),s[ft]=t,ot(s),i=s;break e;case"link":var a=av("link","href",r).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(s=a[l],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break t}}s=r.createElement(i),pt(s,i,n),r.head.appendChild(s);break;case"meta":if(a=av("meta","content",r).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(s=a[l],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break t}}s=r.createElement(i),pt(s,i,n),r.head.appendChild(s);break;default:throw Error(B(468,i))}s[ft]=t,ot(s),i=s}t.stateNode=i}else ov(r,t.type,t.stateNode);else t.stateNode=sv(r,i,t.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?ov(r,t.type,t.stateNode):sv(r,i,t.memoizedProps)):i===null&&t.stateNode!==null&&Mf(t,t.memoizedProps,n.memoizedProps)}break;case 27:Nt(e,t),Ot(t),i&512&&(Ye||n===null||Rn(n,n.return)),n!==null&&i&4&&Mf(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Nt(e,t),Ot(t),i&512&&(Ye||n===null||Rn(n,n.return)),t.flags&32){r=t.stateNode;try{$s(r,"")}catch(x){Ee(t,t.return,x)}}i&4&&t.stateNode!=null&&(r=t.memoizedProps,Mf(t,r,n!==null?n.memoizedProps:r)),i&1024&&(kf=!0);break;case 6:if(Nt(e,t),Ot(t),i&4){if(t.stateNode===null)throw Error(B(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(x){Ee(t,t.return,x)}}break;case 3:if(Pu=null,r=fn,fn=bc(e.containerInfo),Nt(e,t),fn=r,Ot(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ta(e.containerInfo)}catch(x){Ee(t,t.return,x)}kf&&(kf=!1,Eb(t));break;case 4:i=fn,fn=bc(t.stateNode.containerInfo),Nt(e,t),Ot(t),fn=i;break;case 12:Nt(e,t),Ot(t);break;case 31:Nt(e,t),Ot(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,cu(t,i)));break;case 13:Nt(e,t),Ot(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(uh=Qt()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,cu(t,i)));break;case 22:r=t.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,c=Gn,f=Ye;if(Gn=c||r,Ye=f||u,Nt(e,t),Ye=f,Gn=c,Ot(t),i&8192)e:for(e=t.stateNode,e._visibility=r?e._visibility&-2:e._visibility|1,r&&(n===null||u||Gn||Ye||Nr(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){u=n=e;try{if(s=u.stateNode,r)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var m=u.memoizedProps.style,d=m!=null&&m.hasOwnProperty("display")?m.display:null;l.style.display=d==null||typeof d=="boolean"?"":(""+d).trim()}}catch(x){Ee(u,u.return,x)}}}else if(e.tag===6){if(n===null){u=e;try{u.stateNode.nodeValue=r?"":u.memoizedProps}catch(x){Ee(u,u.return,x)}}}else if(e.tag===18){if(n===null){u=e;try{var _=u.stateNode;r?ev(_,!0):ev(u.stateNode,!1)}catch(x){Ee(u,u.return,x)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,cu(t,n))));break;case 19:Nt(e,t),Ot(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,cu(t,i)));break;case 30:break;case 21:break;default:Nt(e,t),Ot(t)}}function Ot(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(fb(i)){n=i;break}i=i.return}if(n==null)throw Error(B(160));switch(n.tag){case 27:var r=n.stateNode,s=Vf(t);mc(t,s,r);break;case 5:var a=n.stateNode;n.flags&32&&($s(a,""),n.flags&=-33);var l=Vf(t);mc(t,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,c=Vf(t);qd(t,c,u);break;default:throw Error(B(161))}}catch(f){Ee(t,t.return,f)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Eb(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;Eb(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Bn(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)mb(t,e.alternate,e),e=e.sibling}function Nr(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:sr(4,e,e.return),Nr(e);break;case 1:Rn(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&cb(e,e.return,n),Nr(e);break;case 27:Mo(e.stateNode);case 26:case 5:Rn(e,e.return),Nr(e);break;case 22:e.memoizedState===null&&Nr(e);break;case 30:Nr(e);break;default:Nr(e)}t=t.sibling}}function qn(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,r=t,s=e,a=s.flags;switch(s.tag){case 0:case 11:case 15:qn(r,s,n),El(4,s);break;case 1:if(qn(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(c){Ee(i,i.return,c)}if(i=s,r=i.updateQueue,r!==null){var l=i.stateNode;try{var u=r.shared.hiddenCallbacks;if(u!==null)for(r.shared.hiddenCallbacks=null,r=0;r<u.length;r++)yT(u[r],l)}catch(c){Ee(i,i.return,c)}}n&&a&64&&ub(s),xo(s,s.return);break;case 27:db(s);case 26:case 5:qn(r,s,n),n&&i===null&&a&4&&hb(s),xo(s,s.return);break;case 12:qn(r,s,n);break;case 31:qn(r,s,n),n&&a&4&&yb(r,s);break;case 13:qn(r,s,n),n&&a&4&&_b(r,s);break;case 22:s.memoizedState===null&&qn(r,s,n),xo(s,s.return);break;case 30:break;default:qn(r,s,n)}e=e.sibling}}function Sg(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&_l(n))}function Ag(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&_l(t))}function hn(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Tb(t,e,n,i),e=e.sibling}function Tb(t,e,n,i){var r=e.flags;switch(e.tag){case 0:case 11:case 15:hn(t,e,n,i),r&2048&&El(9,e);break;case 1:hn(t,e,n,i);break;case 3:hn(t,e,n,i),r&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&_l(t)));break;case 12:if(r&2048){hn(t,e,n,i),t=e.stateNode;try{var s=e.memoizedProps,a=s.id,l=s.onPostCommit;typeof l=="function"&&l(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(u){Ee(e,e.return,u)}}else hn(t,e,n,i);break;case 31:hn(t,e,n,i);break;case 13:hn(t,e,n,i);break;case 23:break;case 22:s=e.stateNode,a=e.alternate,e.memoizedState!==null?s._visibility&2?hn(t,e,n,i):Do(t,e):s._visibility&2?hn(t,e,n,i):(s._visibility|=2,gs(t,e,n,i,(e.subtreeFlags&10256)!==0||!1)),r&2048&&Sg(a,e);break;case 24:hn(t,e,n,i),r&2048&&Ag(e.alternate,e);break;default:hn(t,e,n,i)}}function gs(t,e,n,i,r){for(r=r&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var s=t,a=e,l=n,u=i,c=a.flags;switch(a.tag){case 0:case 11:case 15:gs(s,a,l,u,r),El(8,a);break;case 23:break;case 22:var f=a.stateNode;a.memoizedState!==null?f._visibility&2?gs(s,a,l,u,r):Do(s,a):(f._visibility|=2,gs(s,a,l,u,r)),r&&c&2048&&Sg(a.alternate,a);break;case 24:gs(s,a,l,u,r),r&&c&2048&&Ag(a.alternate,a);break;default:gs(s,a,l,u,r)}e=e.sibling}}function Do(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,r=i.flags;switch(i.tag){case 22:Do(n,i),r&2048&&Sg(i.alternate,i);break;case 24:Do(n,i),r&2048&&Ag(i.alternate,i);break;default:Do(n,i)}e=e.sibling}}var fo=8192;function hs(t,e,n){if(t.subtreeFlags&fo)for(t=t.child;t!==null;)bb(t,e,n),t=t.sibling}function bb(t,e,n){switch(t.tag){case 26:hs(t,e,n),t.flags&fo&&t.memoizedState!==null&&pI(n,fn,t.memoizedState,t.memoizedProps);break;case 5:hs(t,e,n);break;case 3:case 4:var i=fn;fn=bc(t.stateNode.containerInfo),hs(t,e,n),fn=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=fo,fo=16777216,hs(t,e,n),fo=i):hs(t,e,n));break;default:hs(t,e,n)}}function Sb(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function io(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];at=i,wb(i,t)}Sb(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ab(t),t=t.sibling}function Ab(t){switch(t.tag){case 0:case 11:case 15:io(t),t.flags&2048&&sr(9,t,t.return);break;case 3:io(t);break;case 12:io(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,ku(t)):io(t);break;default:io(t)}}function ku(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];at=i,wb(i,t)}Sb(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:sr(8,e,e.return),ku(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,ku(e));break;default:ku(e)}t=t.sibling}}function wb(t,e){for(;at!==null;){var n=at;switch(n.tag){case 0:case 11:case 15:sr(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:_l(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,at=i;else e:for(n=t;at!==null;){i=at;var r=i.sibling,s=i.return;if(gb(i),i===n){at=null;break e}if(r!==null){r.return=s,at=r;break e}at=s}}}var NC={getCacheForType:function(t){var e=gt(Xe),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return gt(Xe).controller.signal}},OC=typeof WeakMap=="function"?WeakMap:Map,pe=0,Ae=null,oe=null,de=0,ve=0,Bt=null,ji=!1,pa=!1,wg=!1,li=0,Be=0,ar=0,Ur=0,Rg=0,Ft=0,Ws=0,No=null,Vt=null,Hd=!1,uh=0,Rb=0,gc=1/0,pc=null,$i=null,tt=0,Ki=null,Js=null,ei=0,Fd=0,Gd=null,Cb=null,Oo=0,Qd=null;function Yt(){return pe&2&&de!==0?de&-de:ee.T!==null?Ig():L0()}function Ib(){if(Ft===0)if(!(de&536870912)||me){var t=nu;nu<<=1,!(nu&3932160)&&(nu=262144),Ft=t}else Ft=536870912;return t=Wt.current,t!==null&&(t.flags|=32),Ft}function Pt(t,e,n){(t===Ae&&(ve===2||ve===9)||t.cancelPendingCommit!==null)&&(Zs(t,0),zi(t,de,Ft,!1)),gl(t,n),(!(pe&2)||t!==Ae)&&(t===Ae&&(!(pe&2)&&(Ur|=n),Be===4&&zi(t,de,Ft,!1)),Pn(t))}function xb(t,e,n){if(pe&6)throw Error(B(327));var i=!n&&(e&127)===0&&(e&t.expiredLanes)===0||ml(t,e),r=i?kC(t,e):Lf(t,e,!0),s=i;do{if(r===0){pa&&!i&&zi(t,e,0,!1);break}else{if(n=t.current.alternate,s&&!MC(n)){r=Lf(t,e,!1),s=!1;continue}if(r===2){if(s=e,t.errorRecoveryDisabledLanes&s)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var l=t;r=No;var u=l.current.memoizedState.isDehydrated;if(u&&(Zs(l,a).flags|=256),a=Lf(l,a,!1),a!==2){if(wg&&!u){l.errorRecoveryDisabledLanes|=s,Ur|=s,r=4;break e}s=Vt,Vt=r,s!==null&&(Vt===null?Vt=s:Vt.push.apply(Vt,s))}r=a}if(s=!1,r!==2)continue}}if(r===1){Zs(t,0),zi(t,e,0,!0);break}e:{switch(i=t,s=r,s){case 0:case 1:throw Error(B(345));case 4:if((e&4194048)!==e)break;case 6:zi(i,e,Ft,!ji);break e;case 2:Vt=null;break;case 3:case 5:break;default:throw Error(B(329))}if((e&62914560)===e&&(r=uh+300-Qt(),10<r)){if(zi(i,e,Ft,!ji),Jc(i,0,!0)!==0)break e;ei=e,i.timeoutHandle=Yb(B_.bind(null,i,n,Vt,pc,Hd,e,Ft,Ur,Ws,ji,s,"Throttled",-0,0),r);break e}B_(i,n,Vt,pc,Hd,e,Ft,Ur,Ws,ji,s,null,-0,0)}}break}while(!0);Pn(t)}function B_(t,e,n,i,r,s,a,l,u,c,f,m,d,_){if(t.timeoutHandle=-1,m=e.subtreeFlags,m&8192||(m&16785408)===16785408){m={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Kn},bb(e,s,m);var x=(s&62914560)===s?uh-Qt():(s&4194048)===s?Rb-Qt():0;if(x=yI(m,x),x!==null){ei=s,t.cancelPendingCommit=x(H_.bind(null,t,e,s,n,i,r,a,l,u,f,m,null,d,_)),zi(t,s,a,!c);return}}H_(t,e,s,n,i,r,a,l,u)}function MC(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Xt(s(),r))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zi(t,e,n,i){e&=~Rg,e&=~Ur,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var r=e;0<r;){var s=31-Kt(r),a=1<<s;i[s]=-1,r&=~a}n!==0&&M0(t,n,e)}function ch(){return pe&6?!0:(Tl(0),!1)}function Cg(){if(oe!==null){if(ve===0)var t=oe.return;else t=oe,Yn=ns=null,fg(t),Us=null,Ko=0,t=oe;for(;t!==null;)lb(t.alternate,t),t=t.return;oe=null}}function Zs(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,ZC(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),ei=0,Cg(),Ae=t,oe=n=Jn(t.current,null),de=e,ve=0,Bt=null,ji=!1,pa=ml(t,e),wg=!1,Ws=Ft=Rg=Ur=ar=Be=0,Vt=No=null,Hd=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var r=31-Kt(i),s=1<<r;e|=t[r],i&=~s}return li=e,nh(),n}function Db(t,e){re=null,ee.H=Xo,e===ga||e===rh?(e=v_(),ve=3):e===sg?(e=v_(),ve=4):ve=e===Tg?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Bt=e,oe===null&&(Be=1,fc(t,rn(e,t.current)))}function Nb(){var t=Wt.current;return t===null?!0:(de&4194048)===de?ln===null:(de&62914560)===de||de&536870912?t===ln:!1}function Ob(){var t=ee.H;return ee.H=Xo,t===null?Xo:t}function Mb(){var t=ee.A;return ee.A=NC,t}function yc(){Be=4,ji||(de&4194048)!==de&&Wt.current!==null||(pa=!0),!(ar&134217727)&&!(Ur&134217727)||Ae===null||zi(Ae,de,Ft,!1)}function Lf(t,e,n){var i=pe;pe|=2;var r=Ob(),s=Mb();(Ae!==t||de!==e)&&(pc=null,Zs(t,e)),e=!1;var a=Be;e:do try{if(ve!==0&&oe!==null){var l=oe,u=Bt;switch(ve){case 8:Cg(),a=6;break e;case 3:case 2:case 9:case 6:Wt.current===null&&(e=!0);var c=ve;if(ve=0,Bt=null,Os(t,l,u,c),n&&pa){a=0;break e}break;default:c=ve,ve=0,Bt=null,Os(t,l,u,c)}}VC(),a=Be;break}catch(f){Db(t,f)}while(!0);return e&&t.shellSuspendCounter++,Yn=ns=null,pe=i,ee.H=r,ee.A=s,oe===null&&(Ae=null,de=0,nh()),a}function VC(){for(;oe!==null;)Vb(oe)}function kC(t,e){var n=pe;pe|=2;var i=Ob(),r=Mb();Ae!==t||de!==e?(pc=null,gc=Qt()+500,Zs(t,e)):pa=ml(t,e);e:do try{if(ve!==0&&oe!==null){e=oe;var s=Bt;t:switch(ve){case 1:ve=0,Bt=null,Os(t,e,s,1);break;case 2:case 9:if(__(s)){ve=0,Bt=null,q_(e);break}e=function(){ve!==2&&ve!==9||Ae!==t||(ve=7),Pn(t)},s.then(e,e);break e;case 3:ve=7;break e;case 4:ve=5;break e;case 7:__(s)?(ve=0,Bt=null,q_(e)):(ve=0,Bt=null,Os(t,e,s,7));break;case 5:var a=null;switch(oe.tag){case 26:a=oe.memoizedState;case 5:case 27:var l=oe;if(a?e1(a):l.stateNode.complete){ve=0,Bt=null;var u=l.sibling;if(u!==null)oe=u;else{var c=l.return;c!==null?(oe=c,hh(c)):oe=null}break t}}ve=0,Bt=null,Os(t,e,s,5);break;case 6:ve=0,Bt=null,Os(t,e,s,6);break;case 8:Cg(),Be=6;break e;default:throw Error(B(462))}}LC();break}catch(f){Db(t,f)}while(!0);return Yn=ns=null,ee.H=i,ee.A=r,pe=n,oe!==null?0:(Ae=null,de=0,nh(),Be)}function LC(){for(;oe!==null&&!sR();)Vb(oe)}function Vb(t){var e=ob(t.alternate,t,li);t.memoizedProps=t.pendingProps,e===null?hh(t):oe=e}function q_(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=k_(n,e,e.pendingProps,e.type,void 0,de);break;case 11:e=k_(n,e,e.pendingProps,e.type.render,e.ref,de);break;case 5:fg(e);default:lb(n,e),e=oe=lT(e,li),e=ob(n,e,li)}t.memoizedProps=t.pendingProps,e===null?hh(t):oe=e}function Os(t,e,n,i){Yn=ns=null,fg(e),Us=null,Ko=0;var r=e.return;try{if(AC(t,r,e,n,de)){Be=1,fc(t,rn(n,t.current)),oe=null;return}}catch(s){if(r!==null)throw oe=r,s;Be=1,fc(t,rn(n,t.current)),oe=null;return}e.flags&32768?(me||i===1?t=!0:pa||de&536870912?t=!1:(ji=t=!0,(i===2||i===9||i===3||i===6)&&(i=Wt.current,i!==null&&i.tag===13&&(i.flags|=16384))),kb(e,t)):hh(e)}function hh(t){var e=t;do{if(e.flags&32768){kb(e,ji);return}t=e.return;var n=CC(e.alternate,e,li);if(n!==null){oe=n;return}if(e=e.sibling,e!==null){oe=e;return}oe=e=t}while(e!==null);Be===0&&(Be=5)}function kb(t,e){do{var n=IC(t.alternate,t);if(n!==null){n.flags&=32767,oe=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){oe=t;return}oe=t=n}while(t!==null);Be=6,oe=null}function H_(t,e,n,i,r,s,a,l,u){t.cancelPendingCommit=null;do fh();while(tt!==0);if(pe&6)throw Error(B(327));if(e!==null){if(e===t.current)throw Error(B(177));if(s=e.lanes|e.childLanes,s|=Jm,gR(t,n,s,a,l,u),t===Ae&&(oe=Ae=null,de=0),Js=e,Ki=t,ei=n,Fd=s,Gd=r,Cb=i,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,zC(tc,function(){return zb(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=ee.T,ee.T=null,r=ye.p,ye.p=2,a=pe,pe|=4;try{xC(t,e,n)}finally{pe=a,ye.p=r,ee.T=i}}tt=1,Lb(),Pb(),Ub()}}function Lb(){if(tt===1){tt=0;var t=Ki,e=Js,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=ee.T,ee.T=null;var i=ye.p;ye.p=2;var r=pe;pe|=4;try{vb(e,t);var s=Xd,a=eT(t.containerInfo),l=s.focusedElem,u=s.selectionRange;if(a!==l&&l&&l.ownerDocument&&Z0(l.ownerDocument.documentElement,l)){if(u!==null&&Wm(l)){var c=u.start,f=u.end;if(f===void 0&&(f=c),"selectionStart"in l)l.selectionStart=c,l.selectionEnd=Math.min(f,l.value.length);else{var m=l.ownerDocument||document,d=m&&m.defaultView||window;if(d.getSelection){var _=d.getSelection(),x=l.textContent.length,M=Math.min(u.start,x),N=u.end===void 0?M:Math.min(u.end,x);!_.extend&&M>N&&(a=N,N=M,M=a);var w=h_(l,M),T=h_(l,N);if(w&&T&&(_.rangeCount!==1||_.anchorNode!==w.node||_.anchorOffset!==w.offset||_.focusNode!==T.node||_.focusOffset!==T.offset)){var E=m.createRange();E.setStart(w.node,w.offset),_.removeAllRanges(),M>N?(_.addRange(E),_.extend(T.node,T.offset)):(E.setEnd(T.node,T.offset),_.addRange(E))}}}}for(m=[],_=l;_=_.parentNode;)_.nodeType===1&&m.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<m.length;l++){var O=m[l];O.element.scrollLeft=O.left,O.element.scrollTop=O.top}}wc=!!Yd,Xd=Yd=null}finally{pe=r,ye.p=i,ee.T=n}}t.current=e,tt=2}}function Pb(){if(tt===2){tt=0;var t=Ki,e=Js,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=ee.T,ee.T=null;var i=ye.p;ye.p=2;var r=pe;pe|=4;try{mb(t,e.alternate,e)}finally{pe=r,ye.p=i,ee.T=n}}tt=3}}function Ub(){if(tt===4||tt===3){tt=0,aR();var t=Ki,e=Js,n=ei,i=Cb;e.subtreeFlags&10256||e.flags&10256?tt=5:(tt=0,Js=Ki=null,jb(t,t.pendingLanes));var r=t.pendingLanes;if(r===0&&($i=null),Fm(n),e=e.stateNode,$t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(dl,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=ee.T,r=ye.p,ye.p=2,ee.T=null;try{for(var s=t.onRecoverableError,a=0;a<i.length;a++){var l=i[a];s(l.value,{componentStack:l.stack})}}finally{ee.T=e,ye.p=r}}ei&3&&fh(),Pn(t),r=t.pendingLanes,n&261930&&r&42?t===Qd?Oo++:(Oo=0,Qd=t):Oo=0,Tl(0)}}function jb(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,_l(e)))}function fh(){return Lb(),Pb(),Ub(),zb()}function zb(){if(tt!==5)return!1;var t=Ki,e=Fd;Fd=0;var n=Fm(ei),i=ee.T,r=ye.p;try{ye.p=32>n?32:n,ee.T=null,n=Gd,Gd=null;var s=Ki,a=ei;if(tt=0,Js=Ki=null,ei=0,pe&6)throw Error(B(331));var l=pe;if(pe|=4,Ab(s.current),Tb(s,s.current,a,n),pe=l,Tl(0,!1),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(dl,s)}catch{}return!0}finally{ye.p=r,ee.T=i,jb(t,e)}}function F_(t,e,n){e=rn(n,e),e=jd(t.stateNode,e,2),t=Qi(t,e,2),t!==null&&(gl(t,2),Pn(t))}function Ee(t,e,n){if(t.tag===3)F_(t,t,n);else for(;e!==null;){if(e.tag===3){F_(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&($i===null||!$i.has(i))){t=rn(n,t),n=tb(2),i=Qi(e,n,2),i!==null&&(nb(n,i,e,t),gl(i,2),Pn(i));break}}e=e.return}}function Pf(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new OC;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(wg=!0,r.add(n),t=PC.bind(null,t,e,n),e.then(t,t))}function PC(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Ae===t&&(de&n)===n&&(Be===4||Be===3&&(de&62914560)===de&&300>Qt()-uh?!(pe&2)&&Zs(t,0):Rg|=n,Ws===de&&(Ws=0)),Pn(t)}function Bb(t,e){e===0&&(e=O0()),t=ts(t,e),t!==null&&(gl(t,e),Pn(t))}function UC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Bb(t,n)}function jC(t,e){var n=0;switch(t.tag){case 31:case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(B(314))}i!==null&&i.delete(e),Bb(t,n)}function zC(t,e){return qm(t,e)}var _c=null,ps=null,$d=!1,vc=!1,Uf=!1,Bi=0;function Pn(t){t!==ps&&t.next===null&&(ps===null?_c=ps=t:ps=ps.next=t),vc=!0,$d||($d=!0,qC())}function Tl(t,e){if(!Uf&&vc){Uf=!0;do for(var n=!1,i=_c;i!==null;){if(t!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var a=i.suspendedLanes,l=i.pingedLanes;s=(1<<31-Kt(42|t)+1)-1,s&=r&~(a&~l),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,G_(i,s))}else s=de,s=Jc(i,i===Ae?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||ml(i,s)||(n=!0,G_(i,s));i=i.next}while(n);Uf=!1}}function BC(){qb()}function qb(){vc=$d=!1;var t=0;Bi!==0&&JC()&&(t=Bi);for(var e=Qt(),n=null,i=_c;i!==null;){var r=i.next,s=Hb(i,e);s===0?(i.next=null,n===null?_c=r:n.next=r,r===null&&(ps=n)):(n=i,(t!==0||s&3)&&(vc=!0)),i=r}tt!==0&&tt!==5||Tl(t),Bi!==0&&(Bi=0)}function Hb(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes&-62914561;0<s;){var a=31-Kt(s),l=1<<a,u=r[a];u===-1?(!(l&n)||l&i)&&(r[a]=mR(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}if(e=Ae,n=de,n=Jc(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(ve===2||ve===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&ff(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||ml(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&ff(i),Fm(n)){case 2:case 8:n=D0;break;case 32:n=tc;break;case 268435456:n=N0;break;default:n=tc}return i=Fb.bind(null,t),n=qm(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&ff(i),t.callbackPriority=2,t.callbackNode=null,2}function Fb(t,e){if(tt!==0&&tt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(fh()&&t.callbackNode!==n)return null;var i=de;return i=Jc(t,t===Ae?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(xb(t,i,e),Hb(t,Qt()),t.callbackNode!=null&&t.callbackNode===n?Fb.bind(null,t):null)}function G_(t,e){if(fh())return null;xb(t,e,!0)}function qC(){eI(function(){pe&6?qm(x0,BC):qb()})}function Ig(){if(Bi===0){var t=Ks;t===0&&(t=tu,tu<<=1,!(tu&261888)&&(tu=256)),Bi=t}return Bi}function Q_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ru(""+t)}function $_(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function HC(t,e,n,i,r){if(e==="submit"&&n&&n.stateNode===r){var s=Q_((r[Ut]||null).action),a=i.submitter;a&&(e=(e=a[Ut]||null)?Q_(e.formAction):a.getAttribute("formAction"),e!==null&&(s=e,a=null));var l=new Zc("action","action",null,i,r);t.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Bi!==0){var u=a?$_(r,a):new FormData(r);Pd(n,{pending:!0,data:u,method:r.method,action:s},null,u)}}else typeof s=="function"&&(l.preventDefault(),u=a?$_(r,a):new FormData(r),Pd(n,{pending:!0,data:u,method:r.method,action:s},s,u))},currentTarget:r}]})}}for(var jf=0;jf<wd.length;jf++){var zf=wd[jf],FC=zf.toLowerCase(),GC=zf[0].toUpperCase()+zf.slice(1);_n(FC,"on"+GC)}_n(nT,"onAnimationEnd");_n(iT,"onAnimationIteration");_n(rT,"onAnimationStart");_n("dblclick","onDoubleClick");_n("focusin","onFocus");_n("focusout","onBlur");_n(oC,"onTransitionRun");_n(lC,"onTransitionStart");_n(uC,"onTransitionCancel");_n(sT,"onTransitionEnd");Qs("onMouseEnter",["mouseout","mouseover"]);Qs("onMouseLeave",["mouseout","mouseover"]);Qs("onPointerEnter",["pointerout","pointerover"]);Qs("onPointerLeave",["pointerout","pointerover"]);Jr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wo));function Gb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==s&&r.isPropagationStopped())break e;s=l,r.currentTarget=c;try{s(r)}catch(f){ic(f)}r.currentTarget=null,s=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,c=l.currentTarget,l=l.listener,u!==s&&r.isPropagationStopped())break e;s=l,r.currentTarget=c;try{s(r)}catch(f){ic(f)}r.currentTarget=null,s=u}}}}function ae(t,e){var n=e[yd];n===void 0&&(n=e[yd]=new Set);var i=t+"__bubble";n.has(i)||(Qb(e,t,2,!1),n.add(i))}function Bf(t,e,n){var i=0;e&&(i|=4),Qb(n,t,i,e)}var hu="_reactListening"+Math.random().toString(36).slice(2);function xg(t){if(!t[hu]){t[hu]=!0,P0.forEach(function(n){n!=="selectionchange"&&(QC.has(n)||Bf(n,!1,t),Bf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[hu]||(e[hu]=!0,Bf("selectionchange",!1,e))}}function Qb(t,e,n,i){switch(s1(e)){case 2:var r=EI;break;case 8:r=TI;break;default:r=Mg}n=r.bind(null,e,n,t),r=void 0,!bd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function qf(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===r)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;l!==null;){if(a=Ss(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=s=a;continue e}l=l.parentNode}}i=i.return}G0(function(){var c=s,f=$m(n),m=[];e:{var d=aT.get(t);if(d!==void 0){var _=Zc,x=t;switch(t){case"keypress":if(Iu(n)===0)break e;case"keydown":case"keyup":_=jR;break;case"focusin":x="focus",_=yf;break;case"focusout":x="blur",_=yf;break;case"beforeblur":case"afterblur":_=yf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=t_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=CR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=qR;break;case nT:case iT:case rT:_=DR;break;case sT:_=FR;break;case"scroll":case"scrollend":_=wR;break;case"wheel":_=QR;break;case"copy":case"cut":case"paste":_=OR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=i_;break;case"toggle":case"beforetoggle":_=KR}var M=(e&4)!==0,N=!M&&(t==="scroll"||t==="scrollend"),w=M?d!==null?d+"Capture":null:d;M=[];for(var T=c,E;T!==null;){var O=T;if(E=O.stateNode,O=O.tag,O!==5&&O!==26&&O!==27||E===null||w===null||(O=Ho(T,w),O!=null&&M.push(Jo(T,O,E))),N)break;T=T.return}0<M.length&&(d=new _(d,x,null,n,f),m.push({event:d,listeners:M}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",d&&n!==Td&&(x=n.relatedTarget||n.fromElement)&&(Ss(x)||x[fa]))break e;if((_||d)&&(d=f.window===f?f:(d=f.ownerDocument)?d.defaultView||d.parentWindow:window,_?(x=n.relatedTarget||n.toElement,_=c,x=x?Ss(x):null,x!==null&&(N=fl(x),M=x.tag,x!==N||M!==5&&M!==27&&M!==6)&&(x=null)):(_=null,x=c),_!==x)){if(M=t_,O="onMouseLeave",w="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(M=i_,O="onPointerLeave",w="onPointerEnter",T="pointer"),N=_==null?d:co(_),E=x==null?d:co(x),d=new M(O,T+"leave",_,n,f),d.target=N,d.relatedTarget=E,O=null,Ss(f)===c&&(M=new M(w,T+"enter",x,n,f),M.target=E,M.relatedTarget=N,O=M),N=O,_&&x)t:{for(M=$C,w=_,T=x,E=0,O=w;O;O=M(O))E++;O=0;for(var U=T;U;U=M(U))O++;for(;0<E-O;)w=M(w),E--;for(;0<O-E;)T=M(T),O--;for(;E--;){if(w===T||T!==null&&w===T.alternate){M=w;break t}w=M(w),T=M(T)}M=null}else M=null;_!==null&&K_(m,d,_,M,!1),x!==null&&N!==null&&K_(m,N,x,M,!0)}}e:{if(d=c?co(c):window,_=d.nodeName&&d.nodeName.toLowerCase(),_==="select"||_==="input"&&d.type==="file")var Q=o_;else if(a_(d))if(W0)Q=rC;else{Q=nC;var y=tC}else _=d.nodeName,!_||_.toLowerCase()!=="input"||d.type!=="checkbox"&&d.type!=="radio"?c&&Qm(c.elementType)&&(Q=o_):Q=iC;if(Q&&(Q=Q(t,c))){X0(m,Q,n,f);break e}y&&y(t,d,c),t==="focusout"&&c&&d.type==="number"&&c.memoizedProps.value!=null&&Ed(d,"number",d.value)}switch(y=c?co(c):window,t){case"focusin":(a_(y)||y.contentEditable==="true")&&(Rs=y,Sd=c,So=null);break;case"focusout":So=Sd=Rs=null;break;case"mousedown":Ad=!0;break;case"contextmenu":case"mouseup":case"dragend":Ad=!1,f_(m,n,f);break;case"selectionchange":if(aC)break;case"keydown":case"keyup":f_(m,n,f)}var v;if(Xm)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else ws?K0(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&($0&&n.locale!=="ko"&&(ws||A!=="onCompositionStart"?A==="onCompositionEnd"&&ws&&(v=Q0()):(Ui=f,Km="value"in Ui?Ui.value:Ui.textContent,ws=!0)),y=Ec(c,A),0<y.length&&(A=new n_(A,t,null,n,f),m.push({event:A,listeners:y}),v?A.data=v:(v=Y0(n),v!==null&&(A.data=v)))),(v=XR?WR(t,n):JR(t,n))&&(A=Ec(c,"onBeforeInput"),0<A.length&&(y=new n_("onBeforeInput","beforeinput",null,n,f),m.push({event:y,listeners:A}),y.data=v)),HC(m,t,c,n,f)}Gb(m,e)})}function Jo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ec(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=Ho(t,n),r!=null&&i.unshift(Jo(t,r,s)),r=Ho(t,e),r!=null&&i.push(Jo(t,r,s))),t.tag===3)return i;t=t.return}return[]}function $C(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function K_(t,e,n,i,r){for(var s=e._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,c=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||c===null||(u=c,r?(c=Ho(n,s),c!=null&&a.unshift(Jo(n,c,u))):r||(c=Ho(n,s),c!=null&&a.push(Jo(n,c,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var KC=/\r\n?/g,YC=/\u0000|\uFFFD/g;function Y_(t){return(typeof t=="string"?t:""+t).replace(KC,`
`).replace(YC,"")}function $b(t,e){return e=Y_(e),Y_(t)===e}function Te(t,e,n,i,r,s){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||$s(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&$s(t,""+i);break;case"className":ru(t,"class",i);break;case"tabIndex":ru(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":ru(t,n,i);break;case"style":F0(t,i,s);break;case"data":if(e!=="object"){ru(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Ru(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(e!=="input"&&Te(t,e,"name",r.name,r,null),Te(t,e,"formEncType",r.formEncType,r,null),Te(t,e,"formMethod",r.formMethod,r,null),Te(t,e,"formTarget",r.formTarget,r,null)):(Te(t,e,"encType",r.encType,r,null),Te(t,e,"method",r.method,r,null),Te(t,e,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Ru(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=Kn);break;case"onScroll":i!=null&&ae("scroll",t);break;case"onScrollEnd":i!=null&&ae("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(B(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(B(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=Ru(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":ae("beforetoggle",t),ae("toggle",t),wu(t,"popover",i);break;case"xlinkActuate":Un(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Un(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Un(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Un(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Un(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Un(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Un(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Un(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Un(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":wu(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=SR.get(n)||n,wu(t,n,i))}}function Kd(t,e,n,i,r,s){switch(n){case"style":F0(t,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(B(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(B(60));t.innerHTML=n}}break;case"children":typeof i=="string"?$s(t,i):(typeof i=="number"||typeof i=="bigint")&&$s(t,""+i);break;case"onScroll":i!=null&&ae("scroll",t);break;case"onScrollEnd":i!=null&&ae("scrollend",t);break;case"onClick":i!=null&&(t.onclick=Kn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!U0.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),e=n.slice(2,r?n.length-7:void 0),s=t[Ut]||null,s=s!=null?s[n]:null,typeof s=="function"&&t.removeEventListener(e,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,r);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):wu(t,n,i)}}}function pt(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ae("error",t),ae("load",t);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(B(137,e));default:Te(t,e,s,a,n,null)}}r&&Te(t,e,"srcSet",n.srcSet,n,null),i&&Te(t,e,"src",n.src,n,null);return;case"input":ae("invalid",t);var l=s=a=r=null,u=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var f=n[i];if(f!=null)switch(i){case"name":r=f;break;case"type":a=f;break;case"checked":u=f;break;case"defaultChecked":c=f;break;case"value":s=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(B(137,e));break;default:Te(t,e,i,f,n,null)}}B0(t,s,l,u,c,a,r,!1);return;case"select":ae("invalid",t),i=a=s=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":s=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:Te(t,e,r,l,n,null)}e=s,n=a,t.multiple=!!i,e!=null?ks(t,!!i,e,!1):n!=null&&ks(t,!!i,n,!0);return;case"textarea":ae("invalid",t),s=r=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":r=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(B(91));break;default:Te(t,e,a,l,n,null)}H0(t,i,r,s);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Te(t,e,u,i,n,null)}return;case"dialog":ae("beforetoggle",t),ae("toggle",t),ae("cancel",t),ae("close",t);break;case"iframe":case"object":ae("load",t);break;case"video":case"audio":for(i=0;i<Wo.length;i++)ae(Wo[i],t);break;case"image":ae("error",t),ae("load",t);break;case"details":ae("toggle",t);break;case"embed":case"source":case"link":ae("error",t),ae("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(B(137,e));default:Te(t,e,c,i,n,null)}return;default:if(Qm(e)){for(f in n)n.hasOwnProperty(f)&&(i=n[f],i!==void 0&&Kd(t,e,f,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&Te(t,e,l,i,n,null))}function XC(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,l=null,u=null,c=null,f=null;for(_ in n){var m=n[_];if(n.hasOwnProperty(_)&&m!=null)switch(_){case"checked":break;case"value":break;case"defaultValue":u=m;default:i.hasOwnProperty(_)||Te(t,e,_,null,i,m)}}for(var d in i){var _=i[d];if(m=n[d],i.hasOwnProperty(d)&&(_!=null||m!=null))switch(d){case"type":s=_;break;case"name":r=_;break;case"checked":c=_;break;case"defaultChecked":f=_;break;case"value":a=_;break;case"defaultValue":l=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(B(137,e));break;default:_!==m&&Te(t,e,d,_,i,m)}}vd(t,a,l,u,c,f,s,r);return;case"select":_=a=l=d=null;for(s in n)if(u=n[s],n.hasOwnProperty(s)&&u!=null)switch(s){case"value":break;case"multiple":_=u;default:i.hasOwnProperty(s)||Te(t,e,s,null,i,u)}for(r in i)if(s=i[r],u=n[r],i.hasOwnProperty(r)&&(s!=null||u!=null))switch(r){case"value":d=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==u&&Te(t,e,r,s,i,u)}e=l,n=a,i=_,d!=null?ks(t,!!n,d,!1):!!i!=!!n&&(e!=null?ks(t,!!n,e,!0):ks(t,!!n,n?[]:"",!1));return;case"textarea":_=d=null;for(l in n)if(r=n[l],n.hasOwnProperty(l)&&r!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Te(t,e,l,null,i,r)}for(a in i)if(r=i[a],s=n[a],i.hasOwnProperty(a)&&(r!=null||s!=null))switch(a){case"value":d=r;break;case"defaultValue":_=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(B(91));break;default:r!==s&&Te(t,e,a,r,i,s)}q0(t,d,_);return;case"option":for(var x in n)if(d=n[x],n.hasOwnProperty(x)&&d!=null&&!i.hasOwnProperty(x))switch(x){case"selected":t.selected=!1;break;default:Te(t,e,x,null,i,d)}for(u in i)if(d=i[u],_=n[u],i.hasOwnProperty(u)&&d!==_&&(d!=null||_!=null))switch(u){case"selected":t.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Te(t,e,u,d,i,_)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var M in n)d=n[M],n.hasOwnProperty(M)&&d!=null&&!i.hasOwnProperty(M)&&Te(t,e,M,null,i,d);for(c in i)if(d=i[c],_=n[c],i.hasOwnProperty(c)&&d!==_&&(d!=null||_!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(B(137,e));break;default:Te(t,e,c,d,i,_)}return;default:if(Qm(e)){for(var N in n)d=n[N],n.hasOwnProperty(N)&&d!==void 0&&!i.hasOwnProperty(N)&&Kd(t,e,N,void 0,i,d);for(f in i)d=i[f],_=n[f],!i.hasOwnProperty(f)||d===_||d===void 0&&_===void 0||Kd(t,e,f,d,i,_);return}}for(var w in n)d=n[w],n.hasOwnProperty(w)&&d!=null&&!i.hasOwnProperty(w)&&Te(t,e,w,null,i,d);for(m in i)d=i[m],_=n[m],!i.hasOwnProperty(m)||d===_||d==null&&_==null||Te(t,e,m,d,i,_)}function X_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function WC(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var r=n[i],s=r.transferSize,a=r.initiatorType,l=r.duration;if(s&&l&&X_(a)){for(a=0,l=r.responseEnd,i+=1;i<n.length;i++){var u=n[i],c=u.startTime;if(c>l)break;var f=u.transferSize,m=u.initiatorType;f&&X_(m)&&(u=u.responseEnd,a+=f*(u<l?1:(l-c)/(u-c)))}if(--i,e+=8*(s+a)/(r.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Yd=null,Xd=null;function Tc(t){return t.nodeType===9?t:t.ownerDocument}function W_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Kb(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Wd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Hf=null;function JC(){var t=window.event;return t&&t.type==="popstate"?t===Hf?!1:(Hf=t,!0):(Hf=null,!1)}var Yb=typeof setTimeout=="function"?setTimeout:void 0,ZC=typeof clearTimeout=="function"?clearTimeout:void 0,J_=typeof Promise=="function"?Promise:void 0,eI=typeof queueMicrotask=="function"?queueMicrotask:typeof J_<"u"?function(t){return J_.resolve(null).then(t).catch(tI)}:Yb;function tI(t){setTimeout(function(){throw t})}function mr(t){return t==="head"}function Z_(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"||n==="/&"){if(i===0){t.removeChild(r),ta(e);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")Mo(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,Mo(n);for(var s=n.firstChild;s;){var a=s.nextSibling,l=s.nodeName;s[pl]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=a}}else n==="body"&&Mo(t.ownerDocument.body);n=r}while(n);ta(e)}function ev(t,e){var n=t;t=0;do{var i=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=i}while(n)}function Jd(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Jd(n),Gm(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function nI(t,e,n,i){for(;t.nodeType===1;){var r=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[pl])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(s=t.getAttribute("rel"),s==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(s!==r.rel||t.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||t.getAttribute("title")!==(r.title==null?null:r.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(s=t.getAttribute("src"),(s!==(r.src==null?null:r.src)||t.getAttribute("type")!==(r.type==null?null:r.type)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&t.getAttribute("name")===s)return t}else return t;if(t=un(t.nextSibling),t===null)break}return null}function iI(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=un(t.nextSibling),t===null))return null;return t}function Xb(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=un(t.nextSibling),t===null))return null;return t}function Zd(t){return t.data==="$?"||t.data==="$~"}function em(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function rI(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function un(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var tm=null;function tv(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return un(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function nv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function Wb(t,e,n){switch(e=Tc(n),t){case"html":if(t=e.documentElement,!t)throw Error(B(452));return t;case"head":if(t=e.head,!t)throw Error(B(453));return t;case"body":if(t=e.body,!t)throw Error(B(454));return t;default:throw Error(B(451))}}function Mo(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);Gm(t)}var cn=new Map,iv=new Set;function bc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var pi=ye.d;ye.d={f:sI,r:aI,D:oI,C:lI,L:uI,m:cI,X:fI,S:hI,M:dI};function sI(){var t=pi.f(),e=ch();return t||e}function aI(t){var e=da(t);e!==null&&e.tag===5&&e.type==="form"?FT(e):pi.r(t)}var ya=typeof document>"u"?null:document;function Jb(t,e,n){var i=ya;if(i&&typeof e=="string"&&e){var r=nn(e);r='link[rel="'+t+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),iv.has(r)||(iv.add(r),t={rel:t,crossOrigin:n,href:e},i.querySelector(r)===null&&(e=i.createElement("link"),pt(e,"link",t),ot(e),i.head.appendChild(e)))}}function oI(t){pi.D(t),Jb("dns-prefetch",t,null)}function lI(t,e){pi.C(t,e),Jb("preconnect",t,e)}function uI(t,e,n){pi.L(t,e,n);var i=ya;if(i&&t&&e){var r='link[rel="preload"][as="'+nn(e)+'"]';e==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+nn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+nn(n.imageSizes)+'"]')):r+='[href="'+nn(t)+'"]';var s=r;switch(e){case"style":s=ea(t);break;case"script":s=_a(t)}cn.has(s)||(t=Oe({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),cn.set(s,t),i.querySelector(r)!==null||e==="style"&&i.querySelector(bl(s))||e==="script"&&i.querySelector(Sl(s))||(e=i.createElement("link"),pt(e,"link",t),ot(e),i.head.appendChild(e)))}}function cI(t,e){pi.m(t,e);var n=ya;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",r='link[rel="modulepreload"][as="'+nn(i)+'"][href="'+nn(t)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=_a(t)}if(!cn.has(s)&&(t=Oe({rel:"modulepreload",href:t},e),cn.set(s,t),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Sl(s)))return}i=n.createElement("link"),pt(i,"link",t),ot(i),n.head.appendChild(i)}}}function hI(t,e,n){pi.S(t,e,n);var i=ya;if(i&&t){var r=Vs(i).hoistableStyles,s=ea(t);e=e||"default";var a=r.get(s);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(bl(s)))l.loading=5;else{t=Oe({rel:"stylesheet",href:t,"data-precedence":e},n),(n=cn.get(s))&&Dg(t,n);var u=a=i.createElement("link");ot(u),pt(u,"link",t),u._p=new Promise(function(c,f){u.onload=c,u.onerror=f}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Lu(a,e,i)}a={type:"stylesheet",instance:a,count:1,state:l},r.set(s,a)}}}function fI(t,e){pi.X(t,e);var n=ya;if(n&&t){var i=Vs(n).hoistableScripts,r=_a(t),s=i.get(r);s||(s=n.querySelector(Sl(r)),s||(t=Oe({src:t,async:!0},e),(e=cn.get(r))&&Ng(t,e),s=n.createElement("script"),ot(s),pt(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function dI(t,e){pi.M(t,e);var n=ya;if(n&&t){var i=Vs(n).hoistableScripts,r=_a(t),s=i.get(r);s||(s=n.querySelector(Sl(r)),s||(t=Oe({src:t,async:!0,type:"module"},e),(e=cn.get(r))&&Ng(t,e),s=n.createElement("script"),ot(s),pt(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function rv(t,e,n,i){var r=(r=Hi.current)?bc(r):null;if(!r)throw Error(B(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=ea(n.href),n=Vs(r).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=ea(n.href);var s=Vs(r).hoistableStyles,a=s.get(t);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(t,a),(s=r.querySelector(bl(t)))&&!s._p&&(a.instance=s,a.state.loading=5),cn.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},cn.set(t,n),s||mI(r,t,n,a.state))),e&&i===null)throw Error(B(528,""));return a}if(e&&i!==null)throw Error(B(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=_a(n),n=Vs(r).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(B(444,t))}}function ea(t){return'href="'+nn(t)+'"'}function bl(t){return'link[rel="stylesheet"]['+t+"]"}function Zb(t){return Oe({},t,{"data-precedence":t.precedence,precedence:null})}function mI(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),pt(e,"link",n),ot(e),t.head.appendChild(e))}function _a(t){return'[src="'+nn(t)+'"]'}function Sl(t){return"script[async]"+t}function sv(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+nn(n.href)+'"]');if(i)return e.instance=i,ot(i),i;var r=Oe({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),ot(i),pt(i,"style",r),Lu(i,n.precedence,t),e.instance=i;case"stylesheet":r=ea(n.href);var s=t.querySelector(bl(r));if(s)return e.state.loading|=4,e.instance=s,ot(s),s;i=Zb(n),(r=cn.get(r))&&Dg(i,r),s=(t.ownerDocument||t).createElement("link"),ot(s);var a=s;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),pt(s,"link",i),e.state.loading|=4,Lu(s,n.precedence,t),e.instance=s;case"script":return s=_a(n.src),(r=t.querySelector(Sl(s)))?(e.instance=r,ot(r),r):(i=n,(r=cn.get(s))&&(i=Oe({},n),Ng(i,r)),t=t.ownerDocument||t,r=t.createElement("script"),ot(r),pt(r,"link",i),t.head.appendChild(r),e.instance=r);case"void":return null;default:throw Error(B(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,Lu(i,n.precedence,t));return e.instance}function Lu(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===e)s=l;else if(s!==r)break}s?s.parentNode.insertBefore(t,s.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Dg(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Ng(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Pu=null;function av(t,e,n){if(Pu===null){var i=new Map,r=Pu=new Map;r.set(n,i)}else r=Pu,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),r=0;r<n.length;r++){var s=n[r];if(!(s[pl]||s[ft]||t==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(e)||"";a=t+a;var l=i.get(a);l?l.push(s):i.set(a,[s])}}return i}function ov(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function gI(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function e1(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function pI(t,e,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var r=ea(i.href),s=e.querySelector(bl(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=Sc.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=s,ot(s);return}s=e.ownerDocument||e,i=Zb(i),(r=cn.get(r))&&Dg(i,r),s=s.createElement("link"),ot(s);var a=s;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),pt(s,"link",i),n.instance=s}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=Sc.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var Ff=0;function yI(t,e){return t.stylesheets&&t.count===0&&Uu(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var i=setTimeout(function(){if(t.stylesheets&&Uu(t,t.stylesheets),t.unsuspend){var s=t.unsuspend;t.unsuspend=null,s()}},6e4+e);0<t.imgBytes&&Ff===0&&(Ff=62500*WC());var r=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Uu(t,t.stylesheets),t.unsuspend)){var s=t.unsuspend;t.unsuspend=null,s()}},(t.imgBytes>Ff?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(i),clearTimeout(r)}}:null}function Sc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Uu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ac=null;function Uu(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ac=new Map,e.forEach(_I,t),Ac=null,Sc.call(t))}function _I(t,e){if(!(e.state.loading&4)){var n=Ac.get(t);if(n)var i=n.get(null);else{n=new Map,Ac.set(t,n);for(var r=t.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}r=e.instance,a=r.getAttribute("data-precedence"),s=n.get(a)||i,s===i&&n.set(null,r),n.set(a,r),this.count++,i=Sc.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(r,t.firstChild)),e.state.loading|=4}}var Zo={$$typeof:$n,Provider:null,Consumer:null,_currentValue:Vr,_currentValue2:Vr,_threadCount:0};function vI(t,e,n,i,r,s,a,l,u){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=df(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=df(0),this.hiddenUpdates=df(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=u,this.incompleteTransitions=new Map}function t1(t,e,n,i,r,s,a,l,u,c,f,m){return t=new vI(t,e,n,a,u,c,f,m,l),e=1,s===!0&&(e|=24),s=Ht(3,null,null,e),t.current=s,s.stateNode=t,e=ig(),e.refCount++,t.pooledCache=e,e.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:e},ag(s),t}function n1(t){return t?(t=xs,t):xs}function i1(t,e,n,i,r,s){r=n1(r),i.context===null?i.context=r:i.pendingContext=r,i=Gi(e),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=Qi(t,i,e),n!==null&&(Pt(n,t,e),wo(n,t,e))}function lv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Og(t,e){lv(t,e),(t=t.alternate)&&lv(t,e)}function r1(t){if(t.tag===13||t.tag===31){var e=ts(t,67108864);e!==null&&Pt(e,t,67108864),Og(t,67108864)}}function uv(t){if(t.tag===13||t.tag===31){var e=Yt();e=Hm(e);var n=ts(t,e);n!==null&&Pt(n,t,e),Og(t,e)}}var wc=!0;function EI(t,e,n,i){var r=ee.T;ee.T=null;var s=ye.p;try{ye.p=2,Mg(t,e,n,i)}finally{ye.p=s,ee.T=r}}function TI(t,e,n,i){var r=ee.T;ee.T=null;var s=ye.p;try{ye.p=8,Mg(t,e,n,i)}finally{ye.p=s,ee.T=r}}function Mg(t,e,n,i){if(wc){var r=nm(i);if(r===null)qf(t,e,i,Rc,n),cv(t,i);else if(SI(r,t,e,n,i))i.stopPropagation();else if(cv(t,i),e&4&&-1<bI.indexOf(t)){for(;r!==null;){var s=da(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=xr(s.pendingLanes);if(a!==0){var l=s;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-Kt(a);l.entanglements[1]|=u,a&=~u}Pn(s),!(pe&6)&&(gc=Qt()+500,Tl(0))}}break;case 31:case 13:l=ts(s,2),l!==null&&Pt(l,s,2),ch(),Og(s,2)}if(s=nm(i),s===null&&qf(t,e,i,Rc,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else qf(t,e,i,null,n)}}function nm(t){return t=$m(t),Vg(t)}var Rc=null;function Vg(t){if(Rc=null,t=Ss(t),t!==null){var e=fl(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=A0(e),t!==null)return t;t=null}else if(n===31){if(t=w0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Rc=t,null}function s1(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(oR()){case x0:return 2;case D0:return 8;case tc:case lR:return 32;case N0:return 268435456;default:return 32}default:return 32}}var im=!1,Yi=null,Xi=null,Wi=null,el=new Map,tl=new Map,Oi=[],bI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cv(t,e){switch(t){case"focusin":case"focusout":Yi=null;break;case"dragenter":case"dragleave":Xi=null;break;case"mouseover":case"mouseout":Wi=null;break;case"pointerover":case"pointerout":el.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":tl.delete(e.pointerId)}}function ro(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=da(e),e!==null&&r1(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function SI(t,e,n,i,r){switch(e){case"focusin":return Yi=ro(Yi,t,e,n,i,r),!0;case"dragenter":return Xi=ro(Xi,t,e,n,i,r),!0;case"mouseover":return Wi=ro(Wi,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return el.set(s,ro(el.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,tl.set(s,ro(tl.get(s)||null,t,e,n,i,r)),!0}return!1}function a1(t){var e=Ss(t.target);if(e!==null){var n=fl(e);if(n!==null){if(e=n.tag,e===13){if(e=A0(n),e!==null){t.blockedOn=e,Ky(t.priority,function(){uv(n)});return}}else if(e===31){if(e=w0(n),e!==null){t.blockedOn=e,Ky(t.priority,function(){uv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ju(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=nm(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Td=i,n.target.dispatchEvent(i),Td=null}else return e=da(n),e!==null&&r1(e),t.blockedOn=n,!1;e.shift()}return!0}function hv(t,e,n){ju(t)&&n.delete(e)}function AI(){im=!1,Yi!==null&&ju(Yi)&&(Yi=null),Xi!==null&&ju(Xi)&&(Xi=null),Wi!==null&&ju(Wi)&&(Wi=null),el.forEach(hv),tl.forEach(hv)}function fu(t,e){t.blockedOn===e&&(t.blockedOn=null,im||(im=!0,it.unstable_scheduleCallback(it.unstable_NormalPriority,AI)))}var du=null;function fv(t){du!==t&&(du=t,it.unstable_scheduleCallback(it.unstable_NormalPriority,function(){du===t&&(du=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],r=t[e+2];if(typeof i!="function"){if(Vg(i||n)===null)continue;break}var s=da(n);s!==null&&(t.splice(e,3),e-=3,Pd(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function ta(t){function e(u){return fu(u,t)}Yi!==null&&fu(Yi,t),Xi!==null&&fu(Xi,t),Wi!==null&&fu(Wi,t),el.forEach(e),tl.forEach(e);for(var n=0;n<Oi.length;n++){var i=Oi[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<Oi.length&&(n=Oi[0],n.blockedOn===null);)a1(n),n.blockedOn===null&&Oi.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[Ut]||null;if(typeof s=="function")a||fv(n);else if(a){var l=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[Ut]||null)l=a.formAction;else if(Vg(r)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),fv(n)}}}function o1(){function t(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(a){return r=a})},focusReset:"manual",scroll:"manual"})}function e(){r!==null&&(r(),r=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,r=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),r!==null&&(r(),r=null)}}}function kg(t){this._internalRoot=t}dh.prototype.render=kg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));var n=e.current,i=Yt();i1(n,i,t,e,null,null)};dh.prototype.unmount=kg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;i1(t.current,2,null,t,null,null),ch(),e[fa]=null}};function dh(t){this._internalRoot=t}dh.prototype.unstable_scheduleHydration=function(t){if(t){var e=L0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Oi.length&&e!==0&&e<Oi[n].priority;n++);Oi.splice(n,0,t),n===0&&a1(t)}};var dv=b0.version;if(dv!=="19.2.0")throw Error(B(527,dv,"19.2.0"));ye.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=eR(e),t=t!==null?R0(t):null,t=t===null?null:t.stateNode,t};var wI={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mu.isDisabled&&mu.supportsFiber)try{dl=mu.inject(wI),$t=mu}catch{}}Xc.createRoot=function(t,e){if(!S0(t))throw Error(B(299));var n=!1,i="",r=JT,s=ZT,a=eb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(r=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=t1(t,1,!1,null,null,n,i,null,r,s,a,o1),t[fa]=e.current,xg(t),new kg(e)};Xc.hydrateRoot=function(t,e,n){if(!S0(t))throw Error(B(299));var i=!1,r="",s=JT,a=ZT,l=eb,u=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.formState!==void 0&&(u=n.formState)),e=t1(t,1,!0,e,n??null,i,r,u,s,a,l,o1),e.context=n1(null),n=e.current,i=Yt(),i=Hm(i),r=Gi(i),r.callback=null,Qi(n,r,i),n=i,e.current.lanes=n,gl(e,n),Pn(e),t[fa]=e.current,xg(t),new dh(e)};Xc.version="19.2.0";function l1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l1)}catch(t){console.error(t)}}l1(),p0.exports=Xc;var RI=p0.exports;/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var mv="popstate";function CI(t={}){function e(i,r){let{pathname:s,search:a,hash:l}=i.location;return rm("",{pathname:s,search:a,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:nl(r)}return xI(e,n,null,t)}function Ve(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function gn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function II(){return Math.random().toString(36).substring(2,10)}function gv(t,e){return{usr:t.state,key:t.key,idx:e}}function rm(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?va(e):e,state:n,key:e&&e.key||i||II()}}function nl({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function va(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function xI(t,e,n,i={}){let{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,l="POP",u=null,c=f();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function f(){return(a.state||{idx:null}).idx}function m(){l="POP";let N=f(),w=N==null?null:N-c;c=N,u&&u({action:l,location:M.location,delta:w})}function d(N,w){l="PUSH";let T=rm(M.location,N,w);c=f()+1;let E=gv(T,c),O=M.createHref(T);try{a.pushState(E,"",O)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;r.location.assign(O)}s&&u&&u({action:l,location:M.location,delta:1})}function _(N,w){l="REPLACE";let T=rm(M.location,N,w);c=f();let E=gv(T,c),O=M.createHref(T);a.replaceState(E,"",O),s&&u&&u({action:l,location:M.location,delta:0})}function x(N){return DI(N)}let M={get action(){return l},get location(){return t(r,a)},listen(N){if(u)throw new Error("A history only accepts one active listener");return r.addEventListener(mv,m),u=N,()=>{r.removeEventListener(mv,m),u=null}},createHref(N){return e(r,N)},createURL:x,encodeLocation(N){let w=x(N);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:d,replace:_,go(N){return a.go(N)}};return M}function DI(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ve(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:nl(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function u1(t,e,n="/"){return NI(t,e,n,!1)}function NI(t,e,n,i){let r=typeof e=="string"?va(e):e,s=ui(r.pathname||"/",n);if(s==null)return null;let a=c1(t);OI(a);let l=null;for(let u=0;l==null&&u<a.length;++u){let c=HI(s);l=BI(a[u],c,i)}return l}function c1(t,e=[],n=[],i="",r=!1){let s=(a,l,u=r,c)=>{let f={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(i)&&u)return;Ve(f.relativePath.startsWith(i),`Absolute route path "${f.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(i.length)}let m=ti([i,f.relativePath]),d=n.concat(f);a.children&&a.children.length>0&&(Ve(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),c1(a.children,e,d,m,u)),!(a.path==null&&!a.index)&&e.push({path:m,score:jI(m,a.index),routesMeta:d})};return t.forEach((a,l)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))s(a,l);else for(let c of h1(a.path))s(a,l,!0,c)}),e}function h1(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let a=h1(i.join("/")),l=[];return l.push(...a.map(u=>u===""?s:[s,u].join("/"))),r&&l.push(...a),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function OI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:zI(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var MI=/^:[\w-]+$/,VI=3,kI=2,LI=1,PI=10,UI=-2,pv=t=>t==="*";function jI(t,e){let n=t.split("/"),i=n.length;return n.some(pv)&&(i+=UI),e&&(i+=kI),n.filter(r=>!pv(r)).reduce((r,s)=>r+(MI.test(s)?VI:s===""?LI:PI),i)}function zI(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function BI(t,e,n=!1){let{routesMeta:i}=t,r={},s="/",a=[];for(let l=0;l<i.length;++l){let u=i[l],c=l===i.length-1,f=s==="/"?e:e.slice(s.length)||"/",m=Cc({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},f),d=u.route;if(!m&&c&&n&&!i[i.length-1].route.index&&(m=Cc({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!m)return null;Object.assign(r,m.params),a.push({params:r,pathname:ti([s,m.pathname]),pathnameBase:$I(ti([s,m.pathnameBase])),route:d}),m.pathnameBase!=="/"&&(s=ti([s,m.pathnameBase]))}return a}function Cc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=qI(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:i.reduce((c,{paramName:f,isOptional:m},d)=>{if(f==="*"){let x=l[d]||"";a=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const _=l[d];return m&&!_?c[f]=void 0:c[f]=(_||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:t}}function qI(t,e=!1,n=!0){gn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,u)=>(i.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function HI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return gn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ui(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function FI(t,e="/"){let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?va(t):t;return{pathname:n?n.startsWith("/")?n:GI(n,e):e,search:KI(i),hash:YI(r)}}function GI(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Gf(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function QI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Lg(t){let e=QI(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function Pg(t,e,n,i=!1){let r;typeof t=="string"?r=va(t):(r={...t},Ve(!r.pathname||!r.pathname.includes("?"),Gf("?","pathname","search",r)),Ve(!r.pathname||!r.pathname.includes("#"),Gf("#","pathname","hash",r)),Ve(!r.search||!r.search.includes("#"),Gf("#","search","hash",r)));let s=t===""||r.pathname==="",a=s?"/":r.pathname,l;if(a==null)l=n;else{let m=e.length-1;if(!i&&a.startsWith("..")){let d=a.split("/");for(;d[0]==="..";)d.shift(),m-=1;r.pathname=d.join("/")}l=m>=0?e[m]:"/"}let u=FI(r,l),c=a&&a!=="/"&&a.endsWith("/"),f=(s||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||f)&&(u.pathname+="/"),u}var ti=t=>t.join("/").replace(/\/\/+/g,"/"),$I=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),KI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,YI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function XI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var f1=["POST","PUT","PATCH","DELETE"];new Set(f1);var WI=["GET",...f1];new Set(WI);var Ea=D.createContext(null);Ea.displayName="DataRouter";var mh=D.createContext(null);mh.displayName="DataRouterState";D.createContext(!1);var d1=D.createContext({isTransitioning:!1});d1.displayName="ViewTransition";var JI=D.createContext(new Map);JI.displayName="Fetchers";var ZI=D.createContext(null);ZI.displayName="Await";var vn=D.createContext(null);vn.displayName="Navigation";var Al=D.createContext(null);Al.displayName="Location";var En=D.createContext({outlet:null,matches:[],isDataRoute:!1});En.displayName="Route";var Ug=D.createContext(null);Ug.displayName="RouteError";function ex(t,{relative:e}={}){Ve(Ta(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=D.useContext(vn),{hash:r,pathname:s,search:a}=Rl(t,{relative:e}),l=s;return n!=="/"&&(l=s==="/"?n:ti([n,s])),i.createHref({pathname:l,search:a,hash:r})}function Ta(){return D.useContext(Al)!=null}function yi(){return Ve(Ta(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(Al).location}var m1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function g1(t){D.useContext(vn).static||D.useLayoutEffect(t)}function wl(){let{isDataRoute:t}=D.useContext(En);return t?mx():tx()}function tx(){Ve(Ta(),"useNavigate() may be used only in the context of a <Router> component.");let t=D.useContext(Ea),{basename:e,navigator:n}=D.useContext(vn),{matches:i}=D.useContext(En),{pathname:r}=yi(),s=JSON.stringify(Lg(i)),a=D.useRef(!1);return g1(()=>{a.current=!0}),D.useCallback((u,c={})=>{if(gn(a.current,m1),!a.current)return;if(typeof u=="number"){n.go(u);return}let f=Pg(u,JSON.parse(s),r,c.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:ti([e,f.pathname])),(c.replace?n.replace:n.push)(f,c.state,c)},[e,n,s,r,t])}D.createContext(null);function nx(){let{matches:t}=D.useContext(En),e=t[t.length-1];return e?e.params:{}}function Rl(t,{relative:e}={}){let{matches:n}=D.useContext(En),{pathname:i}=yi(),r=JSON.stringify(Lg(n));return D.useMemo(()=>Pg(t,JSON.parse(r),i,e==="path"),[t,r,i,e])}function ix(t,e){return p1(t,e)}function p1(t,e,n,i,r){var T;Ve(Ta(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=D.useContext(vn),{matches:a}=D.useContext(En),l=a[a.length-1],u=l?l.params:{},c=l?l.pathname:"/",f=l?l.pathnameBase:"/",m=l&&l.route;{let E=m&&m.path||"";y1(c,!m||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let d=yi(),_;if(e){let E=typeof e=="string"?va(e):e;Ve(f==="/"||((T=E.pathname)==null?void 0:T.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${E.pathname}" was given in the \`location\` prop.`),_=E}else _=d;let x=_.pathname||"/",M=x;if(f!=="/"){let E=f.replace(/^\//,"").split("/");M="/"+x.replace(/^\//,"").split("/").slice(E.length).join("/")}let N=u1(t,{pathname:M});gn(m||N!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),gn(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=lx(N&&N.map(E=>Object.assign({},E,{params:Object.assign({},u,E.params),pathname:ti([f,s.encodeLocation?s.encodeLocation(E.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?f:ti([f,s.encodeLocation?s.encodeLocation(E.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathnameBase])})),a,n,i,r);return e&&w?D.createElement(Al.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},w):w}function rx(){let t=dx(),e=XI(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=D.createElement(D.Fragment,null,D.createElement("p",null,"💿 Hey developer 👋"),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:s},"ErrorBoundary")," or"," ",D.createElement("code",{style:s},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:r},n):null,a)}var sx=D.createElement(rx,null),ax=class extends D.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?D.createElement(En.Provider,{value:this.props.routeContext},D.createElement(Ug.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ox({routeContext:t,match:e,children:n}){let i=D.useContext(Ea);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),D.createElement(En.Provider,{value:t},n)}function lx(t,e=[],n=null,i=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,a=n==null?void 0:n.errors;if(a!=null){let c=s.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);Ve(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let l=!1,u=-1;if(n)for(let c=0;c<s.length;c++){let f=s[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=c),f.route.id){let{loaderData:m,errors:d}=n,_=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!d||d[f.route.id]===void 0);if(f.route.lazy||_){l=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((c,f,m)=>{let d,_=!1,x=null,M=null;n&&(d=a&&f.route.id?a[f.route.id]:void 0,x=f.route.errorElement||sx,l&&(u<0&&m===0?(y1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,M=null):u===m&&(_=!0,M=f.route.hydrateFallbackElement||null)));let N=e.concat(s.slice(0,m+1)),w=()=>{let T;return d?T=x:_?T=M:f.route.Component?T=D.createElement(f.route.Component,null):f.route.element?T=f.route.element:T=c,D.createElement(ox,{match:f,routeContext:{outlet:c,matches:N,isDataRoute:n!=null},children:T})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?D.createElement(ax,{location:n.location,revalidation:n.revalidation,component:x,error:d,children:w(),routeContext:{outlet:null,matches:N,isDataRoute:!0},unstable_onError:i}):w()},null)}function jg(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ux(t){let e=D.useContext(Ea);return Ve(e,jg(t)),e}function cx(t){let e=D.useContext(mh);return Ve(e,jg(t)),e}function hx(t){let e=D.useContext(En);return Ve(e,jg(t)),e}function zg(t){let e=hx(t),n=e.matches[e.matches.length-1];return Ve(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function fx(){return zg("useRouteId")}function dx(){var i;let t=D.useContext(Ug),e=cx("useRouteError"),n=zg("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[n]}function mx(){let{router:t}=ux("useNavigate"),e=zg("useNavigate"),n=D.useRef(!1);return g1(()=>{n.current=!0}),D.useCallback(async(r,s={})=>{gn(n.current,m1),n.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...s}))},[t,e])}var yv={};function y1(t,e,n){!e&&!yv[t]&&(yv[t]=!0,gn(!1,n))}D.memo(gx);function gx({routes:t,future:e,state:n,unstable_onError:i}){return p1(t,void 0,n,i,e)}function px({to:t,replace:e,state:n,relative:i}){Ve(Ta(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=D.useContext(vn);gn(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=D.useContext(En),{pathname:a}=yi(),l=wl(),u=Pg(t,Lg(s),a,i==="path"),c=JSON.stringify(u);return D.useEffect(()=>{l(JSON.parse(c),{replace:e,state:n,relative:i})},[l,c,i,e,n]),null}function Hn(t){Ve(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function yx({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:r,static:s=!1}){Ve(!Ta(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),l=D.useMemo(()=>({basename:a,navigator:r,static:s,future:{}}),[a,r,s]);typeof n=="string"&&(n=va(n));let{pathname:u="/",search:c="",hash:f="",state:m=null,key:d="default"}=n,_=D.useMemo(()=>{let x=ui(u,a);return x==null?null:{location:{pathname:x,search:c,hash:f,state:m,key:d},navigationType:i}},[a,u,c,f,m,d,i]);return gn(_!=null,`<Router basename="${a}"> is not able to match the URL "${u}${c}${f}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:D.createElement(vn.Provider,{value:l},D.createElement(Al.Provider,{children:e,value:_}))}function _x({children:t,location:e}){return ix(sm(t),e)}function sm(t,e=[]){let n=[];return D.Children.forEach(t,(i,r)=>{if(!D.isValidElement(i))return;let s=[...e,r];if(i.type===D.Fragment){n.push.apply(n,sm(i.props.children,s));return}Ve(i.type===Hn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ve(!i.props.index||!i.props.children,"An index route cannot have child routes.");let a={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=sm(i.props.children,s)),n.push(a)}),n}var zu="get",Bu="application/x-www-form-urlencoded";function gh(t){return t!=null&&typeof t.tagName=="string"}function vx(t){return gh(t)&&t.tagName.toLowerCase()==="button"}function Ex(t){return gh(t)&&t.tagName.toLowerCase()==="form"}function Tx(t){return gh(t)&&t.tagName.toLowerCase()==="input"}function bx(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Sx(t,e){return t.button===0&&(!e||e==="_self")&&!bx(t)}var gu=null;function Ax(){if(gu===null)try{new FormData(document.createElement("form"),0),gu=!1}catch{gu=!0}return gu}var wx=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Qf(t){return t!=null&&!wx.has(t)?(gn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Bu}"`),null):t}function Rx(t,e){let n,i,r,s,a;if(Ex(t)){let l=t.getAttribute("action");i=l?ui(l,e):null,n=t.getAttribute("method")||zu,r=Qf(t.getAttribute("enctype"))||Bu,s=new FormData(t)}else if(vx(t)||Tx(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||l.getAttribute("action");if(i=u?ui(u,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||zu,r=Qf(t.getAttribute("formenctype"))||Qf(l.getAttribute("enctype"))||Bu,s=new FormData(l,t),!Ax()){let{name:c,type:f,value:m}=t;if(f==="image"){let d=c?`${c}.`:"";s.append(`${d}x`,"0"),s.append(`${d}y`,"0")}else c&&s.append(c,m)}}else{if(gh(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=zu,i=null,r=Bu,a=t}return s&&r==="text/plain"&&(a=s,s=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Bg(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Cx(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&ui(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function Ix(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function xx(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Dx(t,e,n){let i=await Promise.all(t.map(async r=>{let s=e.routes[r.route.id];if(s){let a=await Ix(s,n);return a.links?a.links():[]}return[]}));return Vx(i.flat(1).filter(xx).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function _v(t,e,n,i,r,s){let a=(u,c)=>n[c]?u.route.id!==n[c].route.id:!0,l=(u,c)=>{var f;return n[c].pathname!==u.pathname||((f=n[c].route.path)==null?void 0:f.endsWith("*"))&&n[c].params["*"]!==u.params["*"]};return s==="assets"?e.filter((u,c)=>a(u,c)||l(u,c)):s==="data"?e.filter((u,c)=>{var m;let f=i.routes[u.route.id];if(!f||!f.hasLoader)return!1;if(a(u,c)||l(u,c))return!0;if(u.route.shouldRevalidate){let d=u.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((m=n[0])==null?void 0:m.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function Nx(t,e,{includeHydrateFallback:n}={}){return Ox(t.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function Ox(t){return[...new Set(t)]}function Mx(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function Vx(t,e){let n=new Set;return new Set(e),t.reduce((i,r)=>{let s=JSON.stringify(Mx(r));return n.has(s)||(n.add(s),i.push({key:s,link:r})),i},[])}function _1(){let t=D.useContext(Ea);return Bg(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function kx(){let t=D.useContext(mh);return Bg(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var qg=D.createContext(void 0);qg.displayName="FrameworkContext";function v1(){let t=D.useContext(qg);return Bg(t,"You must render this element inside a <HydratedRouter> element"),t}function Lx(t,e){let n=D.useContext(qg),[i,r]=D.useState(!1),[s,a]=D.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:c,onMouseLeave:f,onTouchStart:m}=e,d=D.useRef(null);D.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let M=w=>{w.forEach(T=>{a(T.isIntersecting)})},N=new IntersectionObserver(M,{threshold:.5});return d.current&&N.observe(d.current),()=>{N.disconnect()}}},[t]),D.useEffect(()=>{if(i){let M=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(M)}}},[i]);let _=()=>{r(!0)},x=()=>{r(!1),a(!1)};return n?t!=="intent"?[s,d,{}]:[s,d,{onFocus:so(l,_),onBlur:so(u,x),onMouseEnter:so(c,_),onMouseLeave:so(f,x),onTouchStart:so(m,_)}]:[!1,d,{}]}function so(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function Px({page:t,...e}){let{router:n}=_1(),i=D.useMemo(()=>u1(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?D.createElement(jx,{page:t,matches:i,...e}):null}function Ux(t){let{manifest:e,routeModules:n}=v1(),[i,r]=D.useState([]);return D.useEffect(()=>{let s=!1;return Dx(t,e,n).then(a=>{s||r(a)}),()=>{s=!0}},[t,e,n]),i}function jx({page:t,matches:e,...n}){let i=yi(),{manifest:r,routeModules:s}=v1(),{basename:a}=_1(),{loaderData:l,matches:u}=kx(),c=D.useMemo(()=>_v(t,e,u,r,i,"data"),[t,e,u,r,i]),f=D.useMemo(()=>_v(t,e,u,r,i,"assets"),[t,e,u,r,i]),m=D.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let x=new Set,M=!1;if(e.forEach(w=>{var E;let T=r.routes[w.route.id];!T||!T.hasLoader||(!c.some(O=>O.route.id===w.route.id)&&w.route.id in l&&((E=s[w.route.id])!=null&&E.shouldRevalidate)||T.hasClientLoader?M=!0:x.add(w.route.id))}),x.size===0)return[];let N=Cx(t,a,"data");return M&&x.size>0&&N.searchParams.set("_routes",e.filter(w=>x.has(w.route.id)).map(w=>w.route.id).join(",")),[N.pathname+N.search]},[a,l,i,r,c,e,t,s]),d=D.useMemo(()=>Nx(f,r),[f,r]),_=Ux(f);return D.createElement(D.Fragment,null,m.map(x=>D.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),d.map(x=>D.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),_.map(({key:x,link:M})=>D.createElement("link",{key:x,nonce:n.nonce,...M})))}function zx(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var E1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{E1&&(window.__reactRouterVersion="7.9.4")}catch{}function Bx({basename:t,children:e,window:n}){let i=D.useRef();i.current==null&&(i.current=CI({window:n,v5Compat:!0}));let r=i.current,[s,a]=D.useState({action:r.action,location:r.location}),l=D.useCallback(u=>{D.startTransition(()=>a(u))},[a]);return D.useLayoutEffect(()=>r.listen(l),[r,l]),D.createElement(yx,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:r})}var T1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Mi=D.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:r,reloadDocument:s,replace:a,state:l,target:u,to:c,preventScrollReset:f,viewTransition:m,...d},_){let{basename:x}=D.useContext(vn),M=typeof c=="string"&&T1.test(c),N,w=!1;if(typeof c=="string"&&M&&(N=c,E1))try{let A=new URL(window.location.href),C=c.startsWith("//")?new URL(A.protocol+c):new URL(c),I=ui(C.pathname,x);C.origin===A.origin&&I!=null?c=I+C.search+C.hash:w=!0}catch{gn(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=ex(c,{relative:r}),[E,O,U]=Lx(i,d),Q=Gx(c,{replace:a,state:l,target:u,preventScrollReset:f,relative:r,viewTransition:m});function y(A){e&&e(A),A.defaultPrevented||Q(A)}let v=D.createElement("a",{...d,...U,href:N||T,onClick:w||s?e:y,ref:zx(_,O),target:u,"data-discover":!M&&n==="render"?"true":void 0});return E&&!M?D.createElement(D.Fragment,null,v,D.createElement(Px,{page:T})):v});Mi.displayName="Link";var qx=D.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:r=!1,style:s,to:a,viewTransition:l,children:u,...c},f){let m=Rl(a,{relative:c.relative}),d=yi(),_=D.useContext(mh),{navigator:x,basename:M}=D.useContext(vn),N=_!=null&&Xx(m)&&l===!0,w=x.encodeLocation?x.encodeLocation(m).pathname:m.pathname,T=d.pathname,E=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;n||(T=T.toLowerCase(),E=E?E.toLowerCase():null,w=w.toLowerCase()),E&&M&&(E=ui(E,M)||E);const O=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let U=T===w||!r&&T.startsWith(w)&&T.charAt(O)==="/",Q=E!=null&&(E===w||!r&&E.startsWith(w)&&E.charAt(w.length)==="/"),y={isActive:U,isPending:Q,isTransitioning:N},v=U?e:void 0,A;typeof i=="function"?A=i(y):A=[i,U?"active":null,Q?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let C=typeof s=="function"?s(y):s;return D.createElement(Mi,{...c,"aria-current":v,className:A,ref:f,style:C,to:a,viewTransition:l},typeof u=="function"?u(y):u)});qx.displayName="NavLink";var Hx=D.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:r,state:s,method:a=zu,action:l,onSubmit:u,relative:c,preventScrollReset:f,viewTransition:m,...d},_)=>{let x=Kx(),M=Yx(l,{relative:c}),N=a.toLowerCase()==="get"?"get":"post",w=typeof l=="string"&&T1.test(l),T=E=>{if(u&&u(E),E.defaultPrevented)return;E.preventDefault();let O=E.nativeEvent.submitter,U=(O==null?void 0:O.getAttribute("formmethod"))||a;x(O||E.currentTarget,{fetcherKey:e,method:U,navigate:n,replace:r,state:s,relative:c,preventScrollReset:f,viewTransition:m})};return D.createElement("form",{ref:_,method:N,action:M,onSubmit:i?u:T,...d,"data-discover":!w&&t==="render"?"true":void 0})});Hx.displayName="Form";function Fx(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function b1(t){let e=D.useContext(Ea);return Ve(e,Fx(t)),e}function Gx(t,{target:e,replace:n,state:i,preventScrollReset:r,relative:s,viewTransition:a}={}){let l=wl(),u=yi(),c=Rl(t,{relative:s});return D.useCallback(f=>{if(Sx(f,e)){f.preventDefault();let m=n!==void 0?n:nl(u)===nl(c);l(t,{replace:m,state:i,preventScrollReset:r,relative:s,viewTransition:a})}},[u,l,c,n,i,e,t,r,s,a])}var Qx=0,$x=()=>`__${String(++Qx)}__`;function Kx(){let{router:t}=b1("useSubmit"),{basename:e}=D.useContext(vn),n=fx();return D.useCallback(async(i,r={})=>{let{action:s,method:a,encType:l,formData:u,body:c}=Rx(i,e);if(r.navigate===!1){let f=r.fetcherKey||$x();await t.fetch(f,n,r.action||s,{preventScrollReset:r.preventScrollReset,formData:u,body:c,formMethod:r.method||a,formEncType:r.encType||l,flushSync:r.flushSync})}else await t.navigate(r.action||s,{preventScrollReset:r.preventScrollReset,formData:u,body:c,formMethod:r.method||a,formEncType:r.encType||l,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}function Yx(t,{relative:e}={}){let{basename:n}=D.useContext(vn),i=D.useContext(En);Ve(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),s={...Rl(t||".",{relative:e})},a=yi();if(t==null){s.search=a.search;let l=new URLSearchParams(s.search),u=l.getAll("index");if(u.some(f=>f==="")){l.delete("index"),u.filter(m=>m).forEach(m=>l.append("index",m));let f=l.toString();s.search=f?`?${f}`:""}}return(!t||t===".")&&r.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:ti([n,s.pathname])),nl(s)}function Xx(t,{relative:e}={}){let n=D.useContext(d1);Ve(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=b1("useViewTransitionState"),r=Rl(t,{relative:e});if(!n.isTransitioning)return!1;let s=ui(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=ui(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Cc(r.pathname,a)!=null||Cc(r.pathname,s)!=null}const Wx=()=>{};var vv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Jx=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],a=t[n++],l=t[n++],u=((r&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return e.join("")},A1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],a=r+1<t.length,l=a?t[r+1]:0,u=r+2<t.length,c=u?t[r+2]:0,f=s>>2,m=(s&3)<<4|l>>4;let d=(l&15)<<2|c>>6,_=c&63;u||(_=64,a||(d=64)),i.push(n[f],n[m],n[d],n[_])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(S1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Jx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const m=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||l==null||c==null||m==null)throw new Zx;const d=s<<2|l>>4;if(i.push(d),c!==64){const _=l<<4&240|c>>2;if(i.push(_),m!==64){const x=c<<6&192|m;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Zx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const e2=function(t){const e=S1(t);return A1.encodeByteArray(e,!0)},Ic=function(t){return e2(t).replace(/\./g,"")},w1=function(t){try{return A1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=()=>t2().__FIREBASE_DEFAULTS__,i2=()=>{if(typeof process>"u"||typeof vv>"u")return;const t=vv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},r2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&w1(t[1]);return e&&JSON.parse(e)},ph=()=>{try{return Wx()||n2()||i2()||r2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},R1=t=>{var e,n;return(n=(e=ph())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},s2=t=>{const e=R1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},C1=()=>{var t;return(t=ph())==null?void 0:t.config},I1=t=>{var e;return(e=ph())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ba(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function x1(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Ic(JSON.stringify(n)),Ic(JSON.stringify(a)),""].join(".")}const Vo={};function l2(){const t={prod:[],emulator:[]};for(const e of Object.keys(Vo))Vo[e]?t.emulator.push(e):t.prod.push(e);return t}function u2(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Ev=!1;function D1(t,e){if(typeof window>"u"||typeof document>"u"||!ba(window.location.host)||Vo[t]===e||Vo[t]||Ev)return;Vo[t]=e;function n(d){return`__firebase__banner__${d}`}const i="__firebase__banner",s=l2().prod.length>0;function a(){const d=document.getElementById(i);d&&d.remove()}function l(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function u(d,_){d.setAttribute("width","24"),d.setAttribute("id",_),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function c(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{Ev=!0,a()},d}function f(d,_){d.setAttribute("id",_),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function m(){const d=u2(i),_=n("text"),x=document.getElementById(_)||document.createElement("span"),M=n("learnmore"),N=document.getElementById(M)||document.createElement("a"),w=n("preprendIcon"),T=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const E=d.element;l(E),f(N,M);const O=c();u(T,w),E.append(T,x,N,O),document.body.appendChild(E)}s?(x.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function c2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bt())}function h2(){var e;const t=(e=ph())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function f2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function d2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function m2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function g2(){const t=bt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function p2(){return!h2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function y2(){try{return typeof indexedDB=="object"}catch{return!1}}function _2(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2="FirebaseError";class _i extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=v2,Object.setPrototypeOf(this,_i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cl.prototype.create)}}class Cl{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],a=s?E2(s,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new _i(r,l,i)}}function E2(t,e){return t.replace(T2,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const T2=/\{\$([^}]+)}/g;function b2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ci(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],a=e[r];if(Tv(s)&&Tv(a)){if(!ci(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Tv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function mo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function go(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function S2(t,e){const n=new A2(t,e);return n.subscribe.bind(n)}class A2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");w2(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=$f),r.error===void 0&&(r.error=$f),r.complete===void 0&&(r.complete=$f);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function w2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function $f(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(t){return t&&t._delegate?t._delegate:t}class $r{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new a2;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(I2(e))try{this.getOrInitializeService({instanceIdentifier:Or})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Or){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Or){return this.instances.has(e)}getOptions(e=Or){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);i===l&&a.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:C2(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Or){return this.component?this.component.multipleInstances?e:Or:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function C2(t){return t===Or?void 0:t}function I2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new R2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ce||(ce={}));const D2={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},N2=ce.INFO,O2={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},M2=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=O2[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hg{constructor(e){this.name=e,this._logLevel=N2,this._logHandler=M2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?D2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}}const V2=(t,e)=>e.some(n=>t instanceof n);let bv,Sv;function k2(){return bv||(bv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function L2(){return Sv||(Sv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const N1=new WeakMap,am=new WeakMap,O1=new WeakMap,Kf=new WeakMap,Fg=new WeakMap;function P2(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Ji(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&N1.set(n,t)}).catch(()=>{}),Fg.set(e,t),e}function U2(t){if(am.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});am.set(t,e)}let om={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return am.get(t);if(e==="objectStoreNames")return t.objectStoreNames||O1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ji(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function j2(t){om=t(om)}function z2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Yf(this),e,...n);return O1.set(i,e.sort?e.sort():[e]),Ji(i)}:L2().includes(t)?function(...e){return t.apply(Yf(this),e),Ji(N1.get(this))}:function(...e){return Ji(t.apply(Yf(this),e))}}function B2(t){return typeof t=="function"?z2(t):(t instanceof IDBTransaction&&U2(t),V2(t,k2())?new Proxy(t,om):t)}function Ji(t){if(t instanceof IDBRequest)return P2(t);if(Kf.has(t))return Kf.get(t);const e=B2(t);return e!==t&&(Kf.set(t,e),Fg.set(e,t)),e}const Yf=t=>Fg.get(t);function q2(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(t,e),l=Ji(a);return i&&a.addEventListener("upgradeneeded",u=>{i(Ji(a.result),u.oldVersion,u.newVersion,Ji(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const H2=["get","getKey","getAll","getAllKeys","count"],F2=["put","add","delete","clear"],Xf=new Map;function Av(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xf.get(e))return Xf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=F2.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||H2.includes(n)))return;const s=async function(a,...l){const u=this.transaction(a,r?"readwrite":"readonly");let c=u.store;return i&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),r&&u.done]))[0]};return Xf.set(e,s),s}j2(t=>({...t,get:(e,n,i)=>Av(e,n)||t.get(e,n,i),has:(e,n)=>!!Av(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Q2(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function Q2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lm="@firebase/app",wv="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi=new Hg("@firebase/app"),$2="@firebase/app-compat",K2="@firebase/analytics-compat",Y2="@firebase/analytics",X2="@firebase/app-check-compat",W2="@firebase/app-check",J2="@firebase/auth",Z2="@firebase/auth-compat",eD="@firebase/database",tD="@firebase/data-connect",nD="@firebase/database-compat",iD="@firebase/functions",rD="@firebase/functions-compat",sD="@firebase/installations",aD="@firebase/installations-compat",oD="@firebase/messaging",lD="@firebase/messaging-compat",uD="@firebase/performance",cD="@firebase/performance-compat",hD="@firebase/remote-config",fD="@firebase/remote-config-compat",dD="@firebase/storage",mD="@firebase/storage-compat",gD="@firebase/firestore",pD="@firebase/ai",yD="@firebase/firestore-compat",_D="firebase",vD="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um="[DEFAULT]",ED={[lm]:"fire-core",[$2]:"fire-core-compat",[Y2]:"fire-analytics",[K2]:"fire-analytics-compat",[W2]:"fire-app-check",[X2]:"fire-app-check-compat",[J2]:"fire-auth",[Z2]:"fire-auth-compat",[eD]:"fire-rtdb",[tD]:"fire-data-connect",[nD]:"fire-rtdb-compat",[iD]:"fire-fn",[rD]:"fire-fn-compat",[sD]:"fire-iid",[aD]:"fire-iid-compat",[oD]:"fire-fcm",[lD]:"fire-fcm-compat",[uD]:"fire-perf",[cD]:"fire-perf-compat",[hD]:"fire-rc",[fD]:"fire-rc-compat",[dD]:"fire-gcs",[mD]:"fire-gcs-compat",[gD]:"fire-fst",[yD]:"fire-fst-compat",[pD]:"fire-vertex","fire-js":"fire-js",[_D]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc=new Map,TD=new Map,cm=new Map;function Rv(t,e){try{t.container.addComponent(e)}catch(n){hi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function na(t){const e=t.name;if(cm.has(e))return hi.debug(`There were multiple attempts to register component ${e}.`),!1;cm.set(e,t);for(const n of xc.values())Rv(n,t);for(const n of TD.values())Rv(n,t);return!0}function Gg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function an(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zi=new Cl("app","Firebase",bD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new $r("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa=vD;function M1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:um,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw Zi.create("bad-app-name",{appName:String(r)});if(n||(n=C1()),!n)throw Zi.create("no-options");const s=xc.get(r);if(s){if(ci(n,s.options)&&ci(i,s.config))return s;throw Zi.create("duplicate-app",{appName:r})}const a=new x2(r);for(const u of cm.values())a.addComponent(u);const l=new SD(n,i,a);return xc.set(r,l),l}function V1(t=um){const e=xc.get(t);if(!e&&t===um&&C1())return M1();if(!e)throw Zi.create("no-app",{appName:t});return e}function er(t,e,n){let i=ED[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),s=e.match(/\s|\//);if(r||s){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hi.warn(a.join(" "));return}na(new $r(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD="firebase-heartbeat-database",wD=1,il="firebase-heartbeat-store";let Wf=null;function k1(){return Wf||(Wf=q2(AD,wD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(il)}catch(n){console.warn(n)}}}}).catch(t=>{throw Zi.create("idb-open",{originalErrorMessage:t.message})})),Wf}async function RD(t){try{const n=(await k1()).transaction(il),i=await n.objectStore(il).get(L1(t));return await n.done,i}catch(e){if(e instanceof _i)hi.warn(e.message);else{const n=Zi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});hi.warn(n.message)}}}async function Cv(t,e){try{const i=(await k1()).transaction(il,"readwrite");await i.objectStore(il).put(e,L1(t)),await i.done}catch(n){if(n instanceof _i)hi.warn(n.message);else{const i=Zi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});hi.warn(i.message)}}}function L1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD=1024,ID=30;class xD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ND(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Iv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>ID){const a=OD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){hi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Iv(),{heartbeatsToSend:i,unsentEntries:r}=DD(this._heartbeatsCache.heartbeats),s=Ic(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return hi.warn(n),""}}}function Iv(){return new Date().toISOString().substring(0,10)}function DD(t,e=CD){const n=[];let i=t.slice();for(const r of t){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),xv(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),xv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class ND{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return y2()?_2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await RD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Cv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Cv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function xv(t){return Ic(JSON.stringify({version:2,heartbeats:t})).length}function OD(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(t){na(new $r("platform-logger",e=>new G2(e),"PRIVATE")),na(new $r("heartbeat",e=>new xD(e),"PRIVATE")),er(lm,wv,t),er(lm,wv,"esm2020"),er("fire-js","")}MD("");var Dv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tr,P1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(y,v){function A(){}A.prototype=v.prototype,y.F=v.prototype,y.prototype=new A,y.prototype.constructor=y,y.D=function(C,I,b){for(var R=Array(arguments.length-2),L=2;L<arguments.length;L++)R[L-2]=arguments[L];return v.prototype[I].apply(C,R)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(y,v,A){A||(A=0);const C=Array(16);if(typeof v=="string")for(var I=0;I<16;++I)C[I]=v.charCodeAt(A++)|v.charCodeAt(A++)<<8|v.charCodeAt(A++)<<16|v.charCodeAt(A++)<<24;else for(I=0;I<16;++I)C[I]=v[A++]|v[A++]<<8|v[A++]<<16|v[A++]<<24;v=y.g[0],A=y.g[1],I=y.g[2];let b=y.g[3],R;R=v+(b^A&(I^b))+C[0]+3614090360&4294967295,v=A+(R<<7&4294967295|R>>>25),R=b+(I^v&(A^I))+C[1]+3905402710&4294967295,b=v+(R<<12&4294967295|R>>>20),R=I+(A^b&(v^A))+C[2]+606105819&4294967295,I=b+(R<<17&4294967295|R>>>15),R=A+(v^I&(b^v))+C[3]+3250441966&4294967295,A=I+(R<<22&4294967295|R>>>10),R=v+(b^A&(I^b))+C[4]+4118548399&4294967295,v=A+(R<<7&4294967295|R>>>25),R=b+(I^v&(A^I))+C[5]+1200080426&4294967295,b=v+(R<<12&4294967295|R>>>20),R=I+(A^b&(v^A))+C[6]+2821735955&4294967295,I=b+(R<<17&4294967295|R>>>15),R=A+(v^I&(b^v))+C[7]+4249261313&4294967295,A=I+(R<<22&4294967295|R>>>10),R=v+(b^A&(I^b))+C[8]+1770035416&4294967295,v=A+(R<<7&4294967295|R>>>25),R=b+(I^v&(A^I))+C[9]+2336552879&4294967295,b=v+(R<<12&4294967295|R>>>20),R=I+(A^b&(v^A))+C[10]+4294925233&4294967295,I=b+(R<<17&4294967295|R>>>15),R=A+(v^I&(b^v))+C[11]+2304563134&4294967295,A=I+(R<<22&4294967295|R>>>10),R=v+(b^A&(I^b))+C[12]+1804603682&4294967295,v=A+(R<<7&4294967295|R>>>25),R=b+(I^v&(A^I))+C[13]+4254626195&4294967295,b=v+(R<<12&4294967295|R>>>20),R=I+(A^b&(v^A))+C[14]+2792965006&4294967295,I=b+(R<<17&4294967295|R>>>15),R=A+(v^I&(b^v))+C[15]+1236535329&4294967295,A=I+(R<<22&4294967295|R>>>10),R=v+(I^b&(A^I))+C[1]+4129170786&4294967295,v=A+(R<<5&4294967295|R>>>27),R=b+(A^I&(v^A))+C[6]+3225465664&4294967295,b=v+(R<<9&4294967295|R>>>23),R=I+(v^A&(b^v))+C[11]+643717713&4294967295,I=b+(R<<14&4294967295|R>>>18),R=A+(b^v&(I^b))+C[0]+3921069994&4294967295,A=I+(R<<20&4294967295|R>>>12),R=v+(I^b&(A^I))+C[5]+3593408605&4294967295,v=A+(R<<5&4294967295|R>>>27),R=b+(A^I&(v^A))+C[10]+38016083&4294967295,b=v+(R<<9&4294967295|R>>>23),R=I+(v^A&(b^v))+C[15]+3634488961&4294967295,I=b+(R<<14&4294967295|R>>>18),R=A+(b^v&(I^b))+C[4]+3889429448&4294967295,A=I+(R<<20&4294967295|R>>>12),R=v+(I^b&(A^I))+C[9]+568446438&4294967295,v=A+(R<<5&4294967295|R>>>27),R=b+(A^I&(v^A))+C[14]+3275163606&4294967295,b=v+(R<<9&4294967295|R>>>23),R=I+(v^A&(b^v))+C[3]+4107603335&4294967295,I=b+(R<<14&4294967295|R>>>18),R=A+(b^v&(I^b))+C[8]+1163531501&4294967295,A=I+(R<<20&4294967295|R>>>12),R=v+(I^b&(A^I))+C[13]+2850285829&4294967295,v=A+(R<<5&4294967295|R>>>27),R=b+(A^I&(v^A))+C[2]+4243563512&4294967295,b=v+(R<<9&4294967295|R>>>23),R=I+(v^A&(b^v))+C[7]+1735328473&4294967295,I=b+(R<<14&4294967295|R>>>18),R=A+(b^v&(I^b))+C[12]+2368359562&4294967295,A=I+(R<<20&4294967295|R>>>12),R=v+(A^I^b)+C[5]+4294588738&4294967295,v=A+(R<<4&4294967295|R>>>28),R=b+(v^A^I)+C[8]+2272392833&4294967295,b=v+(R<<11&4294967295|R>>>21),R=I+(b^v^A)+C[11]+1839030562&4294967295,I=b+(R<<16&4294967295|R>>>16),R=A+(I^b^v)+C[14]+4259657740&4294967295,A=I+(R<<23&4294967295|R>>>9),R=v+(A^I^b)+C[1]+2763975236&4294967295,v=A+(R<<4&4294967295|R>>>28),R=b+(v^A^I)+C[4]+1272893353&4294967295,b=v+(R<<11&4294967295|R>>>21),R=I+(b^v^A)+C[7]+4139469664&4294967295,I=b+(R<<16&4294967295|R>>>16),R=A+(I^b^v)+C[10]+3200236656&4294967295,A=I+(R<<23&4294967295|R>>>9),R=v+(A^I^b)+C[13]+681279174&4294967295,v=A+(R<<4&4294967295|R>>>28),R=b+(v^A^I)+C[0]+3936430074&4294967295,b=v+(R<<11&4294967295|R>>>21),R=I+(b^v^A)+C[3]+3572445317&4294967295,I=b+(R<<16&4294967295|R>>>16),R=A+(I^b^v)+C[6]+76029189&4294967295,A=I+(R<<23&4294967295|R>>>9),R=v+(A^I^b)+C[9]+3654602809&4294967295,v=A+(R<<4&4294967295|R>>>28),R=b+(v^A^I)+C[12]+3873151461&4294967295,b=v+(R<<11&4294967295|R>>>21),R=I+(b^v^A)+C[15]+530742520&4294967295,I=b+(R<<16&4294967295|R>>>16),R=A+(I^b^v)+C[2]+3299628645&4294967295,A=I+(R<<23&4294967295|R>>>9),R=v+(I^(A|~b))+C[0]+4096336452&4294967295,v=A+(R<<6&4294967295|R>>>26),R=b+(A^(v|~I))+C[7]+1126891415&4294967295,b=v+(R<<10&4294967295|R>>>22),R=I+(v^(b|~A))+C[14]+2878612391&4294967295,I=b+(R<<15&4294967295|R>>>17),R=A+(b^(I|~v))+C[5]+4237533241&4294967295,A=I+(R<<21&4294967295|R>>>11),R=v+(I^(A|~b))+C[12]+1700485571&4294967295,v=A+(R<<6&4294967295|R>>>26),R=b+(A^(v|~I))+C[3]+2399980690&4294967295,b=v+(R<<10&4294967295|R>>>22),R=I+(v^(b|~A))+C[10]+4293915773&4294967295,I=b+(R<<15&4294967295|R>>>17),R=A+(b^(I|~v))+C[1]+2240044497&4294967295,A=I+(R<<21&4294967295|R>>>11),R=v+(I^(A|~b))+C[8]+1873313359&4294967295,v=A+(R<<6&4294967295|R>>>26),R=b+(A^(v|~I))+C[15]+4264355552&4294967295,b=v+(R<<10&4294967295|R>>>22),R=I+(v^(b|~A))+C[6]+2734768916&4294967295,I=b+(R<<15&4294967295|R>>>17),R=A+(b^(I|~v))+C[13]+1309151649&4294967295,A=I+(R<<21&4294967295|R>>>11),R=v+(I^(A|~b))+C[4]+4149444226&4294967295,v=A+(R<<6&4294967295|R>>>26),R=b+(A^(v|~I))+C[11]+3174756917&4294967295,b=v+(R<<10&4294967295|R>>>22),R=I+(v^(b|~A))+C[2]+718787259&4294967295,I=b+(R<<15&4294967295|R>>>17),R=A+(b^(I|~v))+C[9]+3951481745&4294967295,y.g[0]=y.g[0]+v&4294967295,y.g[1]=y.g[1]+(I+(R<<21&4294967295|R>>>11))&4294967295,y.g[2]=y.g[2]+I&4294967295,y.g[3]=y.g[3]+b&4294967295}i.prototype.v=function(y,v){v===void 0&&(v=y.length);const A=v-this.blockSize,C=this.C;let I=this.h,b=0;for(;b<v;){if(I==0)for(;b<=A;)r(this,y,b),b+=this.blockSize;if(typeof y=="string"){for(;b<v;)if(C[I++]=y.charCodeAt(b++),I==this.blockSize){r(this,C),I=0;break}}else for(;b<v;)if(C[I++]=y[b++],I==this.blockSize){r(this,C),I=0;break}}this.h=I,this.o+=v},i.prototype.A=function(){var y=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);y[0]=128;for(var v=1;v<y.length-8;++v)y[v]=0;v=this.o*8;for(var A=y.length-8;A<y.length;++A)y[A]=v&255,v/=256;for(this.v(y),y=Array(16),v=0,A=0;A<4;++A)for(let C=0;C<32;C+=8)y[v++]=this.g[A]>>>C&255;return y};function s(y,v){var A=l;return Object.prototype.hasOwnProperty.call(A,y)?A[y]:A[y]=v(y)}function a(y,v){this.h=v;const A=[];let C=!0;for(let I=y.length-1;I>=0;I--){const b=y[I]|0;C&&b==v||(A[I]=b,C=!1)}this.g=A}var l={};function u(y){return-128<=y&&y<128?s(y,function(v){return new a([v|0],v<0?-1:0)}):new a([y|0],y<0?-1:0)}function c(y){if(isNaN(y)||!isFinite(y))return m;if(y<0)return N(c(-y));const v=[];let A=1;for(let C=0;y>=A;C++)v[C]=y/A|0,A*=4294967296;return new a(v,0)}function f(y,v){if(y.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(y.charAt(0)=="-")return N(f(y.substring(1),v));if(y.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=c(Math.pow(v,8));let C=m;for(let b=0;b<y.length;b+=8){var I=Math.min(8,y.length-b);const R=parseInt(y.substring(b,b+I),v);I<8?(I=c(Math.pow(v,I)),C=C.j(I).add(c(R))):(C=C.j(A),C=C.add(c(R)))}return C}var m=u(0),d=u(1),_=u(16777216);t=a.prototype,t.m=function(){if(M(this))return-N(this).m();let y=0,v=1;for(let A=0;A<this.g.length;A++){const C=this.i(A);y+=(C>=0?C:4294967296+C)*v,v*=4294967296}return y},t.toString=function(y){if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(x(this))return"0";if(M(this))return"-"+N(this).toString(y);const v=c(Math.pow(y,6));var A=this;let C="";for(;;){const I=O(A,v).g;A=w(A,I.j(v));let b=((A.g.length>0?A.g[0]:A.h)>>>0).toString(y);if(A=I,x(A))return b+C;for(;b.length<6;)b="0"+b;C=b+C}},t.i=function(y){return y<0?0:y<this.g.length?this.g[y]:this.h};function x(y){if(y.h!=0)return!1;for(let v=0;v<y.g.length;v++)if(y.g[v]!=0)return!1;return!0}function M(y){return y.h==-1}t.l=function(y){return y=w(this,y),M(y)?-1:x(y)?0:1};function N(y){const v=y.g.length,A=[];for(let C=0;C<v;C++)A[C]=~y.g[C];return new a(A,~y.h).add(d)}t.abs=function(){return M(this)?N(this):this},t.add=function(y){const v=Math.max(this.g.length,y.g.length),A=[];let C=0;for(let I=0;I<=v;I++){let b=C+(this.i(I)&65535)+(y.i(I)&65535),R=(b>>>16)+(this.i(I)>>>16)+(y.i(I)>>>16);C=R>>>16,b&=65535,R&=65535,A[I]=R<<16|b}return new a(A,A[A.length-1]&-2147483648?-1:0)};function w(y,v){return y.add(N(v))}t.j=function(y){if(x(this)||x(y))return m;if(M(this))return M(y)?N(this).j(N(y)):N(N(this).j(y));if(M(y))return N(this.j(N(y)));if(this.l(_)<0&&y.l(_)<0)return c(this.m()*y.m());const v=this.g.length+y.g.length,A=[];for(var C=0;C<2*v;C++)A[C]=0;for(C=0;C<this.g.length;C++)for(let I=0;I<y.g.length;I++){const b=this.i(C)>>>16,R=this.i(C)&65535,L=y.i(I)>>>16,G=y.i(I)&65535;A[2*C+2*I]+=R*G,T(A,2*C+2*I),A[2*C+2*I+1]+=b*G,T(A,2*C+2*I+1),A[2*C+2*I+1]+=R*L,T(A,2*C+2*I+1),A[2*C+2*I+2]+=b*L,T(A,2*C+2*I+2)}for(y=0;y<v;y++)A[y]=A[2*y+1]<<16|A[2*y];for(y=v;y<2*v;y++)A[y]=0;return new a(A,0)};function T(y,v){for(;(y[v]&65535)!=y[v];)y[v+1]+=y[v]>>>16,y[v]&=65535,v++}function E(y,v){this.g=y,this.h=v}function O(y,v){if(x(v))throw Error("division by zero");if(x(y))return new E(m,m);if(M(y))return v=O(N(y),v),new E(N(v.g),N(v.h));if(M(v))return v=O(y,N(v)),new E(N(v.g),v.h);if(y.g.length>30){if(M(y)||M(v))throw Error("slowDivide_ only works with positive integers.");for(var A=d,C=v;C.l(y)<=0;)A=U(A),C=U(C);var I=Q(A,1),b=Q(C,1);for(C=Q(C,2),A=Q(A,2);!x(C);){var R=b.add(C);R.l(y)<=0&&(I=I.add(A),b=R),C=Q(C,1),A=Q(A,1)}return v=w(y,I.j(v)),new E(I,v)}for(I=m;y.l(v)>=0;){for(A=Math.max(1,Math.floor(y.m()/v.m())),C=Math.ceil(Math.log(A)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),b=c(A),R=b.j(v);M(R)||R.l(y)>0;)A-=C,b=c(A),R=b.j(v);x(b)&&(b=d),I=I.add(b),y=w(y,R)}return new E(I,y)}t.B=function(y){return O(this,y).h},t.and=function(y){const v=Math.max(this.g.length,y.g.length),A=[];for(let C=0;C<v;C++)A[C]=this.i(C)&y.i(C);return new a(A,this.h&y.h)},t.or=function(y){const v=Math.max(this.g.length,y.g.length),A=[];for(let C=0;C<v;C++)A[C]=this.i(C)|y.i(C);return new a(A,this.h|y.h)},t.xor=function(y){const v=Math.max(this.g.length,y.g.length),A=[];for(let C=0;C<v;C++)A[C]=this.i(C)^y.i(C);return new a(A,this.h^y.h)};function U(y){const v=y.g.length+1,A=[];for(let C=0;C<v;C++)A[C]=y.i(C)<<1|y.i(C-1)>>>31;return new a(A,y.h)}function Q(y,v){const A=v>>5;v%=32;const C=y.g.length-A,I=[];for(let b=0;b<C;b++)I[b]=v>0?y.i(b+A)>>>v|y.i(b+A+1)<<32-v:y.i(b+A);return new a(I,y.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,P1=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=f,tr=a}).apply(typeof Dv<"u"?Dv:typeof self<"u"?self:typeof window<"u"?window:{});var pu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var U1,po,j1,qu,hm,z1,B1,q1;(function(){var t,e=Object.defineProperty;function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof pu=="object"&&pu];for(var h=0;h<o.length;++h){var g=o[h];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var i=n(this);function r(o,h){if(h)e:{var g=i;o=o.split(".");for(var S=0;S<o.length-1;S++){var V=o[S];if(!(V in g))break e;g=g[V]}o=o[o.length-1],S=g[o],h=h(S),h!=S&&h!=null&&e(g,o,{configurable:!0,writable:!0,value:h})}}r("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(o){return o||function(h){var g=[],S;for(S in h)Object.prototype.hasOwnProperty.call(h,S)&&g.push([S,h[S]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function l(o){var h=typeof o;return h=="object"&&o!=null||h=="function"}function u(o,h,g){return o.call.apply(o.bind,arguments)}function c(o,h,g){return c=u,c.apply(null,arguments)}function f(o,h){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),o.apply(this,S)}}function m(o,h){function g(){}g.prototype=h.prototype,o.Z=h.prototype,o.prototype=new g,o.prototype.constructor=o,o.Ob=function(S,V,P){for(var $=Array(arguments.length-2),se=2;se<arguments.length;se++)$[se-2]=arguments[se];return h.prototype[V].apply(S,$)}}var d=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function _(o){const h=o.length;if(h>0){const g=Array(h);for(let S=0;S<h;S++)g[S]=o[S];return g}return[]}function x(o,h){for(let S=1;S<arguments.length;S++){const V=arguments[S];var g=typeof V;if(g=g!="object"?g:V?Array.isArray(V)?"array":g:"null",g=="array"||g=="object"&&typeof V.length=="number"){g=o.length||0;const P=V.length||0;o.length=g+P;for(let $=0;$<P;$++)o[g+$]=V[$]}else o.push(V)}}class M{constructor(h,g){this.i=h,this.j=g,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function N(o){a.setTimeout(()=>{throw o},0)}function w(){var o=y;let h=null;return o.g&&(h=o.g,o.g=o.g.next,o.g||(o.h=null),h.next=null),h}class T{constructor(){this.h=this.g=null}add(h,g){const S=E.get();S.set(h,g),this.h?this.h.next=S:this.g=S,this.h=S}}var E=new M(()=>new O,o=>o.reset());class O{constructor(){this.next=this.g=this.h=null}set(h,g){this.h=h,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let U,Q=!1,y=new T,v=()=>{const o=Promise.resolve(void 0);U=()=>{o.then(A)}};function A(){for(var o;o=w();){try{o.h.call(o.g)}catch(g){N(g)}var h=E;h.j(o),h.h<100&&(h.h++,o.next=h.g,h.g=o)}Q=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(o,h){this.type=o,this.g=this.target=h,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var b=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,h=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const g=()=>{};a.addEventListener("test",g,h),a.removeEventListener("test",g,h)}catch{}return o}();function R(o){return/^[\s\xa0]*$/.test(o)}function L(o,h){I.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,h)}m(L,I),L.prototype.init=function(o,h){const g=this.type=o.type,S=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=h,h=o.relatedTarget,h||(g=="mouseover"?h=o.fromElement:g=="mouseout"&&(h=o.toElement)),this.relatedTarget=h,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&L.Z.h.call(this)},L.prototype.h=function(){L.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var G="closure_listenable_"+(Math.random()*1e6|0),j=0;function k(o,h,g,S,V){this.listener=o,this.proxy=null,this.src=h,this.type=g,this.capture=!!S,this.ha=V,this.key=++j,this.da=this.fa=!1}function F(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function q(o,h,g){for(const S in o)h.call(g,o[S],S,o)}function X(o,h){for(const g in o)h.call(void 0,o[g],g,o)}function le(o){const h={};for(const g in o)h[g]=o[g];return h}const ke="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ut(o,h){let g,S;for(let V=1;V<arguments.length;V++){S=arguments[V];for(g in S)o[g]=S[g];for(let P=0;P<ke.length;P++)g=ke[P],Object.prototype.hasOwnProperty.call(S,g)&&(o[g]=S[g])}}function ue(o){this.src=o,this.g={},this.h=0}ue.prototype.add=function(o,h,g,S,V){const P=o.toString();o=this.g[P],o||(o=this.g[P]=[],this.h++);const $=ka(o,h,S,V);return $>-1?(h=o[$],g||(h.fa=!1)):(h=new k(h,this.src,P,!!S,V),h.fa=g,o.push(h)),h};function Le(o,h){const g=h.type;if(g in o.g){var S=o.g[g],V=Array.prototype.indexOf.call(S,h,void 0),P;(P=V>=0)&&Array.prototype.splice.call(S,V,1),P&&(F(h),o.g[g].length==0&&(delete o.g[g],o.h--))}}function ka(o,h,g,S){for(let V=0;V<o.length;++V){const P=o[V];if(!P.da&&P.listener==h&&P.capture==!!g&&P.ha==S)return V}return-1}var Er="closure_lm_"+(Math.random()*1e6|0),zh={};function qp(o,h,g,S,V){if(Array.isArray(h)){for(let P=0;P<h.length;P++)qp(o,h[P],g,S,V);return null}return g=Gp(g),o&&o[G]?o.J(h,g,l(S)?!!S.capture:!1,V):ZA(o,h,g,!1,S,V)}function ZA(o,h,g,S,V,P){if(!h)throw Error("Invalid event type");const $=l(V)?!!V.capture:!!V;let se=qh(o);if(se||(o[Er]=se=new ue(o)),g=se.add(h,g,S,$,P),g.proxy)return g;if(S=ew(),g.proxy=S,S.src=o,S.listener=g,o.addEventListener)b||(V=$),V===void 0&&(V=!1),o.addEventListener(h.toString(),S,V);else if(o.attachEvent)o.attachEvent(Fp(h.toString()),S);else if(o.addListener&&o.removeListener)o.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return g}function ew(){function o(g){return h.call(o.src,o.listener,g)}const h=tw;return o}function Hp(o,h,g,S,V){if(Array.isArray(h))for(var P=0;P<h.length;P++)Hp(o,h[P],g,S,V);else S=l(S)?!!S.capture:!!S,g=Gp(g),o&&o[G]?(o=o.i,P=String(h).toString(),P in o.g&&(h=o.g[P],g=ka(h,g,S,V),g>-1&&(F(h[g]),Array.prototype.splice.call(h,g,1),h.length==0&&(delete o.g[P],o.h--)))):o&&(o=qh(o))&&(h=o.g[h.toString()],o=-1,h&&(o=ka(h,g,S,V)),(g=o>-1?h[o]:null)&&Bh(g))}function Bh(o){if(typeof o!="number"&&o&&!o.da){var h=o.src;if(h&&h[G])Le(h.i,o);else{var g=o.type,S=o.proxy;h.removeEventListener?h.removeEventListener(g,S,o.capture):h.detachEvent?h.detachEvent(Fp(g),S):h.addListener&&h.removeListener&&h.removeListener(S),(g=qh(h))?(Le(g,o),g.h==0&&(g.src=null,h[Er]=null)):F(o)}}}function Fp(o){return o in zh?zh[o]:zh[o]="on"+o}function tw(o,h){if(o.da)o=!0;else{h=new L(h,this);const g=o.listener,S=o.ha||o.src;o.fa&&Bh(o),o=g.call(S,h)}return o}function qh(o){return o=o[Er],o instanceof ue?o:null}var Hh="__closure_events_fn_"+(Math.random()*1e9>>>0);function Gp(o){return typeof o=="function"?o:(o[Hh]||(o[Hh]=function(h){return o.handleEvent(h)}),o[Hh])}function _t(){C.call(this),this.i=new ue(this),this.M=this,this.G=null}m(_t,C),_t.prototype[G]=!0,_t.prototype.removeEventListener=function(o,h,g,S){Hp(this,o,h,g,S)};function St(o,h){var g,S=o.G;if(S)for(g=[];S;S=S.G)g.push(S);if(o=o.M,S=h.type||h,typeof h=="string")h=new I(h,o);else if(h instanceof I)h.target=h.target||o;else{var V=h;h=new I(S,o),ut(h,V)}V=!0;let P,$;if(g)for($=g.length-1;$>=0;$--)P=h.g=g[$],V=Bl(P,S,!0,h)&&V;if(P=h.g=o,V=Bl(P,S,!0,h)&&V,V=Bl(P,S,!1,h)&&V,g)for($=0;$<g.length;$++)P=h.g=g[$],V=Bl(P,S,!1,h)&&V}_t.prototype.N=function(){if(_t.Z.N.call(this),this.i){var o=this.i;for(const h in o.g){const g=o.g[h];for(let S=0;S<g.length;S++)F(g[S]);delete o.g[h],o.h--}}this.G=null},_t.prototype.J=function(o,h,g,S){return this.i.add(String(o),h,!1,g,S)},_t.prototype.K=function(o,h,g,S){return this.i.add(String(o),h,!0,g,S)};function Bl(o,h,g,S){if(h=o.i.g[String(h)],!h)return!0;h=h.concat();let V=!0;for(let P=0;P<h.length;++P){const $=h[P];if($&&!$.da&&$.capture==g){const se=$.listener,et=$.ha||$.src;$.fa&&Le(o.i,$),V=se.call(et,S)!==!1&&V}}return V&&!S.defaultPrevented}function nw(o,h){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=c(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:a.setTimeout(o,h||0)}function Qp(o){o.g=nw(()=>{o.g=null,o.i&&(o.i=!1,Qp(o))},o.l);const h=o.h;o.h=null,o.m.apply(null,h)}class iw extends C{constructor(h,g){super(),this.m=h,this.l=g,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Qp(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function La(o){C.call(this),this.h=o,this.g={}}m(La,C);var $p=[];function Kp(o){q(o.g,function(h,g){this.g.hasOwnProperty(g)&&Bh(h)},o),o.g={}}La.prototype.N=function(){La.Z.N.call(this),Kp(this)},La.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fh=a.JSON.stringify,rw=a.JSON.parse,sw=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function Yp(){}function Xp(){}var Pa={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Gh(){I.call(this,"d")}m(Gh,I);function Qh(){I.call(this,"c")}m(Qh,I);var Tr={},Wp=null;function ql(){return Wp=Wp||new _t}Tr.Ia="serverreachability";function Jp(o){I.call(this,Tr.Ia,o)}m(Jp,I);function Ua(o){const h=ql();St(h,new Jp(h))}Tr.STAT_EVENT="statevent";function Zp(o,h){I.call(this,Tr.STAT_EVENT,o),this.stat=h}m(Zp,I);function At(o){const h=ql();St(h,new Zp(h,o))}Tr.Ja="timingevent";function ey(o,h){I.call(this,Tr.Ja,o),this.size=h}m(ey,I);function ja(o,h){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},h)}function za(){this.g=!0}za.prototype.ua=function(){this.g=!1};function aw(o,h,g,S,V,P){o.info(function(){if(o.g)if(P){var $="",se=P.split("&");for(let Se=0;Se<se.length;Se++){var et=se[Se].split("=");if(et.length>1){const rt=et[0];et=et[1];const bn=rt.split("_");$=bn.length>=2&&bn[1]=="type"?$+(rt+"="+et+"&"):$+(rt+"=redacted&")}}}else $=null;else $=P;return"XMLHTTP REQ ("+S+") [attempt "+V+"]: "+h+`
`+g+`
`+$})}function ow(o,h,g,S,V,P,$){o.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+V+"]: "+h+`
`+g+`
`+P+" "+$})}function os(o,h,g,S){o.info(function(){return"XMLHTTP TEXT ("+h+"): "+uw(o,g)+(S?" "+S:"")})}function lw(o,h){o.info(function(){return"TIMEOUT: "+h})}za.prototype.info=function(){};function uw(o,h){if(!o.g)return h;if(!h)return null;try{const P=JSON.parse(h);if(P){for(o=0;o<P.length;o++)if(Array.isArray(P[o])){var g=P[o];if(!(g.length<2)){var S=g[1];if(Array.isArray(S)&&!(S.length<1)){var V=S[0];if(V!="noop"&&V!="stop"&&V!="close")for(let $=1;$<S.length;$++)S[$]=""}}}}return Fh(P)}catch{return h}}var Hl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ty={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ny;function $h(){}m($h,Yp),$h.prototype.g=function(){return new XMLHttpRequest},ny=new $h;function Ba(o){return encodeURIComponent(String(o))}function cw(o){var h=1;o=o.split(":");const g=[];for(;h>0&&o.length;)g.push(o.shift()),h--;return o.length&&g.push(o.join(":")),g}function vi(o,h,g,S){this.j=o,this.i=h,this.l=g,this.S=S||1,this.V=new La(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new iy}function iy(){this.i=null,this.g="",this.h=!1}var ry={},Kh={};function Yh(o,h,g){o.M=1,o.A=Gl(Tn(h)),o.u=g,o.R=!0,sy(o,null)}function sy(o,h){o.F=Date.now(),Fl(o),o.B=Tn(o.A);var g=o.B,S=o.S;Array.isArray(S)||(S=[String(S)]),_y(g.i,"t",S),o.C=0,g=o.j.L,o.h=new iy,o.g=Ly(o.j,g?h:null,!o.u),o.P>0&&(o.O=new iw(c(o.Y,o,o.g),o.P)),h=o.V,g=o.g,S=o.ba;var V="readystatechange";Array.isArray(V)||(V&&($p[0]=V.toString()),V=$p);for(let P=0;P<V.length;P++){const $=qp(g,V[P],S||h.handleEvent,!1,h.h||h);if(!$)break;h.g[$.key]=$}h=o.J?le(o.J):{},o.u?(o.v||(o.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,h)):(o.v="GET",o.g.ea(o.B,o.v,null,h)),Ua(),aw(o.i,o.v,o.B,o.l,o.S,o.u)}vi.prototype.ba=function(o){o=o.target;const h=this.O;h&&bi(o)==3?h.j():this.Y(o)},vi.prototype.Y=function(o){try{if(o==this.g)e:{const se=bi(this.g),et=this.g.ya(),Se=this.g.ca();if(!(se<3)&&(se!=3||this.g&&(this.h.h||this.g.la()||wy(this.g)))){this.K||se!=4||et==7||(et==8||Se<=0?Ua(3):Ua(2)),Xh(this);var h=this.g.ca();this.X=h;var g=hw(this);if(this.o=h==200,ow(this.i,this.v,this.B,this.l,this.S,se,h),this.o){if(this.U&&!this.L){t:{if(this.g){var S,V=this.g;if((S=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(S)){var P=S;break t}}P=null}if(o=P)os(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Wh(this,o);else{this.o=!1,this.m=3,At(12),br(this),qa(this);break e}}if(this.R){o=!0;let rt;for(;!this.K&&this.C<g.length;)if(rt=fw(this,g),rt==Kh){se==4&&(this.m=4,At(14),o=!1),os(this.i,this.l,null,"[Incomplete Response]");break}else if(rt==ry){this.m=4,At(15),os(this.i,this.l,g,"[Invalid Chunk]"),o=!1;break}else os(this.i,this.l,rt,null),Wh(this,rt);if(ay(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),se!=4||g.length!=0||this.h.h||(this.m=1,At(16),o=!1),this.o=this.o&&o,!o)os(this.i,this.l,g,"[Invalid Chunked Response]"),br(this),qa(this);else if(g.length>0&&!this.W){this.W=!0;var $=this.j;$.g==this&&$.aa&&!$.P&&($.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),af($),$.P=!0,At(11))}}else os(this.i,this.l,g,null),Wh(this,g);se==4&&br(this),this.o&&!this.K&&(se==4?Oy(this.j,this):(this.o=!1,Fl(this)))}else Rw(this.g),h==400&&g.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),br(this),qa(this)}}}catch{}finally{}};function hw(o){if(!ay(o))return o.g.la();const h=wy(o.g);if(h==="")return"";let g="";const S=h.length,V=bi(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return br(o),qa(o),"";o.h.i=new a.TextDecoder}for(let P=0;P<S;P++)o.h.h=!0,g+=o.h.i.decode(h[P],{stream:!(V&&P==S-1)});return h.length=0,o.h.g+=g,o.C=0,o.h.g}function ay(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function fw(o,h){var g=o.C,S=h.indexOf(`
`,g);return S==-1?Kh:(g=Number(h.substring(g,S)),isNaN(g)?ry:(S+=1,S+g>h.length?Kh:(h=h.slice(S,S+g),o.C=S+g,h)))}vi.prototype.cancel=function(){this.K=!0,br(this)};function Fl(o){o.T=Date.now()+o.H,oy(o,o.H)}function oy(o,h){if(o.D!=null)throw Error("WatchDog timer not null");o.D=ja(c(o.aa,o),h)}function Xh(o){o.D&&(a.clearTimeout(o.D),o.D=null)}vi.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(lw(this.i,this.B),this.M!=2&&(Ua(),At(17)),br(this),this.m=2,qa(this)):oy(this,this.T-o)};function qa(o){o.j.I==0||o.K||Oy(o.j,o)}function br(o){Xh(o);var h=o.O;h&&typeof h.dispose=="function"&&h.dispose(),o.O=null,Kp(o.V),o.g&&(h=o.g,o.g=null,h.abort(),h.dispose())}function Wh(o,h){try{var g=o.j;if(g.I!=0&&(g.g==o||Jh(g.h,o))){if(!o.L&&Jh(g.h,o)&&g.I==3){try{var S=g.Ba.g.parse(h)}catch{S=null}if(Array.isArray(S)&&S.length==3){var V=S;if(V[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<o.F)Xl(g),Kl(g);else break e;sf(g),At(18)}}else g.xa=V[1],0<g.xa-g.K&&V[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=ja(c(g.Va,g),6e3));cy(g.h)<=1&&g.ta&&(g.ta=void 0)}else Ar(g,11)}else if((o.L||g.g==o)&&Xl(g),!R(h))for(V=g.Ba.g.parse(h),h=0;h<V.length;h++){let Se=V[h];const rt=Se[0];if(!(rt<=g.K))if(g.K=rt,Se=Se[1],g.I==2)if(Se[0]=="c"){g.M=Se[1],g.ba=Se[2];const bn=Se[3];bn!=null&&(g.ka=bn,g.j.info("VER="+g.ka));const wr=Se[4];wr!=null&&(g.za=wr,g.j.info("SVER="+g.za));const Si=Se[5];Si!=null&&typeof Si=="number"&&Si>0&&(S=1.5*Si,g.O=S,g.j.info("backChannelRequestTimeoutMs_="+S)),S=g;const Ai=o.g;if(Ai){const Jl=Ai.g?Ai.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jl){var P=S.h;P.g||Jl.indexOf("spdy")==-1&&Jl.indexOf("quic")==-1&&Jl.indexOf("h2")==-1||(P.j=P.l,P.g=new Set,P.h&&(Zh(P,P.h),P.h=null))}if(S.G){const of=Ai.g?Ai.g.getResponseHeader("X-HTTP-Session-Id"):null;of&&(S.wa=of,Ce(S.J,S.G,of))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-o.F,g.j.info("Handshake RTT: "+g.T+"ms")),S=g;var $=o;if(S.na=ky(S,S.L?S.ba:null,S.W),$.L){hy(S.h,$);var se=$,et=S.O;et&&(se.H=et),se.D&&(Xh(se),Fl(se)),S.g=$}else Dy(S);g.i.length>0&&Yl(g)}else Se[0]!="stop"&&Se[0]!="close"||Ar(g,7);else g.I==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?Ar(g,7):rf(g):Se[0]!="noop"&&g.l&&g.l.qa(Se),g.A=0)}}Ua(4)}catch{}}var dw=class{constructor(o,h){this.g=o,this.map=h}};function ly(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function uy(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function cy(o){return o.h?1:o.g?o.g.size:0}function Jh(o,h){return o.h?o.h==h:o.g?o.g.has(h):!1}function Zh(o,h){o.g?o.g.add(h):o.h=h}function hy(o,h){o.h&&o.h==h?o.h=null:o.g&&o.g.has(h)&&o.g.delete(h)}ly.prototype.cancel=function(){if(this.i=fy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function fy(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let h=o.i;for(const g of o.g.values())h=h.concat(g.G);return h}return _(o.i)}var dy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mw(o,h){if(o){o=o.split("&");for(let g=0;g<o.length;g++){const S=o[g].indexOf("=");let V,P=null;S>=0?(V=o[g].substring(0,S),P=o[g].substring(S+1)):V=o[g],h(V,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function Ei(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;o instanceof Ei?(this.l=o.l,Ha(this,o.j),this.o=o.o,this.g=o.g,Fa(this,o.u),this.h=o.h,ef(this,vy(o.i)),this.m=o.m):o&&(h=String(o).match(dy))?(this.l=!1,Ha(this,h[1]||"",!0),this.o=Ga(h[2]||""),this.g=Ga(h[3]||"",!0),Fa(this,h[4]),this.h=Ga(h[5]||"",!0),ef(this,h[6]||"",!0),this.m=Ga(h[7]||"")):(this.l=!1,this.i=new $a(null,this.l))}Ei.prototype.toString=function(){const o=[];var h=this.j;h&&o.push(Qa(h,my,!0),":");var g=this.g;return(g||h=="file")&&(o.push("//"),(h=this.o)&&o.push(Qa(h,my,!0),"@"),o.push(Ba(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&o.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&o.push("/"),o.push(Qa(g,g.charAt(0)=="/"?yw:pw,!0))),(g=this.i.toString())&&o.push("?",g),(g=this.m)&&o.push("#",Qa(g,vw)),o.join("")},Ei.prototype.resolve=function(o){const h=Tn(this);let g=!!o.j;g?Ha(h,o.j):g=!!o.o,g?h.o=o.o:g=!!o.g,g?h.g=o.g:g=o.u!=null;var S=o.h;if(g)Fa(h,o.u);else if(g=!!o.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var V=h.h.lastIndexOf("/");V!=-1&&(S=h.h.slice(0,V+1)+S)}if(V=S,V==".."||V==".")S="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){S=V.lastIndexOf("/",0)==0,V=V.split("/");const P=[];for(let $=0;$<V.length;){const se=V[$++];se=="."?S&&$==V.length&&P.push(""):se==".."?((P.length>1||P.length==1&&P[0]!="")&&P.pop(),S&&$==V.length&&P.push("")):(P.push(se),S=!0)}S=P.join("/")}else S=V}return g?h.h=S:g=o.i.toString()!=="",g?ef(h,vy(o.i)):g=!!o.m,g&&(h.m=o.m),h};function Tn(o){return new Ei(o)}function Ha(o,h,g){o.j=g?Ga(h,!0):h,o.j&&(o.j=o.j.replace(/:$/,""))}function Fa(o,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);o.u=h}else o.u=null}function ef(o,h,g){h instanceof $a?(o.i=h,Ew(o.i,o.l)):(g||(h=Qa(h,_w)),o.i=new $a(h,o.l))}function Ce(o,h,g){o.i.set(h,g)}function Gl(o){return Ce(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function Ga(o,h){return o?h?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Qa(o,h,g){return typeof o=="string"?(o=encodeURI(o).replace(h,gw),g&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function gw(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var my=/[#\/\?@]/g,pw=/[#\?:]/g,yw=/[#\?]/g,_w=/[#\?@]/g,vw=/#/g;function $a(o,h){this.h=this.g=null,this.i=o||null,this.j=!!h}function Sr(o){o.g||(o.g=new Map,o.h=0,o.i&&mw(o.i,function(h,g){o.add(decodeURIComponent(h.replace(/\+/g," ")),g)}))}t=$a.prototype,t.add=function(o,h){Sr(this),this.i=null,o=ls(this,o);let g=this.g.get(o);return g||this.g.set(o,g=[]),g.push(h),this.h+=1,this};function gy(o,h){Sr(o),h=ls(o,h),o.g.has(h)&&(o.i=null,o.h-=o.g.get(h).length,o.g.delete(h))}function py(o,h){return Sr(o),h=ls(o,h),o.g.has(h)}t.forEach=function(o,h){Sr(this),this.g.forEach(function(g,S){g.forEach(function(V){o.call(h,V,S,this)},this)},this)};function yy(o,h){Sr(o);let g=[];if(typeof h=="string")py(o,h)&&(g=g.concat(o.g.get(ls(o,h))));else for(o=Array.from(o.g.values()),h=0;h<o.length;h++)g=g.concat(o[h]);return g}t.set=function(o,h){return Sr(this),this.i=null,o=ls(this,o),py(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[h]),this.h+=1,this},t.get=function(o,h){return o?(o=yy(this,o),o.length>0?String(o[0]):h):h};function _y(o,h,g){gy(o,h),g.length>0&&(o.i=null,o.g.set(ls(o,h),_(g)),o.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],h=Array.from(this.g.keys());for(let S=0;S<h.length;S++){var g=h[S];const V=Ba(g);g=yy(this,g);for(let P=0;P<g.length;P++){let $=V;g[P]!==""&&($+="="+Ba(g[P])),o.push($)}}return this.i=o.join("&")};function vy(o){const h=new $a;return h.i=o.i,o.g&&(h.g=new Map(o.g),h.h=o.h),h}function ls(o,h){return h=String(h),o.j&&(h=h.toLowerCase()),h}function Ew(o,h){h&&!o.j&&(Sr(o),o.i=null,o.g.forEach(function(g,S){const V=S.toLowerCase();S!=V&&(gy(this,S),_y(this,V,g))},o)),o.j=h}function Tw(o,h){const g=new za;if(a.Image){const S=new Image;S.onload=f(Ti,g,"TestLoadImage: loaded",!0,h,S),S.onerror=f(Ti,g,"TestLoadImage: error",!1,h,S),S.onabort=f(Ti,g,"TestLoadImage: abort",!1,h,S),S.ontimeout=f(Ti,g,"TestLoadImage: timeout",!1,h,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=o}else h(!1)}function bw(o,h){const g=new za,S=new AbortController,V=setTimeout(()=>{S.abort(),Ti(g,"TestPingServer: timeout",!1,h)},1e4);fetch(o,{signal:S.signal}).then(P=>{clearTimeout(V),P.ok?Ti(g,"TestPingServer: ok",!0,h):Ti(g,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(V),Ti(g,"TestPingServer: error",!1,h)})}function Ti(o,h,g,S,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),S(g)}catch{}}function Sw(){this.g=new sw}function tf(o){this.i=o.Sb||null,this.h=o.ab||!1}m(tf,Yp),tf.prototype.g=function(){return new Ql(this.i,this.h)};function Ql(o,h){_t.call(this),this.H=o,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(Ql,_t),t=Ql.prototype,t.open=function(o,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=h,this.readyState=1,Ya(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(h.body=o),(this.H||a).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ka(this)),this.readyState=0},t.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Ya(this)),this.g&&(this.readyState=3,Ya(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ey(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ey(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}t.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var h=o.value?o.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!o.done}))&&(this.response=this.responseText+=h)}o.done?Ka(this):Ya(this),this.readyState==3&&Ey(this)}},t.Oa=function(o){this.g&&(this.response=this.responseText=o,Ka(this))},t.Na=function(o){this.g&&(this.response=o,Ka(this))},t.ga=function(){this.g&&Ka(this)};function Ka(o){o.readyState=4,o.l=null,o.j=null,o.B=null,Ya(o)}t.setRequestHeader=function(o,h){this.A.append(o,h)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],h=this.h.entries();for(var g=h.next();!g.done;)g=g.value,o.push(g[0]+": "+g[1]),g=h.next();return o.join(`\r
`)};function Ya(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Ql.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Ty(o){let h="";return q(o,function(g,S){h+=S,h+=":",h+=g,h+=`\r
`}),h}function nf(o,h,g){e:{for(S in g){var S=!1;break e}S=!0}S||(g=Ty(g),typeof o=="string"?g!=null&&Ba(g):Ce(o,h,g))}function je(o){_t.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(je,_t);var Aw=/^https?$/i,ww=["POST","PUT"];t=je.prototype,t.Fa=function(o){this.H=o},t.ea=function(o,h,g,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);h=h?h.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ny.g(),this.g.onreadystatechange=d(c(this.Ca,this));try{this.B=!0,this.g.open(h,String(o),!0),this.B=!1}catch(P){by(this,P);return}if(o=g||"",g=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var V in S)g.set(V,S[V]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const P of S.keys())g.set(P,S.get(P));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(g.keys()).find(P=>P.toLowerCase()=="content-type"),V=a.FormData&&o instanceof a.FormData,!(Array.prototype.indexOf.call(ww,h,void 0)>=0)||S||V||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[P,$]of g)this.g.setRequestHeader(P,$);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(P){by(this,P)}};function by(o,h){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=h,o.o=5,Sy(o),$l(o)}function Sy(o){o.A||(o.A=!0,St(o,"complete"),St(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,St(this,"complete"),St(this,"abort"),$l(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$l(this,!0)),je.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ay(this):this.Xa())},t.Xa=function(){Ay(this)};function Ay(o){if(o.h&&typeof s<"u"){if(o.v&&bi(o)==4)setTimeout(o.Ca.bind(o),0);else if(St(o,"readystatechange"),bi(o)==4){o.h=!1;try{const P=o.ca();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var g;if(!(g=h)){var S;if(S=P===0){let $=String(o.D).match(dy)[1]||null;!$&&a.self&&a.self.location&&($=a.self.location.protocol.slice(0,-1)),S=!Aw.test($?$.toLowerCase():"")}g=S}if(g)St(o,"complete"),St(o,"success");else{o.o=6;try{var V=bi(o)>2?o.g.statusText:""}catch{V=""}o.l=V+" ["+o.ca()+"]",Sy(o)}}finally{$l(o)}}}}function $l(o,h){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const g=o.g;o.g=null,h||St(o,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function bi(o){return o.g?o.g.readyState:0}t.ca=function(){try{return bi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(o){if(this.g){var h=this.g.responseText;return o&&h.indexOf(o)==0&&(h=h.substring(o.length)),rw(h)}};function wy(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Rw(o){const h={};o=(o.g&&bi(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<o.length;S++){if(R(o[S]))continue;var g=cw(o[S]);const V=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const P=h[V]||[];h[V]=P,P.push(g)}X(h,function(S){return S.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xa(o,h,g){return g&&g.internalChannelParams&&g.internalChannelParams[o]||h}function Ry(o){this.za=0,this.i=[],this.j=new za,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Xa("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Xa("baseRetryDelayMs",5e3,o),this.Za=Xa("retryDelaySeedMs",1e4,o),this.Ta=Xa("forwardChannelMaxRetries",2,o),this.va=Xa("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new ly(o&&o.concurrentRequestLimit),this.Ba=new Sw,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Ry.prototype,t.ka=8,t.I=1,t.connect=function(o,h,g,S){At(0),this.W=o,this.H=h||{},g&&S!==void 0&&(this.H.OSID=g,this.H.OAID=S),this.F=this.X,this.J=ky(this,null,this.W),Yl(this)};function rf(o){if(Cy(o),o.I==3){var h=o.V++,g=Tn(o.J);if(Ce(g,"SID",o.M),Ce(g,"RID",h),Ce(g,"TYPE","terminate"),Wa(o,g),h=new vi(o,o.j,h),h.M=2,h.A=Gl(Tn(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(h.A.toString(),"")}catch{}!g&&a.Image&&(new Image().src=h.A,g=!0),g||(h.g=Ly(h.j,null),h.g.ea(h.A)),h.F=Date.now(),Fl(h)}Vy(o)}function Kl(o){o.g&&(af(o),o.g.cancel(),o.g=null)}function Cy(o){Kl(o),o.v&&(a.clearTimeout(o.v),o.v=null),Xl(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&a.clearTimeout(o.m),o.m=null)}function Yl(o){if(!uy(o.h)&&!o.m){o.m=!0;var h=o.Ea;U||v(),Q||(U(),Q=!0),y.add(h,o),o.D=0}}function Cw(o,h){return cy(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=h.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=ja(c(o.Ea,o,h),My(o,o.D)),o.D++,!0)}t.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const V=new vi(this,this.j,o);let P=this.o;if(this.U&&(P?(P=le(P),ut(P,this.U)):P=this.U),this.u!==null||this.R||(V.J=P,P=null),this.S)e:{for(var h=0,g=0;g<this.i.length;g++){t:{var S=this.i[g];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(h+=S,h>4096){h=g;break e}if(h===4096||g===this.i.length-1){h=g+1;break e}}h=1e3}else h=1e3;h=xy(this,V,h),g=Tn(this.J),Ce(g,"RID",o),Ce(g,"CVER",22),this.G&&Ce(g,"X-HTTP-Session-Id",this.G),Wa(this,g),P&&(this.R?h="headers="+Ba(Ty(P))+"&"+h:this.u&&nf(g,this.u,P)),Zh(this.h,V),this.Ra&&Ce(g,"TYPE","init"),this.S?(Ce(g,"$req",h),Ce(g,"SID","null"),V.U=!0,Yh(V,g,null)):Yh(V,g,h),this.I=2}}else this.I==3&&(o?Iy(this,o):this.i.length==0||uy(this.h)||Iy(this))};function Iy(o,h){var g;h?g=h.l:g=o.V++;const S=Tn(o.J);Ce(S,"SID",o.M),Ce(S,"RID",g),Ce(S,"AID",o.K),Wa(o,S),o.u&&o.o&&nf(S,o.u,o.o),g=new vi(o,o.j,g,o.D+1),o.u===null&&(g.J=o.o),h&&(o.i=h.G.concat(o.i)),h=xy(o,g,1e3),g.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),Zh(o.h,g),Yh(g,S,h)}function Wa(o,h){o.H&&q(o.H,function(g,S){Ce(h,S,g)}),o.l&&q({},function(g,S){Ce(h,S,g)})}function xy(o,h,g){g=Math.min(o.i.length,g);const S=o.l?c(o.l.Ka,o.l,o):null;e:{var V=o.i;let se=-1;for(;;){const et=["count="+g];se==-1?g>0?(se=V[0].g,et.push("ofs="+se)):se=0:et.push("ofs="+se);let Se=!0;for(let rt=0;rt<g;rt++){var P=V[rt].g;const bn=V[rt].map;if(P-=se,P<0)se=Math.max(0,V[rt].g-100),Se=!1;else try{P="req"+P+"_"||"";try{var $=bn instanceof Map?bn:Object.entries(bn);for(const[wr,Si]of $){let Ai=Si;l(Si)&&(Ai=Fh(Si)),et.push(P+wr+"="+encodeURIComponent(Ai))}}catch(wr){throw et.push(P+"type="+encodeURIComponent("_badmap")),wr}}catch{S&&S(bn)}}if(Se){$=et.join("&");break e}}$=void 0}return o=o.i.splice(0,g),h.G=o,$}function Dy(o){if(!o.g&&!o.v){o.Y=1;var h=o.Da;U||v(),Q||(U(),Q=!0),y.add(h,o),o.A=0}}function sf(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=ja(c(o.Da,o),My(o,o.A)),o.A++,!0)}t.Da=function(){if(this.v=null,Ny(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=ja(c(this.Wa,this),o)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),Kl(this),Ny(this))};function af(o){o.B!=null&&(a.clearTimeout(o.B),o.B=null)}function Ny(o){o.g=new vi(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var h=Tn(o.na);Ce(h,"RID","rpc"),Ce(h,"SID",o.M),Ce(h,"AID",o.K),Ce(h,"CI",o.F?"0":"1"),!o.F&&o.ia&&Ce(h,"TO",o.ia),Ce(h,"TYPE","xmlhttp"),Wa(o,h),o.u&&o.o&&nf(h,o.u,o.o),o.O&&(o.g.H=o.O);var g=o.g;o=o.ba,g.M=1,g.A=Gl(Tn(h)),g.u=null,g.R=!0,sy(g,o)}t.Va=function(){this.C!=null&&(this.C=null,Kl(this),sf(this),At(19))};function Xl(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function Oy(o,h){var g=null;if(o.g==h){Xl(o),af(o),o.g=null;var S=2}else if(Jh(o.h,h))g=h.G,hy(o.h,h),S=1;else return;if(o.I!=0){if(h.o)if(S==1){g=h.u?h.u.length:0,h=Date.now()-h.F;var V=o.D;S=ql(),St(S,new ey(S,g)),Yl(o)}else Dy(o);else if(V=h.m,V==3||V==0&&h.X>0||!(S==1&&Cw(o,h)||S==2&&sf(o)))switch(g&&g.length>0&&(h=o.h,h.i=h.i.concat(g)),V){case 1:Ar(o,5);break;case 4:Ar(o,10);break;case 3:Ar(o,6);break;default:Ar(o,2)}}}function My(o,h){let g=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(g*=2),g*h}function Ar(o,h){if(o.j.info("Error code "+h),h==2){var g=c(o.bb,o),S=o.Ua;const V=!S;S=new Ei(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ha(S,"https"),Gl(S),V?Tw(S.toString(),g):bw(S.toString(),g)}else At(2);o.I=0,o.l&&o.l.pa(h),Vy(o),Cy(o)}t.bb=function(o){o?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function Vy(o){if(o.I=0,o.ja=[],o.l){const h=fy(o.h);(h.length!=0||o.i.length!=0)&&(x(o.ja,h),x(o.ja,o.i),o.h.i.length=0,_(o.i),o.i.length=0),o.l.oa()}}function ky(o,h,g){var S=g instanceof Ei?Tn(g):new Ei(g);if(S.g!="")h&&(S.g=h+"."+S.g),Fa(S,S.u);else{var V=a.location;S=V.protocol,h=h?h+"."+V.hostname:V.hostname,V=+V.port;const P=new Ei(null);S&&Ha(P,S),h&&(P.g=h),V&&Fa(P,V),g&&(P.h=g),S=P}return g=o.G,h=o.wa,g&&h&&Ce(S,g,h),Ce(S,"VER",o.ka),Wa(o,S),S}function Ly(o,h,g){if(h&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=o.Aa&&!o.ma?new je(new tf({ab:g})):new je(o.ma),h.Fa(o.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Py(){}t=Py.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Wl(){}Wl.prototype.g=function(o,h){return new zt(o,h)};function zt(o,h){_t.call(this),this.g=new Ry(h),this.l=o,this.h=h&&h.messageUrlParams||null,o=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(o?o["X-WebChannel-Content-Type"]=h.messageContentType:o={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(o?o["X-WebChannel-Client-Profile"]=h.sa:o={"X-WebChannel-Client-Profile":h.sa}),this.g.U=o,(o=h&&h.Qb)&&!R(o)&&(this.g.u=o),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!R(h)&&(this.g.G=h,o=this.h,o!==null&&h in o&&(o=this.h,h in o&&delete o[h])),this.j=new us(this)}m(zt,_t),zt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){rf(this.g)},zt.prototype.o=function(o){var h=this.g;if(typeof o=="string"){var g={};g.__data__=o,o=g}else this.v&&(g={},g.__data__=Fh(o),o=g);h.i.push(new dw(h.Ya++,o)),h.I==3&&Yl(h)},zt.prototype.N=function(){this.g.l=null,delete this.j,rf(this.g),delete this.g,zt.Z.N.call(this)};function Uy(o){Gh.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var h=o.__sm__;if(h){e:{for(const g in h){o=g;break e}o=void 0}(this.i=o)&&(o=this.i,h=h!==null&&o in h?h[o]:void 0),this.data=h}else this.data=o}m(Uy,Gh);function jy(){Qh.call(this),this.status=1}m(jy,Qh);function us(o){this.g=o}m(us,Py),us.prototype.ra=function(){St(this.g,"a")},us.prototype.qa=function(o){St(this.g,new Uy(o))},us.prototype.pa=function(o){St(this.g,new jy)},us.prototype.oa=function(){St(this.g,"b")},Wl.prototype.createWebChannel=Wl.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,q1=function(){return new Wl},B1=function(){return ql()},z1=Tr,hm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Hl.NO_ERROR=0,Hl.TIMEOUT=8,Hl.HTTP_ERROR=6,qu=Hl,ty.COMPLETE="complete",j1=ty,Xp.EventType=Pa,Pa.OPEN="a",Pa.CLOSE="b",Pa.ERROR="c",Pa.MESSAGE="d",_t.prototype.listen=_t.prototype.J,po=Xp,je.prototype.listenOnce=je.prototype.K,je.prototype.getLastError=je.prototype.Ha,je.prototype.getLastErrorCode=je.prototype.ya,je.prototype.getStatus=je.prototype.ca,je.prototype.getResponseJson=je.prototype.La,je.prototype.getResponseText=je.prototype.la,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Fa,U1=je}).apply(typeof pu<"u"?pu:typeof self<"u"?self:typeof window<"u"?window:{});const Nv="@firebase/firestore",Ov="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Et.UNAUTHENTICATED=new Et(null),Et.GOOGLE_CREDENTIALS=new Et("google-credentials-uid"),Et.FIRST_PARTY=new Et("first-party-uid"),Et.MOCK_USER=new Et("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Aa="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr=new Hg("@firebase/firestore");function ys(){return Kr.logLevel}function Y(t,...e){if(Kr.logLevel<=ce.DEBUG){const n=e.map(Qg);Kr.debug(`Firestore (${Aa}): ${t}`,...n)}}function fi(t,...e){if(Kr.logLevel<=ce.ERROR){const n=e.map(Qg);Kr.error(`Firestore (${Aa}): ${t}`,...n)}}function ia(t,...e){if(Kr.logLevel<=ce.WARN){const n=e.map(Qg);Kr.warn(`Firestore (${Aa}): ${t}`,...n)}}function Qg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,H1(t,i,n)}function H1(t,e,n){let i=`FIRESTORE (${Aa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw fi(i),new Error(i)}function _e(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||H1(e,r,i)}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends _i{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Et.UNAUTHENTICATED))}shutdown(){}}class kD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class LD{constructor(e){this.t=e,this.currentUser=Et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_e(this.o===void 0,42304);let i=this.i;const r=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let s=new ni;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ni,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ni)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(_e(typeof i.accessToken=="string",31837,{l:i}),new F1(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string",2055,{h:e}),new Et(e)}}class PD{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Et.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class UD{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new PD(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Et.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Mv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jD{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,an(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){_e(this.o===void 0,3512);const i=s=>{s.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,Y("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Mv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Mv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=zD(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%62))}return i}}function he(t,e){return t<e?-1:t>e?1:0}function fm(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),s=e.charAt(i);if(r!==s)return Jf(r)===Jf(s)?he(r,s):Jf(r)?1:-1}return he(t.length,e.length)}const BD=55296,qD=57343;function Jf(t){const e=t.charCodeAt(0);return e>=BD&&e<=qD}function ra(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm="__name__";class Sn{constructor(e,n,i){n===void 0?n=0:n>e.length&&Z(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Z(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Sn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Sn?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=Sn.compareSegments(e.get(r),n.get(r));if(s!==0)return s}return he(e.length,n.length)}static compareSegments(e,n){const i=Sn.isNumericId(e),r=Sn.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Sn.extractNumericId(e).compare(Sn.extractNumericId(n)):fm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return tr.fromString(e.substring(4,e.length-2))}}class we extends Sn{construct(e,n,i){return new we(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new K(z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new we(n)}static emptyPath(){return new we([])}}const HD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mt extends Sn{construct(e,n,i){return new mt(e,n,i)}static isValidIdentifier(e){return HD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===dm}static keyField(){return new mt([dm])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new K(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new K(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new K(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(s(),r++)}if(s(),a)throw new K(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mt(n)}static emptyPath(){return new mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.path=e}static fromPath(e){return new W(we.fromString(e))}static fromName(e){return new W(we.fromString(e).popFirst(5))}static empty(){return new W(we.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&we.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return we.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new we(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(t,e,n){if(!n)throw new K(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function FD(t,e,n,i){if(e===!0&&i===!0)throw new K(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Vv(t){if(!W.isDocumentKey(t))throw new K(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function kv(t){if(W.isDocumentKey(t))throw new K(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Q1(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function yh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z(12329,{type:typeof t})}function It(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yh(t);throw new K(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(t,e){const n={typeString:t};return e&&(n.value=e),n}function xl(t,e){if(!Q1(t))throw new K(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,s="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new K(z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv=-62135596800,Pv=1e6;class De{static now(){return De.fromMillis(Date.now())}static fromDate(e){return De.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Pv);return new De(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Lv)throw new K(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Pv}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:De._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(xl(e,De._jsonSchema))return new De(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Lv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}De._jsonSchemaVersion="firestore/timestamp/1.0",De._jsonSchema={type:Ze("string",De._jsonSchemaVersion),seconds:Ze("number"),nanoseconds:Ze("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{static fromTimestamp(e){return new te(e)}static min(){return new te(new De(0,0))}static max(){return new te(new De(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl=-1;function GD(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=te.fromTimestamp(i===1e9?new De(n+1,0):new De(n,i));return new or(r,W.empty(),e)}function QD(t){return new or(t.readTime,t.key,rl)}class or{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new or(te.min(),W.empty(),rl)}static max(){return new or(te.max(),W.empty(),rl)}}function $D(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wa(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==KD)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new H((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof H?n:H.resolve(n)}catch(n){return H.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):H.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):H.reject(n)}static resolve(e){return new H((n,i)=>{n(e)})}static reject(e){return new H((n,i)=>{i(e)})}static waitFor(e){return new H((n,i)=>{let r=0,s=0,a=!1;e.forEach(l=>{++r,l.next(()=>{++s,a&&s===r&&n()},u=>i(u))}),a=!0,s===r&&n()})}static or(e){let n=H.resolve(!1);for(const i of e)n=n.next(r=>r?H.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new H((i,r)=>{const s=e.length,a=new Array(s);let l=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(f=>{a[c]=f,++l,l===s&&i(a)},f=>r(f))}})}static doWhile(e,n){return new H((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function XD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ra(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}_h.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg=-1;function vh(t){return t==null}function Dc(t){return t===0&&1/t==-1/0}function WD(t){return typeof t=="number"&&Number.isInteger(t)&&!Dc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1="";function JD(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Uv(e)),e=ZD(t.get(n),e);return Uv(e)}function ZD(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const s=t.charAt(r);switch(s){case"\0":n+="";break;case $1:n+="";break;default:n+=s}}return n}function Uv(t){return t+$1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function gr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function K1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){this.comparator=e,this.root=n||ht.EMPTY}insert(e,n){return new Ue(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ht.BLACK,null,null))}remove(e){return new Ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yu(this.root,e,this.comparator,!1)}getReverseIterator(){return new yu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yu(this.root,e,this.comparator,!0)}}class yu{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ht{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??ht.RED,this.left=r??ht.EMPTY,this.right=s??ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new ht(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return ht.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Z(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Z(27949);return e+(this.isRed()?0:1)}}ht.EMPTY=null,ht.RED=!0,ht.BLACK=!1;ht.EMPTY=new class{constructor(){this.size=0}get key(){throw Z(57766)}get value(){throw Z(16141)}get color(){throw Z(16727)}get left(){throw Z(29726)}get right(){throw Z(36894)}copy(e,n,i,r,s){return this}insert(e,n,i){return new ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new zv(this.data.getIterator())}getIteratorFrom(e){return new zv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof nt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new nt(this.comparator);return n.data=e,n}}class zv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.fields=e,e.sort(mt.comparator)}static empty(){return new Gt([])}unionWith(e){let n=new nt(mt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Gt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ra(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Y1("Invalid base64 string: "+s):s}}(e);return new yt(n)}static fromUint8Array(e){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(e);return new yt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yt.EMPTY_BYTE_STRING=new yt("");const eN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lr(t){if(_e(!!t,39018),typeof t=="string"){let e=0;const n=eN.exec(t);if(_e(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:He(t.seconds),nanos:He(t.nanos)}}function He(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ur(t){return typeof t=="string"?yt.fromBase64String(t):yt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1="server_timestamp",W1="__type__",J1="__previous_value__",Z1="__local_write_time__";function Yg(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[W1])==null?void 0:i.stringValue)===X1}function Eh(t){const e=t.mapValue.fields[J1];return Yg(e)?Eh(e):e}function sl(t){const e=lr(t.mapValue.fields[Z1].timestampValue);return new De(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,n,i,r,s,a,l,u,c,f){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=f}}const Nc="(default)";class al{constructor(e,n){this.projectId=e,this.database=n||Nc}static empty(){return new al("","")}get isDefaultDatabase(){return this.database===Nc}isEqual(e){return e instanceof al&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS="__type__",nN="__max__",_u={mapValue:{}},tS="__vector__",Oc="value";function cr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Yg(t)?4:rN(t)?9007199254740991:iN(t)?10:11:Z(28295,{value:t})}function Vn(t,e){if(t===e)return!0;const n=cr(t);if(n!==cr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return sl(t).isEqual(sl(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=lr(r.timestampValue),l=lr(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return ur(r.bytesValue).isEqual(ur(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return He(r.geoPointValue.latitude)===He(s.geoPointValue.latitude)&&He(r.geoPointValue.longitude)===He(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return He(r.integerValue)===He(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=He(r.doubleValue),l=He(s.doubleValue);return a===l?Dc(a)===Dc(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return ra(t.arrayValue.values||[],e.arrayValue.values||[],Vn);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},l=s.mapValue.fields||{};if(jv(a)!==jv(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Vn(a[u],l[u])))return!1;return!0}(t,e);default:return Z(52216,{left:t})}}function ol(t,e){return(t.values||[]).find(n=>Vn(n,e))!==void 0}function sa(t,e){if(t===e)return 0;const n=cr(t),i=cr(e);if(n!==i)return he(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(s,a){const l=He(s.integerValue||s.doubleValue),u=He(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Bv(t.timestampValue,e.timestampValue);case 4:return Bv(sl(t),sl(e));case 5:return fm(t.stringValue,e.stringValue);case 6:return function(s,a){const l=ur(s),u=ur(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),u=a.split("/");for(let c=0;c<l.length&&c<u.length;c++){const f=he(l[c],u[c]);if(f!==0)return f}return he(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const l=he(He(s.latitude),He(a.latitude));return l!==0?l:he(He(s.longitude),He(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return qv(t.arrayValue,e.arrayValue);case 10:return function(s,a){var d,_,x,M;const l=s.fields||{},u=a.fields||{},c=(d=l[Oc])==null?void 0:d.arrayValue,f=(_=u[Oc])==null?void 0:_.arrayValue,m=he(((x=c==null?void 0:c.values)==null?void 0:x.length)||0,((M=f==null?void 0:f.values)==null?void 0:M.length)||0);return m!==0?m:qv(c,f)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===_u.mapValue&&a===_u.mapValue)return 0;if(s===_u.mapValue)return 1;if(a===_u.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),c=a.fields||{},f=Object.keys(c);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const d=fm(u[m],f[m]);if(d!==0)return d;const _=sa(l[u[m]],c[f[m]]);if(_!==0)return _}return he(u.length,f.length)}(t.mapValue,e.mapValue);default:throw Z(23264,{he:n})}}function Bv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=lr(t),i=lr(e),r=he(n.seconds,i.seconds);return r!==0?r:he(n.nanos,i.nanos)}function qv(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=sa(n[r],i[r]);if(s)return s}return he(n.length,i.length)}function aa(t){return mm(t)}function mm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=lr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ur(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=mm(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${mm(n.fields[a])}`;return r+"}"}(t.mapValue):Z(61005,{value:t})}function Hu(t){switch(cr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Eh(t);return e?16+Hu(e):16;case 5:return 2*t.stringValue.length;case 6:return ur(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+Hu(s),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return gr(i.fields,(s,a)=>{r+=s.length+Hu(a)}),r}(t.mapValue);default:throw Z(13486,{value:t})}}function Hv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function gm(t){return!!t&&"integerValue"in t}function Xg(t){return!!t&&"arrayValue"in t}function Fv(t){return!!t&&"nullValue"in t}function Gv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fu(t){return!!t&&"mapValue"in t}function iN(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[eS])==null?void 0:i.stringValue)===tS}function ko(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return gr(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=ko(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ko(t.arrayValue.values[n]);return e}return{...t}}function rN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===nN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.value=e}static empty(){return new Lt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Fu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ko(n)}setAll(e){let n=mt.emptyPath(),i={},r=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,r),i={},r=[],n=l.popLast()}a?i[l.lastSegment()]=ko(a):r.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());Fu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Vn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Fu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){gr(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Lt(ko(this.value))}}function nS(t){const e=[];return gr(t.fields,(n,i)=>{const r=new mt([n]);if(Fu(i)){const s=nS(i.mapValue).fields;if(s.length===0)e.push(r);else for(const a of s)e.push(r.child(a))}else e.push(r)}),new Gt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n,i,r,s,a,l){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Tt(e,0,te.min(),te.min(),te.min(),Lt.empty(),0)}static newFoundDocument(e,n,i,r){return new Tt(e,1,n,te.min(),i,r,0)}static newNoDocument(e,n){return new Tt(e,2,n,te.min(),te.min(),Lt.empty(),0)}static newUnknownDocument(e,n){return new Tt(e,3,n,te.min(),te.min(),Lt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Lt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Lt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,n){this.position=e,this.inclusive=n}}function Qv(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],a=t.position[r];if(s.field.isKeyField()?i=W.comparator(W.fromName(a.referenceValue),n.key):i=sa(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function $v(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Vn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,n="asc"){this.field=e,this.dir=n}}function sN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{}class We extends iS{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new oN(e,n,i):n==="array-contains"?new cN(e,i):n==="in"?new hN(e,i):n==="not-in"?new fN(e,i):n==="array-contains-any"?new dN(e,i):new We(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new lN(e,i):new uN(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(sa(n,this.value)):n!==null&&cr(this.value)===cr(n)&&this.matchesComparison(sa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pn extends iS{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new pn(e,n)}matches(e){return rS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function rS(t){return t.op==="and"}function sS(t){return aN(t)&&rS(t)}function aN(t){for(const e of t.filters)if(e instanceof pn)return!1;return!0}function pm(t){if(t instanceof We)return t.field.canonicalString()+t.op.toString()+aa(t.value);if(sS(t))return t.filters.map(e=>pm(e)).join(",");{const e=t.filters.map(n=>pm(n)).join(",");return`${t.op}(${e})`}}function aS(t,e){return t instanceof We?function(i,r){return r instanceof We&&i.op===r.op&&i.field.isEqual(r.field)&&Vn(i.value,r.value)}(t,e):t instanceof pn?function(i,r){return r instanceof pn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,l)=>s&&aS(a,r.filters[l]),!0):!1}(t,e):void Z(19439)}function oS(t){return t instanceof We?function(n){return`${n.field.canonicalString()} ${n.op} ${aa(n.value)}`}(t):t instanceof pn?function(n){return n.op.toString()+" {"+n.getFilters().map(oS).join(" ,")+"}"}(t):"Filter"}class oN extends We{constructor(e,n,i){super(e,n,i),this.key=W.fromName(i.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class lN extends We{constructor(e,n){super(e,"in",n),this.keys=lS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class uN extends We{constructor(e,n){super(e,"not-in",n),this.keys=lS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function lS(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>W.fromName(i.referenceValue))}class cN extends We{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Xg(n)&&ol(n.arrayValue,this.value)}}class hN extends We{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ol(this.value.arrayValue,n)}}class fN extends We{constructor(e,n){super(e,"not-in",n)}matches(e){if(ol(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ol(this.value.arrayValue,n)}}class dN extends We{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Xg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>ol(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e,n=null,i=[],r=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=l,this.Te=null}}function Kv(t,e=null,n=[],i=[],r=null,s=null,a=null){return new mN(t,e,n,i,r,s,a)}function Wg(t){const e=ne(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>pm(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),vh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>aa(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>aa(i)).join(",")),e.Te=n}return e.Te}function Jg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!sN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!aS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$v(t.startAt,e.startAt)&&$v(t.endAt,e.endAt)}function ym(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,n=null,i=[],r=[],s=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function gN(t,e,n,i,r,s,a,l){return new Ca(t,e,n,i,r,s,a,l)}function Th(t){return new Ca(t)}function Yv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function uS(t){return t.collectionGroup!==null}function Lo(t){const e=ne(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new nt(mt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new ll(s,i))}),n.has(mt.keyField().canonicalString())||e.Ie.push(new ll(mt.keyField(),i))}return e.Ie}function In(t){const e=ne(t);return e.Ee||(e.Ee=pN(e,Lo(t))),e.Ee}function pN(t,e){if(t.limitType==="F")return Kv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new ll(r.field,s)});const n=t.endAt?new Mc(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Mc(t.startAt.position,t.startAt.inclusive):null;return Kv(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function _m(t,e){const n=t.filters.concat([e]);return new Ca(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function vm(t,e,n){return new Ca(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function bh(t,e){return Jg(In(t),In(e))&&t.limitType===e.limitType}function cS(t){return`${Wg(In(t))}|lt:${t.limitType}`}function _s(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>oS(r)).join(", ")}]`),vh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>aa(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>aa(r)).join(",")),`Target(${i})`}(In(t))}; limitType=${t.limitType})`}function Sh(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):W.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of Lo(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,l,u){const c=Qv(a,l,u);return a.inclusive?c<=0:c<0}(i.startAt,Lo(i),r)||i.endAt&&!function(a,l,u){const c=Qv(a,l,u);return a.inclusive?c>=0:c>0}(i.endAt,Lo(i),r))}(t,e)}function yN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function hS(t){return(e,n)=>{let i=!1;for(const r of Lo(t)){const s=_N(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function _N(t,e,n){const i=t.field.isKeyField()?W.comparator(e.key,n.key):function(s,a,l){const u=a.data.field(s),c=l.data.field(s);return u!==null&&c!==null?sa(u,c):Z(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Z(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){gr(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return K1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=new Ue(W.comparator);function di(){return vN}const fS=new Ue(W.comparator);function yo(...t){let e=fS;for(const n of t)e=e.insert(n.key,n);return e}function dS(t){let e=fS;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Mr(){return Po()}function mS(){return Po()}function Po(){return new is(t=>t.toString(),(t,e)=>t.isEqual(e))}const EN=new Ue(W.comparator),TN=new nt(W.comparator);function fe(...t){let e=TN;for(const n of t)e=e.add(n);return e}const bN=new nt(he);function SN(){return bN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dc(e)?"-0":e}}function gS(t){return{integerValue:""+t}}function AN(t,e){return WD(e)?gS(e):Zg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(){this._=void 0}}function wN(t,e,n){return t instanceof ul?function(r,s){const a={fields:{[W1]:{stringValue:X1},[Z1]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Yg(s)&&(s=Eh(s)),s&&(a.fields[J1]=s),{mapValue:a}}(n,e):t instanceof oa?yS(t,e):t instanceof la?_S(t,e):function(r,s){const a=pS(r,s),l=Xv(a)+Xv(r.Ae);return gm(a)&&gm(r.Ae)?gS(l):Zg(r.serializer,l)}(t,e)}function RN(t,e,n){return t instanceof oa?yS(t,e):t instanceof la?_S(t,e):n}function pS(t,e){return t instanceof Vc?function(i){return gm(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class ul extends Ah{}class oa extends Ah{constructor(e){super(),this.elements=e}}function yS(t,e){const n=vS(e);for(const i of t.elements)n.some(r=>Vn(r,i))||n.push(i);return{arrayValue:{values:n}}}class la extends Ah{constructor(e){super(),this.elements=e}}function _S(t,e){let n=vS(e);for(const i of t.elements)n=n.filter(r=>!Vn(r,i));return{arrayValue:{values:n}}}class Vc extends Ah{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Xv(t){return He(t.integerValue||t.doubleValue)}function vS(t){return Xg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,n){this.field=e,this.transform=n}}function CN(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof oa&&r instanceof oa||i instanceof la&&r instanceof la?ra(i.elements,r.elements,Vn):i instanceof Vc&&r instanceof Vc?Vn(i.Ae,r.Ae):i instanceof ul&&r instanceof ul}(t.transform,e.transform)}class IN{constructor(e,n){this.version=e,this.transformResults=n}}class xt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xt}static exists(e){return new xt(void 0,e)}static updateTime(e){return new xt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class wh{}function ES(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Rh(t.key,xt.none()):new Dl(t.key,t.data,xt.none());{const n=t.data,i=Lt.empty();let r=new nt(mt.comparator);for(let s of e.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new pr(t.key,i,new Gt(r.toArray()),xt.none())}}function xN(t,e,n){t instanceof Dl?function(r,s,a){const l=r.value.clone(),u=Jv(r.fieldTransforms,s,a.transformResults);l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof pr?function(r,s,a){if(!Gu(r.precondition,s))return void s.convertToUnknownDocument(a.version);const l=Jv(r.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(TS(r)),u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Uo(t,e,n,i){return t instanceof Dl?function(s,a,l,u){if(!Gu(s.precondition,a))return l;const c=s.value.clone(),f=Zv(s.fieldTransforms,u,a);return c.setAll(f),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,n,i):t instanceof pr?function(s,a,l,u){if(!Gu(s.precondition,a))return l;const c=Zv(s.fieldTransforms,u,a),f=a.data;return f.setAll(TS(s)),f.setAll(c),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,i):function(s,a,l){return Gu(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function DN(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=pS(i.transform,r||null);s!=null&&(n===null&&(n=Lt.empty()),n.set(i.field,s))}return n||null}function Wv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ra(i,r,(s,a)=>CN(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Dl extends wh{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class pr extends wh{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function TS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Jv(t,e,n){const i=new Map;_e(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const s=t[r],a=s.transform,l=e.data.field(s.field);i.set(s.field,RN(a,l,n[r]))}return i}function Zv(t,e,n){const i=new Map;for(const r of t){const s=r.transform,a=n.data.field(r.field);i.set(r.field,wN(s,a,e))}return i}class Rh extends wh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NN extends wh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&xN(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Uo(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Uo(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=mS();return this.mutations.forEach(r=>{const s=e.get(r.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(r.key)?null:l;const u=ES(a,l);u!==null&&i.set(r.key,u),a.isValidDocument()||a.convertToNoDocument(te.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fe())}isEqual(e){return this.batchId===e.batchId&&ra(this.mutations,e.mutations,(n,i)=>Wv(n,i))&&ra(this.baseMutations,e.baseMutations,(n,i)=>Wv(n,i))}}class tp{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){_e(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=function(){return EN}();const s=e.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new tp(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e,ge;function kN(t){switch(t){case z.OK:return Z(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return Z(15467,{code:t})}}function bS(t){if(t===void 0)return fi("GRPC error has no .code"),z.UNKNOWN;switch(t){case $e.OK:return z.OK;case $e.CANCELLED:return z.CANCELLED;case $e.UNKNOWN:return z.UNKNOWN;case $e.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case $e.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case $e.INTERNAL:return z.INTERNAL;case $e.UNAVAILABLE:return z.UNAVAILABLE;case $e.UNAUTHENTICATED:return z.UNAUTHENTICATED;case $e.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case $e.NOT_FOUND:return z.NOT_FOUND;case $e.ALREADY_EXISTS:return z.ALREADY_EXISTS;case $e.PERMISSION_DENIED:return z.PERMISSION_DENIED;case $e.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case $e.ABORTED:return z.ABORTED;case $e.OUT_OF_RANGE:return z.OUT_OF_RANGE;case $e.UNIMPLEMENTED:return z.UNIMPLEMENTED;case $e.DATA_LOSS:return z.DATA_LOSS;default:return Z(39323,{code:t})}}(ge=$e||($e={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=new tr([4294967295,4294967295],0);function eE(t){const e=LN().encode(t),n=new P1;return n.update(e),new Uint8Array(n.digest())}function tE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new tr([n,i],0),new tr([r,s],0)]}class np{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new _o(`Invalid padding: ${n}`);if(i<0)throw new _o(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new _o(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new _o(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=tr.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(tr.fromNumber(i)));return r.compare(PN)===1&&(r=new tr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=eE(e),[i,r]=tE(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);if(!this.we(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new np(s,r,n);return i.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=eE(e),[i,r]=tE(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class _o extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Nl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Ch(te.min(),r,new Ue(he),di(),fe())}}class Nl{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Nl(i,n,fe(),fe(),fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,n,i,r){this.be=e,this.removedTargetIds=n,this.key=i,this.De=r}}class SS{constructor(e,n){this.targetId=e,this.Ce=n}}class AS{constructor(e,n,i=yt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class nE{constructor(){this.ve=0,this.Fe=iE(),this.Me=yt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=fe(),n=fe(),i=fe();return this.Fe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Z(38017,{changeType:s})}}),new Nl(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=iE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,_e(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class UN{constructor(e){this.Ge=e,this.ze=new Map,this.je=di(),this.Je=vu(),this.He=vu(),this.Ye=new Ue(he)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Z(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const s=r.target;if(ym(s))if(i===0){const a=new W(s.path);this.et(n,a,Tt.newNoDocument(a,te.min()))}else _e(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const l=this.ut(e),u=l?this.ct(l,e,a):1;if(u!==0){this.it(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,l;try{a=ur(i).toUint8Array()}catch(u){if(u instanceof Y1)return ia("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new np(a,r,s)}catch(u){return ia(u instanceof _o?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.et(n,s,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((s,a)=>{const l=this.ot(a);if(l){if(s.current&&ym(l.target)){const u=new W(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,Tt.newNoDocument(u,e))}s.Be&&(n.set(a,s.ke()),s.qe())}});let i=fe();this.He.forEach((s,a)=>{let l=!0;a.forEachWhile(u=>{const c=this.ot(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(s))}),this.je.forEach((s,a)=>a.setReadTime(e));const r=new Ch(e,n,this.Ye,this.je,i);return this.je=di(),this.Je=vu(),this.He=vu(),this.Ye=new Ue(he),r}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new nE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new nt(he),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new nt(he),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new nE),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function vu(){return new Ue(W.comparator)}function iE(){return new Ue(W.comparator)}const jN={asc:"ASCENDING",desc:"DESCENDING"},zN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BN={and:"AND",or:"OR"};class qN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Em(t,e){return t.useProto3Json||vh(e)?e:{value:e}}function kc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function HN(t,e){return kc(t,e.toTimestamp())}function xn(t){return _e(!!t,49232),te.fromTimestamp(function(n){const i=lr(n);return new De(i.seconds,i.nanos)}(t))}function ip(t,e){return Tm(t,e).canonicalString()}function Tm(t,e){const n=function(r){return new we(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function RS(t){const e=we.fromString(t);return _e(NS(e),10190,{key:e.toString()}),e}function bm(t,e){return ip(t.databaseId,e.path)}function Zf(t,e){const n=RS(e);if(n.get(1)!==t.databaseId.projectId)throw new K(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(IS(n))}function CS(t,e){return ip(t.databaseId,e)}function FN(t){const e=RS(t);return e.length===4?we.emptyPath():IS(e)}function Sm(t){return new we(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function IS(t){return _e(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function rE(t,e,n){return{name:bm(t,e),fields:n.value.mapValue.fields}}function GN(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Z(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,f){return c.useProto3Json?(_e(f===void 0||typeof f=="string",58123),yt.fromBase64String(f||"")):(_e(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),yt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(c){const f=c.code===void 0?z.UNKNOWN:bS(c.code);return new K(f,c.message||"")}(a);n=new AS(i,r,s,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Zf(t,i.document.name),s=xn(i.document.updateTime),a=i.document.createTime?xn(i.document.createTime):te.min(),l=new Lt({mapValue:{fields:i.document.fields}}),u=Tt.newFoundDocument(r,s,a,l),c=i.targetIds||[],f=i.removedTargetIds||[];n=new Qu(c,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Zf(t,i.document),s=i.readTime?xn(i.readTime):te.min(),a=Tt.newNoDocument(r,s),l=i.removedTargetIds||[];n=new Qu([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Zf(t,i.document),s=i.removedTargetIds||[];n=new Qu([],s,r,null)}else{if(!("filter"in e))return Z(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new VN(r,s),l=i.targetId;n=new SS(l,a)}}return n}function QN(t,e){let n;if(e instanceof Dl)n={update:rE(t,e.key,e.value)};else if(e instanceof Rh)n={delete:bm(t,e.key)};else if(e instanceof pr)n={update:rE(t,e.key,e.data),updateMask:tO(e.fieldMask)};else{if(!(e instanceof NN))return Z(16599,{Vt:e.type});n={verify:bm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,a){const l=a.transform;if(l instanceof ul)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof oa)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof la)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Vc)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw Z(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:HN(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Z(27497)}(t,e.precondition)),n}function $N(t,e){return t&&t.length>0?(_e(e!==void 0,14353),t.map(n=>function(r,s){let a=r.updateTime?xn(r.updateTime):xn(s);return a.isEqual(te.min())&&(a=xn(s)),new IN(a,r.transformResults||[])}(n,e))):[]}function KN(t,e){return{documents:[CS(t,e.path)]}}function YN(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=CS(t,r);const s=function(c){if(c.length!==0)return DS(pn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(c){if(c.length!==0)return c.map(f=>function(d){return{field:vs(d.field),direction:JN(d.dir)}}(f))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Em(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:r}}function XN(t){let e=FN(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){_e(i===1,65062);const f=n.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(m){const d=xS(m);return d instanceof pn&&sS(d)?d.getFilters():[d]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(d=>function(x){return new ll(Es(x.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(d))}(n.orderBy));let l=null;n.limit&&(l=function(m){let d;return d=typeof m=="object"?m.value:m,vh(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(m){const d=!!m.before,_=m.values||[];return new Mc(_,d)}(n.startAt));let c=null;return n.endAt&&(c=function(m){const d=!m.before,_=m.values||[];return new Mc(_,d)}(n.endAt)),gN(e,r,a,s,l,"F",u,c)}function WN(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function xS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Es(n.unaryFilter.field);return We.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Es(n.unaryFilter.field);return We.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Es(n.unaryFilter.field);return We.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Es(n.unaryFilter.field);return We.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Z(61313);default:return Z(60726)}}(t):t.fieldFilter!==void 0?function(n){return We.create(Es(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Z(58110);default:return Z(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return pn.create(n.compositeFilter.filters.map(i=>xS(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Z(1026)}}(n.compositeFilter.op))}(t):Z(30097,{filter:t})}function JN(t){return jN[t]}function ZN(t){return zN[t]}function eO(t){return BN[t]}function vs(t){return{fieldPath:t.canonicalString()}}function Es(t){return mt.fromServerFormat(t.fieldPath)}function DS(t){return t instanceof We?function(n){if(n.op==="=="){if(Gv(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NAN"}};if(Fv(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Gv(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NOT_NAN"}};if(Fv(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vs(n.field),op:ZN(n.op),value:n.value}}}(t):t instanceof pn?function(n){const i=n.getFilters().map(r=>DS(r));return i.length===1?i[0]:{compositeFilter:{op:eO(n.op),filters:i}}}(t):Z(54877,{filter:t})}function tO(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function NS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,n,i,r,s=te.min(),a=te.min(),l=yt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new qi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new qi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e){this.yt=e}}function iO(t){const e=XN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?vm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(){this.Cn=new sO}addToCollectionParentIndex(e,n){return this.Cn.add(n),H.resolve()}getCollectionParents(e,n){return H.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return H.resolve()}deleteFieldIndex(e,n){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,n){return H.resolve()}getDocumentsMatchingTarget(e,n){return H.resolve(null)}getIndexType(e,n){return H.resolve(0)}getFieldIndexes(e,n){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,n){return H.resolve(or.min())}getMinOffsetFromCollectionGroup(e,n){return H.resolve(or.min())}updateCollectionGroup(e,n,i){return H.resolve()}updateIndexEntries(e,n){return H.resolve()}}class sO{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new nt(we.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new nt(we.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},OS=41943040;class kt{static withCacheSize(e){return new kt(e,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kt.DEFAULT_COLLECTION_PERCENTILE=10,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kt.DEFAULT=new kt(OS,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kt.DISABLED=new kt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ua(0)}static cr(){return new ua(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="LruGarbageCollector",aO=1048576;function oE([t,e],[n,i]){const r=he(t,n);return r===0?he(e,i):r}class oO{constructor(e){this.Ir=e,this.buffer=new nt(oE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();oE(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class lO{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Y(aE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ra(n)?Y(aE,"Ignoring IndexedDB error during garbage collection: ",n):await wa(n)}await this.Vr(3e5)})}}class uO{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return H.resolve(_h.ce);const i=new oO(n);return this.mr.forEachTarget(e,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(sE)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sE):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,r,s,a,l,u,c;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),r=this.params.maximumSequenceNumbersToCollect):r=m,a=Date.now(),this.nthSequenceNumber(e,r))).next(m=>(i=m,l=Date.now(),this.removeTargets(e,i,n))).next(m=>(s=m,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(m=>(c=Date.now(),ys()<=ce.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(c-u)+`ms
Total Duration: ${c-f}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:m})))}}function cO(t,e){return new uO(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(){this.changes=new is(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Tt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?H.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Uo(i.mutation,r,Gt.empty(),De.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,fe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=fe()){const r=Mr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let a=yo();return s.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=Mr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,fe()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,i,r){let s=di();const a=Po(),l=function(){return Po()}();return n.forEach((u,c)=>{const f=i.get(c.key);r.has(c.key)&&(f===void 0||f.mutation instanceof pr)?s=s.insert(c.key,c):f!==void 0?(a.set(c.key,f.mutation.getFieldMask()),Uo(f.mutation,c,f.mutation.getFieldMask(),De.now())):a.set(c.key,Gt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,f)=>a.set(c,f)),n.forEach((c,f)=>l.set(c,new fO(f,a.get(c)??null))),l))}recalculateAndSaveOverlays(e,n){const i=Po();let r=new Ue((a,l)=>a-l),s=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let f=i.get(u)||Gt.empty();f=l.applyToLocalView(c,f),i.set(u,f);const m=(r.get(l.batchId)||fe()).add(u);r=r.insert(l.batchId,m)})}).next(()=>{const a=[],l=r.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,f=u.value,m=mS();f.forEach(d=>{if(!s.has(d)){const _=ES(n.get(d),i.get(d));_!==null&&m.set(d,_),s=s.add(d)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,m))}return H.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return W.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):uS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):H.resolve(Mr());let l=rl,u=s;return a.next(c=>H.forEach(c,(f,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),s.get(f)?H.resolve():this.remoteDocumentCache.getEntry(e,f).next(d=>{u=u.insert(f,d)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,fe())).next(f=>({batchId:l,changes:dS(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(i=>{let r=yo();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let a=yo();return this.indexManager.getCollectionParents(e,s).next(l=>H.forEach(l,u=>{const c=function(m,d){return new Ca(d,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(f=>{f.forEach((m,d)=>{a=a.insert(m,d)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(a=>{s.forEach((u,c)=>{const f=c.getKey();a.get(f)===null&&(a=a.insert(f,Tt.newInvalidDocument(f)))});let l=yo();return a.forEach((u,c)=>{const f=s.get(u);f!==void 0&&Uo(f.mutation,c,Gt.empty(),De.now()),Sh(n,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return H.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:xn(r.createTime)}}(n)),H.resolve()}getNamedQuery(e,n){return H.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:iO(r.bundledQuery),readTime:xn(r.readTime)}}(n)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(){this.overlays=new Ue(W.comparator),this.qr=new Map}getOverlay(e,n){return H.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Mr();return H.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.St(e,n,s)}),H.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(i)),H.resolve()}getOverlaysForCollection(e,n,i){const r=Mr(),s=n.length+1,a=new W(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>i&&r.set(u.getKey(),u)}return H.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Ue((c,f)=>c-f);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let f=s.get(c.largestBatchId);f===null&&(f=Mr(),s=s.insert(c.largestBatchId,f)),f.set(c.getKey(),c)}}const l=Mr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,f)=>l.set(c,f)),!(l.size()>=r)););return H.resolve(l)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new MN(n,i));let s=this.qr.get(n);s===void 0&&(s=fe(),this.qr.set(n,s)),this.qr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(){this.sessionToken=yt.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(){this.Qr=new nt(st.$r),this.Ur=new nt(st.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new st(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new st(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new W(new we([])),i=new st(n,e),r=new st(n,e+1),s=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new W(new we([])),i=new st(n,e),r=new st(n,e+1);let s=fe();return this.Ur.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new st(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class st{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return W.comparator(e.key,n.key)||he(e.Yr,n.Yr)}static Kr(e,n){return he(e.Yr,n.Yr)||W.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new nt(st.$r)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new ON(s,n,i,r);this.mutationQueue.push(a);for(const l of r)this.Zr=this.Zr.add(new st(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return H.resolve(a)}lookupMutationBatch(e,n){return H.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ei(i),s=r<0?0:r;return H.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?Kg:this.tr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new st(n,0),r=new st(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([i,r],a=>{const l=this.Xr(a.Yr);s.push(l)}),H.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new nt(he);return n.forEach(r=>{const s=new st(r,0),a=new st(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],l=>{i=i.add(l.Yr)})}),H.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;W.isDocumentKey(s)||(s=s.child(""));const a=new st(new W(s),0);let l=new nt(he);return this.Zr.forEachWhile(u=>{const c=u.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(l=l.add(u.Yr)),!0)},a),H.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){_e(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return H.forEach(n.mutations,r=>{const s=new st(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new st(n,0),r=this.Zr.firstAfterOrEqual(i);return H.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e){this.ri=e,this.docs=function(){return new Ue(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return H.resolve(i?i.document.mutableCopy():Tt.newInvalidDocument(n))}getEntries(e,n){let i=di();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Tt.newInvalidDocument(r))}),H.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=di();const a=n.path,l=new W(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:f}}=u.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||$D(QD(f),i)<=0||(r.has(f.key)||Sh(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return H.resolve(s)}getAllFromCollectionGroup(e,n,i,r){Z(9500)}ii(e,n){return H.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new vO(this)}getSize(e){return H.resolve(this.size)}}class vO extends hO{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),H.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(e){this.persistence=e,this.si=new is(n=>Wg(n),Jg),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.oi=0,this._i=new rp,this.targetCount=0,this.ai=ua.ur()}forEachTarget(e,n){return this.si.forEach((i,r)=>n(r)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),H.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ua(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,H.resolve()}updateTargetData(e,n){return this.Pr(n),H.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),H.waitFor(s).next(()=>r)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return H.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),H.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(e,a))}),H.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),H.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return H.resolve(i)}containsKey(e,n){return H.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e,n){this.ui={},this.overlays={},this.ci=new _h(0),this.li=!1,this.li=!0,this.hi=new pO,this.referenceDelegate=e(this),this.Pi=new EO(this),this.indexManager=new rO,this.remoteDocumentCache=function(r){return new _O(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new nO(n),this.Ii=new mO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new gO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new yO(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){Y("MemoryPersistence","Starting transaction:",e);const r=new TO(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ai(e,n){return H.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class TO extends YD{constructor(e){super(),this.currentSequenceNumber=e}}class sp{constructor(e){this.persistence=e,this.Ri=new rp,this.Vi=null}static mi(e){return new sp(e)}get fi(){if(this.Vi)return this.Vi;throw Z(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),H.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),H.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),H.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.fi.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.fi,i=>{const r=W.fromPath(i);return this.gi(e,r).next(s=>{s||n.removeEntry(r,te.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return H.or([()=>H.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Lc{constructor(e,n){this.persistence=e,this.pi=new is(i=>JD(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=cO(this,n)}static mi(e,n){return new Lc(e,n)}Ei(){}di(e){return H.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return H.forEach(this.pi,(i,r)=>this.br(e,i,r).next(s=>s?H.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(e,a=>this.br(e,a,n).next(l=>{l||(i++,s.removeEntry(a,te.min()))})).next(()=>s.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),H.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),H.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),H.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Hu(e.data.value)),n}br(e,n,i){return H.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return H.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=r}static As(e,n){let i=fe(),r=fe();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new ap(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return p2()?8:XD(bt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.ys(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(e,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new bO;return this.Ss(e,n,a).next(l=>{if(s.result=l,this.Vs)return this.bs(e,n,a,l.size)})}).next(()=>s.result)}bs(e,n,i,r){return i.documentReadCount<this.fs?(ys()<=ce.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",_s(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),H.resolve()):(ys()<=ce.DEBUG&&Y("QueryEngine","Query:",_s(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(ys()<=ce.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",_s(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,In(n))):H.resolve())}ys(e,n){if(Yv(n))return H.resolve(null);let i=In(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=vm(n,null,"F"),i=In(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const a=fe(...s);return this.ps.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{const c=this.Ds(n,l);return this.Cs(n,c,a,u.readTime)?this.ys(e,vm(n,null,"F")):this.vs(e,c,n,u)}))})))}ws(e,n,i,r){return Yv(n)||r.isEqual(te.min())?H.resolve(null):this.ps.getDocuments(e,i).next(s=>{const a=this.Ds(n,s);return this.Cs(n,a,i,r)?H.resolve(null):(ys()<=ce.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),_s(n)),this.vs(e,a,n,GD(r,rl)).next(l=>l))})}Ds(e,n){let i=new nt(hS(e));return n.forEach((r,s)=>{Sh(e,s)&&(i=i.add(s))}),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,n,i){return ys()<=ce.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",_s(n)),this.ps.getDocumentsMatchingQuery(e,n,or.min(),i)}vs(e,n,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="LocalStore",AO=3e8;class wO{constructor(e,n,i,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Ue(he),this.xs=new is(s=>Wg(s),Jg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dO(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function RO(t,e,n,i){return new wO(t,e,n,i)}async function VS(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],l=[];let u=fe();for(const c of r){a.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}for(const c of s){l.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(i,u).next(c=>({Ls:c,removedBatchIds:a,addedBatchIds:l}))})})}function CO(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,c,f){const m=c.batch,d=m.keys();let _=H.resolve();return d.forEach(x=>{_=_.next(()=>f.getEntry(u,x)).next(M=>{const N=c.docVersions.get(x);_e(N!==null,48541),M.version.compareTo(N)<0&&(m.applyToRemoteDocument(M,c),M.isValidDocument()&&(M.setReadTime(c.commitVersion),f.addEntry(M)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=fe();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function kS(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function IO(t,e){const n=ne(t),i=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];e.targetChanges.forEach((f,m)=>{const d=r.get(m);if(!d)return;l.push(n.Pi.removeMatchingKeys(s,f.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(s,f.addedDocuments,m)));let _=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?_=_.withResumeToken(yt.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,i)),r=r.insert(m,_),function(M,N,w){return M.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=AO?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(d,_,f)&&l.push(n.Pi.updateTargetData(s,_))});let u=di(),c=fe();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),l.push(xO(s,a,e.documentUpdates).next(f=>{u=f.ks,c=f.qs})),!i.isEqual(te.min())){const f=n.Pi.getLastRemoteSnapshotVersion(s).next(m=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,i));l.push(f)}return H.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.Ms=r,s))}function xO(t,e,n){let i=fe(),r=fe();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let a=di();return n.forEach((l,u)=>{const c=s.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(te.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):Y(op,"Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{ks:a,qs:r}})}function DO(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Kg),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function NO(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,e).next(s=>s?(r=s,H.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new qi(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function Am(t,e,n){const i=ne(t),r=i.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!Ra(a))throw a;Y(op,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function lE(t,e,n){const i=ne(t);let r=te.min(),s=fe();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,c,f){const m=ne(u),d=m.xs.get(f);return d!==void 0?H.resolve(m.Ms.get(d)):m.Pi.getTargetData(c,f)}(i,a,In(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{s=u})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,e,n?r:te.min(),n?s:fe())).next(l=>(OO(i,yN(e),l),{documents:l,Qs:s})))}function OO(t,e,n){let i=t.Os.get(e)||te.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.Os.set(e,i)}class uE{constructor(){this.activeTargetIds=SN()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class MO{constructor(){this.Mo=new uE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new uE,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="ConnectivityMonitor";class hE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Y(cE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Y(cE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eu=null;function wm(){return Eu===null?Eu=function(){return 268435456+Math.round(2147483648*Math.random())}():Eu++,"0x"+Eu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed="RestConnection",kO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class LO{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===Nc?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,n,i,r,s){const a=wm(),l=this.zo(e,n.toUriEncodedString());Y(ed,`Sending RPC '${e}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,r,s);const{host:c}=new URL(l),f=ba(c);return this.Jo(e,l,u,i,f).then(m=>(Y(ed,`Received RPC '${e}' ${a}: `,m),m),m=>{throw ia(ed,`RPC '${e}' ${a} failed with error: `,m,"url: ",l,"request:",i),m})}Ho(e,n,i,r,s,a){return this.Go(e,n,i,r,s)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Aa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}zo(e,n){const i=kO[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vt="WebChannelConnection";class UO extends LO{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,s){const a=wm();return new Promise((l,u)=>{const c=new U1;c.setWithCredentials(!0),c.listenOnce(j1.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case qu.NO_ERROR:const m=c.getResponseJson();Y(vt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),l(m);break;case qu.TIMEOUT:Y(vt,`RPC '${e}' ${a} timed out`),u(new K(z.DEADLINE_EXCEEDED,"Request time out"));break;case qu.HTTP_ERROR:const d=c.getStatus();if(Y(vt,`RPC '${e}' ${a} failed with status:`,d,"response text:",c.getResponseText()),d>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const x=_==null?void 0:_.error;if(x&&x.status&&x.message){const M=function(w){const T=w.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(T)>=0?T:z.UNKNOWN}(x.status);u(new K(M,x.message))}else u(new K(z.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new K(z.UNAVAILABLE,"Connection failed."));break;default:Z(9055,{l_:e,streamId:a,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{Y(vt,`RPC '${e}' ${a} completed.`)}});const f=JSON.stringify(r);Y(vt,`RPC '${e}' ${a} sending request:`,r),c.send(n,"POST",f,i,15)})}T_(e,n,i){const r=wm(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=q1(),l=B1(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const f=s.join("");Y(vt,`Creating RPC '${e}' stream ${r}: ${f}`,u);const m=a.createWebChannel(f,u);this.I_(m);let d=!1,_=!1;const x=new PO({Yo:N=>{_?Y(vt,`Not sending because RPC '${e}' stream ${r} is closed:`,N):(d||(Y(vt,`Opening RPC '${e}' stream ${r} transport.`),m.open(),d=!0),Y(vt,`RPC '${e}' stream ${r} sending:`,N),m.send(N))},Zo:()=>m.close()}),M=(N,w,T)=>{N.listen(w,E=>{try{T(E)}catch(O){setTimeout(()=>{throw O},0)}})};return M(m,po.EventType.OPEN,()=>{_||(Y(vt,`RPC '${e}' stream ${r} transport opened.`),x.o_())}),M(m,po.EventType.CLOSE,()=>{_||(_=!0,Y(vt,`RPC '${e}' stream ${r} transport closed`),x.a_(),this.E_(m))}),M(m,po.EventType.ERROR,N=>{_||(_=!0,ia(vt,`RPC '${e}' stream ${r} transport errored. Name:`,N.name,"Message:",N.message),x.a_(new K(z.UNAVAILABLE,"The operation could not be completed")))}),M(m,po.EventType.MESSAGE,N=>{var w;if(!_){const T=N.data[0];_e(!!T,16349);const E=T,O=(E==null?void 0:E.error)||((w=E[0])==null?void 0:w.error);if(O){Y(vt,`RPC '${e}' stream ${r} received error:`,O);const U=O.status;let Q=function(A){const C=$e[A];if(C!==void 0)return bS(C)}(U),y=O.message;Q===void 0&&(Q=z.INTERNAL,y="Unknown error status: "+U+" with message "+O.message),_=!0,x.a_(new K(Q,y)),m.close()}else Y(vt,`RPC '${e}' stream ${r} received:`,T),x.u_(T)}}),M(l,z1.STAT_EVENT,N=>{N.stat===hm.PROXY?Y(vt,`RPC '${e}' stream ${r} detected buffering proxy`):N.stat===hm.NOPROXY&&Y(vt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{x.__()},0),x}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function td(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(t){return new qN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e,n,i=1e3,r=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&Y("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE="PersistentStream";class PS{constructor(e,n,i,r,s,a,l,u){this.Mi=e,this.S_=i,this.b_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new LS(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(fi(n.toString()),fi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{e(()=>{const r=new K(z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Y(fE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Y(fE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jO extends PS{constructor(e,n,i,r,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=GN(this.serializer,e),i=function(s){if(!("targetChange"in s))return te.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?te.min():a.readTime?xn(a.readTime):te.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=Sm(this.serializer),n.addTarget=function(s,a){let l;const u=a.target;if(l=ym(u)?{documents:KN(s,u)}:{query:YN(s,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=wS(s,a.resumeToken);const c=Em(s,a.expectedCount);c!==null&&(l.expectedCount=c)}else if(a.snapshotVersion.compareTo(te.min())>0){l.readTime=kc(s,a.snapshotVersion.toTimestamp());const c=Em(s,a.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const i=WN(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=Sm(this.serializer),n.removeTarget=e,this.q_(n)}}class zO extends PS{constructor(e,n,i,r,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return _e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){_e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=$N(e.writeResults,e.commitTime),i=xn(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Sm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>QN(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{}class qO extends BO{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new K(z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(e,Tm(n,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K(z.UNKNOWN,s.toString())})}Ho(e,n,i,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(e,Tm(n,i),r,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new K(z.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class HO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(fi(n),this.aa=!1):Y("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr="RemoteStore";class FO{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{rs(this)&&(Y(Yr,"Restarting streams for network reachability change."),await async function(u){const c=ne(u);c.Ea.add(4),await Ol(c),c.Ra.set("Unknown"),c.Ea.delete(4),await xh(c)}(this))})}),this.Ra=new HO(i,r)}}async function xh(t){if(rs(t))for(const e of t.da)await e(!0)}async function Ol(t){for(const e of t.da)await e(!1)}function US(t,e){const n=ne(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),hp(n)?cp(n):Ia(n).O_()&&up(n,e))}function lp(t,e){const n=ne(t),i=Ia(n);n.Ia.delete(e),i.O_()&&jS(n,e),n.Ia.size===0&&(i.O_()?i.L_():rs(n)&&n.Ra.set("Unknown"))}function up(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ia(t).Y_(e)}function jS(t,e){t.Va.Ue(e),Ia(t).Z_(e)}function cp(t){t.Va=new UN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ia(t).start(),t.Ra.ua()}function hp(t){return rs(t)&&!Ia(t).x_()&&t.Ia.size>0}function rs(t){return ne(t).Ea.size===0}function zS(t){t.Va=void 0}async function GO(t){t.Ra.set("Online")}async function QO(t){t.Ia.forEach((e,n)=>{up(t,e)})}async function $O(t,e){zS(t),hp(t)?(t.Ra.ha(e),cp(t)):t.Ra.set("Unknown")}async function KO(t,e,n){if(t.Ra.set("Online"),e instanceof AS&&e.state===2&&e.cause)try{await async function(r,s){const a=s.cause;for(const l of s.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.Ia.delete(l),r.Va.removeTarget(l))}(t,e)}catch(i){Y(Yr,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Pc(t,i)}else if(e instanceof Qu?t.Va.Ze(e):e instanceof SS?t.Va.st(e):t.Va.tt(e),!n.isEqual(te.min()))try{const i=await kS(t.localStore);n.compareTo(i)>=0&&await function(s,a){const l=s.Va.Tt(a);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.Ia.get(c);f&&s.Ia.set(c,f.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,c)=>{const f=s.Ia.get(u);if(!f)return;s.Ia.set(u,f.withResumeToken(yt.EMPTY_BYTE_STRING,f.snapshotVersion)),jS(s,u);const m=new qi(f.target,u,c,f.sequenceNumber);up(s,m)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(i){Y(Yr,"Failed to raise snapshot:",i),await Pc(t,i)}}async function Pc(t,e,n){if(!Ra(e))throw e;t.Ea.add(1),await Ol(t),t.Ra.set("Offline"),n||(n=()=>kS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y(Yr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await xh(t)})}function BS(t,e){return e().catch(n=>Pc(t,n,e))}async function Dh(t){const e=ne(t),n=hr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Kg;for(;YO(e);)try{const r=await DO(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,XO(e,r)}catch(r){await Pc(e,r)}qS(e)&&HS(e)}function YO(t){return rs(t)&&t.Ta.length<10}function XO(t,e){t.Ta.push(e);const n=hr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function qS(t){return rs(t)&&!hr(t).x_()&&t.Ta.length>0}function HS(t){hr(t).start()}async function WO(t){hr(t).ra()}async function JO(t){const e=hr(t);for(const n of t.Ta)e.ea(n.mutations)}async function ZO(t,e,n){const i=t.Ta.shift(),r=tp.from(i,e,n);await BS(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Dh(t)}async function eM(t,e){e&&hr(t).X_&&await async function(i,r){if(function(a){return kN(a)&&a!==z.ABORTED}(r.code)){const s=i.Ta.shift();hr(i).B_(),await BS(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Dh(i)}}(t,e),qS(t)&&HS(t)}async function dE(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),Y(Yr,"RemoteStore received new credentials");const i=rs(n);n.Ea.add(3),await Ol(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await xh(n)}async function tM(t,e){const n=ne(t);e?(n.Ea.delete(2),await xh(n)):e||(n.Ea.add(2),await Ol(n),n.Ra.set("Unknown"))}function Ia(t){return t.ma||(t.ma=function(n,i,r){const s=ne(n);return s.sa(),new jO(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Xo:GO.bind(null,t),t_:QO.bind(null,t),r_:$O.bind(null,t),H_:KO.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),hp(t)?cp(t):t.Ra.set("Unknown")):(await t.ma.stop(),zS(t))})),t.ma}function hr(t){return t.fa||(t.fa=function(n,i,r){const s=ne(n);return s.sa(),new zO(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:WO.bind(null,t),r_:eM.bind(null,t),ta:JO.bind(null,t),na:ZO.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Dh(t)):(await t.fa.stop(),t.Ta.length>0&&(Y(Yr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const a=Date.now()+i,l=new fp(e,n,a,r,s);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dp(t,e){if(fi("AsyncQueue",`${e}: ${t}`),Ra(t))return new K(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{static emptySet(e){return new Bs(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||W.comparator(n.key,i.key):(n,i)=>W.comparator(n.key,i.key),this.keyedMap=yo(),this.sortedSet=new Ue(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Bs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Bs;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(){this.ga=new Ue(W.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Z(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class ca{constructor(e,n,i,r,s,a,l,u,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,r,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new ca(e,n,Bs.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class iM{constructor(){this.queries=gE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=ne(n),s=r.queries;r.queries=gE(),s.forEach((a,l)=>{for(const u of l.Sa)u.onError(i)})})(this,new K(z.ABORTED,"Firestore shutting down"))}}function gE(){return new is(t=>cS(t),bh)}async function mp(t,e){const n=ne(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.ba()&&e.Da()&&(i=2):(s=new nM,i=e.Da()?0:1);try{switch(i){case 0:s.wa=await n.onListen(r,!0);break;case 1:s.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const l=dp(a,`Initialization of query '${_s(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&pp(n)}async function gp(t,e){const n=ne(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?r=e.Da()?0:1:!s.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function rM(t,e){const n=ne(t);let i=!1;for(const r of e){const s=r.query,a=n.queries.get(s);if(a){for(const l of a.Sa)l.Fa(r)&&(i=!0);a.wa=r}}i&&pp(n)}function sM(t,e,n){const i=ne(t),r=i.queries.get(e);if(r)for(const s of r.Sa)s.onError(n);i.queries.delete(e)}function pp(t){t.Ca.forEach(e=>{e.next()})}var Rm,pE;(pE=Rm||(Rm={})).Ma="default",pE.Cache="cache";class yp{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new ca(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ca.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Rm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e){this.key=e}}class GS{constructor(e){this.key=e}}class aM{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=fe(),this.mutatedKeys=fe(),this.eu=hS(e),this.tu=new Bs(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new mE,r=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,l=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((f,m)=>{const d=r.get(f),_=Sh(this.query,m)?m:null,x=!!d&&this.mutatedKeys.has(d.key),M=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let N=!1;d&&_?d.data.isEqual(_.data)?x!==M&&(i.track({type:3,doc:_}),N=!0):this.su(d,_)||(i.track({type:2,doc:_}),N=!0,(u&&this.eu(_,u)>0||c&&this.eu(_,c)<0)&&(l=!0)):!d&&_?(i.track({type:0,doc:_}),N=!0):d&&!_&&(i.track({type:1,doc:d}),N=!0,(u||c)&&(l=!0)),N&&(_?(a=a.add(_),s=M?s.add(f):s.delete(f)):(a=a.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),s=s.delete(f.key),i.track({type:1,doc:f})}return{tu:a,iu:i,Cs:l,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((f,m)=>function(_,x){const M=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z(20277,{Rt:N})}};return M(_)-M(x)}(f.type,m.type)||this.eu(f.doc,m.doc)),this.ou(i),r=r??!1;const l=n&&!r?this._u():[],u=this.Xa.size===0&&this.current&&!r?1:0,c=u!==this.Za;return this.Za=u,a.length!==0||c?{snapshot:new ca(this.query,e.tu,s,a,e.mutatedKeys,u===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new mE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=fe(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new GS(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new FS(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=fe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ca.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const _p="SyncEngine";class oM{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class lM{constructor(e){this.key=e,this.hu=!1}}class uM{constructor(e,n,i,r,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new is(l=>cS(l),bh),this.Iu=new Map,this.Eu=new Set,this.du=new Ue(W.comparator),this.Au=new Map,this.Ru=new rp,this.Vu={},this.mu=new Map,this.fu=ua.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function cM(t,e,n=!0){const i=WS(t);let r;const s=i.Tu.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.lu()):r=await QS(i,e,n,!0),r}async function hM(t,e){const n=WS(t);await QS(n,e,!0,!1)}async function QS(t,e,n,i){const r=await NO(t.localStore,In(e)),s=r.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let l;return i&&(l=await fM(t,e,s,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&US(t.remoteStore,r),l}async function fM(t,e,n,i,r){t.pu=(m,d,_)=>async function(M,N,w,T){let E=N.view.ru(w);E.Cs&&(E=await lE(M.localStore,N.query,!1).then(({documents:y})=>N.view.ru(y,E)));const O=T&&T.targetChanges.get(N.targetId),U=T&&T.targetMismatches.get(N.targetId)!=null,Q=N.view.applyChanges(E,M.isPrimaryClient,O,U);return _E(M,N.targetId,Q.au),Q.snapshot}(t,m,d,_);const s=await lE(t.localStore,e,!0),a=new aM(e,s.Qs),l=a.ru(s.documents),u=Nl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),c=a.applyChanges(l,t.isPrimaryClient,u);_E(t,n,c.au);const f=new oM(e,n,a);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function dM(t,e,n){const i=ne(t),r=i.Tu.get(e),s=i.Iu.get(r.targetId);if(s.length>1)return i.Iu.set(r.targetId,s.filter(a=>!bh(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Am(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&lp(i.remoteStore,r.targetId),Cm(i,r.targetId)}).catch(wa)):(Cm(i,r.targetId),await Am(i.localStore,r.targetId,!0))}async function mM(t,e){const n=ne(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),lp(n.remoteStore,i.targetId))}async function gM(t,e,n){const i=bM(t);try{const r=await function(a,l){const u=ne(a),c=De.now(),f=l.reduce((_,x)=>_.add(x.key),fe());let m,d;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let x=di(),M=fe();return u.Ns.getEntries(_,f).next(N=>{x=N,x.forEach((w,T)=>{T.isValidDocument()||(M=M.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,x)).next(N=>{m=N;const w=[];for(const T of l){const E=DN(T,m.get(T.key).overlayedDocument);E!=null&&w.push(new pr(T.key,E,nS(E.value.mapValue),xt.exists(!0)))}return u.mutationQueue.addMutationBatch(_,c,w,l)}).next(N=>{d=N;const w=N.applyToLocalDocumentSet(m,M);return u.documentOverlayCache.saveOverlays(_,N.batchId,w)})}).then(()=>({batchId:d.batchId,changes:dS(m)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,l,u){let c=a.Vu[a.currentUser.toKey()];c||(c=new Ue(he)),c=c.insert(l,u),a.Vu[a.currentUser.toKey()]=c}(i,r.batchId,n),await Ml(i,r.changes),await Dh(i.remoteStore)}catch(r){const s=dp(r,"Failed to persist write");n.reject(s)}}async function $S(t,e){const n=ne(t);try{const i=await IO(n.localStore,e);e.targetChanges.forEach((r,s)=>{const a=n.Au.get(s);a&&(_e(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?_e(a.hu,14607):r.removedDocuments.size>0&&(_e(a.hu,42227),a.hu=!1))}),await Ml(n,i,e)}catch(i){await wa(i)}}function yE(t,e,n){const i=ne(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((s,a)=>{const l=a.view.va(e);l.snapshot&&r.push(l.snapshot)}),function(a,l){const u=ne(a);u.onlineState=l;let c=!1;u.queries.forEach((f,m)=>{for(const d of m.Sa)d.va(l)&&(c=!0)}),c&&pp(u)}(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function pM(t,e,n){const i=ne(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),s=r&&r.key;if(s){let a=new Ue(W.comparator);a=a.insert(s,Tt.newNoDocument(s,te.min()));const l=fe().add(s),u=new Ch(te.min(),new Map,new Ue(he),a,l);await $S(i,u),i.du=i.du.remove(s),i.Au.delete(e),vp(i)}else await Am(i.localStore,e,!1).then(()=>Cm(i,e,n)).catch(wa)}async function yM(t,e){const n=ne(t),i=e.batch.batchId;try{const r=await CO(n.localStore,e);YS(n,i,null),KS(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ml(n,r)}catch(r){await wa(r)}}async function _M(t,e,n){const i=ne(t);try{const r=await function(a,l){const u=ne(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let f;return u.mutationQueue.lookupMutationBatch(c,l).next(m=>(_e(m!==null,37113),f=m.keys(),u.mutationQueue.removeMutationBatch(c,m))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,f)).next(()=>u.localDocuments.getDocuments(c,f))})}(i.localStore,e);YS(i,e,n),KS(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Ml(i,r)}catch(r){await wa(r)}}function KS(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function YS(t,e,n){const i=ne(t);let r=i.Vu[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function Cm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||XS(t,i)})}function XS(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(lp(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),vp(t))}function _E(t,e,n){for(const i of n)i instanceof FS?(t.Ru.addReference(i.key,e),vM(t,i)):i instanceof GS?(Y(_p,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||XS(t,i.key)):Z(19791,{wu:i})}function vM(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(Y(_p,"New document in limbo: "+n),t.Eu.add(i),vp(t))}function vp(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new W(we.fromString(e)),i=t.fu.next();t.Au.set(i,new lM(n)),t.du=t.du.insert(n,i),US(t.remoteStore,new qi(In(Th(n.path)),i,"TargetPurposeLimboResolution",_h.ce))}}async function Ml(t,e,n){const i=ne(t),r=[],s=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,e,n).then(c=>{var f;if((c||n)&&i.isPrimaryClient){const m=c?!c.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:f.current;i.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(c){r.push(c);const m=ap.As(u.targetId,c);s.push(m)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(u,c){const f=ne(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>H.forEach(c,d=>H.forEach(d.Es,_=>f.persistence.referenceDelegate.addReference(m,d.targetId,_)).next(()=>H.forEach(d.ds,_=>f.persistence.referenceDelegate.removeReference(m,d.targetId,_)))))}catch(m){if(!Ra(m))throw m;Y(op,"Failed to update sequence numbers: "+m)}for(const m of c){const d=m.targetId;if(!m.fromCache){const _=f.Ms.get(d),x=_.snapshotVersion,M=_.withLastLimboFreeSnapshotVersion(x);f.Ms=f.Ms.insert(d,M)}}}(i.localStore,s))}async function EM(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){Y(_p,"User change. New user:",e.toKey());const i=await VS(n.localStore,e);n.currentUser=e,function(s,a){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new K(z.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ml(n,i.Ls)}}function TM(t,e){const n=ne(t),i=n.Au.get(e);if(i&&i.hu)return fe().add(i.key);{let r=fe();const s=n.Iu.get(e);if(!s)return r;for(const a of s){const l=n.Tu.get(a);r=r.unionWith(l.view.nu)}return r}}function WS(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=$S.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=TM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pM.bind(null,e),e.Pu.H_=rM.bind(null,e.eventManager),e.Pu.yu=sM.bind(null,e.eventManager),e}function bM(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_M.bind(null,e),e}class Uc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ih(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return RO(this.persistence,new SO,e.initialUser,this.serializer)}Cu(e){return new MS(sp.mi,this.serializer)}Du(e){return new MO}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uc.provider={build:()=>new Uc};class SM extends Uc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){_e(this.persistence.referenceDelegate instanceof Lc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new lO(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?kt.withCacheSize(this.cacheSizeBytes):kt.DEFAULT;return new MS(i=>Lc.mi(i,n),this.serializer)}}class Im{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>yE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=EM.bind(null,this.syncEngine),await tM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new iM}()}createDatastore(e){const n=Ih(e.databaseInfo.databaseId),i=function(s){return new UO(s)}(e.databaseInfo);return function(s,a,l,u){return new qO(s,a,l,u)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,a,l){return new FO(i,r,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>yE(this.syncEngine,n,0),function(){return hE.v()?new hE:new VO}())}createSyncEngine(e,n){return function(r,s,a,l,u,c,f){const m=new uM(r,s,a,l,u,c);return f&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=ne(r);Y(Yr,"RemoteStore shutting down."),s.Ea.add(5),await Ol(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Im.provider={build:()=>new Im};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):fi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr="FirestoreClient";class AM{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Et.UNAUTHENTICATED,this.clientId=$g.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async a=>{Y(fr,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(Y(fr,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=dp(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function nd(t,e){t.asyncQueue.verifyOperationInProgress(),Y(fr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await VS(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function vE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await wM(t);Y(fr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>dE(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>dE(e.remoteStore,r)),t._onlineComponents=e}async function wM(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y(fr,"Using user provided OfflineComponentProvider");try{await nd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===z.FAILED_PRECONDITION||r.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;ia("Error using user provided cache. Falling back to memory cache: "+n),await nd(t,new Uc)}}else Y(fr,"Using default OfflineComponentProvider"),await nd(t,new SM(void 0));return t._offlineComponents}async function JS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y(fr,"Using user provided OnlineComponentProvider"),await vE(t,t._uninitializedComponentsProvider._online)):(Y(fr,"Using default OnlineComponentProvider"),await vE(t,new Im))),t._onlineComponents}function RM(t){return JS(t).then(e=>e.syncEngine)}async function jc(t){const e=await JS(t),n=e.eventManager;return n.onListen=cM.bind(null,e.syncEngine),n.onUnlisten=dM.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=hM.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=mM.bind(null,e.syncEngine),n}function CM(t,e,n={}){const i=new ni;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,u,c){const f=new Ep({next:d=>{f.Nu(),a.enqueueAndForget(()=>gp(s,m));const _=d.docs.has(l);!_&&d.fromCache?c.reject(new K(z.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&d.fromCache&&u&&u.source==="server"?c.reject(new K(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(d)},error:d=>c.reject(d)}),m=new yp(Th(l.path),f,{includeMetadataChanges:!0,qa:!0});return mp(s,m)}(await jc(t),t.asyncQueue,e,n,i)),i.promise}function IM(t,e,n={}){const i=new ni;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,u,c){const f=new Ep({next:d=>{f.Nu(),a.enqueueAndForget(()=>gp(s,m)),d.fromCache&&u.source==="server"?c.reject(new K(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(d)},error:d=>c.reject(d)}),m=new yp(l,f,{includeMetadataChanges:!0,qa:!0});return mp(s,m)}(await jc(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="firestore.googleapis.com",TE=!0;class bE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new K(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=eA,this.ssl=TE}else this.host=e.host,this.ssl=e.ssl??TE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=OS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<aO)throw new K(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZS(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nh{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new VD;switch(i.type){case"firstParty":return new UD(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new K(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=EE.get(n);i&&(Y("ComponentProvider","Removing Datastore"),EE.delete(n),i.terminate())}(this),Promise.resolve()}}function xM(t,e,n,i={}){var c;t=It(t,Nh);const r=ba(e),s=t._getSettings(),a={...s,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;r&&(x1(`https://${l}`),D1("Firestore",!0)),s.host!==eA&&s.host!==l&&ia("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:r,emulatorOptions:i};if(!ci(u,a)&&(t._setSettings(u),i.mockUserToken)){let f,m;if(typeof i.mockUserToken=="string")f=i.mockUserToken,m=Et.MOCK_USER;else{f=o2(i.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const d=i.mockUserToken.sub||i.mockUserToken.user_id;if(!d)throw new K(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Et(d)}t._authCredentials=new kD(new F1(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new yr(this.firestore,e,this._query)}}class qe{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qe(this.firestore,e,this._key)}toJSON(){return{type:qe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(xl(n,qe._jsonSchema))return new qe(e,i||null,new W(we.fromString(n.referencePath)))}}qe._jsonSchemaVersion="firestore/documentReference/1.0",qe._jsonSchema={type:Ze("string",qe._jsonSchemaVersion),referencePath:Ze("string")};class nr extends yr{constructor(e,n,i){super(e,n,Th(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qe(this.firestore,null,new W(e))}withConverter(e){return new nr(this.firestore,e,this._path)}}function mi(t,e,...n){if(t=Qe(t),G1("collection","path",e),t instanceof Nh){const i=we.fromString(e,...n);return kv(i),new nr(t,null,i)}{if(!(t instanceof qe||t instanceof nr))throw new K(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(we.fromString(e,...n));return kv(i),new nr(t.firestore,null,i)}}function mn(t,e,...n){if(t=Qe(t),arguments.length===1&&(e=$g.newId()),G1("doc","path",e),t instanceof Nh){const i=we.fromString(e,...n);return Vv(i),new qe(t,null,new W(i))}{if(!(t instanceof qe||t instanceof nr))throw new K(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(we.fromString(e,...n));return Vv(i),new qe(t.firestore,t instanceof nr?t.converter:null,new W(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="AsyncQueue";class AE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new LS(this,"async_queue_retry"),this._c=()=>{const i=td();i&&Y(SE,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=td();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=td();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ni;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ra(e))throw e;Y(SE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,fi("INTERNAL UNHANDLED ERROR: ",wE(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=fp.createAndSchedule(this,e,n,i,s=>this.hc(s));return this.tc.push(r),r}uc(){this.nc&&Z(47125,{Pc:wE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function wE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class kn extends Nh{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new AE,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new AE(e),this._firestoreClient=void 0,await e}}}function DM(t,e){const n=typeof t=="object"?t:V1(),i=typeof t=="string"?t:Nc,r=Gg(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=s2("firestore");s&&xM(r,...s)}return r}function Vl(t){if(t._terminated)throw new K(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||NM(t),t._firestoreClient}function NM(t){var i,r,s;const e=t._freezeSettings(),n=function(l,u,c,f){return new tN(l,u,c,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,ZS(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new AM(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this._byteString=e}static fromBase64String(e){try{return new on(yt.fromBase64String(e))}catch(n){throw new K(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new on(yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:on._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(xl(e,on._jsonSchema))return on.fromBase64String(e.bytes)}}on._jsonSchemaVersion="firestore/bytes/1.0",on._jsonSchema={type:Ze("string",on._jsonSchemaVersion),bytes:Ze("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function tA(){return new xa(dm)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Dn._jsonSchemaVersion}}static fromJSON(e){if(xl(e,Dn._jsonSchema))return new Dn(e.latitude,e.longitude)}}Dn._jsonSchemaVersion="firestore/geoPoint/1.0",Dn._jsonSchema={type:Ze("string",Dn._jsonSchemaVersion),latitude:Ze("number"),longitude:Ze("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Nn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(xl(e,Nn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Nn(e.vectorValues);throw new K(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Nn._jsonSchemaVersion="firestore/vectorValue/1.0",Nn._jsonSchema={type:Ze("string",Nn._jsonSchemaVersion),vectorValues:Ze("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM=/^__.*__$/;class MM{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new pr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Dl(e,this.data,n,this.fieldTransforms)}}class nA{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new pr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function iA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z(40011,{Ac:t})}}class Oh{constructor(e,n,i,r,s,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Oh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return zc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(iA(this.Ac)&&OM.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class VM{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Ih(e)}Cc(e,n,i,r=!1){return new Oh({Ac:e,methodName:n,Dc:i,path:mt.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kl(t){const e=t._freezeSettings(),n=Ih(t._databaseId);return new VM(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Tp(t,e,n,i,r,s={}){const a=t.Cc(s.merge||s.mergeFields?2:0,e,n,r);wp("Data must be an object, but it was:",a,i);const l=oA(i,a);let u,c;if(s.merge)u=new Gt(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const f=[];for(const m of s.mergeFields){const d=xm(e,m,n);if(!a.contains(d))throw new K(z.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);uA(f,d)||f.push(d)}u=new Gt(f),c=a.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,c=a.fieldTransforms;return new MM(new Lt(l),u,c)}class Mh extends Da{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mh}}function rA(t,e,n){return new Oh({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class bp extends Da{_toFieldTransform(e){return new ep(e.path,new ul)}isEqual(e){return e instanceof bp}}class Sp extends Da{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=rA(this,e,!0),i=this.vc.map(s=>ss(s,n)),r=new oa(i);return new ep(e.path,r)}isEqual(e){return e instanceof Sp&&ci(this.vc,e.vc)}}class Ap extends Da{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=rA(this,e,!0),i=this.vc.map(s=>ss(s,n)),r=new la(i);return new ep(e.path,r)}isEqual(e){return e instanceof Ap&&ci(this.vc,e.vc)}}function sA(t,e,n,i){const r=t.Cc(1,e,n);wp("Data must be an object, but it was:",r,i);const s=[],a=Lt.empty();gr(i,(u,c)=>{const f=Rp(e,u,n);c=Qe(c);const m=r.yc(f);if(c instanceof Mh)s.push(f);else{const d=ss(c,m);d!=null&&(s.push(f),a.set(f,d))}});const l=new Gt(s);return new nA(a,l,r.fieldTransforms)}function aA(t,e,n,i,r,s){const a=t.Cc(1,e,n),l=[xm(e,i,n)],u=[r];if(s.length%2!=0)throw new K(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)l.push(xm(e,s[d])),u.push(s[d+1]);const c=[],f=Lt.empty();for(let d=l.length-1;d>=0;--d)if(!uA(c,l[d])){const _=l[d];let x=u[d];x=Qe(x);const M=a.yc(_);if(x instanceof Mh)c.push(_);else{const N=ss(x,M);N!=null&&(c.push(_),f.set(_,N))}}const m=new Gt(c);return new nA(f,m,a.fieldTransforms)}function kM(t,e,n,i=!1){return ss(n,t.Cc(i?4:3,e))}function ss(t,e){if(lA(t=Qe(t)))return wp("Unsupported field value:",e,t),oA(t,e);if(t instanceof Da)return function(i,r){if(!iA(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const l of i){let u=ss(l,r.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=Qe(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return AN(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=De.fromDate(i);return{timestampValue:kc(r.serializer,s)}}if(i instanceof De){const s=new De(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:kc(r.serializer,s)}}if(i instanceof Dn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof on)return{bytesValue:wS(r.serializer,i._byteString)};if(i instanceof qe){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ip(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Nn)return function(a,l){return{mapValue:{fields:{[eS]:{stringValue:tS},[Oc]:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw l.Sc("VectorValues must only contain numeric values.");return Zg(l.serializer,c)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${yh(i)}`)}(t,e)}function oA(t,e){const n={};return K1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gr(t,(i,r)=>{const s=ss(r,e.mc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function lA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof De||t instanceof Dn||t instanceof on||t instanceof qe||t instanceof Da||t instanceof Nn)}function wp(t,e,n){if(!lA(n)||!Q1(n)){const i=yh(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function xm(t,e,n){if((e=Qe(e))instanceof xa)return e._internalPath;if(typeof e=="string")return Rp(t,e);throw zc("Field path arguments must be of type string or ",t,!1,void 0,n)}const LM=new RegExp("[~\\*/\\[\\]]");function Rp(t,e,n){if(e.search(LM)>=0)throw zc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new xa(...e.split("."))._internalPath}catch{throw zc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function zc(t,e,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${i}`),a&&(u+=` in document ${r}`),u+=")"),new K(z.INVALID_ARGUMENT,l+t+u)}function uA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new PM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Vh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class PM extends cA{data(){return super.data()}}function Vh(t,e){return typeof e=="string"?Rp(t,e):e instanceof xa?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Cp{}class fA extends Cp{}function Na(t,e,...n){let i=[];e instanceof Cp&&i.push(e),i=i.concat(n),function(s){const a=s.filter(u=>u instanceof Ip).length,l=s.filter(u=>u instanceof kh).length;if(a>1||a>0&&l>0)throw new K(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class kh extends fA{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new kh(e,n,i)}_apply(e){const n=this._parse(e);return mA(e._query,n),new yr(e.firestore,e.converter,_m(e._query,n))}_parse(e){const n=kl(e.firestore);return function(s,a,l,u,c,f,m){let d;if(c.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new K(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){IE(m,f);const x=[];for(const M of m)x.push(CE(u,s,M));d={arrayValue:{values:x}}}else d=CE(u,s,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||IE(m,f),d=kM(l,a,m,f==="in"||f==="not-in");return We.create(c,f,d)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function dA(t,e,n){const i=e,r=Vh("where",t);return kh._create(r,i,n)}class Ip extends Cp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ip(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:pn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let a=r;const l=s.getFlattenedFilters();for(const u of l)mA(a,u),a=_m(a,u)}(e._query,n),new yr(e.firestore,e.converter,_m(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class xp extends fA{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new xp(e,n)}_apply(e){const n=function(r,s,a){if(r.startAt!==null)throw new K(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new K(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ll(s,a)}(e._query,this._field,this._direction);return new yr(e.firestore,e.converter,function(r,s){const a=r.explicitOrderBy.concat([s]);return new Ca(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function Lh(t,e="asc"){const n=e,i=Vh("orderBy",t);return xp._create(i,n)}function CE(t,e,n){if(typeof(n=Qe(n))=="string"){if(n==="")throw new K(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uS(e)&&n.indexOf("/")!==-1)throw new K(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(we.fromString(n));if(!W.isDocumentKey(i))throw new K(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Hv(t,new W(i))}if(n instanceof qe)return Hv(t,n._key);throw new K(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yh(n)}.`)}function IE(t,e){if(!Array.isArray(t)||t.length===0)throw new K(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mA(t,e){const n=function(r,s){for(const a of r)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class UM{convertValue(e,n="none"){switch(cr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return He(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ur(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return gr(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var i,r,s;const n=(s=(r=(i=e.fields)==null?void 0:i[Oc].arrayValue)==null?void 0:r.values)==null?void 0:s.map(a=>He(a.doubleValue));return new Nn(n)}convertGeoPoint(e){return new Dn(He(e.latitude),He(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Eh(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(sl(e));default:return null}}convertTimestamp(e){const n=lr(e);return new De(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=we.fromString(e);_e(NS(i),9688,{name:e});const r=new al(i.get(1),i.get(3)),s=new W(i.popFirst(5));return r.isEqual(n)||fi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class vo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jr extends cA{constructor(e,n,i,r,s,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new $u(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Vh("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new K(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=jr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}jr._jsonSchemaVersion="firestore/documentSnapshot/1.0",jr._jsonSchema={type:Ze("string",jr._jsonSchemaVersion),bundleSource:Ze("string","DocumentSnapshot"),bundleName:Ze("string"),bundle:Ze("string")};class $u extends jr{data(e={}){return super.data(e)}}class zr{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new vo(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new $u(this._firestore,this._userDataWriter,i.key,i,new vo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const u=new $u(r._firestore,r._userDataWriter,l.doc.key,l.doc,new vo(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new $u(r._firestore,r._userDataWriter,l.doc.key,l.doc,new vo(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,f=-1;return l.type!==0&&(c=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),f=a.indexOf(l.doc.key)),{type:jM(l.type),doc:u,oldIndex:c,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new K(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=zr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=$g.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function jM(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(t){t=It(t,qe);const e=It(t.firestore,kn);return CM(Vl(e),t._key).then(n=>gA(e,t,n))}zr._jsonSchemaVersion="firestore/querySnapshot/1.0",zr._jsonSchema={type:Ze("string",zr._jsonSchemaVersion),bundleSource:Ze("string","QuerySnapshot"),bundleName:Ze("string"),bundle:Ze("string")};class Np extends UM{constructor(e){super(),this.firestore=e}convertBytes(e){return new on(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qe(this.firestore,null,n)}}function Oa(t){t=It(t,yr);const e=It(t.firestore,kn),n=Vl(e),i=new Np(e);return hA(t._query),IM(n,t._query).then(r=>new zr(e,i,t,r))}function BM(t,e,n){t=It(t,qe);const i=It(t.firestore,kn),r=Dp(t.converter,e,n);return Ll(i,[Tp(kl(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,xt.none())])}function qM(t,e,n,...i){t=It(t,qe);const r=It(t.firestore,kn),s=kl(r);let a;return a=typeof(e=Qe(e))=="string"||e instanceof xa?aA(s,"updateDoc",t._key,e,n,i):sA(s,"updateDoc",t._key,e),Ll(r,[a.toMutation(t._key,xt.exists(!0))])}function Op(t){return Ll(It(t.firestore,kn),[new Rh(t._key,xt.none())])}function HM(t,e){const n=It(t.firestore,kn),i=mn(t),r=Dp(t.converter,e);return Ll(n,[Tp(kl(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,xt.exists(!1))]).then(()=>i)}function FM(t,...e){var u,c,f;t=Qe(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||RE(e[i])||(n=e[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(RE(e[i])){const m=e[i];e[i]=(u=m.next)==null?void 0:u.bind(m),e[i+1]=(c=m.error)==null?void 0:c.bind(m),e[i+2]=(f=m.complete)==null?void 0:f.bind(m)}let s,a,l;if(t instanceof qe)a=It(t.firestore,kn),l=Th(t._key.path),s={next:m=>{e[i]&&e[i](gA(a,t,m))},error:e[i+1],complete:e[i+2]};else{const m=It(t,yr);a=It(m.firestore,kn),l=m._query;const d=new Np(a);s={next:_=>{e[i]&&e[i](new zr(a,d,m,_))},error:e[i+1],complete:e[i+2]},hA(t._query)}return function(d,_,x,M){const N=new Ep(M),w=new yp(_,N,x);return d.asyncQueue.enqueueAndForget(async()=>mp(await jc(d),w)),()=>{N.Nu(),d.asyncQueue.enqueueAndForget(async()=>gp(await jc(d),w))}}(Vl(a),l,r,s)}function Ll(t,e){return function(i,r){const s=new ni;return i.asyncQueue.enqueueAndForget(async()=>gM(await RM(i),r,s)),s.promise}(Vl(t),e)}function gA(t,e,n){const i=n.docs.get(e._key),r=new Np(t);return new jr(t,r,e._key,i,new vo(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=kl(e)}set(e,n,i){this._verifyNotCommitted();const r=id(e,this._firestore),s=Dp(r.converter,n,i),a=Tp(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(a.toMutation(r._key,xt.none())),this}update(e,n,i,...r){this._verifyNotCommitted();const s=id(e,this._firestore);let a;return a=typeof(n=Qe(n))=="string"||n instanceof xa?aA(this._dataReader,"WriteBatch.update",s._key,n,i,r):sA(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(a.toMutation(s._key,xt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=id(e,this._firestore);return this._mutations=this._mutations.concat(new Rh(n._key,xt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new K(z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function id(t,e){if((t=Qe(t)).firestore!==e)throw new K(z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Br(){return new bp("serverTimestamp")}function QM(...t){return new Sp("arrayUnion",t)}function $M(...t){return new Ap("arrayRemove",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(t){return Vl(t=It(t,kn)),new GM(t,e=>Ll(t,e))}(function(e,n=!0){(function(r){Aa=r})(Sa),na(new $r("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),l=new kn(new LD(i.getProvider("auth-internal")),new jD(a,i.getProvider("app-check-internal")),function(c,f){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new K(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new al(c.options.projectId,f)}(a,r),a);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),er(Nv,Ov,e),er(Nv,Ov,"esm2020")})();var KM="firebase",YM="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */er(KM,YM,"app");function pA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const XM=pA,yA=new Cl("auth","Firebase",pA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc=new Hg("@firebase/auth");function WM(t,...e){Bc.logLevel<=ce.WARN&&Bc.warn(`Auth (${Sa}): ${t}`,...e)}function Ku(t,...e){Bc.logLevel<=ce.ERROR&&Bc.error(`Auth (${Sa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(t,...e){throw Mp(t,...e)}function On(t,...e){return Mp(t,...e)}function _A(t,e,n){const i={...XM(),[e]:n};return new Cl("auth","Firebase",i).create(e,{appName:t.name})}function ii(t){return _A(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mp(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return yA.create(t,...e)}function J(t,e,...n){if(!t)throw Mp(e,...n)}function Xn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ku(e),new Error(e)}function gi(t,e){t||Xn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function JM(){return xE()==="http:"||xE()==="https:"}function xE(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JM()||d2()||"connection"in navigator)?navigator.onLine:!0}function eV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n){this.shortDelay=e,this.longDelay=n,gi(n>e,"Short delay should be less than long delay!"),this.isMobile=c2()||m2()}get(){return ZM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(t,e){gi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],iV=new Pl(3e4,6e4);function _r(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function vr(t,e,n,i,r={}){return EA(t,r,async()=>{let s={},a={};i&&(e==="GET"?a=i:s={body:JSON.stringify(i)});const l=Il({key:t.config.apiKey,...a}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:u,...s};return f2()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&ba(t.emulatorConfig.host)&&(c.credentials="include"),vA.fetch()(await TA(t,t.config.apiHost,n,l),c)})}async function EA(t,e,n){t._canInitEmulator=!1;const i={...tV,...e};try{const r=new sV(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Tu(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tu(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Tu(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw Tu(t,"user-disabled",a);const f=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw _A(t,f,c);yn(t,f)}}catch(r){if(r instanceof _i)throw r;yn(t,"network-request-failed",{message:String(r)})}}async function Ul(t,e,n,i,r={}){const s=await vr(t,e,n,i,r);return"mfaPendingCredential"in s&&yn(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function TA(t,e,n,i){const r=`${e}${n}?${i}`,s=t,a=s.config.emulator?Vp(t.config,r):`${t.config.apiScheme}://${r}`;return nV.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function rV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(On(this.auth,"network-request-failed")),iV.get())})}}function Tu(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=On(t,e,i);return r.customData._tokenResponse=n,r}function DE(t){return t!==void 0&&t.enterprise!==void 0}class aV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return rV(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function oV(t,e){return vr(t,"GET","/v2/recaptchaConfig",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lV(t,e){return vr(t,"POST","/v1/accounts:delete",e)}async function qc(t,e){return vr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uV(t,e=!1){const n=Qe(t),i=await n.getIdToken(e),r=kp(i);J(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:zo(rd(r.auth_time)),issuedAtTime:zo(rd(r.iat)),expirationTime:zo(rd(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function rd(t){return Number(t)*1e3}function kp(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Ku("JWT malformed, contained fewer than 3 sections"),null;try{const r=w1(n);return r?JSON.parse(r):(Ku("Failed to decode base64 JWT payload"),null)}catch(r){return Ku("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function NE(t){const e=kp(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cl(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof _i&&cV(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function cV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zo(this.lastLoginAt),this.creationTime=zo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hc(t){var m;const e=t.auth,n=await t.getIdToken(),i=await cl(t,qc(e,{idToken:n}));J(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const s=(m=r.providerUserInfo)!=null&&m.length?bA(r.providerUserInfo):[],a=dV(t.providerData,s),l=t.isAnonymous,u=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Nm(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(t,f)}async function fV(t){const e=Qe(t);await Hc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dV(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function bA(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mV(t,e){const n=await EA(t,{},async()=>{const i=Il({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,a=await TA(t,r,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return t.emulatorConfig&&ba(t.emulatorConfig.host)&&(u.credentials="include"),vA.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function gV(t,e){return vr(t,"POST","/v2/accounts:revokeToken",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):NE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){J(e.length!==0,"internal-error");const n=NE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await mV(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new qs;return i&&(J(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(J(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),s&&(J(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qs,this.toJSON())}_performRefresh(){return Xn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class dn{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new hV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Nm(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await cl(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return uV(this,e)}reload(){return fV(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new dn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Hc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(an(this.auth.app))return Promise.reject(ii(this.auth));const e=await this.getIdToken();return await cl(this,lV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,c=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:m,emailVerified:d,isAnonymous:_,providerData:x,stsTokenManager:M}=n;J(m&&M,e,"internal-error");const N=qs.fromJSON(this.name,M);J(typeof m=="string",e,"internal-error"),Ri(i,e.name),Ri(r,e.name),J(typeof d=="boolean",e,"internal-error"),J(typeof _=="boolean",e,"internal-error"),Ri(s,e.name),Ri(a,e.name),Ri(l,e.name),Ri(u,e.name),Ri(c,e.name),Ri(f,e.name);const w=new dn({uid:m,auth:e,email:r,emailVerified:d,displayName:i,isAnonymous:_,photoURL:a,phoneNumber:s,tenantId:l,stsTokenManager:N,createdAt:c,lastLoginAt:f});return x&&Array.isArray(x)&&(w.providerData=x.map(T=>({...T}))),u&&(w._redirectEventId=u),w}static async _fromIdTokenResponse(e,n,i=!1){const r=new qs;r.updateFromServerResponse(n);const s=new dn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Hc(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];J(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?bA(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),l=new qs;l.updateFromIdToken(i);const u=new dn({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:a}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Nm(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=new Map;function Wn(t){gi(t instanceof Function,"Expected a class definition");let e=OE.get(t);return e?(gi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,OE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}SA.type="NONE";const ME=SA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(t,e,n){return`firebase:${t}:${e}:${n}`}class Hs{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Yu(this.userKey,r.apiKey,s),this.fullPersistenceKey=Yu("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await qc(this.auth,{idToken:e}).catch(()=>{});return n?dn._fromGetAccountInfoResponse(this.auth,n,e):null}return dn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Hs(Wn(ME),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||Wn(ME);const a=Yu(i,e.config.apiKey,e.name);let l=null;for(const c of n)try{const f=await c._get(a);if(f){let m;if(typeof f=="string"){const d=await qc(e,{idToken:f}).catch(()=>{});if(!d)break;m=await dn._fromGetAccountInfoResponse(e,d,f)}else m=dn._fromJSON(e,f);c!==s&&(l=m),s=c;break}}catch{}const u=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Hs(s,e,i):(s=u[0],l&&await s._set(a,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(a)}catch{}})),new Hs(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(CA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(AA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xA(e))return"Blackberry";if(DA(e))return"Webos";if(wA(e))return"Safari";if((e.includes("chrome/")||RA(e))&&!e.includes("edge/"))return"Chrome";if(IA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function AA(t=bt()){return/firefox\//i.test(t)}function wA(t=bt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function RA(t=bt()){return/crios\//i.test(t)}function CA(t=bt()){return/iemobile/i.test(t)}function IA(t=bt()){return/android/i.test(t)}function xA(t=bt()){return/blackberry/i.test(t)}function DA(t=bt()){return/webos/i.test(t)}function Lp(t=bt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function pV(t=bt()){var e;return Lp(t)&&!!((e=window.navigator)!=null&&e.standalone)}function yV(){return g2()&&document.documentMode===10}function NA(t=bt()){return Lp(t)||IA(t)||DA(t)||xA(t)||/windows phone/i.test(t)||CA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(t,e=[]){let n;switch(t){case"Browser":n=VE(bt());break;case"Worker":n=`${VE(bt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Sa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((a,l)=>{try{const u=e(s);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vV(t,e={}){return vr(t,"GET","/v2/passwordPolicy",_r(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV=6;class TV{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??EV,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kE(this),this.idTokenSubscription=new kE(this),this.beforeStateQueue=new _V(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Wn(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await Hs.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await qc(this,{idToken:e}),i=await dn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(an(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Hc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(an(this.app))return Promise.reject(ii(this));const n=e?Qe(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return an(this.app)?Promise.reject(ii(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return an(this.app)?Promise.reject(ii(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vV(this),n=new TV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Cl("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await gV(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Wn(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await Hs.create(this,[Wn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,i,r);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=OA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(an(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&WM(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function as(t){return Qe(t)}class kE{constructor(e){this.auth=e,this.observer=null,this.addObserver=S2(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ph={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function SV(t){Ph=t}function MA(t){return Ph.loadJS(t)}function AV(){return Ph.recaptchaEnterpriseScript}function wV(){return Ph.gapiScript}function RV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class CV{constructor(){this.enterprise=new IV}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class IV{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const xV="recaptcha-enterprise",VA="NO_RECAPTCHA";class DV{constructor(e){this.type=xV,this.auth=as(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,l)=>{oV(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const c=new aV(u);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,a(c.siteKey)}}).catch(u=>{l(u)})})}function r(s,a,l){const u=window.grecaptcha;DE(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(c=>{a(c)}).catch(()=>{a(VA)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new CV().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{i(this.auth).then(l=>{if(!n&&DE(window.grecaptcha))r(l,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=AV();u.length!==0&&(u+=l),MA(u).then(()=>{r(l,s,a)}).catch(c=>{a(c)})}}).catch(l=>{a(l)})})}}async function LE(t,e,n,i=!1,r=!1){const s=new DV(t);let a;if(r)a=VA;else try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,c=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Om(t,e,n,i,r){var s;if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await LE(t,e,n,n==="getOobCode");return i(t,a)}else return i(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await LE(t,e,n,n==="getOobCode");return i(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NV(t,e){const n=Gg(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(ci(s,e??{}))return r;yn(r,"already-initialized")}return n.initialize({options:e})}function OV(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Wn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function MV(t,e,n){const i=as(t);J(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=kA(e),{host:a,port:l}=VV(e),u=l===null?"":`:${l}`,c={url:`${s}//${a}${u}/`},f=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){J(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),J(ci(c,i.config.emulator)&&ci(f,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=c,i.emulatorConfig=f,i.settings.appVerificationDisabledForTesting=!0,ba(a)?(x1(`${s}//${a}${u}`),D1("Auth",!0)):kV()}function kA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function VV(t){const e=kA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:PE(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:PE(a)}}}function PE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function kV(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Xn("not implemented")}_getIdTokenResponse(e){return Xn("not implemented")}_linkToIdToken(e,n){return Xn("not implemented")}_getReauthenticationResolver(e){return Xn("not implemented")}}async function LV(t,e){return vr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PV(t,e){return Ul(t,"POST","/v1/accounts:signInWithPassword",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UV(t,e){return Ul(t,"POST","/v1/accounts:signInWithEmailLink",_r(t,e))}async function jV(t,e){return Ul(t,"POST","/v1/accounts:signInWithEmailLink",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl extends Pp{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new hl(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new hl(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Om(e,n,"signInWithPassword",PV);case"emailLink":return UV(e,{email:this._email,oobCode:this._password});default:yn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Om(e,i,"signUpPassword",LV);case"emailLink":return jV(e,{idToken:n,email:this._email,oobCode:this._password});default:yn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fs(t,e){return Ul(t,"POST","/v1/accounts:signInWithIdp",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zV="http://localhost";class Xr extends Pp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Xr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):yn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...s}=n;if(!i||!r)return null;const a=new Xr(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Fs(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Fs(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Fs(e,n)}buildRequest(){const e={requestUri:zV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Il(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BV(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qV(t){const e=mo(go(t)).link,n=e?mo(go(e)).deep_link_id:null,i=mo(go(t)).deep_link_id;return(i?mo(go(i)).link:null)||i||n||e||t}class Up{constructor(e){const n=mo(go(e)),i=n.apiKey??null,r=n.oobCode??null,s=BV(n.mode??null);J(i&&r&&s,"argument-error"),this.apiKey=i,this.operation=s,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=qV(e);try{return new Up(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(){this.providerId=Ma.PROVIDER_ID}static credential(e,n){return hl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Up.parseLink(n);return J(i,"argument-error"),hl._fromEmailAndCode(e,i.code,i.tenantId)}}Ma.PROVIDER_ID="password";Ma.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ma.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl extends LA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends jl{constructor(){super("facebook.com")}static credential(e){return Xr._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vi.credentialFromTaggedObject(e)}static credentialFromError(e){return Vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vi.credential(e.oauthAccessToken)}catch{return null}}}Vi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn extends jl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Xr._fromParams({providerId:Qn.PROVIDER_ID,signInMethod:Qn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Qn.credentialFromTaggedObject(e)}static credentialFromError(e){return Qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Qn.credential(n,i)}catch{return null}}}Qn.GOOGLE_SIGN_IN_METHOD="google.com";Qn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends jl{constructor(){super("github.com")}static credential(e){return Xr._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ki.credential(e.oauthAccessToken)}catch{return null}}}ki.GITHUB_SIGN_IN_METHOD="github.com";ki.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends jl{constructor(){super("twitter.com")}static credential(e,n){return Xr._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Li.credential(n,i)}catch{return null}}}Li.TWITTER_SIGN_IN_METHOD="twitter.com";Li.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HV(t,e){return Ul(t,"POST","/v1/accounts:signUp",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await dn._fromIdTokenResponse(e,i,r),a=UE(i);return new Wr({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=UE(i);return new Wr({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function UE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc extends _i{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Fc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Fc(e,n,i,r)}}function PA(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Fc._fromErrorAndOperation(t,s,e,i):s})}async function FV(t,e,n=!1){const i=await cl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Wr._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GV(t,e,n=!1){const{auth:i}=t;if(an(i.app))return Promise.reject(ii(i));const r="reauthenticate";try{const s=await cl(t,PA(i,r,e,t),n);J(s.idToken,i,"internal-error");const a=kp(s.idToken);J(a,i,"internal-error");const{sub:l}=a;return J(t.uid===l,i,"user-mismatch"),Wr._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&yn(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UA(t,e,n=!1){if(an(t.app))return Promise.reject(ii(t));const i="signIn",r=await PA(t,i,e),s=await Wr._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function QV(t,e){return UA(as(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jA(t){const e=as(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function $V(t,e,n){if(an(t.app))return Promise.reject(ii(t));const i=as(t),a=await Om(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",HV).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&jA(t),u}),l=await Wr._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}function KV(t,e,n){return an(t.app)?Promise.reject(ii(t)):QV(Qe(t),Ma.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&jA(t),i})}function YV(t,e,n,i){return Qe(t).onIdTokenChanged(e,n,i)}function XV(t,e,n){return Qe(t).beforeAuthStateChanged(e,n)}function WV(t,e,n,i){return Qe(t).onAuthStateChanged(e,n,i)}function JV(t){return Qe(t).signOut()}const Gc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gc,"1"),this.storage.removeItem(Gc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV=1e3,ek=10;class BA extends zA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=NA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);yV()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,ek):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},ZV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}BA.type="LOCAL";const tk=BA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA extends zA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}qA.type="SESSION";const HA=qA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Uh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const l=Array.from(a).map(async c=>c(n.origin,s)),u=await nk(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Uh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((l,u)=>{const c=jp("",20);r.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(m){const d=m;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(d.data.response);break;default:clearTimeout(f),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(){return window}function rk(t){Mn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(){return typeof Mn().WorkerGlobalScope<"u"&&typeof Mn().importScripts=="function"}async function sk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ak(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function ok(){return FA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA="firebaseLocalStorageDb",lk=1,Qc="firebaseLocalStorage",QA="fbase_key";class zl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function jh(t,e){return t.transaction([Qc],e?"readwrite":"readonly").objectStore(Qc)}function uk(){const t=indexedDB.deleteDatabase(GA);return new zl(t).toPromise()}function Mm(){const t=indexedDB.open(GA,lk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Qc,{keyPath:QA})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Qc)?e(i):(i.close(),await uk(),e(await Mm()))})})}async function jE(t,e,n){const i=jh(t,!0).put({[QA]:e,value:n});return new zl(i).toPromise()}async function ck(t,e){const n=jh(t,!1).get(e),i=await new zl(n).toPromise();return i===void 0?null:i.value}function zE(t,e){const n=jh(t,!0).delete(e);return new zl(n).toPromise()}const hk=800,fk=3;class $A{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>fk)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return FA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Uh._getInstance(ok()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await sk(),!this.activeServiceWorker)return;this.sender=new ik(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ak()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Mm();return await jE(e,Gc,"1"),await zE(e,Gc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>jE(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>ck(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>zE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=jh(r,!1).getAll();return new zl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$A.type="LOCAL";const dk=$A;new Pl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(t,e){return e?Wn(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp extends Pp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Fs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Fs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function gk(t){return UA(t.auth,new zp(t),t.bypassAuthState)}function pk(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),GV(n,new zp(t),t.bypassAuthState)}async function yk(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),FV(n,new zp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:l}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gk;case"linkViaPopup":case"linkViaRedirect":return yk;case"reauthViaPopup":case"reauthViaRedirect":return pk;default:yn(this.auth,"internal-error")}}resolve(e){gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k=new Pl(2e3,1e4);class Ms extends KA{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Ms.currentPopupAction&&Ms.currentPopupAction.cancel(),Ms.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return J(e,this.auth,"internal-error"),e}async onExecution(){gi(this.filter.length===1,"Popup operations only handle one event");const e=jp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(On(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(On(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ms.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(On(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_k.get())};e()}}Ms.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk="pendingRedirect",Xu=new Map;class Ek extends KA{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Xu.get(this.auth._key());if(!e){try{const i=await Tk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Xu.set(this.auth._key(),e)}return this.bypassAuthState||Xu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Tk(t,e){const n=Ak(e),i=Sk(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function bk(t,e){Xu.set(t._key(),e)}function Sk(t){return Wn(t._redirectPersistence)}function Ak(t){return Yu(vk,t.config.apiKey,t.name)}async function wk(t,e,n=!1){if(an(t.app))return Promise.reject(ii(t));const i=as(t),r=mk(i,e),a=await new Ek(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=10*60*1e3;class Ck{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Ik(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!YA(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(On(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Rk&&this.cachedEventUids.clear(),this.cachedEventUids.has(BE(e))}saveEventToCache(e){this.cachedEventUids.add(BE(e)),this.lastProcessedEventTime=Date.now()}}function BE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function YA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Ik(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return YA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xk(t,e={}){return vr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Nk=/^https?/;async function Ok(t){if(t.config.emulator)return;const{authorizedDomains:e}=await xk(t);for(const n of e)try{if(Mk(n))return}catch{}yn(t,"unauthorized-domain")}function Mk(t){const e=Dm(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!Nk.test(n))return!1;if(Dk.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk=new Pl(3e4,6e4);function qE(){const t=Mn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function kk(t){return new Promise((e,n)=>{var r,s,a;function i(){qE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{qE(),n(On(t,"network-request-failed"))},timeout:Vk.get()})}if((s=(r=Mn().gapi)==null?void 0:r.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((a=Mn().gapi)!=null&&a.load)i();else{const l=RV("iframefcb");return Mn()[l]=()=>{gapi.load?i():n(On(t,"network-request-failed"))},MA(`${wV()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Wu=null,e})}let Wu=null;function Lk(t){return Wu=Wu||kk(t),Wu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk=new Pl(5e3,15e3),Uk="__/auth/iframe",jk="emulator/auth/iframe",zk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Bk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qk(t){const e=t.config;J(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Vp(e,jk):`https://${t.config.authDomain}/${Uk}`,i={apiKey:e.apiKey,appName:t.name,v:Sa},r=Bk.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Il(i).slice(1)}`}async function Hk(t){const e=await Lk(t),n=Mn().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:qk(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zk,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=On(t,"network-request-failed"),l=Mn().setTimeout(()=>{s(a)},Pk.get());function u(){Mn().clearTimeout(l),r(i)}i.ping(u).then(u,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Gk=500,Qk=600,$k="_blank",Kk="http://localhost";class HE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Yk(t,e,n,i=Gk,r=Qk){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u={...Fk,width:i.toString(),height:r.toString(),top:s,left:a},c=bt().toLowerCase();n&&(l=RA(c)?$k:n),AA(c)&&(e=e||Kk,u.scrollbars="yes");const f=Object.entries(u).reduce((d,[_,x])=>`${d}${_}=${x},`,"");if(pV(c)&&l!=="_self")return Xk(e||"",l),new HE(null);const m=window.open(e||"",l,f);J(m,t,"popup-blocked");try{m.focus()}catch{}return new HE(m)}function Xk(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk="__/auth/handler",Jk="emulator/auth/handler",Zk=encodeURIComponent("fac");async function FE(t,e,n,i,r,s){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Sa,eventId:r};if(e instanceof LA){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",b2(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))a[f]=m}if(e instanceof jl){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(a.scopes=f.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),c=u?`#${Zk}=${encodeURIComponent(u)}`:"";return`${e4(t)}?${Il(l).slice(1)}${c}`}function e4({config:t}){return t.emulator?Vp(t,Jk):`https://${t.authDomain}/${Wk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd="webStorageSupport";class t4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=HA,this._completeRedirectFn=wk,this._overrideRedirectResult=bk}async _openPopup(e,n,i,r){var a;gi((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await FE(e,n,i,Dm(),r);return Yk(e,s,jp())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await FE(e,n,i,Dm(),r);return rk(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(gi(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await Hk(e),i=new Ck(e);return n.register("authEvent",r=>(J(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(sd,{type:sd},r=>{var a;const s=(a=r==null?void 0:r[0])==null?void 0:a[sd];s!==void 0&&n(!!s),yn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Ok(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return NA()||wA()||Lp()}}const n4=t4;var GE="@firebase/auth",QE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function s4(t){na(new $r("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;J(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:OA(t)},c=new bV(i,r,s,u);return OV(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),na(new $r("auth-internal",e=>{const n=as(e.getProvider("auth").getImmediate());return(i=>new i4(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),er(GE,QE,r4(t)),er(GE,QE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4=5*60,o4=I1("authIdTokenMaxAge")||a4;let $E=null;const l4=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>o4)return;const r=n==null?void 0:n.token;$E!==r&&($E=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function XA(t=V1()){const e=Gg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=NV(t,{popupRedirectResolver:n4,persistence:[dk,tk,HA]}),i=I1("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const a=l4(s.toString());XV(n,a,()=>a(n.currentUser)),YV(n,l=>a(l))}}const r=R1("auth");return r&&MV(n,`http://${r}`),n}function u4(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}SV({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=On("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",u4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});s4("Browser");const c4={apiKey:"AIzaSyAi3z9XoTJdR4CkApjmTxRkt-yRcb28iKg",authDomain:"product-6b793.firebaseapp.com",projectId:"product-6b793",storageBucket:"product-6b793.firebasestorage.app",messagingSenderId:"20469518495",appId:"1:20469518495:web:5a5cce3ad07d61f4bcd2aa",measurementId:"G-81BF2CC2YP"},Bp=M1(c4),Pe=DM(Bp),bu=XA(Bp);new Qn;console.log("app.options",Bp.options);console.log("auth.config",XA().config);function Va(){const[t,e]=D.useState(null),[n,i]=D.useState(!0),[r,s]=D.useState(!1),[a,l]=D.useState(new Set);D.useEffect(()=>{const d=WV(bu,_=>{e(_||null),l(new Set),i(!1)});return()=>d()},[]),D.useEffect(()=>{if(!t)return;s(!0);const d=mi(Pe,"users",t.uid,"saved"),_=FM(d,x=>{const M=new Set;x.forEach(N=>M.add(N.id)),l(M),s(!1)},()=>s(!1));return()=>_()},[t]);const u=D.useCallback(async(d,_)=>{await $V(bu,d,_)},[]),c=D.useCallback(async(d,_)=>{await KV(bu,d,_)},[]),f=D.useCallback(async()=>{await JV(bu)},[]),m=D.useCallback(async d=>{if(!t)throw new Error("로그인 필요");const _=mn(Pe,"users",t.uid,"saved",d);a.has(d)?await Op(_):await BM(_,{productId:d,createdAt:Br()},{merge:!0})},[t,a]);return{user:t,loadingUser:n,loadingSaved:r,savedIds:a,toggleSave:m,signUp:u,signIn:c,signOut:f}}function h4({open:t,onClose:e,onSignIn:n,onSignUp:i}){const[r,s]=D.useState("signin"),[a,l]=D.useState(""),[u,c]=D.useState("");if(!t)return null;const f=async m=>{m.preventDefault();try{r==="signin"?await n(a,u):await i(a,u),e()}catch(d){alert(d.message||d.code)}};return p.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.3)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:p.jsxs("div",{style:{width:360,background:"#fff",borderRadius:12,padding:16,boxShadow:"0 10px 30px rgba(0,0,0,.15)"},children:[p.jsx("h3",{style:{margin:"0 0 8px"},children:r==="signin"?"로그인":"회원가입"}),p.jsxs("form",{onSubmit:f,style:{display:"grid",gap:8},children:[p.jsx("input",{type:"email",value:a,onChange:m=>l(m.target.value),placeholder:"이메일",required:!0,style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px"}}),p.jsx("input",{type:"password",value:u,onChange:m=>c(m.target.value),placeholder:"비밀번호",required:!0,style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px"}}),p.jsx("button",{type:"submit",style:{borderRadius:8,padding:"8px 12px",border:"1px solid #e5e7eb",background:"#111827",color:"#fff"},children:r==="signin"?"로그인":"가입"})]}),p.jsx("div",{style:{marginTop:8,fontSize:12},children:r==="signin"?p.jsx("button",{onClick:()=>s("signup"),style:{background:"none",border:"none",color:"#2563eb",cursor:"pointer"},children:"계정이 없나요? 회원가입"}):p.jsx("button",{onClick:()=>s("signin"),style:{background:"none",border:"none",color:"#2563eb",cursor:"pointer"},children:"이미 계정이 있나요? 로그인"})}),p.jsx("div",{style:{marginTop:8},children:p.jsx("button",{onClick:e,style:{background:"none",border:"none",color:"#6b7280",cursor:"pointer"},children:"닫기"})})]})})}const f4=new Set([]),d4=new Set(["k36801377@gmail.com"]);function Bo(t){return t?f4.has(t.uid)||d4.has(t.email):!1}function WA({user:t,onSignIn:e,onSignUp:n,onSignOut:i,onlySaved:r,onToggleOnlySaved:s}){const[a,l]=D.useState(!1);return p.jsxs(p.Fragment,{children:[p.jsxs("nav",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 16px",borderBottom:"1px solid #e5e7eb"},children:[p.jsx("div",{style:{fontWeight:700},children:"상품관리"}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[p.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6,fontSize:12},children:[p.jsx("input",{type:"checkbox",checked:r,onChange:u=>s(u.target.checked)}),"저장만 보기"]}),Bo(t)&&p.jsx(Mi,{to:"/edit",style:{fontSize:12},children:"Admin"}),t?p.jsxs(p.Fragment,{children:[p.jsx("span",{style:{fontSize:12,color:"#374151"},children:t.email}),p.jsx("button",{onClick:i,style:{borderRadius:8,padding:"6px 10px",border:"1px solid #e5e7eb",background:"#fff"},children:"로그아웃"})]}):p.jsx("button",{onClick:()=>l(!0),style:{borderRadius:8,padding:"6px 10px",border:"1px solid #e5e7eb",background:"#111827",color:"#fff"},children:"로그인"})]})]}),p.jsx(h4,{open:a,onClose:()=>l(!1),onSignIn:e,onSignUp:n})]})}function JA({product:t,user:e,isSaved:n=!1,onToggleSave:i,onTagClick:r,restockPending:s}){const{id:a,name:l,price:u,imageUrl:c,tags:f=[],link:m,categoryL1:d,categoryL2:_}=t||{},M=typeof s=="boolean"?s:(T=>{if(!T)return!1;const E=Array.isArray(T)?T.join(" "):String(T);return/재입고\s*예정|재입고예정/i.test(E)})(f),N=()=>{if(!e){alert("로그인이 필요합니다.");return}i&&i(a)},w=T=>typeof T=="number"?T.toLocaleString("ko-KR")+"원":"-";return p.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:12,padding:12,display:"flex",flexDirection:"column",gap:8,background:"#fff"},children:[p.jsxs("a",{href:m||"#",target:"_blank",rel:"noopener noreferrer",style:{position:"relative",width:"100%",aspectRatio:"1 / 1",background:"#f9fafb",borderRadius:8,overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",textDecoration:"none"},children:[c?p.jsx("img",{src:c,alt:l,style:{width:"100%",height:"100%",objectFit:"cover",filter:M?"grayscale(80%)":"none"}}):p.jsx("span",{style:{color:"#9ca3af"},children:"No Image"}),M&&p.jsx("div",{title:"재입고 예정","aria-label":"재입고 예정",style:{position:"absolute",inset:0,background:"rgba(55,65,81,0.45)",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:700,fontSize:14,letterSpacing:.5},children:"재입고 예정"})]}),p.jsx("div",{style:{fontWeight:600,color:M?"#374151":"#111827"},children:l}),p.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[d&&p.jsxs("span",{style:{fontSize:12,background:"#eef2ff",border:"1px solid #e5e7eb",padding:"2px 8px",borderRadius:9999},children:["L1: ",d]}),_&&p.jsxs("span",{style:{fontSize:12,background:"#ecfeff",border:"1px solid #e5e7eb",padding:"2px 8px",borderRadius:9999},children:["L2: ",_]}),M&&p.jsx("span",{style:{fontSize:12,background:"#f3f4f6",border:"1px solid #e5e7eb",padding:"2px 8px",borderRadius:9999,color:"#374151"},children:"재입고 예정"})]}),p.jsx("div",{style:{color:"#111827"},children:w(u)}),f.length>0&&p.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:f.map(T=>p.jsxs("button",{onClick:()=>r&&r(T),style:{fontSize:12,background:"#f3f4f6",border:"1px solid #e5e7eb",padding:"2px 8px",borderRadius:9999,cursor:"pointer"},children:["#",T]},T))}),p.jsx("button",{onClick:N,style:{marginTop:6,borderRadius:8,padding:"8px 10px",border:"1px solid #e5e7eb",background:n?"#111827":"white",color:n?"white":"#111827",cursor:"pointer"},children:n?"저장 해제":"저장하기"})]})}const KE={"청소/욕실":["청소용품(세제/브러쉬)","세탁용품(세탁망/건조대)","욕실용품(발매트/수건)","휴지통/분리수거"],"수납/정리":["수납박스/바구니","리빙박스/정리함","틈새수납","옷걸이/선반","주방수납","냉장고 정리"],주방용품:["식기(접시/그릇)","컵/물병/텀블러","밀폐용기","조리도구(칼/가위)","주방잡화(행주/수세미)"],"문구/팬시":["필기구/노트","사무용품(파일/서류)","포장용품","디자인 문구","전자기기 액세서리"],"뷰티/위생":["스킨/바디케어","마스크팩","화장소품(브러쉬)","메이크업","위생용품(마스크/밴드)"],"패션/잡화":["의류/언더웨어","가방/파우치","양말/스타킹","패션소품(액세서리)","슈즈용품"],"인테리어/원예":["홈데코(쿠션/커튼)","액자/시계","원예용품(화분/씨앗)","조명","시즌 데코"],"공구/디지털":["공구/안전용품","차량/자전거 용품","디지털 액세서리(케이블/충전기)","전지/건전지"],"스포츠/레저/취미":["캠핑/여행용품","스포츠/헬스용품","DIY/취미용품","뜨개/공예","반려동물용품"],식품:["과자/초콜릿","음료/주스","라면/즉석식품","건강식품","견과류"],"유아/완구":["아동/유아용품","완구/장난감","교육/학습용품"],"시즌/시리즈":["봄/여름 기획","전통 시리즈","캐릭터 컬래버"],"베스트/신상품":["인기 순위 상품","신상품"]};function YE(t=""){return String(t).split(/[,|#/ ]+/).map(e=>e.trim().toLowerCase()).filter(Boolean)}const fs=t=>{if(!t)return!1;const e=Array.isArray(t)?t.join(" "):String(t);return/재입고\s*예정|재입고예정/i.test(e)},m4=t=>!!(t!=null&&t.restockPending||t!=null&&t.restockSoon||fs(t==null?void 0:t.tags)||fs(t==null?void 0:t.badges)||fs(t==null?void 0:t.labels)||fs(t==null?void 0:t.status)||fs(t==null?void 0:t.nameBadge)||fs(t==null?void 0:t.badgeText));function g4(){const[t,e]=D.useState([]),[n,i]=D.useState(""),[r,s]=D.useState(!0),[a,l]=D.useState(!1),[u,c]=D.useState(""),[f,m]=D.useState(""),[d,_]=D.useState(""),[x,M]=D.useState(new Set),[N,w]=D.useState("include"),{user:T,savedIds:E,signUp:O,signIn:U,signOutNow:Q,toggleSave:y}=Va();D.useEffect(()=>{(async()=>{s(!0);try{const R=Na(mi(Pe,"products"),Lh("updatedAt","desc")),G=(await Oa(R)).docs.map(j=>({id:j.id,...j.data()})).filter(j=>j&&j.name);e(G)}finally{s(!1)}})()},[]);const v=D.useMemo(()=>{const b=YE(d);if(!b.length)return new Map;let R=t;a&&T&&(R=R.filter(j=>E.has(j.id))),R=R.filter(j=>{const k=new Set((j.tags||[]).map(F=>String(F).toLowerCase()));return b.every(F=>k.has(F))});const L=n.trim().toLowerCase();L&&(R=R.filter(j=>[j.name,j.productCode,...j.tags||[]].filter(Boolean).join(" ").toLowerCase().includes(L)));const G=new Map;return R.forEach(j=>{const k=j.categoryL1||"(미지정)";G.set(k,(G.get(k)||0)+1)}),G},[t,a,T,E,d,n]),A=D.useMemo(()=>{let b=t;a&&T&&(b=b.filter(G=>E.has(G.id))),u&&(b=b.filter(G=>(G.categoryL1||"")===u)),f&&(b=b.filter(G=>(G.categoryL2||"")===f));const R=YE(d);R.length&&(b=b.filter(G=>{const j=new Set((G.tags||[]).map(k=>String(k).toLowerCase()));return R.every(k=>j.has(k))}));const L=n.trim().toLowerCase();return L&&(b=b.filter(G=>[G.name,G.productCode,G.categoryL1,G.categoryL2,...G.tags||[]].filter(Boolean).join(" ").toLowerCase().includes(L))),d&&x.size>0&&(b=b.filter(G=>{const j=G.categoryL1||"(미지정)",k=x.has(j);return N==="include"?k:!k})),b},[t,a,T,E,u,f,d,n,x,N]),C=()=>{c(""),m(""),_(""),M(new Set),w("include")},I=u?KE[u]||[]:[];return p.jsxs("div",{style:{maxWidth:1100,margin:"0 auto",padding:16},children:[p.jsx(WA,{user:T,onlySaved:a,onToggleOnlySaved:b=>l(b),onSignIn:U,onSignUp:O,onSignOut:Q}),p.jsx("div",{style:{marginBottom:10},children:p.jsx("input",{value:n,onChange:b=>i(b.target.value),placeholder:"검색: 상품명/코드/태그/카테고리",style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px"}})}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto auto 1fr auto",gap:8,alignItems:"center",border:"1px solid #e5e7eb",background:"#f9fafb",borderRadius:10,padding:10,marginBottom:12},children:[p.jsxs("select",{value:u,onChange:b=>{c(b.target.value),m("")},style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px",minWidth:220},children:[p.jsx("option",{value:"",children:"대분류(L1): 전체"}),Object.keys(KE).map(b=>p.jsx("option",{value:b,children:b},b))]}),p.jsxs("select",{value:f,onChange:b=>m(b.target.value),disabled:!u,style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px",minWidth:220,opacity:u?1:.5},children:[p.jsx("option",{value:"",children:u?"중분류(L2): 전체":"대분류 먼저 선택"}),I.map(b=>p.jsx("option",{value:b,children:b},b))]}),p.jsx("input",{value:d,onChange:b=>_(b.target.value),placeholder:"태그 필터 (쉼표/공백 구분: 전통, 봉투)",style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px",width:"100%"}}),p.jsx("button",{onClick:C,style:{borderRadius:8,padding:"8px 12px",border:"1px solid #e5e7eb",background:"white"},children:"필터 초기화"})]}),d&&v.size>0&&p.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:10,padding:10,marginBottom:10,background:"#fff"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[p.jsx("strong",{children:"카테고리 파셋 (태그 결과 기준)"}),p.jsxs("label",{style:{marginLeft:"auto",fontSize:12,display:"inline-flex",alignItems:"center",gap:6},children:["모드:",p.jsxs("select",{value:N,onChange:b=>w(b.target.value),style:{border:"1px solid #e5e7eb",borderRadius:6,padding:"2px 6px"},children:[p.jsx("option",{value:"include",children:"포함"}),p.jsx("option",{value:"exclude",children:"제외"})]})]}),p.jsx("button",{onClick:()=>M(new Set),style:{border:"1px solid #e5e7eb",background:"white",borderRadius:8,padding:"4px 8px"},title:"파셋 선택 해제",children:"선택 해제"})]}),p.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:Array.from(v.entries()).sort((b,R)=>R[1]-b[1]).map(([b,R])=>{const L=x.has(b);return p.jsxs("button",{onClick:()=>M(G=>{const j=new Set(G);return j.has(b)?j.delete(b):j.add(b),j}),style:{border:L?"1px solid #111827":"1px solid #e5e7eb",background:L?N==="include"?"#e0f2fe":"#fee2e2":"white",color:"#111827",borderRadius:9999,padding:"4px 10px",fontSize:12},title:`${b} (${R.toLocaleString()}개)`,children:[b," · ",R.toLocaleString()]},b)})}),x.size>0&&p.jsxs("div",{style:{marginTop:8,fontSize:12,color:"#6b7280"},children:["적용: ",N==="include"?"선택 카테고리만 표시":"선택 카테고리 제외"," · 선택 ",x.size,"개"]})]}),p.jsxs("div",{style:{fontSize:12,color:"#6b7280",marginBottom:8},children:["총 ",t.length.toLocaleString(),"개 / 표시 ",A.length.toLocaleString(),"개",a&&T?" · 저장만 보기":"",u?` · L1=${u}`:"",f?` · L2=${f}`:"",d?` · 태그=${d}`:"",n?` · 검색="${n}"`:"",d&&x.size>0?` · 파셋(${N}): ${Array.from(x).join(", ")}`:""]}),r?p.jsx("div",{children:"불러오는 중…"}):A.length===0?p.jsx("div",{children:"검색/필터 결과가 없습니다."}):p.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(240px,1fr))",gap:12},children:A.map(b=>p.jsx(JA,{product:b,user:T,isSaved:E.has(b.id),restockPending:m4(b),onToggleSave:async R=>{try{await y(R)}catch(L){alert(L.message)}}},b.id))})]})}function Su(t){if(!t)return 0;if(typeof(t==null?void 0:t.toMillis)=="function")return t.toMillis();const e=Number(t);return Number.isFinite(e)?e:0}function p4(t){const e=[];for(let n=0;n<t.length;n+=10)e.push(t.slice(n,n+10));return e}function y4(){const{user:t,savedIds:e,loadingUser:n,loadingSaved:i,signOut:r,signIn:s,signUp:a,toggleSave:l}=Va(),[u,c]=D.useState([]),[f,m]=D.useState(""),[d,_]=D.useState(!0),[x,M]=D.useState(""),N=D.useMemo(()=>Array.from(e||new Set),[e]),[w,T]=D.useState("");D.useEffect(()=>{const I=setTimeout(()=>T(f.trim().toLowerCase()),300);return()=>clearTimeout(I)},[f]);const E=D.useRef(0);D.useEffect(()=>{let I=!1;const b=++E.current;return(async()=>{if(M(""),!t){c([]),_(!1);return}_(!0);try{if(!N.length){c([]);return}const L=p4(N),G=await Promise.all(L.map(q=>Oa(Na(mi(Pe,"products"),dA(tA(),"in",q))))),j=[];G.forEach(q=>{q.forEach(X=>j.push({id:X.id,...X.data()}))});const k=new Set(j.map(q=>q.id)),F=N.filter(q=>!k.has(q)).length;j.sort((q,X)=>{const le=Su(q.updatedAt)||Su(q.createdAt)||0,ke=Su(X.updatedAt)||Su(X.createdAt)||0;return ke!==le?ke-le:String(X.id).localeCompare(String(q.id))}),!I&&b===E.current&&(c(j),F>0&&M(`알림: 저장된 ${N.length}개 중 ${F}개는 현재 조회할 수 없습니다(삭제/권한/비공개 가능).`))}catch(L){if(!I&&b===E.current){console.error(L);const G=String((L==null?void 0:L.message)||""),j=/per-query|disjunct/i.test(G)?" (힌트: Firestore 'in' 조건은 10개씩 끊어 처리해야 합니다.)":/permission|denied|insufficient/i.test(G)?" (힌트: 인증/규칙 권한을 확인하세요.)":"";M(`오류: ${G||"목록을 불러오는 중 문제가 발생했습니다."}${j}`),c([])}}finally{!I&&b===E.current&&_(!1)}})(),()=>{I=!0}},[t,N]);const O=D.useMemo(()=>u.map(I=>({raw:I,hay:[I.name,I.productCode,I.categoryL1,I.categoryL2,...I.tags||[]].filter(Boolean).join(" ").toLowerCase()})),[u]),U=D.useMemo(()=>w?O.filter(I=>I.hay.includes(w)).map(I=>I.raw):u,[u,O,w]),Q=async I=>{e==null||e.has(I);try{await l(I)}catch(b){alert((b==null?void 0:b.message)||"저장 상태 변경 중 오류가 발생했습니다.")}},y=N.length,v=60,[A,C]=D.useState(1);return D.useMemo(()=>N.slice(0,v*A),[N,A]),p.jsxs("div",{style:{maxWidth:1100,margin:"0 auto",padding:16},children:[p.jsx(WA,{user:t,onlySaved:!0,onToggleOnlySaved:()=>{},onSignIn:s,onSignUp:a,onSignOut:r}),t?p.jsxs(p.Fragment,{children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[p.jsx("input",{"aria-label":"저장한 상품 검색",value:f,onChange:I=>m(I.target.value),placeholder:"저장한 상품 내 검색",style:{flex:1,width:"100%",border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px"}}),f&&p.jsx("button",{onClick:()=>m(""),style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px",background:"#fafafa",cursor:"pointer"},"aria-label":"검색어 지우기",children:"지우기"})]}),x&&p.jsx("div",{style:{marginBottom:12,padding:"8px 10px",border:"1px solid #fecaca",background:"#fef2f2",color:"#991b1b",borderRadius:8},children:x}),n||i||d?p.jsx("div",{children:"불러오는 중…"}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{style:{marginBottom:8,color:"#6b7280"},children:["총 저장: ",p.jsx("strong",{children:y}),"개",w&&p.jsxs(p.Fragment,{children:[" · ","검색 결과: ",p.jsx("strong",{children:U.length}),"개"]})]}),U.length===0?p.jsx("div",{children:y===0?"저장한 상품이 없습니다.":"검색 결과가 없습니다. 다른 키워드를 시도해 보세요."}):p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(240px,1fr))",gap:12},children:[U.map(I=>p.jsx(JA,{product:I,user:t,isSaved:e==null?void 0:e.has(I.id),onToggleSave:Q},I.id)),v*A<y&&p.jsx("button",{onClick:()=>C(I=>I+1),children:"더보기"})]})]})]}):p.jsxs("div",{style:{marginTop:24},children:[p.jsx("h3",{children:"로그인이 필요합니다"}),p.jsx("p",{children:"상단 우측에서 로그인/회원가입을 먼저 진행하세요."})]})]})}const XE={"청소/욕실":["청소용품(세제/브러쉬)","세탁용품(세탁망/건조대)","욕실용품(발매트/수건)","휴지통/분리수거"],"수납/정리":["수납박스/바구니","리빙박스/정리함","틈새수납","옷걸이/선반","주방수납","냉장고 정리"],주방용품:["식기(접시/그릇)","컵/물병/텀블러","밀폐용기","조리도구(칼/가위)","주방잡화(행주/수세미)"],"문구/팬시":["필기구/노트","사무용품(파일/서류)","포장용품","디자인 문구","전자기기 액세서리"],"뷰티/위생":["스킨/바디케어","마스크팩","화장소품(브러쉬)","메이크업","위생용품(마스크/밴드)"],"패션/잡화":["의류/언더웨어","가방/파우치","양말/스타킹","패션소품(액세서리)","슈즈용품"],"인테리어/원예":["홈데코(쿠션/커튼)","액자/시계","원예용품(화분/씨앗)","조명","시즌 데코"],"공구/디지털":["공구/안전용품","차량/자전거 용품","디지털 액세서리(케이블/충전기)","전지/건전지"],"스포츠/레저/취미":["캠핑/여행용품","스포츠/헬스용품","DIY/취미용품","뜨개/공예","반려동물용품"],식품:["과자/초콜릿","음료/주스","라면/즉석식품","건강식품","견과류"],"유아/완구":["아동/유아용품","완구/장난감","교육/학습용품"],"시즌/시리즈":["봄/여름 기획","전통 시리즈","캐릭터 컬래버"],"베스트/신상품":["인기 순위 상품","신상품"]};function _4(){const[t,e]=D.useState([]),[n,i]=D.useState(""),[r,s]=D.useState(!0),[a,l]=D.useState(new Set),[u,c]=D.useState(""),[f,m]=D.useState(""),[d,_]=D.useState("");D.useEffect(()=>{(async()=>{s(!0);try{const O=Na(mi(Pe,"products"),Lh("updatedAt","desc")),Q=(await Oa(O)).docs.map(y=>({id:y.id,...y.data()})).filter(y=>y&&y.name);e(Q)}catch(O){console.error(O)}finally{s(!1)}})()},[]);const x=D.useMemo(()=>{const E=n.trim().toLowerCase();return E?t.filter(O=>[O.name,O.productCode,O.categoryL1||"",O.categoryL2||"",...O.tags||[]].filter(Boolean).join(" ").toLowerCase().includes(E)):t},[t,n]),M=E=>{l(O=>{const U=new Set(O);return U.has(E)?U.delete(E):U.add(E),U})},N=()=>l(new Set(x.map(E=>E.id))),w=()=>l(new Set),T=(E=!1)=>{const O=E?x.filter(v=>a.has(v.id)):x;if(O.length===0)return alert("내보낼 항목이 없습니다.");const U=O.map(v=>[v.id,v.name,v.productCode,v.price??"",(v.tags||[]).join(" | "),v.categoryL1,v.categoryL2].join(",")).join(`\r
`),Q=new Blob(["\uFEFF"+U],{type:"text/csv;charset=utf-8"}),y=document.createElement("a");y.href=URL.createObjectURL(Q),y.download=E?"선택상품.csv":"필터상품.csv",y.click()};return p.jsxs("div",{style:{maxWidth:1100,margin:"0 auto",padding:16},children:[p.jsx("h1",{style:{fontSize:22,fontWeight:700,marginBottom:12},children:"상품 관리"}),p.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8,marginBottom:16,border:"1px solid #e5e7eb",borderRadius:10,padding:12,background:"#f9fafb"},children:[p.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[p.jsx("input",{value:u,onChange:E=>c(E.target.value),placeholder:"전통, 봉투, #핑크",style:{flex:1,border:"1px solid #e5e7eb",borderRadius:8,padding:"6px 10px"}}),p.jsxs("button",{onClick:()=>alert(`선택 ${a.size}개 태그 추가 실행`),disabled:a.size===0,style:{borderRadius:8,padding:"6px 12px",background:"#111827",color:"white",border:"none"},children:["선택 ",a.size,"개 태그 추가"]}),p.jsxs("button",{onClick:()=>alert(`선택 ${a.size}개 태그 삭제 실행`),disabled:a.size===0,style:{borderRadius:8,padding:"6px 12px",background:"white",border:"1px solid #e5e7eb"},children:["선택 ",a.size,"개 태그 삭제"]})]}),p.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[p.jsxs("select",{value:f,onChange:E=>{m(E.target.value),_("")},style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"6px 10px"},children:[p.jsx("option",{value:"",children:"대분류 선택"}),Object.keys(XE).map(E=>p.jsx("option",{value:E,children:E},E))]}),p.jsxs("select",{value:d,onChange:E=>_(E.target.value),disabled:!f,style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"6px 10px"},children:[p.jsx("option",{value:"",children:f?"중분류 선택":"대분류 먼저"}),(f?XE[f]||[]:[]).map(E=>p.jsx("option",{value:E,children:E},E))]}),p.jsxs("button",{onClick:()=>alert(`선택 ${a.size}개 카테고리 지정 (${f} > ${d})`),disabled:a.size===0||!f||!d,style:{borderRadius:8,padding:"6px 12px",background:"#111827",color:"white",border:"none"},children:["선택 ",a.size,"개 카테고리 지정"]})]}),p.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[p.jsx("button",{onClick:N,style:{borderRadius:8,padding:"6px 12px",background:"white",border:"1px solid #e5e7eb"},children:"전체 선택"}),p.jsx("button",{onClick:w,style:{borderRadius:8,padding:"6px 12px",background:"white",border:"1px solid #e5e7eb"},children:"선택 해제"}),p.jsx("button",{onClick:()=>T(!1),style:{borderRadius:8,padding:"6px 12px",background:"#111827",color:"white",border:"none"},children:"CSV(필터결과)"}),p.jsx("button",{onClick:()=>T(!0),style:{borderRadius:8,padding:"6px 12px",background:"white",border:"1px solid #e5e7eb"},children:"CSV(선택만)"}),p.jsx("button",{onClick:()=>{var E;return(E=document.getElementById("csvUpsertBox"))==null?void 0:E.scrollIntoView({behavior:"smooth"})},style:{borderRadius:8,padding:"6px 12px",background:"#2563eb",color:"white",border:"none"},children:"CSV 업서트 열기"})]})]}),p.jsx("div",{style:{marginBottom:12},children:p.jsx("input",{value:n,onChange:E=>i(E.target.value),placeholder:"검색: 상품명/코드/태그/카테고리",style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px"}})}),r?p.jsx("div",{children:"불러오는 중…"}):x.length===0?p.jsx("div",{children:"검색 결과가 없습니다."}):p.jsx("div",{style:{display:"grid",gap:10},children:x.map(E=>{const O=a.has(E.id);return p.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:10,padding:10,display:"grid",gridTemplateColumns:"28px 80px 1fr",gap:12,alignItems:"center"},children:[p.jsx("input",{type:"checkbox",checked:O,onChange:()=>M(E.id)}),p.jsx("div",{style:{width:80,height:80,borderRadius:8,background:"#f3f4f6",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:E.imageUrl?p.jsx("img",{src:E.imageUrl,alt:E.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):p.jsx("span",{style:{fontSize:12,color:"#9ca3af"},children:"No Image"})}),p.jsxs("div",{children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[p.jsx("strong",{children:E.name}),p.jsxs("span",{style:{fontSize:12,color:"#6b7280"},children:["(",E.id,")"]}),p.jsx("span",{style:{marginLeft:"auto",fontSize:12,color:"#6b7280"},children:typeof E.price=="number"?E.price.toLocaleString()+"원":"-"})]}),p.jsxs("div",{style:{fontSize:12,color:"#6b7280"},children:[E.categoryL1," / ",E.categoryL2]}),p.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:4},children:(E.tags||[]).map(U=>p.jsxs("span",{style:{background:"#f3f4f6",border:"1px solid #e5e7eb",borderRadius:9999,padding:"2px 8px",fontSize:12},children:["#",U]},U))})]})]},E.id)})})]})}const WE={"청소/욕실":["청소용품(세제/브러쉬)","세탁용품(세탁망/건조대)","욕실용품(발매트/수건)","휴지통/분리수거"],"수납/정리":["수납박스/바구니","리빙박스/정리함","틈새수납","옷걸이/선반","주방수납","냉장고 정리"],주방용품:["식기(접시/그릇)","컵/물병/텀블러","밀폐용기","조리도구(칼/가위)","주방잡화(행주/수세미)"],"문구/팬시":["필기구/노트","사무용품(파일/서류)","포장용품","디자인 문구","전자기기 액세서리"],"뷰티/위생":["스킨/바디케어","마스크팩","화장소품(브러쉬)","메이크업","위생용품(마스크/밴드)"],"패션/잡화":["의류/언더웨어","가방/파우치","양말/스타킹","패션소품(액세서리)","슈즈용품"],"인테리어/원예":["홈데코(쿠션/커튼)","액자/시계","원예용품(화분/씨앗)","조명","시즌 데코"],"공구/디지털":["공구/안전용품","차량/자전거 용품","디지털 액세서리(케이블/충전기)","전지/건전지"],"스포츠/레저/취미":["캠핑/여행용품","스포츠/헬스용품","DIY/취미용품","뜨개/공예","반려동물용품"],식품:["과자/초콜릿","음료/주스","라면/즉석식품","건강식품","견과류"],"유아/완구":["아동/유아용품","완구/장난감","교육/학습용품"],"시즌/시리즈":["봄/여름 기획","전통 시리즈","캐릭터 컬래버"],"베스트/신상품":["인기 순위 상품","신상품"]};function Vm(t=""){return String(t).split(/[,|#/ ]+/).map(e=>e.trim()).filter(Boolean)}function JE(t){const e=t==null?"":String(t);return/[",\n\r]/.test(e)?`"${e.replace(/"/g,'""')}"`:e}function v4(t){const n=[["상품ID","상품명","상품코드","가격","평점","리뷰수","조회수","태그","링크","대분류(categoryL1)","중분류(categoryL2)"].map(JE).join(",")];return t.forEach(i=>{n.push([i.id,i.name,i.productCode||"",i.price??"",i.rating??"",i.reviewCount??"",i.views??"",(i.tags||[]).join(" | "),i.link||"",i.categoryL1||"",i.categoryL2||""].map(JE).join(","))}),n.join(`\r
`)}function E4(t,e,n="text/csv;charset=utf-8"){const i="\uFEFF",r=new Blob([i+t],{type:n}),s=URL.createObjectURL(r),a=document.createElement("a");a.href=s,a.download=e,document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(s)}function T4({open:t,onClose:e,onAfterImport:n}){const[i,r]=D.useState(""),[s,a]=D.useState(""),[l,u]=D.useState([]),[c,f]=D.useState([]),[m,d]=D.useState([]),[_,x]=D.useState(!1),[M,N]=D.useState(!0),[w,T]=D.useState(!0),[E,O]=D.useState({done:0,total:0,running:!1}),U=D.useMemo(()=>l.length?l.map(k=>I(k,c)).filter(Boolean):[],[l,c]);function Q(k){let F=k.replace(/^\uFEFF/,"");const q=F.includes("	")?"	":",",X=[];let le=[],ke="",ut=!1;for(let ue=0;ue<F.length;ue++){const Le=F[ue];if(Le==='"'){ut&&F[ue+1]==='"'?(ke+='"',ue++):ut=!ut;continue}if(!ut&&(Le===q||Le===`
`||Le==="\r")){le.push(ke),ke="",Le===`
`&&(X.push(le),le=[]);continue}ke+=Le}return le.push(ke),le.length&&X.push(le),X.filter(ue=>ue.some(Le=>String(Le).trim()!==""))}function y(k=""){const F=String(k).trim(),q=F.toLowerCase().replace(/\s+/g,"").replace(/\([^)]*\)/g,"");return["id","상품id","문서id"].includes(q)?"id":["상품명","name","title"].includes(q)?"name":["상품코드","productcode","code","pdno"].includes(q)?"productCode":["가격","price"].includes(q)?"price":["평점","rating"].includes(q)?"rating":["리뷰수","review","reviewcount"].includes(q)?"reviewCount":["조회수","views","view"].includes(q)?"views":["태그","tags"].includes(q)?"tags":["링크","url","link"].includes(q)?"link":["이미지","이미지url","image","imageurl","thumbnail"].includes(q)?"imageUrl":["재입고","restock","restockable"].includes(q)?"restockable":["상태","status"].includes(q)?"status":["재고","stock","재고수량"].includes(q)?"stock":/^(대분류|categoryl1|category_l1|lnb|lnb1)$/.test(q)?"categoryL1":/^(중분류|categoryl2|category_l2|sub|lnb2)$/.test(q)?"categoryL2":F}function v(k=""){const F=String(k).replace(/[\s,()보기]/g,"");if(!F)return 0;const q=F.match(/([\d.]+)\s*만/),X=F.match(/([\d.]+)\s*천/);if(q)return Math.round(parseFloat(q[1])*1e4);if(X)return Math.round(parseFloat(X[1])*1e3);const le=F.match(/[\d.]+/);return le?Number(le[0]):0}function A(k=""){const F=String(k).replace(/[^\d.]/g,"");return F?Number(F):0}function C(k=""){return String(k).replace(/\s+/g," ").replace(/^"|"$/g,"").trim()}function I(k,F){const q={};F.forEach((ut,ue)=>{q[ut]=k[ue]??""});const X=C(q.id||q.productCode||"");if(!X)return null;const le={id:X},ke={name:C(q.name||""),imageUrl:C(q.imageUrl||""),link:C(q.link||""),productCode:C(q.productCode||""),price:q.price!==void 0?A(q.price):void 0,rating:q.rating!==void 0?parseFloat(String(q.rating).replace(/[^\d.]/g,""))||0:void 0,reviewCount:q.reviewCount!==void 0?v(q.reviewCount):void 0,views:q.views!==void 0?v(q.views):void 0,restockable:q.restockable!==void 0?/^(true|1|예|y)$/i.test(String(q.restockable).trim()):void 0,status:q.status?String(q.status).trim():void 0,stock:q.stock!==void 0?Number(String(q.stock).replace(/[^\d-]/g,""))||0:void 0,categoryL1:q.categoryL1?C(q.categoryL1):void 0,categoryL2:q.categoryL2?C(q.categoryL2):void 0};return Object.entries(ke).forEach(([ut,ue])=>{ue!==void 0&&(typeof ue=="string"&&!ue||(le[ut]=ue))}),q.tags!=null&&String(q.tags).trim()!==""&&(le.tags=Array.from(new Set(Vm(String(q.tags))))),le}function b(k){return k==null?"":Array.isArray(k)?k.join(" | "):String(k)}const R=async k=>{var X;const F=(X=k.target.files)==null?void 0:X[0];if(!F)return;r(F.name);const q=await F.text();L(q)},L=k=>{const F=Q(k);if(!F.length){u([]),f([]),d([]),a("");return}const[q,...X]=F,le=q.map(y);a(k),u(X),f(le),d(q)},G=()=>{const F="\uFEFF"+["상품ID","상품명","상품코드","가격","평점","리뷰수","조회수","태그","링크","이미지URL","재입고","상태","재고","대분류(categoryL1)","중분류(categoryL2)"].join(",")+`\r
`,q=new Blob([F],{type:"text/csv;charset=utf-8"}),X=URL.createObjectURL(q),le=document.createElement("a");le.href=X,le.download="상품_업데이트_템플릿.csv",document.body.appendChild(le),le.click(),le.remove(),URL.revokeObjectURL(X)},j=async()=>{if(!U.length){alert("유효한 행이 없습니다.");return}const k=U.length;O({done:0,total:k,running:!0});try{for(let q=0;q<U.length;q+=400){const X=U.slice(q,q+400),le=jo(Pe);X.forEach(ke=>{const{id:ut,...ue}=ke,Le={updatedAt:Br()};M&&ue.tags&&(Le.tags=ue.tags),["name","imageUrl","link","productCode","price","rating","reviewCount","views","restockable","status","stock"].forEach(Er=>{ue[Er]!==void 0&&(Le[Er]=ue[Er])}),w&&(ue.categoryL1!==void 0&&(Le.categoryL1=ue.categoryL1),ue.categoryL2!==void 0&&(Le.categoryL2=ue.categoryL2));const ka=mn(Pe,"products",ut);le.set(ka,Le,{merge:!_})}),await le.commit(),O(ke=>({...ke,done:Math.min(ke.done+X.length,k)}))}alert(`완료: ${k}개 처리
- 모드: ${_?"문서 덮어쓰기":"필드 병합 업데이트"}
- tags: ${M?"CSV값 반영/교체":"CSV 무시(기존 유지)"}
- category: ${w?"CSV값 반영/교체":"CSV 무시(기존 유지)"}`),n==null||n(),e==null||e()}catch(F){console.error(F),alert(`에러: ${F.message}`)}finally{O({done:0,total:0,running:!1})}};return t?p.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.45)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},onClick:k=>{k.target===k.currentTarget&&(e==null||e())},children:p.jsxs("div",{style:{width:"min(1080px, 96%)",maxHeight:"90vh",overflow:"auto",background:"white",borderRadius:12,padding:16},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[p.jsx("h2",{style:{margin:0},children:"CSV 업서트(등록/업데이트)"}),p.jsx("div",{style:{marginLeft:"auto",display:"flex",gap:8},children:p.jsx("button",{onClick:e,style:{border:"1px solid #e5e7eb",background:"white",borderRadius:8,padding:"6px 10px",cursor:"pointer"},children:"닫기"})})]}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:10,marginBottom:12},children:[p.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[p.jsx("input",{type:"file",accept:".csv,text/csv",onChange:R,"aria-label":"CSV 파일 선택"}),p.jsx("button",{onClick:G,style:{borderRadius:8,padding:"8px 12px",border:"1px solid #e5e7eb",background:"white",cursor:"pointer"},children:"템플릿 다운로드"}),p.jsx("span",{style:{fontSize:12,color:"#6b7280"},children:i?`선택된 파일: ${i}`:"CSV(UTF-8, BOM 권장). 탭 구분도 OK"})]}),p.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",alignItems:"center"},children:[p.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[p.jsx("input",{type:"checkbox",checked:_,onChange:k=>x(k.target.checked)}),"문서 덮어쓰기(merge 아님)"]}),p.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[p.jsx("input",{type:"checkbox",checked:M,onChange:k=>N(k.target.checked)}),"CSV의 태그 반영(교체)"]}),p.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[p.jsx("input",{type:"checkbox",checked:w,onChange:k=>T(k.target.checked)}),"CSV의 카테고리 반영(교체)"]}),p.jsx("button",{onClick:j,disabled:!U.length||E.running,style:{borderRadius:8,padding:"8px 12px",border:"1px solid #e5e7eb",background:"#111827",color:"white",cursor:"pointer",minWidth:140},children:E.running?`처리중… (${E.done}/${E.total})`:`업서트 실행 (${U.length}개)`})]})]}),p.jsx("div",{style:{marginBottom:12},children:p.jsx("textarea",{value:s,onChange:k=>L(k.target.value),placeholder:`여기에 CSV/TSV를 붙여넣어도 됩니다.
예시:
상품ID,상품명,가격,태그,대분류(categoryL1),중분류(categoryL2)
1038756,전통문양 봉투 2매입,1000,"전통 | 봉투 | 핑크",전통/시리즈,전통 시리즈`,style:{width:"100%",height:140,borderRadius:8,border:"1px solid #e5e7eb",padding:8}})}),p.jsxs("h3",{style:{marginTop:10,marginBottom:8},children:["미리보기 (",U.length,"행)"]}),U.length?p.jsxs("div",{style:{overflowX:"auto",border:"1px solid #e5e7eb",borderRadius:8},children:[p.jsxs("table",{style:{borderCollapse:"collapse",width:"100%"},children:[p.jsx("thead",{children:p.jsx("tr",{style:{background:"#f9fafb"},children:["id","name","productCode","price","rating","reviewCount","views","tags","link","imageUrl","restockable","status","stock","categoryL1","categoryL2"].map(k=>p.jsx("th",{style:{textAlign:"left",padding:8,borderBottom:"1px solid #e5e7eb",whiteSpace:"nowrap"},children:k},k))})}),p.jsx("tbody",{children:U.slice(0,200).map((k,F)=>p.jsxs("tr",{style:{borderTop:"1px solid #f3f4f6"},children:[p.jsx("td",{style:{padding:8},children:b(k.id)}),p.jsx("td",{style:{padding:8},children:b(k.name)}),p.jsx("td",{style:{padding:8},children:b(k.productCode)}),p.jsx("td",{style:{padding:8},children:b(k.price)}),p.jsx("td",{style:{padding:8},children:b(k.rating)}),p.jsx("td",{style:{padding:8},children:b(k.reviewCount)}),p.jsx("td",{style:{padding:8},children:b(k.views)}),p.jsx("td",{style:{padding:8},children:b(k.tags)}),p.jsx("td",{style:{padding:8,maxWidth:240,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:b(k.link)}),p.jsx("td",{style:{padding:8,maxWidth:240,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:b(k.imageUrl)}),p.jsx("td",{style:{padding:8},children:b(k.restockable)}),p.jsx("td",{style:{padding:8},children:b(k.status)}),p.jsx("td",{style:{padding:8},children:b(k.stock)}),p.jsx("td",{style:{padding:8},children:b(k.categoryL1)}),p.jsx("td",{style:{padding:8},children:b(k.categoryL2)})]},F))})]}),U.length>200&&p.jsxs("div",{style:{padding:8,fontSize:12,color:"#6b7280"},children:["미리보기는 상위 200행까지만 표시합니다. 전체 ",U.length,"행 처리됩니다."]})]}):p.jsx("div",{style:{color:"#6b7280"},children:"파싱된 행이 없습니다."})]})}):null}function b4(){const[t,e]=D.useState([]),[n,i]=D.useState(""),[r,s]=D.useState(!0),[a,l]=D.useState(new Set),[u,c]=D.useState(""),[f,m]=D.useState(!1),[d,_]=D.useState(""),[x,M]=D.useState(""),[N,w]=D.useState(!1),T=async()=>{s(!0);try{const b=Na(mi(Pe,"products"),Lh("updatedAt","desc")),L=(await Oa(b)).docs.map(G=>({id:G.id,...G.data()})).filter(G=>G&&G.name);e(L)}catch(b){console.error("load error",b)}finally{s(!1)}};D.useEffect(()=>{T()},[]);const E=D.useMemo(()=>{const b=n.trim().toLowerCase();return b?t.filter(R=>[R.name,R.productCode,...R.tags||[],R.categoryL1||"",R.categoryL2||""].filter(Boolean).join(" ").toLowerCase().includes(b)):t},[t,n]),O=b=>{l(R=>{const L=new Set(R);return L.has(b)?L.delete(b):L.add(b),L})},U=()=>{l(b=>{const R=new Set(b);return E.forEach(L=>R.add(L.id)),R})},Q=()=>l(new Set),y=async()=>{const b=Vm(u);if(!b.length)return alert("추가할 태그를 입력하세요.");if(a.size===0)return alert("선택된 상품이 없습니다.");m(!0);try{const R=jo(Pe);a.forEach(L=>{const G=mn(Pe,"products",L);R.update(G,{tags:QM(...b),updatedAt:Br()})}),await R.commit(),e(L=>L.map(G=>a.has(G.id)?{...G,tags:Array.from(new Set([...G.tags||[],...b]))}:G)),c("")}catch(R){console.error("bulk add error",R),alert(`벌크 추가 실패: ${R.message}`)}finally{m(!1)}},v=async()=>{const b=Vm(u);if(!b.length)return alert("삭제할 태그를 입력하세요.");if(a.size===0)return alert("선택된 상품이 없습니다.");if(window.confirm(`선택된 ${a.size}개에서 [${b.join(", ")}] 태그를 제거할까요?`)){m(!0);try{const R=jo(Pe);a.forEach(L=>{const G=mn(Pe,"products",L);R.update(G,{tags:$M(...b),updatedAt:Br()})}),await R.commit(),e(L=>L.map(G=>a.has(G.id)?{...G,tags:(G.tags||[]).filter(j=>!b.includes(j))}:G)),c("")}catch(R){console.error("bulk remove error",R),alert(`벌크 삭제 실패: ${R.message}`)}finally{m(!1)}}},A=async()=>{if(!d)return alert("대분류(L1)를 선택하세요.");if(!x)return alert("중분류(L2)를 선택하세요.");if(a.size===0)return alert("선택된 상품이 없습니다.");if(window.confirm(`선택된 ${a.size}개 상품의 카테고리를
${d} > ${x} 로 지정할까요?`)){m(!0);try{const b=jo(Pe);a.forEach(R=>{const L=mn(Pe,"products",R);b.update(L,{categoryL1:d,categoryL2:x,updatedAt:Br()})}),await b.commit(),e(R=>R.map(L=>a.has(L.id)?{...L,categoryL1:d,categoryL2:x}:L))}catch(b){console.error("bulk category error",b),alert(`카테고리 지정 실패: ${b.message}`)}finally{m(!1)}}},C=(b=!1)=>{const R=b?E.filter(k=>a.has(k.id)):E;if(R.length===0)return alert("내보낼 항목이 없습니다.");const L=v4(R),G=new Date().toISOString().slice(0,10);E4(L,`상품리스트${b?"_선택만":"_필터결과"}_${G}.csv`,"text/csv;charset=utf-8")},I=d?WE[d]||[]:[];return p.jsxs("div",{style:{maxWidth:980,margin:"0 auto",padding:16},children:[p.jsx("h1",{style:{margin:0,marginBottom:12,fontSize:22,fontWeight:700},children:"상품 태그/카테고리 편집"}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:8,marginBottom:12},children:[p.jsx("input",{value:n,onChange:b=>i(b.target.value),placeholder:"검색: 상품명 / 상품코드 / 태그 / 카테고리",style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px"}}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.2fr auto auto auto auto auto auto auto",gap:8,alignItems:"center"},children:[p.jsx("input",{value:u,onChange:b=>c(b.target.value),placeholder:"태그 입력: 전통, 핑크 #봉투",style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px"}}),p.jsx("button",{onClick:y,disabled:f||a.size===0,style:{borderRadius:8,padding:"8px 12px",border:"1px solid #e5e7eb",background:"#111827",color:"white",cursor:"pointer",minWidth:120},children:f?"처리중…":`선택 ${a.size}개 태그추가`}),p.jsxs("button",{onClick:v,disabled:f||a.size===0,style:{borderRadius:8,padding:"8px 12px",border:"1px solid #e5e7eb",background:"white",cursor:"pointer",minWidth:120},children:["선택 ",a.size,"개 태그삭제"]})," ",p.jsx("br",{}),p.jsxs("select",{value:d,onChange:b=>{_(b.target.value),M("")},style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px"},"aria-label":"대분류 선택",children:[p.jsx("option",{value:"",children:"대분류(L1)"}),Object.keys(WE).map(b=>p.jsx("option",{value:b,children:b},b))]}),p.jsxs("select",{value:x,onChange:b=>M(b.target.value),style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px"},"aria-label":"중분류 선택",disabled:!d,children:[p.jsx("option",{value:"",children:d?"중분류(L2)":"대분류 먼저 선택"}),I.map(b=>p.jsx("option",{value:b,children:b},b))]}),p.jsxs("button",{onClick:A,disabled:f||a.size===0||!d||!x,style:{borderRadius:8,padding:"8px 12px",border:"1px solid #e5e7eb",background:"#111827",color:"white",cursor:"pointer",minWidth:150},title:"선택 항목 카테고리 지정",children:["선택 ",a.size,"개 카테고리 지정"]}),p.jsx("button",{onClick:U,style:{borderRadius:8,padding:"8px 12px",border:"1px solid #e5e7eb",background:"white",cursor:"pointer"},title:"현재 검색 결과 모두 선택",children:"전체선택"}),p.jsx("button",{onClick:Q,style:{borderRadius:8,padding:"8px 12px",border:"1px solid #e5e7eb",background:"white",cursor:"pointer"},title:"선택 해제",children:"선택해제"}),p.jsx("button",{onClick:()=>C(!1),style:{borderRadius:8,padding:"8px 12px",border:"1px solid #e5e7eb",background:"#111827",color:"white",cursor:"pointer",minWidth:120},title:"현재 검색/필터된 목록 CSV 저장",children:"CSV(필터결과)"}),p.jsx("button",{onClick:()=>C(!0),style:{borderRadius:8,padding:"8px 12px",border:"1px solid #e5e7eb",background:"white",cursor:"pointer",minWidth:120},title:"체크된 항목만 CSV 저장",children:"CSV(선택만)"})]}),p.jsxs("div",{style:{display:"flex",gap:8},children:[p.jsx("button",{onClick:()=>w(!0),style:{borderRadius:8,padding:"8px 12px",border:"1px solid #e5e7eb",background:"#111827",color:"white",cursor:"pointer"},children:"CSV 업서트 열기"}),p.jsx("span",{style:{fontSize:12,color:"#6b7280"},children:"모달에서 categoryL1 / categoryL2 컬럼을 인식합니다."})]})]}),r?p.jsx("div",{children:"불러오는 중…"}):E.length===0?p.jsx("div",{children:"검색 결과가 없습니다."}):p.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:10},children:E.map(b=>{const R=a.has(b.id),L=Array.from(new Set(b.tags||[]));return p.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:10,padding:10,display:"grid",gridTemplateColumns:"28px 80px 1fr",gap:12,alignItems:"center"},children:[p.jsx("input",{type:"checkbox",checked:R,onChange:()=>O(b.id),style:{width:18,height:18},"aria-label":`상품 선택: ${b.name}`}),p.jsx("div",{style:{width:80,height:80,borderRadius:8,background:"#f3f4f6",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:b.imageUrl?p.jsx("img",{src:b.imageUrl,alt:b.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):p.jsx("span",{style:{color:"#9ca3af",fontSize:12},children:"No Image"})}),p.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[p.jsx("strong",{children:b.name}),p.jsxs("span",{style:{fontSize:12,color:"#6b7280"},children:["(",b.productCode||b.id,")"]}),b.link&&p.jsx("a",{href:b.link,target:"_blank",rel:"noopener noreferrer",style:{fontSize:12},children:"원본 링크"}),R&&p.jsx("span",{style:{fontSize:11,color:"#111827",marginLeft:"auto"},children:"선택됨"})]}),p.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:b.categoryL1||b.categoryL2?p.jsxs(p.Fragment,{children:[p.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:6,fontSize:12,background:"#eef2ff",border:"1px solid #e5e7eb",padding:"2px 8px",borderRadius:9999},title:"대분류",children:["L1: ",b.categoryL1||"-"]}),p.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:6,fontSize:12,background:"#ecfeff",border:"1px solid #e5e7eb",padding:"2px 8px",borderRadius:9999},title:"중분류",children:["L2: ",b.categoryL2||"-"]})]}):p.jsx("span",{style:{color:"#9ca3af",fontSize:12},children:"카테고리 미지정"})}),p.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:L.length===0?p.jsx("span",{style:{color:"#9ca3af",fontSize:12},children:"태그 없음"}):L.map(G=>p.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:6,fontSize:12,background:"#f3f4f6",border:"1px solid #e5e7eb",padding:"2px 8px",borderRadius:9999},children:["#",G]},G))})]})]},b.id)})}),p.jsx(T4,{open:N,onClose:()=>w(!1),onAfterImport:()=>T()})]})}function ZE(t=""){const e=String(t).replace(/[\s,()보기]/g,"");if(!e)return 0;const n=e.match(/([\d.]+)\s*만/),i=e.match(/([\d.]+)\s*천/);if(n)return Math.round(parseFloat(n[1])*1e4);if(i)return Math.round(parseFloat(i[1])*1e3);const r=e.match(/[\d.]+/);return r?Number(r[0]):0}function S4(t=""){const e=String(t).replace(/[^\d.]/g,"");return e?Number(e):0}function Cr(t=""){return String(t).replace(/\s+/g," ").replace(/^"|"$/g,"").trim()}function A4(t=""){return String(t).split(/[,|#/ ]+/).map(e=>e.trim()).filter(Boolean)}function w4(t){let e=t.replace(/^\uFEFF/,"");const n=e.includes("	")?"	":",",i=[];let r=[],s="",a=!1;for(let l=0;l<e.length;l++){const u=e[l];if(u==='"'){a&&e[l+1]==='"'?(s+='"',l++):a=!a;continue}if(!a&&(u===n||u===`
`||u==="\r")){r.push(s),s="",u===`
`&&(i.push(r),r=[]);continue}s+=u}return r.push(s),r.length&&i.push(r),i.filter(l=>l.some(u=>String(u).trim()!==""))}function R4(t=""){const e=String(t).trim(),n=e.toLowerCase().replace(/\s+/g,""),i=n.replace(/\([^)]*\)/g,"");if(["id","상품id","문서id"].includes(n))return"id";if(["상품명","name","title"].includes(n))return"name";if(["상품코드","productcode","code","pdno"].includes(n))return"productCode";if(["가격","price"].includes(n))return"price";if(["평점","rating"].includes(n))return"rating";if(["리뷰수","review","reviewcount"].includes(n))return"reviewCount";if(["조회수","views","view"].includes(n))return"views";if(["태그","tags"].includes(n))return"tags";if(["링크","url","link"].includes(n))return"link";if(["이미지","이미지url","image","imageurl","thumbnail"].includes(i))return"imageUrl";if(["재입고","restock","restockable"].includes(n))return"restockable";if(["상태","status"].includes(n))return"status";if(["재고","stock"].includes(n))return"stock";if(["업데이트시각","updatedat"].includes(n))return"updatedAt";const r=e.replace(/\s+/g,"").replace(/\([^)]*\)/g,"");return/^(대분류|categoryl1|category_l1|lnb|lnb1)$/i.test(r)?"categoryL1":/^(중분류|categoryl2|category_l2|sub|lnb2)$/i.test(r)?"categoryL2":e}function C4(t,e){const n={};e.forEach((O,U)=>{n[O]=t[U]??""});const i=Cr(n.id||n.productCode||""),r=Cr(n.name||""),s=Cr(n.imageUrl||""),a=Cr(n.link||""),l=Cr(n.productCode||""),u=n.price!==void 0?S4(n.price):void 0,c=n.rating!==void 0?parseFloat(String(n.rating).replace(/[^\d.]/g,""))||0:void 0,f=n.reviewCount!==void 0?ZE(n.reviewCount):void 0,m=n.views!==void 0?ZE(n.views):void 0,d=n.restockable!==void 0?/^(true|1|예|y)$/i.test(String(n.restockable).trim()):void 0,_=n.status?String(n.status).trim():void 0,x=n.stock!==void 0?Number(String(n.stock).replace(/[^\d-]/g,""))||0:void 0,M=n.tags!=null?String(n.tags):"",N=M?Array.from(new Set(A4(M))):void 0,w=n.categoryL1!=null&&String(n.categoryL1).trim()!==""?Cr(n.categoryL1):void 0,T=n.categoryL2!=null&&String(n.categoryL2).trim()!==""?Cr(n.categoryL2):void 0;if(!i)return null;const E={id:i};return r&&(E.name=r),s&&(E.imageUrl=s),a&&(E.link=a),l&&(E.productCode=l),u!==void 0&&!Number.isNaN(u)&&(E.price=u),c!==void 0&&(E.rating=c),f!==void 0&&(E.reviewCount=f),m!==void 0&&(E.views=m),d!==void 0&&(E.restockable=d),_&&(E.status=_),x!==void 0&&(E.stock=x),N!==void 0&&(E.tags=N),w!==void 0&&(E.categoryL1=w),T!==void 0&&(E.categoryL2=T),E}function wt(t){return t==null?"":Array.isArray(t)?t.join(" | "):String(t)}function I4(){const[t,e]=D.useState(""),[n,i]=D.useState(""),[r,s]=D.useState([]),[a,l]=D.useState([]),[u,c]=D.useState([]),[f,m]=D.useState(!1),[d,_]=D.useState(!1),[x,M]=D.useState(!0),[N,w]=D.useState({done:0,total:0,running:!1}),T=D.useMemo(()=>r.length?r.map(y=>C4(y,a)).filter(Boolean):[],[r,a]),E=async y=>{var C;const v=(C=y.target.files)==null?void 0:C[0];if(!v)return;e(v.name);const A=await v.text();O(A)},O=y=>{const v=w4(y);if(!v.length){s([]),l([]),c([]),i("");return}const[A,...C]=v,I=A.map(R4);i(y),s(C),l(I),c(A)},U=()=>{const v="\uFEFF"+["상품ID","상품명","상품코드","가격","평점","리뷰수","조회수","태그","링크","이미지URL","재입고","상태","재고","대분류(categoryL1)","중분류(categoryL2)"].join(",")+`\r
`,A=new Blob([v],{type:"text/csv;charset=utf-8"}),C=URL.createObjectURL(A),I=document.createElement("a");I.href=C,I.download="상품_업데이트_템플릿.csv",document.body.appendChild(I),I.click(),I.remove(),URL.revokeObjectURL(C)},Q=async()=>{if(!T.length){alert("유효한 행이 없습니다.");return}const y=T.length;w({done:0,total:y,running:!0});try{for(let A=0;A<T.length;A+=400){const C=T.slice(A,A+400),I=jo(Pe);C.forEach(b=>{const{id:R,...L}=b,G={updatedAt:Br()};["name","imageUrl","link","productCode","price","rating","reviewCount","views","restockable","status","stock"].forEach(k=>{L[k]!==void 0&&(G[k]=L[k])}),d&&L.tags&&(G.tags=L.tags),x&&(L.categoryL1!==void 0&&(G.categoryL1=L.categoryL1),L.categoryL2!==void 0&&(G.categoryL2=L.categoryL2));const j=mn(Pe,"products",R);I.set(j,G,{merge:!f})}),await I.commit(),w(b=>({...b,done:Math.min(b.done+C.length,y)}))}alert(`완료: ${y}개 처리
- 모드: ${f?"문서 덮어쓰기":"필드 병합 업데이트"}
- tags: ${d?"CSV값 반영/교체":"CSV 무시(기존 유지)"}
- category: ${x?"CSV값 반영/교체":"CSV 무시(기존 유지)"}`)}catch(v){console.error(v),alert(`에러: ${v.message}`)}finally{w({done:0,total:0,running:!1})}};return p.jsxs("div",{style:{maxWidth:980,margin:"0 auto",padding:16},children:[p.jsx("h1",{style:{margin:0,marginBottom:12,fontSize:22,fontWeight:700},children:"CSV 업서트(등록/업데이트)"}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:10,marginBottom:12},children:[p.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[p.jsx("input",{type:"file",accept:".csv,text/csv",onChange:E,"aria-label":"CSV 파일 선택"}),p.jsx("button",{onClick:U,style:{borderRadius:8,padding:"8px 12px",border:"1px solid #e5e7eb",background:"white",cursor:"pointer"},children:"템플릿 다운로드"}),p.jsx("span",{style:{fontSize:12,color:"#6b7280"},children:t?`선택된 파일: ${t}`:"CSV(UTF-8, BOM 권장). 탭 구분도 OK"})]}),p.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",alignItems:"center"},children:[p.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[p.jsx("input",{type:"checkbox",checked:f,onChange:y=>m(y.target.checked)}),"문서 덮어쓰기(merge 아님)"]}),p.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[p.jsx("input",{type:"checkbox",checked:d,onChange:y=>_(y.target.checked)}),"CSV의 태그 반영(교체)"]}),p.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[p.jsx("input",{type:"checkbox",checked:x,onChange:y=>M(y.target.checked)}),"CSV의 카테고리 반영(교체)"]}),p.jsx("button",{onClick:Q,disabled:!T.length||N.running,style:{borderRadius:8,padding:"8px 12px",border:"1px solid #e5e7eb",background:"#111827",color:"white",cursor:"pointer",minWidth:140},children:N.running?`처리중… (${N.done}/${N.total})`:`업서트 실행 (${T.length}개)`})]})]}),p.jsx("div",{style:{marginBottom:12},children:p.jsx("textarea",{value:n,onChange:y=>O(y.target.value),placeholder:`여기에 CSV/TSV를 붙여넣어도 됩니다.
예시(쉼표):
상품ID,상품명,상품코드,가격,태그,링크,이미지URL,대분류(categoryL1),중분류(categoryL2)
1038756,전통문양 봉투 2매입,1038756,1000,"전통 | 봉투 | 핑크",https://...,https://...,문구/팬시,포장용품

예시(탭):
상품ID	상품명	가격	태그	대분류(categoryL1)	중분류(categoryL2)
1038756	전통문양 봉투 2매입	1,000	전통 | 봉투	문구/팬시	포장용품`,style:{width:"100%",height:140,borderRadius:8,border:"1px solid #e5e7eb",padding:8}})}),p.jsxs("h3",{style:{marginTop:10,marginBottom:8},children:["미리보기 (",T.length,"행)"]}),T.length?p.jsxs("div",{style:{overflowX:"auto",border:"1px solid #e5e7eb",borderRadius:8},children:[p.jsxs("table",{style:{borderCollapse:"collapse",width:"100%"},children:[p.jsx("thead",{children:p.jsx("tr",{style:{background:"#f9fafb"},children:["id","name","productCode","price","rating","reviewCount","views","tags","link","imageUrl","restockable","status","stock","categoryL1","categoryL2"].map(y=>p.jsx("th",{style:{textAlign:"left",padding:8,borderBottom:"1px solid #e5e7eb",whiteSpace:"nowrap"},children:y},y))})}),p.jsx("tbody",{children:T.slice(0,200).map((y,v)=>p.jsxs("tr",{style:{borderTop:"1px solid #f3f4f6"},children:[p.jsx("td",{style:{padding:8},children:wt(y.id)}),p.jsx("td",{style:{padding:8},children:wt(y.name)}),p.jsx("td",{style:{padding:8},children:wt(y.productCode)}),p.jsx("td",{style:{padding:8},children:wt(y.price)}),p.jsx("td",{style:{padding:8},children:wt(y.rating)}),p.jsx("td",{style:{padding:8},children:wt(y.reviewCount)}),p.jsx("td",{style:{padding:8},children:wt(y.views)}),p.jsx("td",{style:{padding:8},children:wt(y.tags)}),p.jsx("td",{style:{padding:8,maxWidth:240,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:wt(y.link)}),p.jsx("td",{style:{padding:8,maxWidth:240,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:wt(y.imageUrl)}),p.jsx("td",{style:{padding:8},children:wt(y.restockable)}),p.jsx("td",{style:{padding:8},children:wt(y.status)}),p.jsx("td",{style:{padding:8},children:wt(y.stock)}),p.jsx("td",{style:{padding:8},children:wt(y.categoryL1)}),p.jsx("td",{style:{padding:8},children:wt(y.categoryL2)})]},v))})]}),T.length>200&&p.jsxs("div",{style:{padding:8,fontSize:12,color:"#6b7280"},children:["미리보기는 상위 200행까지만 표시합니다. 전체 ",T.length,"행 처리됩니다."]})]}):p.jsx("div",{style:{color:"#6b7280"},children:"파싱된 행이 없습니다."})]})}function ad({user:t,allow:e=()=>!1,children:n}){const i=yi();return t?e(t)?n:p.jsxs("div",{style:{maxWidth:720,margin:"40px auto",padding:16},children:[p.jsx("h2",{style:{marginTop:0},children:"403 · 접근 권한이 없습니다"}),p.jsx("p",{style:{color:"#6b7280"},children:"이 페이지는 관리자 전용입니다. 필요 시 운영자에게 권한 요청하세요."})]}):p.jsx(px,{to:"/",replace:!0,state:{from:i}})}function Au(t){if(!t)return 0;if(typeof(t==null?void 0:t.toMillis)=="function")return t.toMillis();const e=Number(t);return Number.isFinite(e)?e:0}function x4(t){const e=[];for(let n=0;n<t.length;n+=10)e.push(t.slice(n,n+10));return e}const ao=(t=0)=>t.toLocaleString("ko-KR"),D4=t=>Number(t||0)>0,ds=t=>{if(!t)return!1;const e=Array.isArray(t)?t.join(" "):String(t);return/재입고\s*예정|재입고예정/i.test(e)},od=t=>!!(t!=null&&t.restockPending||t!=null&&t.restockSoon||ds(t==null?void 0:t.tags)||ds(t==null?void 0:t.badges)||ds(t==null?void 0:t.labels)||ds(t==null?void 0:t.status)||ds(t==null?void 0:t.nameBadge)||ds(t==null?void 0:t.badgeText));function N4(){const{user:t,savedIds:e,loadingUser:n,loadingSaved:i}=Va(),r=wl(),[s,a]=D.useState([]),[l,u]=D.useState({}),[c,f]=D.useState(!0),[m,d]=D.useState(""),[_,x]=D.useState(""),[M,N]=D.useState(()=>new Date().toISOString().slice(0,10)),[w,T]=D.useState(0),E=D.useMemo(()=>Array.from(e||new Set),[e]),O=D.useRef(0);D.useEffect(()=>{let L=!1;const G=++O.current;return(async()=>{if(d(""),!t){a([]),f(!1);return}f(!0);try{if(!E.length){a([]);return}const j=await Promise.all(x4(E).map(F=>Oa(Na(mi(Pe,"products"),dA(tA(),"in",F))))),k=[];j.forEach(F=>F.forEach(q=>k.push({id:q.id,...q.data()}))),k.sort((F,q)=>(Au(q.updatedAt)||Au(q.createdAt)||0)-(Au(F.updatedAt)||Au(F.createdAt)||0)||String(q.id).localeCompare(String(F.id))),!L&&G===O.current&&(a(k),u(F=>{const q={...F};return k.forEach(X=>{od(X)?q[X.id]=0:q[X.id]==null&&(q[X.id]=typeof X.price=="number"&&X.price>0?1:0)}),q}))}catch(j){!L&&G===O.current&&(console.error(j),d((j==null?void 0:j.message)||"목록 로드 오류"),a([]))}finally{!L&&G===O.current&&f(!1)}})(),()=>{L=!0}},[t,E]);const U=D.useMemo(()=>s.map(L=>{const G=typeof L.price=="number"?L.price:0,j=od(L),k=l[L.id]??0,F=j?0:Math.max(0,Number(k)||0);return{...L,_price:G,_qty:F,_subtotal:G*F,_restockPending:j}}),[s,l]),Q=D.useMemo(()=>U.reduce((L,G)=>L+G._qty,0),[U]),y=D.useMemo(()=>U.reduce((L,G)=>L+G._subtotal,0),[U]),v=Math.max(0,Number(w)||0),A=Math.max(0,y-v),[C,I]=D.useState(!1),b=(L,G)=>{const j=s.find(F=>F.id===L);if(j&&od(j)){u(F=>({...F,[L]:0}));return}let k=Number(G);(!Number.isFinite(k)||k<0)&&(k=0),k>9999&&(k=9999),u(F=>({...F,[L]:k}))},R=async()=>{if(!t){alert("로그인 필요");return}const L=U.filter(k=>k._qty>0);if(L.length===0){alert("수량 1 이상인 상품이 없습니다.");return}const G=new Date(M);if(Number.isNaN(G.getTime())){alert("주문일이 올바르지 않습니다.");return}const j={userId:t.uid,orderName:(_==null?void 0:_.trim())||"",orderDate:G.toISOString().slice(0,10),createdAt:Br(),totalQty:Q,totalPrice:y,discountAmount:v,finalTotal:A,items:L.map(k=>({productId:k.id,name:k.name||"",price:k._price,qty:k._qty,subtotal:k._subtotal,imageUrl:k.imageUrl||"",productCode:k.productCode||"",categoryL1:k.categoryL1||"",categoryL2:k.categoryL2||"",link:k.link||""}))};try{const k=await HM(mi(Pe,"users",t.uid,"orders"),j);r(`/orders/${k.id}`,{replace:!0,state:{created:!0}})}catch(k){console.error(k),alert((k==null?void 0:k.message)||"주문서 생성 실패")}};return p.jsxs("div",{style:{maxWidth:1100,margin:"0 auto",padding:16},children:[p.jsx("h2",{style:{marginTop:0},children:"주문서 만들기"}),t?n||i||c?p.jsx("div",{children:"불러오는 중…"}):p.jsxs(p.Fragment,{children:[m&&p.jsx("div",{style:{marginBottom:12,padding:"8px 10px",border:"1px solid #fecaca",background:"#fef2f2",color:"#991b1b",borderRadius:8},children:m}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.4fr 1fr 1fr auto",gap:12,alignItems:"center",marginBottom:12},children:[p.jsx("input",{value:_,onChange:L=>x(L.target.value),placeholder:"주문서 이름 (예: 10월 MD 발주)",style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px"}}),p.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[p.jsx("span",{children:"주문일"}),p.jsx("input",{type:"date",value:M,onChange:L=>N(L.target.value),style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"6px 8px"}})]}),p.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[p.jsx("span",{children:"할인금액"}),p.jsx("input",{inputMode:"numeric",value:w,onChange:L=>T(L.target.value.replace(/[^\d]/g,"")),style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"6px 8px",width:140,textAlign:"right"},placeholder:"0"})]}),p.jsx("button",{onClick:R,disabled:Q===0,style:{borderRadius:8,padding:"8px 12px",border:"1px solid #e5e7eb",background:Q?"#111827":"#9ca3af",color:"#fff"},children:"주문서 만들기"})]}),p.jsxs("div",{style:{display:"flex",gap:16,alignItems:"center",justifyContent:"flex-end",marginBottom:8,color:"#374151"},children:[p.jsxs("div",{children:["총 수량 ",p.jsx("strong",{children:Q}),"개"]}),p.jsxs("div",{children:["상품합계 ",p.jsx("strong",{children:ao(y)})," 원"]}),p.jsxs("div",{children:["할인 ",p.jsxs("strong",{children:["-",ao(v)]})," 원"]}),p.jsxs("div",{children:["결제합계 ",p.jsx("strong",{children:ao(A)})," 원"]})]}),U.length===0?p.jsx("div",{children:"저장한 상품이 없습니다."}):p.jsx("div",{style:{overflowX:"auto",border:"1px solid #e5e7eb",borderRadius:10},children:p.jsxs("table",{style:{borderCollapse:"collapse",width:"100%"},children:[p.jsx("thead",{children:p.jsxs("tr",{style:{background:"#f9fafb"},children:[p.jsx("th",{style:$c,children:"상품"}),p.jsx("th",{style:$c,children:"코드"}),p.jsx("th",{style:e0,children:"가격"}),p.jsx("th",{style:t0,children:"수량"}),p.jsx("th",{style:e0,children:"소계"}),p.jsx("th",{style:t0,children:"원본"})]})}),p.jsx("tbody",{children:U.filter(L=>D4(L._qty)||s.length<=50||L._restockPending).filter(L=>C||L._qty>0||L._restockPending).map(L=>p.jsxs("tr",{style:{borderTop:"1px solid #f3f4f6"},children:[p.jsx("td",{style:{padding:10,minWidth:280},children:p.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[p.jsxs("div",{style:{position:"relative",width:60,height:60,background:"#f3f4f6",borderRadius:8,overflow:"hidden"},children:[L.imageUrl&&p.jsx("img",{src:L.imageUrl,alt:L.name,style:{width:"100%",height:"100%",objectFit:"cover",filter:L._restockPending?"grayscale(80%)":"none"}}),L._restockPending&&p.jsx("div",{title:"재입고 예정 상품은 주문에서 제외됩니다.",style:{position:"absolute",inset:0,background:"rgba(55,65,81,0.45)",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:12,fontWeight:700,letterSpacing:.5},children:"재입고 예정"})]}),p.jsxs("div",{children:[p.jsx("div",{style:{fontWeight:600,color:L._restockPending?"#6b7280":"#111827"},children:L.name}),p.jsxs("div",{style:{fontSize:12,color:"#6b7280"},children:[L.categoryL1||"-"," ",L.categoryL2?`> ${L.categoryL2}`:""]}),L._restockPending&&p.jsx("div",{style:{marginTop:4,fontSize:12,color:"#6b7280"},children:"재입고 예정 상품은 수량을 설정할 수 없습니다."})]})]})}),p.jsx("td",{style:{padding:10,fontSize:12,color:"#6b7280"},children:L.productCode||L.id}),p.jsxs("td",{style:n0,children:[ao(L._price)," 원"]}),p.jsxs("td",{style:{padding:10,textAlign:"center"},children:[p.jsxs("div",{style:{display:"inline-flex",alignItems:"center",border:"1px solid #e5e7eb",borderRadius:8,opacity:L._restockPending?.5:1},children:[p.jsx("button",{onClick:()=>!L._restockPending&&b(L.id,(l[L.id]||0)-1),style:{...i0,cursor:L._restockPending?"not-allowed":"pointer"},disabled:L._restockPending,children:"−"}),p.jsx("input",{value:l[L.id]??0,onChange:G=>b(L.id,G.target.value),inputMode:"numeric",disabled:L._restockPending,style:{width:56,textAlign:"center",border:"none",outline:"none",background:"transparent",cursor:L._restockPending?"not-allowed":"text"}}),p.jsx("button",{onClick:()=>!L._restockPending&&b(L.id,(l[L.id]||0)+1),style:{...i0,cursor:L._restockPending?"not-allowed":"pointer"},disabled:L._restockPending,children:"＋"})]}),p.jsx("button",{onClick:()=>b(L.id,0),style:{marginLeft:8,border:"1px solid #e5e7eb",borderRadius:8,padding:"6px 10px",background:"#fff",cursor:"pointer",fontSize:12},title:"이 상품을 주문서에서 제외",children:"삭제"})]}),p.jsxs("td",{style:n0,children:[p.jsx("strong",{children:ao(L._subtotal)})," 원"]}),p.jsx("td",{style:{padding:10,textAlign:"center"},children:L.link?p.jsx("a",{href:L.link,target:"_blank",rel:"noopener noreferrer",style:{fontSize:12},children:"열기"}):p.jsx("span",{style:{fontSize:12,color:"#9ca3af"},children:"-"})})]},L.id))})]})})]}):p.jsxs("div",{style:{marginTop:24},children:[p.jsx("h3",{children:"로그인이 필요합니다"}),p.jsx("p",{children:"상단에서 로그인/회원가입을 진행하세요."})]})]})}const $c={textAlign:"left",padding:10,borderBottom:"1px solid #e5e7eb",whiteSpace:"nowrap"},e0={...$c,textAlign:"right"},t0={...$c,textAlign:"center"},n0={padding:10,textAlign:"right"},i0={width:32,height:32,border:"none",background:"#fff",cursor:"pointer"},O4=(t=0)=>Number(t||0).toLocaleString("ko-KR");function M4(){const{user:t,loadingUser:e}=Va(),[n,i]=D.useState([]),[r,s]=D.useState(!0),[a,l]=D.useState(""),u=wl(),c=async f=>{if(t&&window.confirm("이 주문서를 삭제할까요? 되돌릴 수 없습니다."))try{await Op(mn(Pe,"users",t.uid,"orders",f)),i(m=>m.filter(d=>d.id!==f))}catch(m){console.error(m),alert((m==null?void 0:m.message)||"삭제 실패")}};return D.useEffect(()=>{if(!t){i([]),s(!1);return}(async()=>{l(""),s(!0);try{const f=Na(mi(Pe,"users",t.uid,"orders"),Lh("createdAt","desc")),d=(await Oa(f)).docs.map(_=>({id:_.id,..._.data()}));i(d)}catch(f){console.error(f),l((f==null?void 0:f.message)||"주문서 조회 실패")}finally{s(!1)}})()},[t]),t?e||r?p.jsx("div",{style:{maxWidth:960,margin:"40px auto",padding:16},children:"불러오는 중…"}):p.jsxs("div",{style:{maxWidth:960,margin:"0 auto",padding:16},children:[p.jsx("h2",{style:{marginTop:0},children:"주문서 목록"}),a&&p.jsx("div",{style:{marginBottom:12,padding:"8px 10px",border:"1px solid #fecaca",background:"#fef2f2",color:"#991b1b",borderRadius:8},children:a}),n.length===0?p.jsx("div",{children:"주문서가 없습니다."}):p.jsx("div",{style:{display:"grid",gap:10},children:n.map(f=>p.jsxs("div",{style:{display:"grid",gap:6},children:[p.jsxs("div",{onClick:()=>u(`/orders/${f.id}`),role:"button",tabIndex:0,onKeyDown:m=>{(m.key==="Enter"||m.key===" ")&&u(`/orders/${f.id}`)},style:{textAlign:"left",border:"1px solid #e5e7eb",borderRadius:10,padding:12,background:"#fff",cursor:"pointer"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:8,flexWrap:"wrap"},children:[p.jsxs("strong",{children:[f.orderName||`#${f.id.slice(0,8)}`," · ",f.orderDate||"-"]}),p.jsxs("div",{style:{color:"#374151"},children:["수량: ",p.jsx("strong",{children:f.totalQty}),"개 · 합계:"," ",p.jsx("strong",{children:O4(f.finalTotal??f.totalPrice)})," 원"]})]}),p.jsxs("div",{style:{marginTop:8,display:"flex",gap:6,flexWrap:"wrap"},children:[(f.items||[]).slice(0,6).map(m=>p.jsxs("span",{style:{fontSize:12,background:"#f3f4f6",border:"1px solid #e5e7eb",padding:"2px 8px",borderRadius:9999},children:[m.name," × ",m.qty]},m.productId)),(f.items||[]).length>6&&p.jsxs("span",{style:{fontSize:12,color:"#6b7280"},children:["…외 ",f.items.length-6,"개"]})]})]}),p.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:p.jsx("button",{onClick:m=>{m.stopPropagation(),c(f.id)},style:{border:"1px solid #fecaca",background:"#fff",color:"#b91c1c",padding:"6px 10px",borderRadius:8,cursor:"pointer",fontSize:12},children:"주문서 삭제"})})]},f.id))})]}):p.jsx("div",{style:{maxWidth:960,margin:"40px auto",padding:16},children:p.jsx("h2",{children:"로그인 필요"})})}const oo=(t=0)=>Number(t||0).toLocaleString("ko-KR");function V4(){const{user:t,loadingUser:e}=Va(),{orderId:n}=nx(),i=wl(),[r,s]=D.useState(!0),[a,l]=D.useState(""),[u,c]=D.useState(null),[f,m]=D.useState(""),[d,_]=D.useState(""),[x,M]=D.useState(0),[N,w]=D.useState([]);D.useEffect(()=>{if(!t){s(!1);return}(async()=>{l(""),s(!0);try{const y=mn(mi(Pe,"users",t.uid,"orders"),n),v=await zM(y);if(!v.exists()){l("주문서를 찾을 수 없습니다."),c(null);return}const A={id:v.id,...v.data()};c(A),m(A.orderName||""),_(A.orderDate||new Date().toISOString().slice(0,10)),M(Number(A.discountAmount||0)),w((A.items||[]).map(C=>({...C,price:Number(C.price||0),qty:Number(C.qty||0),subtotal:Number(C.subtotal||Number(C.price||0)*Number(C.qty||0))})))}catch(y){console.error(y),l((y==null?void 0:y.message)||"불러오기 실패")}finally{s(!1)}})()},[t,n]);const T=D.useMemo(()=>{const y=N.reduce((I,b)=>I+(Number(b.qty)||0),0),v=N.reduce((I,b)=>I+Number(b.price||0)*Number(b.qty||0),0),A=Math.max(0,Number(x)||0),C=Math.max(0,v-A);return{totalQty:y,totalPrice:v,discount:A,finalTotal:C}},[N,x]),E=(y,v)=>{w(A=>{const C=[...A];let I=Number(v);return(!Number.isFinite(I)||I<0)&&(I=0),I>9999&&(I=9999),C[y]={...C[y],qty:I,subtotal:I*Number(C[y].price||0)},C})},O=y=>{w(v=>v.filter((A,C)=>C!==y))},U=async()=>{if(!t||!u)return;if(N.length===0){alert("최소 1개 이상의 아이템이 필요합니다.");return}if(!d||Number.isNaN(new Date(d).getTime())){alert("주문일이 올바르지 않습니다.");return}const y={orderName:(f==null?void 0:f.trim())||"",orderDate:d,discountAmount:T.discount,totalQty:T.totalQty,totalPrice:T.totalPrice,finalTotal:T.finalTotal,items:N.map(v=>({productId:v.productId,name:v.name||"",price:Number(v.price||0),qty:Number(v.qty||0),subtotal:Number(v.price||0)*Number(v.qty||0),imageUrl:v.imageUrl||"",productCode:v.productCode||"",categoryL1:v.categoryL1||"",categoryL2:v.categoryL2||"",link:v.link||""}))};try{await qM(mn(Pe,"users",t.uid,"orders",u.id),y),alert("저장 완료"),i("/orders",{replace:!0})}catch(v){console.error(v),alert((v==null?void 0:v.message)||"저장 실패")}},Q=async()=>{if(!(!t||!u)&&window.confirm("이 주문서를 삭제할까요? 되돌릴 수 없습니다."))try{await Op(mn(Pe,"users",t.uid,"orders",u.id)),alert("삭제 완료"),i("/orders",{replace:!0})}catch(y){console.error(y),alert((y==null?void 0:y.message)||"삭제 실패")}};return t?e||r?p.jsx("div",{style:{maxWidth:960,margin:"40px auto",padding:16},children:"불러오는 중…"}):a?p.jsx("div",{style:{maxWidth:960,margin:"40px auto",padding:16,color:"#991b1b"},children:a}):u?p.jsxs("div",{style:{maxWidth:1100,margin:"0 auto",padding:16},children:[p.jsx("h2",{style:{marginTop:0},children:"주문서 수정"}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.4fr 1fr 1fr auto auto",gap:12,alignItems:"center",marginBottom:12},children:[p.jsx("input",{value:f,onChange:y=>m(y.target.value),placeholder:"주문서 이름",style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px"}}),p.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[p.jsx("span",{children:"주문일"}),p.jsx("input",{type:"date",value:d,onChange:y=>_(y.target.value),style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"6px 8px"}})]}),p.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[p.jsx("span",{children:"할인금액"}),p.jsx("input",{inputMode:"numeric",value:x,onChange:y=>M(y.target.value.replace(/[^\d]/g,"")),style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"6px 8px",width:140,textAlign:"right"},placeholder:"0"})]}),p.jsx("button",{onClick:U,disabled:N.length===0,style:{borderRadius:8,padding:"8px 12px",border:"1px solid #e5e7eb",background:N.length?"#111827":"#9ca3af",color:"#fff",cursor:N.length?"pointer":"not-allowed"},children:"저장"}),p.jsx("button",{onClick:Q,style:{border:"1px solid #fecaca",background:"#fff",color:"#b91c1c",borderRadius:8,padding:"8px 12px"},children:"주문서 삭제"})]}),p.jsxs("div",{style:{display:"flex",gap:16,alignItems:"center",justifyContent:"flex-end",marginBottom:8,color:"#374151"},children:[p.jsxs("div",{children:["총 수량 ",p.jsx("strong",{children:T.totalQty}),"개"]}),p.jsxs("div",{children:["상품합계 ",p.jsx("strong",{children:oo(T.totalPrice)})," 원"]}),p.jsxs("div",{children:["할인 ",p.jsxs("strong",{children:["-",oo(T.discount)]})," 원"]}),p.jsxs("div",{children:["결제합계 ",p.jsx("strong",{children:oo(T.finalTotal)})," 원"]})]}),p.jsx("div",{style:{overflowX:"auto",border:"1px solid #e5e7eb",borderRadius:10},children:p.jsxs("table",{style:{borderCollapse:"collapse",width:"100%"},children:[p.jsx("thead",{children:p.jsxs("tr",{style:{background:"#f9fafb"},children:[p.jsx("th",{style:Kc,children:"상품"}),p.jsx("th",{style:Kc,children:"코드"}),p.jsx("th",{style:r0,children:"가격"}),p.jsx("th",{style:s0,children:"수량"}),p.jsx("th",{style:r0,children:"소계"}),p.jsx("th",{style:s0,children:"원본/삭제"})]})}),p.jsxs("tbody",{children:[N.map((y,v)=>p.jsxs("tr",{style:{borderTop:"1px solid #f3f4f6"},children:[p.jsx("td",{style:{padding:10,minWidth:280},children:p.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[p.jsx("div",{style:{width:60,height:60,background:"#f3f4f6",borderRadius:8,overflow:"hidden"},children:y.imageUrl&&p.jsx("img",{src:y.imageUrl,alt:y.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),p.jsxs("div",{children:[p.jsx("div",{style:{fontWeight:600},children:y.name}),p.jsxs("div",{style:{fontSize:12,color:"#6b7280"},children:[y.categoryL1||"-"," ",y.categoryL2?`> ${y.categoryL2}`:""]})]})]})}),p.jsx("td",{style:{padding:10,fontSize:12,color:"#6b7280"},children:y.productCode||y.productId}),p.jsxs("td",{style:a0,children:[oo(y.price)," 원"]}),p.jsx("td",{style:{padding:10,textAlign:"center"},children:p.jsx("input",{value:y.qty,onChange:A=>E(v,A.target.value),inputMode:"numeric",style:{width:64,textAlign:"center",border:"1px solid #e5e7eb",borderRadius:8,padding:"6px 8px"}})}),p.jsxs("td",{style:a0,children:[p.jsx("strong",{children:oo(Number(y.price||0)*Number(y.qty||0))})," 원"]}),p.jsxs("td",{style:{padding:10,textAlign:"center",whiteSpace:"nowrap"},children:[y.link?p.jsx("a",{href:y.link,target:"_blank",rel:"noopener noreferrer",style:{fontSize:12},children:"열기"}):p.jsx("span",{style:{fontSize:12,color:"#9ca3af"},children:"-"}),p.jsx("button",{onClick:()=>O(v),style:{marginLeft:8,border:"1px solid #e5e7eb",background:"#fff",borderRadius:8,padding:"6px 10px",cursor:"pointer",fontSize:12},title:"이 상품을 주문서에서 제거",children:"삭제"})]})]},y.productId)),N.length===0&&p.jsx("tr",{children:p.jsx("td",{colSpan:6,style:{padding:16,textAlign:"center",color:"#6b7280"},children:"아이템이 없습니다. (상단에서 저장할 수 없습니다)"})})]})]})})]}):null:p.jsx("div",{style:{maxWidth:960,margin:"40px auto",padding:16},children:p.jsx("h2",{children:"로그인 필요"})})}const Kc={textAlign:"left",padding:10,borderBottom:"1px solid #e5e7eb",whiteSpace:"nowrap"},r0={...Kc,textAlign:"right"},s0={...Kc,textAlign:"center"},a0={padding:10,textAlign:"right"};function k4({user:t}){return p.jsx("nav",{style:{width:"100%",borderBottom:"1px solid #e5e7eb",marginBottom:16,background:"white"},children:p.jsxs("div",{style:{maxWidth:960,margin:"0 auto",padding:"12px 16px",display:"flex",gap:12},children:[p.jsx(Mi,{to:"/",children:"카탈로그"}),p.jsx(Mi,{to:"/saved",children:"찜"}),p.jsx(Mi,{to:"/checkout",children:"주문서작성"}),p.jsx(Mi,{to:"/orders",children:"주문서목록"}),Bo(t)&&p.jsx(Mi,{to:"/edit",children:"Admin"})]})})}function L4(){const{user:t}=Va();return p.jsxs(Bx,{basename:"/products",children:[p.jsx(k4,{user:t}),p.jsxs(_x,{children:[p.jsx(Hn,{path:"/",element:p.jsx(g4,{})}),p.jsx(Hn,{path:"/saved",element:p.jsx(y4,{})}),p.jsx(Hn,{path:"/checkout",element:p.jsx(N4,{})}),p.jsx(Hn,{path:"/orders",element:p.jsx(M4,{})}),p.jsx(Hn,{path:"/orders/:orderId",element:p.jsx(V4,{})}),p.jsx(Hn,{path:"/import",element:p.jsx(ad,{user:t,allow:Bo,children:p.jsx(_4,{})})}),p.jsx(Hn,{path:"/edit",element:p.jsx(ad,{user:t,allow:Bo,children:p.jsx(b4,{})})}),p.jsx(Hn,{path:"/import-csv",element:p.jsx(ad,{user:t,allow:Bo,children:p.jsx(I4,{})})})]})]})}RI.createRoot(document.getElementById("root")).render(p.jsx($w.StrictMode,{children:p.jsx(L4,{})}));
